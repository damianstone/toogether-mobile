!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).firebase=e()}(this,function(){"use strict";function r(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function i(t){return"string"!=typeof t&&(t=String(t)),t}function t(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return p&&(t[Symbol.iterator]=function(){return t}),t}function s(e){this.map={},e instanceof s?e.forEach(function(t,e){this.append(e,t)},this):Array.isArray(e)?e.forEach(function(t){this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function a(n){return new Promise(function(t,e){n.onload=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function e(t){var e=new FileReader,n=a(e);return e.readAsArrayBuffer(t),n}function n(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function u(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t)if("string"==typeof t)this._bodyText=t;else if(d&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(v&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(f&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(y&&d&&m(t))this._bodyArrayBuffer=n(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!y||!ArrayBuffer.prototype.isPrototypeOf(t)&&!b(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=n(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):f&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},d&&(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(e)}),this.text=function(){var t,e,n=o(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=a(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},v&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function c(t,e){var n,r=(e=e||{}).body;if(t instanceof c){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new s(t.headers)),this.method=t.method,this.mode=t.mode,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new s(e.headers)),this.method=(n=e.method||this.method||"GET",t=n.toUpperCase(),-1<_.indexOf(t)?t:n),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function h(t){var n=new FormData;return t.trim().split("&").forEach(function(t){var e;t&&(t=(e=t.split("=")).shift().replace(/\+/g," "),e=e.join("=").replace(/\+/g," "),n.append(decodeURIComponent(t),decodeURIComponent(e)))}),n}function l(t,e){e=e||{},this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new s(e.headers),this.url=e.url||"",this._initBody(t)}var f,p,d,v,y,g,m,b,_,w;(dt="undefined"!=typeof self?self:void 0).fetch||(f="URLSearchParams"in dt,p="Symbol"in dt&&"iterator"in Symbol,d="FileReader"in dt&&"Blob"in dt&&function(){try{return new Blob,!0}catch(t){return!1}}(),v="FormData"in dt,(y="ArrayBuffer"in dt)&&(g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],m=function(t){return t&&DataView.prototype.isPrototypeOf(t)},b=ArrayBuffer.isView||function(t){return t&&-1<g.indexOf(Object.prototype.toString.call(t))}),s.prototype.append=function(t,e){t=r(t),e=i(e);var n=this.map[t];this.map[t]=n?n+","+e:e},s.prototype.delete=function(t){delete this.map[r(t)]},s.prototype.get=function(t){return t=r(t),this.has(t)?this.map[t]:null},s.prototype.has=function(t){return this.map.hasOwnProperty(r(t))},s.prototype.set=function(t,e){this.map[r(t)]=i(e)},s.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},s.prototype.keys=function(){var n=[];return this.forEach(function(t,e){n.push(e)}),t(n)},s.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),t(e)},s.prototype.entries=function(){var n=[];return this.forEach(function(t,e){n.push([e,t])}),t(n)},p&&(s.prototype[Symbol.iterator]=s.prototype.entries),_=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],c.prototype.clone=function(){return new c(this,{body:this._bodyInit})},u.call(c.prototype),u.call(l.prototype),l.prototype.clone=function(){return new l(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new s(this.headers),url:this.url})},l.error=function(){var t=new l(null,{status:0,statusText:""});return t.type="error",t},w=[301,302,303,307,308],l.redirect=function(t,e){if(-1===w.indexOf(e))throw new RangeError("Invalid status code");return new l(null,{status:e,headers:{location:t}})},dt.Headers=s,dt.Request=c,dt.Response=l,dt.fetch=function(n,o){return new Promise(function(r,t){var e=new c(n,o),i=new XMLHttpRequest;i.onload=function(){var n,t={status:i.status,statusText:i.statusText,headers:(e=i.getAllResponseHeaders()||"",n=new s,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var e=t.split(":"),t=e.shift().trim();t&&(e=e.join(":").trim(),n.append(t,e))}),n)};t.url="responseURL"in i?i.responseURL:t.headers.get("X-Request-URL");var e="response"in i?i.response:i.responseText;r(new l(e,t))},i.onerror=function(){t(new TypeError("Network request failed"))},i.ontimeout=function(){t(new TypeError("Network request failed"))},i.open(e.method,e.url,!0),"include"===e.credentials?i.withCredentials=!0:"omit"===e.credentials&&(i.withCredentials=!1),"responseType"in i&&d&&(i.responseType="blob"),e.headers.forEach(function(t,e){i.setRequestHeader(e,t)}),i.send(void 0===e._bodyInit?null:e._bodyInit)})},dt.fetch.polyfill=!0);var E="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function I(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}function T(t){try{return!!t()}catch(t){return!0}}function S(t){return"object"==typeof t?null!==t:"function"==typeof t}function C(t){return j?U.createElement(t):{}}function N(t){if(!S(t))throw TypeError(String(t)+" is not an object");return t}function A(t,e){if(!S(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!S(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!S(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!S(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}function k(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function O(e,n){try{W(L,e,n)}catch(t){L[e]=n}return n}function R(t,e){return z.call(t,e)}function P(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++Q+X).toString(36)}function D(t){return R($,t)||(Y&&R(Z,t)?$[t]=Z[t]:$[t]=tt("Symbol."+t)),$[t]}var x=function(t){return t&&t.Math==Math&&t},L=x("object"==typeof globalThis&&globalThis)||x("object"==typeof window&&window)||x("object"==typeof self&&self)||x("object"==typeof E&&E)||Function("return this")(),M=!1,F=!T(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),U=L.document,j=S(U)&&S(U.createElement),V=!F&&!T(function(){return 7!=Object.defineProperty(C("div"),"a",{get:function(){return 7}}).a}),q=Object.defineProperty,B={f:F?q:function(t,e,n){if(N(t),e=A(e,!0),N(n),V)try{return q(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},W=F?function(t,e,n){return B.f(t,e,k(1,n))}:function(t,e,n){return t[e]=n,t},H="__core-js_shared__",G=L[H]||O(H,{}),K=I(function(t){(t.exports=function(t,e){return G[t]||(G[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.5",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})}),z={}.hasOwnProperty,Q=0,X=Math.random(),Y=!!Object.getOwnPropertySymbols&&!T(function(){return!String(Symbol())}),J=Y&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,$=K("wks"),Z=L.Symbol,tt=J?Z:Z&&Z.withoutSetter||P,et={};et[D("toStringTag")]="z";var nt="[object z]"===String(et),rt=Function.toString;"function"!=typeof G.inspectSource&&(G.inspectSource=function(t){return rt.call(t)});var it,ot,st,at,ut,ct,ht,lt,ft=G.inspectSource,pt=L.WeakMap,dt="function"==typeof pt&&/native code/.test(ft(pt)),vt=K("keys"),x=function(t){return vt[t]||(vt[t]=P(t))},yt={},E=L.WeakMap;ht=dt?(it=new E,ot=it.get,st=it.has,at=it.set,ut=function(t,e){return at.call(it,t,e),e},ct=function(t){return ot.call(it,t)||{}},function(t){return st.call(it,t)}):(lt=x("state"),yt[lt]=!0,ut=function(t,e){return W(t,lt,e),e},ct=function(t){return R(t,lt)?t[lt]:{}},function(t){return R(t,lt)});function gt(t){return _t.call(t).slice(8,-1)}var mt={set:ut,get:ct,has:ht,enforce:function(t){return ht(t)?ct(t):ut(t,{})},getterFor:function(n){return function(t){var e;if(!S(t)||(e=ct(t)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return e}}},bt=I(function(t){var e=mt.get,s=mt.enforce,a=String(String).split("String");(t.exports=function(t,e,n,r){var i=!!r&&!!r.unsafe,o=!!r&&!!r.enumerable,r=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof e||R(n,"name")||W(n,"name",e),s(n).source=a.join("string"==typeof e?e:"")),t!==L?(i?!r&&t[e]&&(o=!0):delete t[e],o?t[e]=n:W(t,e,n)):o?t[e]=n:O(e,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&e(this).source||ft(this)})}),_t={}.toString,wt=D("toStringTag"),Et="Arguments"==gt(function(){return arguments}()),It=nt?gt:function(t){var e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(t=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),wt))?t:Et?gt(e):"Object"==(t=gt(e))&&"function"==typeof e.callee?"Arguments":t},H=nt?{}.toString:function(){return"[object "+It(this)+"]"};nt||bt(Object.prototype,"toString",H,{unsafe:!0});function Tt(t){return isNaN(t=+t)?0:(0<t?Lt:xt)(t)}function St(t){if(null==t)throw TypeError("Can't call method on "+t);return t}function Ct(t){return jt(St(t))}function Nt(t){return"function"==typeof t?t:void 0}function At(t,e){return arguments.length<2?Nt(Bt[t])||Nt(L[t]):Bt[t]&&Bt[t][e]||L[t]&&L[t][e]}function kt(t){return 0<t?Wt(Tt(t),9007199254740991):0}function Ot(t,e){var n,r=Ct(t),i=0,o=[];for(n in r)!R(yt,n)&&R(r,n)&&o.push(n);for(;e.length>i;)R(r,n=e[i++])&&(~Kt(o,n)||o.push(n));return o}function Rt(t,e){for(var n=Jt(e),r=B.f,i=qt.f,o=0;o<n.length;o++){var s=n[o];R(t,s)||r(t,s,i(e,s))}}function Pt(t,e){var n,r,i,o=t.target,s=t.global,a=t.stat,u=s?L:a?L[o]||O(o,{}):(L[o]||{}).prototype;if(u)for(n in e){if(r=e[n],i=t.noTargetGet?(i=ie(u,n))&&i.value:u[n],!re(s?n:o+(a?".":"#")+n,t.forced)&&void 0!==i){if(typeof r==typeof i)continue;Rt(r,i)}(t.sham||i&&i.sham)&&W(r,"sham",!0),bt(u,n,r,t)}}function Dt(t){return Object(St(t))}var xt=Math.ceil,Lt=Math.floor,et=function(o){return function(t,e){var n,r=String(St(t)),i=Tt(e),t=r.length;return i<0||t<=i?o?"":void 0:(e=r.charCodeAt(i))<55296||56319<e||i+1===t||(n=r.charCodeAt(i+1))<56320||57343<n?o?r.charAt(i):e:o?r.slice(i,i+2):n-56320+(e-55296<<10)+65536}},pt={codeAt:et(!1),charAt:et(!0)},dt={}.propertyIsEnumerable,Mt=Object.getOwnPropertyDescriptor,Ft={f:Mt&&!dt.call({1:2},1)?function(t){t=Mt(this,t);return!!t&&t.enumerable}:dt},Ut="".split,jt=T(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==gt(t)?Ut.call(t,""):Object(t)}:Object,Vt=Object.getOwnPropertyDescriptor,qt={f:F?Vt:function(t,e){if(t=Ct(t),e=A(e,!0),V)try{return Vt(t,e)}catch(t){}if(R(t,e))return k(!Ft.f.call(t,e),t[e])}},Bt=L,Wt=Math.min,Ht=Math.max,Gt=Math.min,E=function(a){return function(t,e,n){var r,i=Ct(t),o=kt(i.length),s=function(t,e){t=Tt(t);return t<0?Ht(t+e,0):Gt(t,e)}(n,o);if(a&&e!=e){for(;s<o;)if((r=i[s++])!=r)return!0}else for(;s<o;s++)if((a||s in i)&&i[s]===e)return a||s||0;return!a&&-1}},Kt={includes:E(!0),indexOf:E(!1)}.indexOf,zt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Qt=zt.concat("length","prototype"),Xt={f:Object.getOwnPropertyNames||function(t){return Ot(t,Qt)}},Yt={f:Object.getOwnPropertySymbols},Jt=At("Reflect","ownKeys")||function(t){var e=Xt.f(N(t)),n=Yt.f;return n?e.concat(n(t)):e},$t=/#|\.prototype\./,nt=function(t,e){t=te[Zt(t)];return t==ne||t!=ee&&("function"==typeof e?T(e):!!e)},Zt=nt.normalize=function(t){return String(t).replace($t,".").toLowerCase()},te=nt.data={},ee=nt.NATIVE="N",ne=nt.POLYFILL="P",re=nt,ie=qt.f,H=!T(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),oe=x("IE_PROTO"),se=Object.prototype,ae=H?Object.getPrototypeOf:function(t){return t=Dt(t),R(t,oe)?t[oe]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?se:null},et=D("iterator"),dt=!1;[].keys&&("next"in(En=[].keys())?(Tn=ae(ae(En)))!==Object.prototype&&(Cn=Tn):dt=!0),null==Cn&&(Cn={}),R(Cn,et)||W(Cn,et,function(){return this});function ue(){}function ce(t){return"<script>"+t+"</"+ve+">"}var he,E={IteratorPrototype:Cn,BUGGY_SAFARI_ITERATORS:dt},le=Object.keys||function(t){return Ot(t,zt)},fe=F?Object.defineProperties:function(t,e){N(t);for(var n,r=le(e),i=r.length,o=0;o<i;)B.f(t,n=r[o++],e[n]);return t},pe=At("document","documentElement"),de="prototype",ve="script",ye=x("IE_PROTO"),ge=function(){try{he=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t;ge=he?function(t){t.write(ce("")),t.close();var e=t.parentWindow.Object;return t=null,e}(he):((t=C("iframe")).style.display="none",pe.appendChild(t),t.src=String("javascript:"),(t=t.contentWindow.document).open(),t.write(ce("document.F=Object")),t.close(),t.F);for(var e=zt.length;e--;)delete ge[de][zt[e]];return ge()};yt[ye]=!0;function me(t,e,n){t&&!R(t=n?t:t.prototype,Te)&&Ie(t,Te,{configurable:!0,value:e})}function be(){return this}function _e(){return this}function we(t,e,n,r,i,o,s){function a(t){if(t===i&&d)return d;if(!ke&&t in f)return f[t];switch(t){case"keys":case Re:case Pe:return function(){return new n(this,t)}}return function(){return new n(this)}}!function(t,e,n){e+=" Iterator";t.prototype=Ee(Ce,{next:k(1,n)}),me(t,e,!1),Se[e]=be}(n,e,r);var u,c,h=e+" Iterator",l=!1,f=t.prototype,p=f[Oe]||f["@@iterator"]||i&&f[i],d=!ke&&p||a(i);if((r="Array"==e&&f.entries||p)&&(t=ae(r.call(new t)),Ae!==Object.prototype&&t.next&&(ae(t)!==Ae&&(Ne?Ne(t,Ae):"function"!=typeof t[Oe]&&W(t,Oe,_e)),me(t,h,!0))),i==Re&&p&&p.name!==Re&&(l=!0,d=function(){return p.call(this)}),f[Oe]!==d&&W(f,Oe,d),Se[e]=d,i)if(u={values:a(Re),keys:o?d:a("keys"),entries:a(Pe)},s)for(c in u)!ke&&!l&&c in f||bt(f,c,u[c]);else Pt({target:e,proto:!0,forced:ke||l},u);return u}var Ee=Object.create||function(t,e){var n;return null!==t?(ue[de]=N(t),n=new ue,ue[de]=null,n[ye]=t):n=ge(),void 0===e?n:fe(n,e)},Ie=B.f,Te=D("toStringTag"),Se={},Ce=E.IteratorPrototype,Ne=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,t={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(t,[]),r=t instanceof Array}catch(t){}return function(t,e){return N(t),function(t){if(!S(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(e),r?n.call(t,e):t.__proto__=e,t}}():void 0),Ae=E.IteratorPrototype,ke=E.BUGGY_SAFARI_ITERATORS,Oe=D("iterator"),Re="values",Pe="entries",De=pt.charAt,xe="String Iterator",Le=mt.set,Me=mt.getterFor(xe);we(String,"String",function(t){Le(this,{type:xe,string:String(t),index:0})},function(){var t=Me(this),e=t.string,n=t.index;return n>=e.length?{value:void 0,done:!0}:(n=De(e,n),t.index+=n.length,{value:n,done:!1})});var Fe={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Ue=D("unscopables"),je=Array.prototype;null==je[Ue]&&B.f(je,Ue,{configurable:!0,value:Ee(null)});var nt=function(t){je[Ue][t]=!0},Ve="Array Iterator",qe=mt.set,Be=mt.getterFor(Ve),We=we(Array,"Array",function(t,e){qe(this,{type:Ve,target:Ct(t),index:0,kind:e})},function(){var t=Be(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?{value:t.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values");Se.Arguments=Se.Array,nt("keys"),nt("values"),nt("entries");var He,Ge=D("iterator"),Ke=D("toStringTag"),ze=We.values;for(He in Fe){var Qe=L[He],Xe=Qe&&Qe.prototype;if(Xe){if(Xe[Ge]!==ze)try{W(Xe,Ge,ze)}catch(na){Xe[Ge]=ze}if(Xe[Ke]||W(Xe,Ke,He),Fe[He])for(var Ye in We)if(Xe[Ye]!==We[Ye])try{W(Xe,Ye,We[Ye])}catch(na){Xe[Ye]=We[Ye]}}}function Je(t,e,n){for(var r in e)bt(t,r,e[r],n);return t}function $e(t){var e=At(t),t=B.f;F&&e&&!e[an]&&t(e,an,{configurable:!0,get:function(){return this}})}function Ze(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}function tn(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}function en(t){return void 0!==t&&(Se.Array===t||cn[un]===t)}function nn(r,i,t){if(Ze(r),void 0===i)return r;switch(t){case 0:return function(){return r.call(i)};case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}}function rn(t){if(null!=t)return t[hn]||t["@@iterator"]||Se[It(t)]}function on(e,t,n,r){try{return r?t(N(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&N(i.call(e)),t}}var sn=L.Promise,an=D("species"),un=D("iterator"),cn=Array.prototype,hn=D("iterator"),ln=I(function(t){function f(t,e){this.stopped=t,this.result=e}(t.exports=function(t,e,n,r,i){var o,s,a,u,c,h,l=nn(e,n,r?2:1);if(i)o=t;else{if("function"!=typeof(i=rn(t)))throw TypeError("Target is not iterable");if(en(i)){for(s=0,a=kt(t.length);s<a;s++)if((u=r?l(N(h=t[s])[0],h[1]):l(t[s]))&&u instanceof f)return u;return new f(!1)}o=i.call(t)}for(c=o.next;!(h=c.call(o)).done;)if("object"==typeof(u=on(o,l,h.value,r))&&u&&u instanceof f)return u;return new f(!1)}).stop=function(t){return new f(!0,t)}}),fn=D("iterator"),pn=!1;try{var dn=0,vn={next:function(){return{done:!!dn++}},return:function(){pn=!0}};vn[fn]=function(){return this},Array.from(vn,function(){throw 2})}catch(na){}function yn(t,e){if(!e&&!pn)return!1;var n=!1;try{var r={};r[fn]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}function gn(t,e){var n;return void 0===(t=N(t).constructor)||null==(n=N(t)[wn])?e:Ze(n)}function mn(t){var e;kn.hasOwnProperty(t)&&(e=kn[t],delete kn[t],e())}function bn(t){return function(){mn(t)}}var _n,wn=D("species"),H=At("navigator","userAgent")||"",En=/(iphone|ipod|ipad).*applewebkit/i.test(H),In=L.location,Tn=L.setImmediate,et=L.clearImmediate,Sn=L.process,Cn=L.MessageChannel,Nn=L.Dispatch,An=0,kn={},On="onreadystatechange",dt=function(t){mn(t.data)},E=function(t){L.postMessage(t+"",In.protocol+"//"+In.host)};Tn&&et||(Tn=function(t){for(var e=[],n=1;n<arguments.length;)e.push(arguments[n++]);return kn[++An]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},_n(An),An},et=function(t){delete kn[t]},"process"==gt(Sn)?_n=function(t){Sn.nextTick(bn(t))}:Nn&&Nn.now?_n=function(t){Nn.now(bn(t))}:Cn&&!En?(Cn=(pt=new Cn).port2,pt.port1.onmessage=dt,_n=nn(Cn.postMessage,Cn,1)):!L.addEventListener||"function"!=typeof postMessage||L.importScripts||T(E)||"file:"===In.protocol?_n=On in C("script")?function(t){pe.appendChild(C("script"))[On]=function(){pe.removeChild(this),mn(t)}}:function(t){setTimeout(bn(t),0)}:(_n=E,L.addEventListener("message",dt,!1)));var Rn,Pn,Dn,xn,Ln,Mn,Fn,Un,E={set:Tn,clear:et},dt=qt.f,jn=E.set,Tn=L.MutationObserver||L.WebKitMutationObserver,Vn=L.process,et=L.Promise,qn="process"==gt(Vn),dt=dt(L,"queueMicrotask"),dt=dt&&dt.value;dt||(Rn=function(){var t,e;for(qn&&(t=Vn.domain)&&t.exit();Pn;){e=Pn.fn,Pn=Pn.next;try{e()}catch(t){throw Pn?xn():Dn=void 0,t}}Dn=void 0,t&&t.enter()},xn=qn?function(){Vn.nextTick(Rn)}:Tn&&!En?(Ln=!0,Mn=document.createTextNode(""),new Tn(Rn).observe(Mn,{characterData:!0}),function(){Mn.data=Ln=!Ln}):et&&et.resolve?(Fn=et.resolve(void 0),Un=Fn.then,function(){Un.call(Fn,Rn)}):function(){jn.call(L,Rn)});function Bn(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=t,r=e}),this.resolve=Ze(n),this.reject=Ze(r)}function Wn(t,e){return N(t),S(e)&&e.constructor===t?e:((0,(t=Kn.f(t)).resolve)(e),t.promise)}function Hn(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}var Gn=dt||function(t){t={fn:t,next:void 0};Dn&&(Dn.next=t),Pn||(Pn=t,xn()),Dn=t},Kn={f:function(t){return new Bn(t)}},et=L.process,dt=et&&et.versions,et=dt&&dt.v8;et?Dr=(Pr=et.split("."))[0]+Pr[1]:H&&(!(Pr=H.match(/Edge\/(\d+)/))||74<=Pr[1])&&(Pr=H.match(/Chrome\/(\d+)/))&&(Dr=Pr[1]);function zn(t){var e;return!(!S(t)||"function"!=typeof(e=t.then))&&e}function Qn(l,f,p){var d;f.notified||(f.notified=!0,d=f.reactions,Gn(function(){for(var t=f.value,e=1==f.state,n=0;d.length>n;){var r,i,o,s=d[n++],a=e?s.ok:s.fail,u=s.resolve,c=s.reject,h=s.domain;try{a?(e||(2===f.rejection&&wr(l,f),f.rejection=1),!0===a?r=t:(h&&h.enter(),r=a(t),h&&(h.exit(),o=!0)),r===s.promise?c(hr("Promise-chain cycle")):(i=zn(r))?i.call(r,u,c):u(r)):c(t)}catch(t){h&&!o&&h.exit(),c(t)}}f.reactions=[],f.notified=!1,p&&!f.rejection&&br(l,f)}))}function Xn(t,e,n){var r;gr?((r=lr.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),L.dispatchEvent(r)):r={promise:e,reason:n},(e=L["on"+t])?e(r):t===mr&&function(t,e){var n=L.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)}function Yn(e,n,r,i){return function(t){e(n,r,t,i)}}function Jn(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=2,Qn(t,e,!0))}var $n,Zn,tr,er,nr=Dr&&+Dr,rr=E.set,ir=D("species"),or="Promise",sr=mt.get,ar=mt.set,ur=mt.getterFor(or),cr=sn,hr=L.TypeError,lr=L.document,fr=L.process,pr=At("fetch"),dr=Kn.f,vr=dr,yr="process"==gt(fr),gr=!!(lr&&lr.createEvent&&L.dispatchEvent),mr="unhandledrejection",dt=re(or,function(){if(!(ft(cr)!==String(cr))){if(66===nr)return!0;if(!yr&&"function"!=typeof PromiseRejectionEvent)return!0}if(51<=nr&&/native code/.test(cr))return!1;function t(t){t(function(){},function(){})}var e=cr.resolve(1);return(e.constructor={})[ir]=t,!(e.then(function(){})instanceof t)}),et=dt||!yn(function(t){cr.all(t).catch(function(){})}),br=function(n,r){rr.call(L,function(){var t,e=r.value;if(_r(r)&&(t=Hn(function(){yr?fr.emit("unhandledRejection",e,n):Xn(mr,n,e)}),r.rejection=yr||_r(r)?2:1,t.error))throw t.value})},_r=function(t){return 1!==t.rejection&&!t.parent},wr=function(t,e){rr.call(L,function(){yr?fr.emit("rejectionHandled",t):Xn("rejectionhandled",t,e.value)})},Er=function(n,r,t,e){if(!r.done){r.done=!0,e&&(r=e);try{if(n===t)throw hr("Promise can't be resolved itself");var i=zn(t);i?Gn(function(){var e={done:!1};try{i.call(t,Yn(Er,n,e,r),Yn(Jn,n,e,r))}catch(t){Jn(n,e,t,r)}}):(r.value=t,r.state=1,Qn(n,r,!1))}catch(t){Jn(n,{done:!1},t,r)}}};dt&&(cr=function(t){tn(this,cr,or),Ze(t),$n.call(this);var e=sr(this);try{t(Yn(Er,this,e),Yn(Jn,this,e))}catch(t){Jn(this,e,t)}},($n=function(){ar(this,{type:or,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=Je(cr.prototype,{then:function(t,e){var n=ur(this),r=dr(gn(this,cr));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=yr?fr.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Qn(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),Zn=function(){var t=new $n,e=sr(t);this.promise=t,this.resolve=Yn(Er,t,e),this.reject=Yn(Jn,t,e)},Kn.f=dr=function(t){return t===cr||t===tr?new Zn:vr(t)},"function"==typeof sn&&(er=sn.prototype.then,bt(sn.prototype,"then",function(t,e){var n=this;return new cr(function(t,e){er.call(n,t,e)}).then(t,e)},{unsafe:!0}),"function"==typeof pr&&Pt({global:!0,enumerable:!0,forced:!0},{fetch:function(){return Wn(cr,pr.apply(L,arguments))}}))),Pt({global:!0,wrap:!0,forced:dt},{Promise:cr}),me(cr,or,!1),$e(or),tr=At(or),Pt({target:or,stat:!0,forced:dt},{reject:function(t){var e=dr(this);return e.reject.call(void 0,t),e.promise}}),Pt({target:or,stat:!0,forced:dt},{resolve:function(t){return Wn(this,t)}}),Pt({target:or,stat:!0,forced:et},{all:function(t){var a=this,e=dr(a),u=e.resolve,c=e.reject,n=Hn(function(){var r=Ze(a.resolve),i=[],o=0,s=1;ln(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(a,t).then(function(t){n||(n=!0,i[e]=t,--s||u(i))},c)}),--s||u(i)});return n.error&&c(n.value),e.promise},race:function(t){var n=this,r=dr(n),i=r.reject,e=Hn(function(){var e=Ze(n.resolve);ln(t,function(t){e.call(n,t).then(r.resolve,i)})});return e.error&&i(e.value),r.promise}}),Pt({target:"Promise",stat:!0},{allSettled:function(t){var a=this,e=Kn.f(a),u=e.resolve,n=e.reject,r=Hn(function(){var r=Ze(a.resolve),i=[],o=0,s=1;ln(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(a,t).then(function(t){n||(n=!0,i[e]={status:"fulfilled",value:t},--s||u(i))},function(t){n||(n=!0,i[e]={status:"rejected",reason:t},--s||u(i))})}),--s||u(i)});return r.error&&n(r.value),e.promise}});H=!!sn&&T(function(){sn.prototype.finally.call({then:function(){}},function(){})});Pt({target:"Promise",proto:!0,real:!0,forced:H},{finally:function(e){var n=gn(this,At("Promise")),t="function"==typeof e;return this.then(t?function(t){return Wn(n,e()).then(function(){return t})}:e,t?function(t){return Wn(n,e()).then(function(){throw t})}:e)}}),"function"!=typeof sn||sn.prototype.finally||bt(sn.prototype,"finally",At("Promise").prototype.finally);Bt.Promise;var Ir=mt.set,Tr=mt.getterFor("AggregateError"),Sr=function(t,e){var n=this;if(!(n instanceof Sr))return new Sr(t,e);Ne&&(n=Ne(new Error(e),ae(n)));var r=[];return ln(t,r.push,r),F?Ir(n,{errors:r,type:"AggregateError"}):n.errors=r,void 0!==e&&W(n,"message",String(e)),n};Sr.prototype=Ee(Error.prototype,{constructor:k(5,Sr),message:k(5,""),name:k(5,"AggregateError")}),F&&B.f(Sr.prototype,"errors",{get:function(){return Tr(this).errors},configurable:!0}),Pt({global:!0},{AggregateError:Sr}),Pt({target:"Promise",stat:!0},{try:function(t){var e=Kn.f(this),t=Hn(t);return(t.error?e.reject:e.resolve)(t.value),e.promise}});var Cr="No one promise resolved";Pt({target:"Promise",stat:!0},{any:function(t){var u=this,e=Kn.f(u),c=e.resolve,h=e.reject,n=Hn(function(){var r=Ze(u.resolve),i=[],o=0,s=1,a=!1;ln(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(u,t).then(function(t){n||a||(a=!0,c(t))},function(t){n||a||(n=!0,i[e]=t,--s||h(new(At("AggregateError"))(i,Cr)))})}),--s||h(new(At("AggregateError"))(i,Cr))});return n.error&&h(n.value),e.promise}});function Nr(t,e){var n;return kr(t)&&("function"==typeof(n=t.constructor)&&(n===Array||kr(n.prototype))||S(n)&&null===(n=n[Or]))&&(n=void 0),new(void 0===n?Array:n)(0===e?0:e)}function Ar(t){throw t}var kr=Array.isArray||function(t){return"Array"==gt(t)},Or=D("species"),Rr=[].push,Pr=function(f){var p=1==f,d=2==f,v=3==f,y=4==f,g=6==f,m=5==f||g;return function(t,e,n,r){for(var i,o,s=Dt(t),a=jt(s),u=nn(e,n,3),c=kt(a.length),h=0,r=r||Nr,l=p?r(t,c):d?r(t,0):void 0;h<c;h++)if((m||h in a)&&(o=u(i=a[h],h,s),f))if(p)l[h]=o;else if(o)switch(f){case 3:return!0;case 5:return i;case 6:return h;case 2:Rr.call(l,i)}else if(y)return!1;return g?-1:v||y?y:l}},Dr={forEach:Pr(0),map:Pr(1),filter:Pr(2),some:Pr(3),every:Pr(4),find:Pr(5),findIndex:Pr(6)},xr=Object.defineProperty,Lr={},E=function(t,e){if(R(Lr,t))return Lr[t];var n=[][t],r=!!R(e=e||{},"ACCESSORS")&&e.ACCESSORS,i=R(e,0)?e[0]:Ar,o=R(e,1)?e[1]:void 0;return Lr[t]=!!n&&!T(function(){if(r&&!F)return 1;var t={length:-1};r?xr(t,1,{enumerable:!0,get:Ar}):t[1]=1,n.call(t,i,o)})},Mr=Dr.find,dt="find",Fr=!0,et=E(dt);dt in[]&&Array(1)[dt](function(){Fr=!1}),Pt({target:"Array",proto:!0,forced:Fr||!et},{find:function(t,e){return Mr(this,t,1<arguments.length?e:void 0)}}),nt(dt);var Ur=Function.call,H=function(t,e,n){return nn(Ur,L[t].prototype[e],n)},jr=(H("Array","find"),Dr.findIndex),Pr="findIndex",Vr=!0,et=E(Pr);Pr in[]&&Array(1)[Pr](function(){Vr=!1}),Pt({target:"Array",proto:!0,forced:Vr||!et},{findIndex:function(t,e){return jr(this,t,1<arguments.length?e:void 0)}}),nt(Pr);function qr(t,e,n){(e=A(e))in t?B.f(t,e,k(0,n)):t[e]=n}H("Array","findIndex");dt=!yn(function(t){Array.from(t)});Pt({target:"Array",stat:!0,forced:dt},{from:function(t,e,n){var r,i,o,s,a,u,c=Dt(t),h="function"==typeof this?this:Array,t=arguments.length,l=1<t?e:void 0,f=void 0!==l,e=rn(c),p=0;if(f&&(l=nn(l,2<t?n:void 0,2)),null==e||h==Array&&en(e))for(i=new h(r=kt(c.length));p<r;p++)u=f?l(c[p],p):c[p],qr(i,p,u);else for(a=(s=e.call(c)).next,i=new h;!(o=a.call(s)).done;p++)u=f?on(s,l,[o.value,p],!0):o.value,qr(i,p,u);return i.length=p,i}});Bt.Array.from;var Br,Wr,Hr=Dr.some,et=!!(Wr=[]["some"])&&T(function(){Wr.call(null,Br||function(){throw 1},1)}),nt=E("some");Pt({target:"Array",proto:!0,forced:!et||!nt},{some:function(t,e){return Hr(this,t,1<arguments.length?e:void 0)}});H("Array","some");function Gr(t){return S(t)&&R(Zr,It(t))}var Kr,Pr="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,dt=B.f,zr=L.Int8Array,Qr=zr&&zr.prototype,E=L.Uint8ClampedArray,et=E&&E.prototype,Xr=zr&&ae(zr),Yr=Qr&&ae(Qr),nt=Object.prototype,E=(nt.isPrototypeOf,D("toStringTag")),Jr=P("TYPED_ARRAY_TAG"),$r=Pr&&!!Ne&&"Opera"!==It(L.opera),Pr=!1,Zr={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(Kr in Zr)L[Kr]||($r=!1);if((!$r||"function"!=typeof Xr||Xr===Function.prototype)&&(Xr=function(){throw TypeError("Incorrect invocation")},$r))for(Kr in Zr)L[Kr]&&Ne(L[Kr],Xr);if((!$r||!Yr||Yr===nt)&&(Yr=Xr.prototype,$r))for(Kr in Zr)L[Kr]&&Ne(L[Kr].prototype,Yr);if($r&&ae(et)!==Yr&&Ne(et,Yr),F&&!R(Yr,E))for(Kr in Pr=!0,dt(Yr,E,{get:function(){return S(this)?this[Jr]:void 0}}),Zr)L[Kr]&&W(L[Kr],Jr,Kr);var et=function(t){if(Gr(t))return t;throw TypeError("Target is not a typed array")},dt=function(t,e,n){if(F){if(n)for(var r in Zr){var i=L[r];i&&R(i.prototype,t)&&delete i.prototype[t]}Yr[t]&&!n||bt(Yr,t,!n&&$r&&Qr[t]||e)}},E=D("iterator"),Pr=L.Uint8Array,ti=We.values,ei=We.keys,ni=We.entries,ri=et,et=dt,dt=Pr&&Pr.prototype[E],Pr=!!dt&&("values"==dt.name||null==dt.name),dt=function(){return ti.call(ri(this))};et("entries",function(){return ni.call(ri(this))}),et("keys",function(){return ei.call(ri(this))}),et("values",dt,!Pr),et(E,dt,!Pr);var ii=Object.assign,oi=Object.defineProperty,dt=!ii||T(function(){if(F&&1!==ii({b:1},ii(oi({},"a",{enumerable:!0,get:function(){oi(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return 1;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=ii({},t)[n]||le(ii({},e)).join("")!=r})?function(t){for(var e=Dt(t),n=arguments.length,r=1,i=Yt.f,o=Ft.f;r<n;)for(var s,a=jt(arguments[r++]),u=i?le(a).concat(i(a)):le(a),c=u.length,h=0;h<c;)s=u[h++],F&&!o.call(a,s)||(e[s]=a[s]);return e}:ii;Pt({target:"Object",stat:!0,forced:Object.assign!==dt},{assign:dt});Bt.Object.assign;var si=Ft.f,Pr=function(a){return function(t){for(var e,n=Ct(t),r=le(n),i=r.length,o=0,s=[];o<i;)e=r[o++],F&&!si.call(n,e)||s.push(a?[e,n[e]]:n[e]);return s}},dt={entries:Pr(!0),values:Pr(!1)},ai=dt.entries;Pt({target:"Object",stat:!0},{entries:function(t){return ai(t)}});Bt.Object.entries;var ui=dt.values;Pt({target:"Object",stat:!0},{values:function(t){return ui(t)}});Bt.Object.values;function ci(t){if(S(e=t)&&(void 0!==(n=e[hi])?!!n:"RegExp"==gt(e)))throw TypeError("The method doesn't accept regular expressions");var e,n;return t}var hi=D("match"),li=D("match"),Pr=function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[li]=!1,"/./"[e](n)}catch(t){}}return!1};Pt({target:"String",proto:!0,forced:!Pr("includes")},{includes:function(t,e){return!!~String(St(this)).indexOf(ci(t),1<arguments.length?e:void 0)}});H("String","includes");var fi,dt=qt.f,pi="".startsWith,di=Math.min,Pr=Pr("startsWith"),fi=!(Pr||(!(fi=dt(String.prototype,"startsWith"))||fi.writable));Pt({target:"String",proto:!0,forced:!fi&&!Pr},{startsWith:function(t,e){var n=String(St(this));ci(t);e=kt(di(1<arguments.length?e:void 0,n.length)),t=String(t);return pi?pi.call(n,t,e):n.slice(e,e+t.length)===t}});H("String","startsWith");Pt({target:"String",proto:!0},{repeat:"".repeat||function(t){var e=String(St(this)),n="",r=Tt(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;0<r;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}});H("String","repeat");var vi,yi=D("species"),gi=D("isConcatSpreadable"),mi=9007199254740991,bi="Maximum allowed index exceeded",Pr=51<=nr||!T(function(){var t=[];return t[gi]=!1,t.concat()[0]!==t}),H=(vi="concat",51<=nr||!T(function(){var t=[];return(t.constructor={})[yi]=function(){return{foo:1}},1!==t[vi](Boolean).foo}));Pt({target:"Array",proto:!0,forced:!Pr||!H},{concat:function(){for(var t,e,n,r=Dt(this),i=Nr(r,0),o=0,s=-1,a=arguments.length;s<a;s++)if(function(t){if(!S(t))return!1;var e=t[gi];return void 0!==e?!!e:kr(t)}(n=-1===s?r:arguments[s])){if(e=kt(n.length),mi<o+e)throw TypeError(bi);for(t=0;t<e;t++,o++)t in n&&qr(i,o,n[t])}else{if(mi<=o)throw TypeError(bi);qr(i,o++,n)}return i.length=o,i}});function _i(t){var e=Bt.Symbol||(Bt.Symbol={});R(e,t)||Ni(e,t,{value:Ci.f(t)})}function wi(t,e){var n=qi[t]=Ee(Li[Ri]);return Pi(n,{type:Oi,tag:t,description:e}),F||(n.description=e),n}function Ei(e,t){N(e);var n=Ct(t),t=le(n).concat(Yi(n));return Ai(t,function(t){F&&!Xi.call(n,t)||Qi(e,t,n[t])}),e}var Ii=Xt.f,Ti={}.toString,Si="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],H={f:function(t){return Si&&"[object Window]"==Ti.call(t)?function(t){try{return Ii(t)}catch(t){return Si.slice()}}(t):Ii(Ct(t))}},Ci={f:D},Ni=B.f,Ai=Dr.forEach,ki=x("hidden"),Oi="Symbol",Ri="prototype",Dr=D("toPrimitive"),Pi=mt.set,Di=mt.getterFor(Oi),xi=Object[Ri],Li=L.Symbol,Mi=At("JSON","stringify"),Fi=qt.f,Ui=B.f,ji=H.f,Vi=Ft.f,qi=K("symbols"),Bi=K("op-symbols"),Wi=K("string-to-symbol-registry"),Hi=K("symbol-to-string-registry"),x=K("wks"),K=L.QObject,Gi=!K||!K[Ri]||!K[Ri].findChild,Ki=F&&T(function(){return 7!=Ee(Ui({},"a",{get:function(){return Ui(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=Fi(xi,e);r&&delete xi[e],Ui(t,e,n),r&&t!==xi&&Ui(xi,e,r)}:Ui,zi=J?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof Li},Qi=function(t,e,n){t===xi&&Qi(Bi,e,n),N(t);e=A(e,!0);return N(n),R(qi,e)?(n.enumerable?(R(t,ki)&&t[ki][e]&&(t[ki][e]=!1),n=Ee(n,{enumerable:k(0,!1)})):(R(t,ki)||Ui(t,ki,k(1,{})),t[ki][e]=!0),Ki(t,e,n)):Ui(t,e,n)},Xi=function(t){var e=A(t,!0),t=Vi.call(this,e);return!(this===xi&&R(qi,e)&&!R(Bi,e))&&(!(t||!R(this,e)||!R(qi,e)||R(this,ki)&&this[ki][e])||t)},K=function(t,e){var n=Ct(t),t=A(e,!0);if(n!==xi||!R(qi,t)||R(Bi,t)){e=Fi(n,t);return!e||!R(qi,t)||R(n,ki)&&n[ki][t]||(e.enumerable=!0),e}},J=function(t){var t=ji(Ct(t)),e=[];return Ai(t,function(t){R(qi,t)||R(yt,t)||e.push(t)}),e},Yi=function(t){var e=t===xi,t=ji(e?Bi:Ct(t)),n=[];return Ai(t,function(t){!R(qi,t)||e&&!R(xi,t)||n.push(qi[t])}),n};Y||(bt((Li=function(t){if(this instanceof Li)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==t?String(t):void 0,e=P(t),n=function(t){this===xi&&n.call(Bi,t),R(this,ki)&&R(this[ki],e)&&(this[ki][e]=!1),Ki(this,e,k(1,t))};return F&&Gi&&Ki(xi,e,{configurable:!0,set:n}),wi(e,t)})[Ri],"toString",function(){return Di(this).tag}),bt(Li,"withoutSetter",function(t){return wi(P(t),t)}),Ft.f=Xi,B.f=Qi,qt.f=K,Xt.f=H.f=J,Yt.f=Yi,Ci.f=function(t){return wi(D(t),t)},F&&(Ui(Li[Ri],"description",{configurable:!0,get:function(){return Di(this).description}}),bt(xi,"propertyIsEnumerable",Xi,{unsafe:!0}))),Pt({global:!0,wrap:!0,forced:!Y,sham:!Y},{Symbol:Li}),Ai(le(x),function(t){_i(t)}),Pt({target:Oi,stat:!0,forced:!Y},{for:function(t){var e=String(t);if(R(Wi,e))return Wi[e];t=Li(e);return Wi[e]=t,Hi[t]=e,t},keyFor:function(t){if(!zi(t))throw TypeError(t+" is not a symbol");if(R(Hi,t))return Hi[t]},useSetter:function(){Gi=!0},useSimple:function(){Gi=!1}}),Pt({target:"Object",stat:!0,forced:!Y,sham:!F},{create:function(t,e){return void 0===e?Ee(t):Ei(Ee(t),e)},defineProperty:Qi,defineProperties:Ei,getOwnPropertyDescriptor:K}),Pt({target:"Object",stat:!0,forced:!Y},{getOwnPropertyNames:J,getOwnPropertySymbols:Yi}),Pt({target:"Object",stat:!0,forced:T(function(){Yt.f(1)})},{getOwnPropertySymbols:function(t){return Yt.f(Dt(t))}}),Mi&&(co=!Y||T(function(){var t=Li();return"[null]"!=Mi([t])||"{}"!=Mi({a:t})||"{}"!=Mi(Object(t))}),Pt({target:"JSON",stat:!0,forced:co},{stringify:function(t,e){for(var n,r=[t],i=1;i<arguments.length;)r.push(arguments[i++]);if((S(n=e)||void 0!==t)&&!zi(t))return kr(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!zi(e))return e}),r[1]=e,Mi.apply(null,r)}})),Li[Ri][Dr]||W(Li[Ri],Dr,Li[Ri].valueOf),me(Li,Oi),yt[ki]=!0,_i("asyncIterator");var Ji,$i,Zi,to,eo,K=B.f,no=L.Symbol;!F||"function"!=typeof no||"description"in no.prototype&&void 0===no().description||(Ji={},Rt($i=function(t){var e=arguments.length<1||void 0===t?void 0:String(t),t=this instanceof $i?new no(e):void 0===e?no():no(e);return""===e&&(Ji[t]=!0),t},no),(fo=$i.prototype=no.prototype).constructor=$i,Zi=fo.toString,to="Symbol(test)"==String(no("test")),eo=/^Symbol\((.*)\)[^)]+$/,K(fo,"description",{configurable:!0,get:function(){var t=S(this)?this.valueOf():this,e=Zi.call(t);if(R(Ji,t))return"";e=to?e.slice(7,-1):e.replace(eo,"$1");return""===e?void 0:e}}),Pt({global:!0,forced:!0},{Symbol:$i})),_i("hasInstance"),_i("isConcatSpreadable"),_i("iterator"),_i("match"),_i("matchAll"),_i("replace"),_i("search"),_i("species"),_i("split"),_i("toPrimitive"),_i("toStringTag"),_i("unscopables"),me(Math,"Math",!0),me(L.JSON,"JSON",!0);Bt.Symbol;_i("asyncDispose"),_i("dispose"),_i("observable"),_i("patternMatch"),_i("replaceAll");Ci.f("iterator");var ro=!T(function(){return Object.isExtensible(Object.preventExtensions({}))}),io=I(function(t){function n(t){e(t,r,{value:{objectID:"O"+ ++i,weakData:{}}})}var e=B.f,r=P("meta"),i=0,o=Object.isExtensible||function(){return!0},s=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!S(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!R(t,r)){if(!o(t))return"F";if(!e)return"E";n(t)}return t[r].objectID},getWeakData:function(t,e){if(!R(t,r)){if(!o(t))return!0;if(!e)return!1;n(t)}return t[r].weakData},onFreeze:function(t){return ro&&s.REQUIRED&&o(t)&&!R(t,r)&&n(t),t}};yt[r]=!0}),J=function(s,t,e){function n(t){var n=p[t];bt(p,t,"add"==t?function(t){return n.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(h&&!S(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return h&&!S(t)?void 0:n.call(this,0===t?0:t)}:"has"==t?function(t){return!(h&&!S(t))&&n.call(this,0===t?0:t)}:function(t,e){return n.call(this,0===t?0:t,e),this})}var r,i,o,a,u,c=-1!==s.indexOf("Map"),h=-1!==s.indexOf("Weak"),l=c?"set":"add",f=L[s],p=f&&f.prototype,d=f,v={};return re(s,"function"!=typeof f||!(h||p.forEach&&!T(function(){(new f).entries().next()})))?(d=e.getConstructor(t,s,c,l),io.REQUIRED=!0):re(s,!0)&&(i=(r=new d)[l](h?{}:-0,1)!=r,o=T(function(){r.has(1)}),a=yn(function(t){new f(t)}),u=!h&&T(function(){for(var t=new f,e=5;e--;)t[l](e,e);return!t.has(-0)}),a||(((d=t(function(t,e){tn(t,d,s);var n,r,i,o,n=(n=new f,r=t,t=d,Ne&&"function"==typeof(i=r.constructor)&&i!==t&&S(o=i.prototype)&&o!==t.prototype&&Ne(n,o),n);return null!=e&&ln(e,n[l],n,c),n})).prototype=p).constructor=d),(o||u)&&(n("delete"),n("has"),c&&n("get")),(u||i)&&n(l),h&&p.clear&&delete p.clear),v[s]=d,Pt({global:!0,forced:d!=f},v),me(d,s),h||e.setStrong(d,s,c),d},oo=B.f,so=io.fastKey,ao=mt.set,uo=mt.getterFor,co={getConstructor:function(t,n,r,i){function o(t,e,n){var r,i=a(t),o=u(t,e);return o?o.value=n:(i.last=o={index:r=so(e,!0),key:e,value:n,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=o),n&&(n.next=o),F?i.size++:t.size++,"F"!==r&&(i.index[r]=o)),t}var s=t(function(t,e){tn(t,s,n),ao(t,{type:n,index:Ee(null),first:void 0,last:void 0,size:0}),F||(t.size=0),null!=e&&ln(e,t[i],t,r)}),a=uo(n),u=function(t,e){var n,r=a(t),t=so(e);if("F"!==t)return r.index[t];for(n=r.first;n;n=n.next)if(n.key==e)return n};return Je(s.prototype,{clear:function(){for(var t=a(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,F?t.size=0:this.size=0},delete:function(t){var e,n=a(this),r=u(this,t);return r&&(e=r.next,t=r.previous,delete n.index[r.index],r.removed=!0,t&&(t.next=e),e&&(e.previous=t),n.first==r&&(n.first=e),n.last==r&&(n.last=t),F?n.size--:this.size--),!!r},forEach:function(t,e){for(var n,r=a(this),i=nn(t,1<arguments.length?e:void 0,3);n=n?n.next:r.first;)for(i(n.value,n.key,this);n&&n.removed;)n=n.previous},has:function(t){return!!u(this,t)}}),Je(s.prototype,r?{get:function(t){t=u(this,t);return t&&t.value},set:function(t,e){return o(this,0===t?0:t,e)}}:{add:function(t){return o(this,t=0===t?0:t,t)}}),F&&oo(s.prototype,"size",{get:function(){return a(this).size}}),s},setStrong:function(t,e,n){var r=e+" Iterator",i=uo(e),o=uo(r);we(t,e,function(t,e){ao(this,{type:r,target:t,state:i(t),kind:e,last:void 0})},function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:t.target=void 0,done:!0}},n?"entries":"values",!n,!0),$e(e)}},Dr=(J("Map",function(e){return function(t){return e(this,arguments.length?t:void 0)}},co),Bt.Map,function(t,e,n){var r,i,o,s=arguments.length,a=1<s?e:void 0;return Ze(this),(e=void 0!==a)&&Ze(a),null==t?new this:(r=[],e?(i=0,o=nn(a,2<s?n:void 0,2),ln(t,function(t){r.push(o(t,i++))})):ln(t,r.push,r),new this(r))});Pt({target:"Map",stat:!0},{from:Dr});K=function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)};Pt({target:"Map",stat:!0},{of:K});function ho(){for(var t,e=N(this),n=Ze(e.delete),r=!0,i=0,o=arguments.length;i<o;i++)t=n.call(e,arguments[i]),r=r&&t;return!!r}Pt({target:"Map",proto:!0,real:!0,forced:M},{deleteAll:function(){return ho.apply(this,arguments)}});function lo(t){return Map.prototype.entries.call(t)}Pt({target:"Map",proto:!0,real:!0,forced:M},{every:function(t,e){var n=N(this),r=lo(n),i=nn(t,1<arguments.length?e:void 0,3);return!ln(r,function(t,e){if(!i(e,t,n))return ln.stop()},void 0,!0,!0).stopped}}),Pt({target:"Map",proto:!0,real:!0,forced:M},{filter:function(t,e){var n=N(this),r=lo(n),i=nn(t,1<arguments.length?e:void 0,3),o=new(gn(n,At("Map"))),s=Ze(o.set);return ln(r,function(t,e){i(e,t,n)&&s.call(o,t,e)},void 0,!0,!0),o}}),Pt({target:"Map",proto:!0,real:!0,forced:M},{find:function(t,e){var n=N(this),r=lo(n),i=nn(t,1<arguments.length?e:void 0,3);return ln(r,function(t,e){if(i(e,t,n))return ln.stop(e)},void 0,!0,!0).result}}),Pt({target:"Map",proto:!0,real:!0,forced:M},{findKey:function(t,e){var n=N(this),r=lo(n),i=nn(t,1<arguments.length?e:void 0,3);return ln(r,function(t,e){if(i(e,t,n))return ln.stop(t)},void 0,!0,!0).result}}),Pt({target:"Map",stat:!0},{groupBy:function(t,n){var r=new this;Ze(n);var i=Ze(r.has),o=Ze(r.get),s=Ze(r.set);return ln(t,function(t){var e=n(t);i.call(r,e)?o.call(r,e).push(t):s.call(r,e,[t])}),r}});Pt({target:"Map",proto:!0,real:!0,forced:M},{includes:function(r){return ln(lo(N(this)),function(t,e){if((n=e)===(e=r)||n!=n&&e!=e)return ln.stop();var n},void 0,!0,!0).stopped}}),Pt({target:"Map",stat:!0},{keyBy:function(t,e){var n=new this;Ze(e);var r=Ze(n.set);return ln(t,function(t){r.call(n,e(t),t)}),n}}),Pt({target:"Map",proto:!0,real:!0,forced:M},{keyOf:function(n){return ln(lo(N(this)),function(t,e){if(e===n)return ln.stop(t)},void 0,!0,!0).result}}),Pt({target:"Map",proto:!0,real:!0,forced:M},{mapKeys:function(t,e){var n=N(this),r=lo(n),i=nn(t,1<arguments.length?e:void 0,3),o=new(gn(n,At("Map"))),s=Ze(o.set);return ln(r,function(t,e){s.call(o,i(e,t,n),e)},void 0,!0,!0),o}}),Pt({target:"Map",proto:!0,real:!0,forced:M},{mapValues:function(t,e){var n=N(this),r=lo(n),i=nn(t,1<arguments.length?e:void 0,3),o=new(gn(n,At("Map"))),s=Ze(o.set);return ln(r,function(t,e){s.call(o,t,i(e,t,n))},void 0,!0,!0),o}}),Pt({target:"Map",proto:!0,real:!0,forced:M},{merge:function(){for(var t=N(this),e=Ze(t.set),n=0;n<arguments.length;)ln(arguments[n++],e,t,!0);return t}}),Pt({target:"Map",proto:!0,real:!0,forced:M},{reduce:function(n,t){var r=N(this),e=lo(r),i=arguments.length<2,o=i?void 0:t;if(Ze(n),ln(e,function(t,e){o=i?(i=!1,e):n(o,e,t,r)},void 0,!0,!0),i)throw TypeError("Reduce of empty map with no initial value");return o}}),Pt({target:"Map",proto:!0,real:!0,forced:M},{some:function(t,e){var n=N(this),r=lo(n),i=nn(t,1<arguments.length?e:void 0,3);return ln(r,function(t,e){if(i(e,t,n))return ln.stop()},void 0,!0,!0).stopped}}),Pt({target:"Map",proto:!0,real:!0,forced:M},{update:function(t,e,n){var r=N(this),i=arguments.length;Ze(e);var o=r.has(t);if(!o&&i<3)throw TypeError("Updating absent value");n=o?r.get(t):Ze(2<i?n:void 0)(t,r);return r.set(t,e(n,t,r)),r}});var fo=function(t,e,n){var r,i=N(this),n=2<arguments.length?n:void 0;if("function"!=typeof e&&"function"!=typeof n)throw TypeError("At least one callback required");return i.has(t)?(r=i.get(t),"function"==typeof e&&(r=e(r),i.set(t,r))):"function"==typeof n&&(r=n(),i.set(t,r)),r};Pt({target:"Map",proto:!0,real:!0,forced:M},{upsert:fo}),Pt({target:"Map",proto:!0,real:!0,forced:M},{updateOrInsert:fo});J("Set",function(e){return function(t){return e(this,arguments.length?t:void 0)}},co),Bt.Set;Pt({target:"Set",stat:!0},{from:Dr}),Pt({target:"Set",stat:!0},{of:K});Pt({target:"Set",proto:!0,real:!0,forced:M},{addAll:function(){return function(){for(var t=N(this),e=Ze(t.add),n=0,r=arguments.length;n<r;n++)e.call(t,arguments[n]);return t}.apply(this,arguments)}}),Pt({target:"Set",proto:!0,real:!0,forced:M},{deleteAll:function(){return ho.apply(this,arguments)}});function po(t){return Set.prototype.values.call(t)}Pt({target:"Set",proto:!0,real:!0,forced:M},{every:function(t,e){var n=N(this),r=po(n),i=nn(t,1<arguments.length?e:void 0,3);return!ln(r,function(t){if(!i(t,t,n))return ln.stop()},void 0,!1,!0).stopped}}),Pt({target:"Set",proto:!0,real:!0,forced:M},{difference:function(t){var e=N(this),n=new(gn(e,At("Set")))(e),r=Ze(n.delete);return ln(t,function(t){r.call(n,t)}),n}}),Pt({target:"Set",proto:!0,real:!0,forced:M},{filter:function(t,e){var n=N(this),r=po(n),i=nn(t,1<arguments.length?e:void 0,3),o=new(gn(n,At("Set"))),s=Ze(o.add);return ln(r,function(t){i(t,t,n)&&s.call(o,t)},void 0,!1,!0),o}}),Pt({target:"Set",proto:!0,real:!0,forced:M},{find:function(t,e){var n=N(this),r=po(n),i=nn(t,1<arguments.length?e:void 0,3);return ln(r,function(t){if(i(t,t,n))return ln.stop(t)},void 0,!1,!0).result}}),Pt({target:"Set",proto:!0,real:!0,forced:M},{intersection:function(t){var e=N(this),n=new(gn(e,At("Set"))),r=Ze(e.has),i=Ze(n.add);return ln(t,function(t){r.call(e,t)&&i.call(n,t)}),n}}),Pt({target:"Set",proto:!0,real:!0,forced:M},{isDisjointFrom:function(t){var e=N(this),n=Ze(e.has);return!ln(t,function(t){if(!0===n.call(e,t))return ln.stop()}).stopped}}),Pt({target:"Set",proto:!0,real:!0,forced:M},{isSubsetOf:function(t){var e=function(t){var e=rn(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return N(e.call(t))}(this),n=N(t),r=n.has;return"function"!=typeof r&&(n=new(At("Set"))(t),r=Ze(n.has)),!ln(e,function(t){if(!1===r.call(n,t))return ln.stop()},void 0,!1,!0).stopped}}),Pt({target:"Set",proto:!0,real:!0,forced:M},{isSupersetOf:function(t){var e=N(this),n=Ze(e.has);return!ln(t,function(t){if(!1===n.call(e,t))return ln.stop()}).stopped}}),Pt({target:"Set",proto:!0,real:!0,forced:M},{join:function(t){var e=N(this),n=po(e),e=void 0===t?",":String(t),t=[];return ln(n,t.push,t,!1,!0),t.join(e)}}),Pt({target:"Set",proto:!0,real:!0,forced:M},{map:function(t,e){var n=N(this),r=po(n),i=nn(t,1<arguments.length?e:void 0,3),o=new(gn(n,At("Set"))),s=Ze(o.add);return ln(r,function(t){s.call(o,i(t,t,n))},void 0,!1,!0),o}}),Pt({target:"Set",proto:!0,real:!0,forced:M},{reduce:function(e,t){var n=N(this),r=po(n),i=arguments.length<2,o=i?void 0:t;if(Ze(e),ln(r,function(t){o=i?(i=!1,t):e(o,t,t,n)},void 0,!1,!0),i)throw TypeError("Reduce of empty set with no initial value");return o}}),Pt({target:"Set",proto:!0,real:!0,forced:M},{some:function(t,e){var n=N(this),r=po(n),i=nn(t,1<arguments.length?e:void 0,3);return ln(r,function(t){if(i(t,t,n))return ln.stop()},void 0,!1,!0).stopped}}),Pt({target:"Set",proto:!0,real:!0,forced:M},{symmetricDifference:function(t){var e=N(this),n=new(gn(e,At("Set")))(e),r=Ze(n.delete),i=Ze(n.add);return ln(t,function(t){r.call(n,t)||i.call(n,t)}),n}}),Pt({target:"Set",proto:!0,real:!0,forced:M},{union:function(t){var e=N(this),e=new(gn(e,At("Set")))(e);return ln(t,Ze(e.add),e),e}});var vo=Math.floor;Pt({target:"Number",stat:!0},{isInteger:function(t){return!S(t)&&isFinite(t)&&vo(t)===t}});Bt.Number.isInteger;Pt({target:"Number",stat:!0},{isNaN:function(t){return t!=t}});Bt.Number.isNaN;var yo=function(t,e){return(yo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function go(t,e){function n(){this.constructor=t}yo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var mo=function(){return(mo=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function bo(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{o(u.next(t))}catch(t){e(t)}}function i(t){try{o(u.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,i)}o((u=u.apply(t,s||[])).next())})}function _o(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function wo(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Eo(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function Io(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Eo(arguments[e]));return t}function To(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function So(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128):e[n++]=i>>12|224,e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e}function Co(t){try{return Oo.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}var No={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},Ao=function(t,e){if(!t)throw ko(e)},ko=function(t){return new Error("Firebase Database ("+No.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},Oo={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,o=(3&o)<<4|a>>4,a=(15&a)<<2|c>>6,c=63&c;u||(c=64,s||(a=64)),r.push(n[h],n[o],n[a],n[c])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(So(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i,o,s,a=t[n++];a<128?e[r++]=String.fromCharCode(a):191<a&&a<224?(o=t[n++],e[r++]=String.fromCharCode((31&a)<<6|63&o)):239<a&&a<365?(i=((7&a)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536,e[r++]=String.fromCharCode(55296+(i>>10)),e[r++]=String.fromCharCode(56320+(1023&i))):(o=t[n++],s=t[n++],e[r++]=String.fromCharCode((15&a)<<12|(63&o)<<6|63&s))}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();o=o<<2|s>>4;r.push(o),64!==a&&(s=s<<4&240|a>>2,r.push(s),64!==u&&(u=a<<6&192|u,r.push(u)))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function Ro(t){return Po(void 0,t)}function Po(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=Po(t[n],e[n]));return t}var Do=(xo.prototype.wrapCallback=function(n){var r=this;return function(t,e){t?r.reject(t):r.resolve(e),"function"==typeof n&&(r.promise.catch(function(){}),1===n.length?n(t):n(t,e))}},xo);function xo(){var n=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}function Lo(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Mo(){return"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Lo())}function Fo(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function Uo(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function jo(){return!0===No.NODE_ADMIN}function Vo(){return"indexedDB"in self&&null!=indexedDB}function qo(){return new Promise(function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}})}function Bo(){return!(!navigator||!navigator.cookieEnabled)}var Wo,Ho="FirebaseError",Go=(go(Ko,Wo=Error),Ko);function Ko(t,e){e=Wo.call(this,e)||this;return e.code=t,e.name=Ho,Object.setPrototypeOf(e,Ko.prototype),Error.captureStackTrace&&Error.captureStackTrace(e,zo.prototype.create),e}var zo=(Qo.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r,i=e[0]||{},o=this.service+"/"+t,t=this.errors[t],t=t?(r=i,t.replace(Xo,function(t,e){var n=r[e];return null!=n?String(n):"<"+e+"?>"})):"Error",t=this.serviceName+": "+t+" ("+o+").",s=new Go(o,t),a=0,u=Object.keys(i);a<u.length;a++){var c=u[a];"_"!==c.slice(-1)&&(c in s&&console.warn('Overwriting FirebaseError base field "'+c+'" can cause unexpected behavior.'),s[c]=i[c])}return s},Qo);function Qo(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var Xo=/\{\$([^}]+)}/g;function Yo(t){return JSON.parse(t)}function Jo(t){return JSON.stringify(t)}function $o(t){var e={},n={},r={},i="";try{var o=t.split("."),e=Yo(Co(o[0])||""),n=Yo(Co(o[1])||""),i=o[2],r=n.d||{};delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}}function Zo(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ts(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function es(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ns(t,e,n){var r,i={};for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}var rs=(is.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},is.prototype.compress_=function(t,e){e=e||0;var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}for(var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4],r=0;r<80;r++){s=r<40?r<20?(o=h^u&(c^h),1518500249):(o=u^c^h,1859775393):r<60?(o=u&c|h&(u|c),2400959708):(o=u^c^h,3395469782);i=(a<<5|a>>>27)+o+l+s+n[r]&4294967295,l=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},is.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},is.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);for(var r=0,n=0;n<5;n++)for(var i=24;0<=i;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},is);function is(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}function os(t,e){e=new ss(t,e);return e.subscribe.bind(e)}var ss=(as.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},as.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},as.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},as.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=us),void 0===r.error&&(r.error=us),void 0===r.complete&&(r.complete=us);n=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),n},as.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],--this.observerCount,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},as.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},as.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},as.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},as);function as(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}function us(){}function cs(t,e,n,r){var i;if(r<e?i="at least "+e:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}function hs(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}t+=" failed: ";return t+=r+" argument "}function ls(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(hs(t,e,r)+"must be a valid function.")}function fs(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(hs(t,e,r)+"must be a valid context object.")}function ps(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:55296<=r&&r<=56319?(e+=4,n++):e+=3}return e}var ds=1e3,vs=2,ys=144e5,gs=.5;function ms(t,e,n){void 0===e&&(e=ds),void 0===n&&(n=vs);n=e*Math.pow(n,t),t=Math.round(gs*n*(Math.random()-.5)*2);return Math.min(ys,n+t)}var bs=(_s.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},_s.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},_s.prototype.setServiceProps=function(t){return this.serviceProps=t,this},_s);function _s(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}var ws="[DEFAULT]",Es=(Is.prototype.get=function(t){void 0===t&&(t=ws);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new Do;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},Is.prototype.getImmediate=function(t){var e=mo({identifier:ws,optional:!1},t),t=e.identifier,n=e.optional,r=this.normalizeInstanceIdentifier(t);try{var i=this.getOrInitializeService(r);if(i)return i;if(n)return null;throw Error("Service "+this.name+" is not available")}catch(t){if(n)return null;throw t}},Is.prototype.getComponent=function(){return this.component},Is.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if("EAGER"===(this.component=t).instantiationMode)try{this.getOrInitializeService(ws)}catch(t){}try{for(var r=wo(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=Eo(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService(u);a.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},Is.prototype.clearInstance=function(t){void 0===t&&(t=ws),this.instancesDeferred.delete(t),this.instances.delete(t)},Is.prototype.delete=function(){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(Io(e.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}),e.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()})))];case 1:return t.sent(),[2]}})})},Is.prototype.isComponentSet=function(){return null!=this.component},Is.prototype.getOrInitializeService=function(t){var e,n=this.instances.get(t);return!n&&this.component&&(n=this.component.instanceFactory(this.container,(e=t)===ws?void 0:e),this.instances.set(t,n)),n||null},Is.prototype.normalizeInstanceIdentifier=function(t){return!this.component||this.component.multipleInstances?t:ws},Is);function Is(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}var Ts=(Ss.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},Ss.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},Ss.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new Es(t,this);return this.providers.set(t,e),e},Ss.prototype.getProviders=function(){return Array.from(this.providers.values())},Ss);function Ss(t){this.name=t,this.providers=new Map}function Cs(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var Ns,As=[];(Dr=Ns=Ns||{})[Dr.DEBUG=0]="DEBUG",Dr[Dr.VERBOSE=1]="VERBOSE",Dr[Dr.INFO=2]="INFO",Dr[Dr.WARN=3]="WARN",Dr[Dr.ERROR=4]="ERROR",Dr[Dr.SILENT=5]="SILENT";function ks(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=Ps[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,Cs(["["+i+"]  "+t.name+":"],n))}}var Os={debug:Ns.DEBUG,verbose:Ns.VERBOSE,info:Ns.INFO,warn:Ns.WARN,error:Ns.ERROR,silent:Ns.SILENT},Rs=Ns.INFO,Ps=((K={})[Ns.DEBUG]="log",K[Ns.VERBOSE]="log",K[Ns.INFO]="info",K[Ns.WARN]="warn",K[Ns.ERROR]="error",K),Ds=(Object.defineProperty(xs.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Ns))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),xs.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?Os[t]:t},Object.defineProperty(xs.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(xs.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),xs.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Cs([this,Ns.DEBUG],t)),this._logHandler.apply(this,Cs([this,Ns.DEBUG],t))},xs.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Cs([this,Ns.VERBOSE],t)),this._logHandler.apply(this,Cs([this,Ns.VERBOSE],t))},xs.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Cs([this,Ns.INFO],t)),this._logHandler.apply(this,Cs([this,Ns.INFO],t))},xs.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Cs([this,Ns.WARN],t)),this._logHandler.apply(this,Cs([this,Ns.WARN],t))},xs.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Cs([this,Ns.ERROR],t)),this._logHandler.apply(this,Cs([this,Ns.ERROR],t))},xs);function xs(t){this.name=t,this._logLevel=Rs,this._logHandler=ks,this._userLogHandler=null,As.push(this)}function Ls(e){As.forEach(function(t){t.setLogLevel(e)})}var Dr=((M={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",M["bad-app-name"]="Illegal App name: '{$appName}",M["duplicate-app"]="Firebase App named '{$appName}' already exists",M["app-deleted"]="Firebase App named '{$appName}' already deleted",M["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",M["invalid-log-argument"]="First argument to `onLog` must be null or a function.",M),Ms=new zo("app","Firebase",Dr),Fs="@firebase/app",Us="[DEFAULT]",js=((K={})[Fs]="fire-core",K["@firebase/analytics"]="fire-analytics",K["@firebase/auth"]="fire-auth",K["@firebase/database"]="fire-rtdb",K["@firebase/functions"]="fire-fn",K["@firebase/installations"]="fire-iid",K["@firebase/messaging"]="fire-fcm",K["@firebase/performance"]="fire-perf",K["@firebase/remote-config"]="fire-rc",K["@firebase/storage"]="fire-gcs",K["@firebase/firestore"]="fire-fst",K["fire-js"]="fire-js",K["firebase-wrapper"]="fire-js-all",K),Vs=new Ds("@firebase/app"),qs=(Object.defineProperty(Bs.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(Bs.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(Bs.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),Bs.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map(function(t){return t.delete()}))}).then(function(){e.isDeleted_=!0})},Bs.prototype._getService=function(t,e){return void 0===e&&(e=Us),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},Bs.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=Us),this.container.getProvider(t).clearInstance(e)},Bs.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){Vs.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},Bs.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},Bs.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Ms.create("app-deleted",{appName:this.name_})},Bs);function Bs(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Ro(t),this.container=new Ts(e.name),this._addComponent(new bs("app",function(){return o},"PUBLIC"));try{for(var s=wo(this.firebase_.INTERNAL.components.values()),a=s.next();!a.done;a=s.next()){var u=a.value;this._addComponent(u)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}qs.prototype.name&&qs.prototype.options||qs.prototype.delete||console.log("dc");var Ws="7.24.0";function Hs(u){var c={},h=new Map,l={__esModule:!0,initializeApp:function(t,e){void 0===e&&(e={});{"object"==typeof e&&null!==e||(e={name:e})}var n=e;void 0===n.name&&(n.name=Us);e=n.name;if("string"!=typeof e||!e)throw Ms.create("bad-app-name",{appName:String(e)});if(Zo(c,e))throw Ms.create("duplicate-app",{appName:e});n=new u(t,n,l);return c[e]=n},app:f,registerVersion:function(t,e,n){var r=null!==(i=js[t])&&void 0!==i?i:t;n&&(r+="-"+n);var i=r.match(/\s|\//),t=e.match(/\s|\//);if(i||t){n=['Unable to register library "'+r+'" with version "'+e+'":'];return i&&n.push('library name "'+r+'" contains illegal characters (whitespace or "/")'),i&&t&&n.push("and"),t&&n.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void Vs.warn(n.join(" "))}o(new bs(r+"-version",function(){return{library:r,version:e}},"VERSION"))},setLogLevel:Ls,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw Ms.create("invalid-log-argument",{appName:name});!function(s,e){for(var t=0,n=As;t<n.length;t++){!function(t){var o=null;e&&e.level&&(o=Os[e.level]),t.userLogHandler=null===s?null:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}}).filter(function(t){return t}).join(" ");e>=(null!=o?o:t.logLevel)&&s({level:Ns[e].toLowerCase(),message:i,args:n,type:t.name})}}(n[t])}}(t,e)},apps:null,SDK_VERSION:Ws,INTERNAL:{registerComponent:o,removeApp:function(t){delete c[t]},components:h,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function f(t){if(!Zo(c,t=t||Us))throw Ms.create("no-app",{appName:t});return c[t]}function o(n){var e,t,r,i=n.name;if(h.has(i))return Vs.debug("There were multiple attempts to register component "+i+"."),"PUBLIC"===n.type?l[i]:null;h.set(i,n),"PUBLIC"===n.type&&(r=function(t){if(void 0===t&&(t=f()),"function"!=typeof t[i])throw Ms.create("invalid-app-argument",{appName:i});return t[i]()},void 0!==n.serviceProps&&Po(r,n.serviceProps),l[i]=r,u.prototype[i]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,i).apply(this,n.multipleInstances?t:[])});try{for(var o=wo(Object.keys(c)),s=o.next();!s.done;s=o.next()){var a=s.value;c[a]._addComponent(n)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return"PUBLIC"===n.type?l[i]:null}return l.default=l,Object.defineProperty(l,"apps",{get:function(){return Object.keys(c).map(function(t){return c[t]})}}),f.App=u,l}var M=function t(){var e=Hs(qs);return e.INTERNAL=mo(mo({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Po(e,t)},createSubscribe:os,ErrorFactory:zo,deepExtend:Po}),e}(),Gs=(Ks.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){t=t.getComponent();return"VERSION"===(null==t?void 0:t.type)}(t)){t=t.getImmediate();return t.library+"/"+t.version}return null}).filter(function(t){return t}).join(" ")},Ks);function Ks(t){this.container=t}"object"==typeof self&&self.self===self&&void 0!==self.firebase&&(Vs.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  "),(du=self.firebase.SDK_VERSION)&&0<=du.indexOf("LITE")&&Vs.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    "));var zs=M.initializeApp;M.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return}}()&&Vs.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),zs.apply(void 0,t)};var Qs,Xs,Ql=M;(Qs=Ql).INTERNAL.registerComponent(new bs("platform-logger",function(t){return new Gs(t)},"PRIVATE")),Qs.registerVersion(Fs,"0.6.11",Xs),Qs.registerVersion("fire-js","");Ql.registerVersion("firebase","7.24.0","app");(function(){var t,o="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var u=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function c(t){var e,n,r="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return r?r.call(t):{next:(e=t,n=0,function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}})}}!function(t,e){if(e){var n=u;t=t.split(".");for(var r=0;r<t.length-1;r++){var i=t[r];i in n||(n[i]={}),n=n[i]}(e=e(r=n[t=t[t.length-1]]))!=r&&null!=e&&o(n,t,{configurable:!0,writable:!0,value:e})}}("Promise",function(t){function s(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function e(){this.a=null}function a(e){return e instanceof s?e:new s(function(t){t(e)})}if(t)return t;e.prototype.b=function(t){var e;null==this.a&&(this.a=[],(e=this).c(function(){e.g()})),this.a.push(t)};var n=u.setTimeout;e.prototype.c=function(t){n(t,0)},e.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},e.prototype.f=function(t){this.c(function(){throw t})},s.prototype.f=function(){function t(e){return function(t){r||(r=!0,e.call(n,t))}}var n=this,r=!1;return{resolve:t(this.v),reject:t(this.g)}},s.prototype.v=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof s)this.o(t);else{t:switch(typeof t){case"object":var e=null!=t;break t;case"function":e=!0;break t;default:e=!1}e?this.m(t):this.h(t)}},s.prototype.m=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},s.prototype.g=function(t){this.i(2,t)},s.prototype.h=function(t){this.i(1,t)},s.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},s.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)i.b(this.a[t]);this.a=null}};var i=new e;return s.prototype.o=function(t){var e=this.f();t.Pa(e.resolve,e.reject)},s.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},s.prototype.then=function(t,e){function n(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(t){i(t)}}:t}var r,i,o=new s(function(t,e){r=t,i=e});return this.Pa(n(t,r),n(e,i)),o},s.prototype.catch=function(t){return this.then(void 0,t)},s.prototype.Pa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?i.b(n):this.a.push(n)},s.resolve=a,s.reject=function(n){return new s(function(t,e){e(n)})},s.race=function(i){return new s(function(t,e){for(var n=c(i),r=n.next();!r.done;r=n.next())a(r.value).Pa(t,e)})},s.all=function(t){var e=c(t),o=e.next();return o.done?a([]):new s(function(n,t){for(var r=[],i=0;r.push(void 0),i++,a(o.value).Pa(function(e){return function(t){r[e]=t,0==--i&&n(r)}}(r.length-1),t),!(o=e.next()).done;);})},s});var h=h||{},l=this||self,a=/^[\w+/_-]+[=]{0,2}$/,f=null;function s(){}function n(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function p(t){var e=n(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){return"function"==n(t)}function v(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var e="closure_uid_"+(1e9*Math.random()>>>0),r=0;function i(t,e,n){return t.call.apply(t.bind,arguments)}function y(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function g(t,e,n){return(g=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?i:y).apply(null,arguments)}function m(e){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var b=Date.now||function(){return+new Date};function _(t,e){function n(){}n.prototype=e.prototype,t.$a=e.prototype,t.prototype=new n,t.prototype.constructor=t}function w(t,e,n){this.code=T+t,this.message=e||S[t]||"",this.a=n||null}function E(t){var e=t&&t.code;return e?new w(e.substring(T.length),t.message,t.serverResponse):null}_(w,Error),w.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},w.prototype.toJSON=function(){return this.w()};var I,T="auth/",S={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},C={kd:{Sa:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},rd:{Sa:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://securetoken.googleapis.com/v1/token",Va:"https://identitytoolkit.googleapis.com/v2/",id:"p"},td:{Sa:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},ud:{Sa:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Ya:"https://test-securetoken.sandbox.googleapis.com/v1/token",Va:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function N(t){for(var e in C)if(C[e].id===t)return t=C[e],{firebaseEndpoint:t.Sa,secureTokenEndpoint:t.Ya,identityPlatformEndpoint:t.Va};return null}function A(t){if(t)try{return t.$goog_Thenable}catch(t){return}}function k(t){var e;Error.captureStackTrace?Error.captureStackTrace(this,k):(e=Error().stack)&&(this.stack=e),t&&(this.message=String(t))}function O(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");k.call(this,n+t[r])}function R(t){throw new O("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function P(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function D(t,e){t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}function x(){this.b=this.a=null}I=N("__EID__")?"__EID__":void 0,_(k,Error),k.prototype.name="CustomError",_(O,k),O.prototype.name="AssertionError",P.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t};var L=new P(function(){return new M},function(t){t.reset()});function M(){this.next=this.b=this.a=null}x.prototype.add=function(t,e){var n=L.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},M.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},M.prototype.reset=function(){this.next=this.b=this.a=null};var F=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},U=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var j=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n,r=t.length,i=[],o=0,s="string"==typeof t?t.split(""):t,a=0;a<r;a++){a in s&&(n=s[a],e.call(void 0,n,a,t)&&(i[o++]=n))}return i},V=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},q=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function B(t,e){return 0<=F(t,e)}function W(t,e){var n;return(n=0<=(e=F(t,e)))&&Array.prototype.splice.call(t,e,1),n}function H(n,r){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(n,function(t,e){r.call(void 0,t,e,n)&&1==Array.prototype.splice.call(n,e,1).length&&0})}function G(){return Array.prototype.concat.apply([],arguments)}function K(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var z,Q=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},X=/&/g,Y=/</g,J=/>/g,$=/"/g,Z=/'/g,tt=/\x00/g,et=/[\x00&<>"']/;function nt(t,e){return-1!=t.indexOf(e)}function rt(t,e){return t<e?-1:e<t?1:0}t:{var it=l.navigator;if(it){it=it.userAgent;if(it){z=it;break t}}z=""}function ot(t){return nt(z,t)}function st(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function at(t){for(var e in t)return;return 1}function ut(t){var e,n={};for(e in t)n[e]=t[e];return n}var ct="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ht(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<ct.length;i++)e=ct[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function lt(t,e){t:{try{var n=t&&t.ownerDocument,n=n&&(n.defaultView||n.parentWindow);if((n=n||l).Element&&n.Location){var r=n;break t}}catch(t){}r=null}if(r&&void 0!==r[e]&&(!t||!(t instanceof r[e])&&(t instanceof r.Location||t instanceof r.Element))){if(v(t))try{var i=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){i="<object could not be stringified>"}else i=void 0===t?"undefined":null===t?"null":typeof t;R("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,i)}}function ft(t,e){this.a=t===vt&&e||"",this.b=dt}function pt(t){return t instanceof ft&&t.constructor===ft&&t.b===dt?t.a:(R("expected object of type Const, got '"+t+"'"),"type_error:Const")}ft.prototype.sa=!0,ft.prototype.ra=function(){return this.a},ft.prototype.toString=function(){return"Const{"+this.a+"}"};var dt={},vt={},yt=new ft(vt,"");function gt(t,e){this.a=t===It&&e||"",this.b=Et}function mt(t){return t instanceof gt&&t.constructor===gt&&t.b===Et?t.a:(R("expected object of type TrustedResourceUrl, got '"+t+"' of type "+n(t)),"type_error:TrustedResourceUrl")}function bt(t,n){var r=pt(t);if(!wt.test(r))throw Error("Invalid TrustedResourceUrl format: "+r);return t=r.replace(_t,function(t,e){if(!Object.prototype.hasOwnProperty.call(n,e))throw Error('Found marker, "'+e+'", in format string, "'+r+'", but no valid label mapping found in args: '+JSON.stringify(n));return(t=n[e])instanceof ft?pt(t):encodeURIComponent(String(t))}),new gt(It,t)}gt.prototype.sa=!0,gt.prototype.ra=function(){return this.a.toString()},gt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var _t=/%{(\w+)}/g,wt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Et={},It={};function Tt(t,e){this.a=t===kt&&e||"",this.b=At}function St(t){return t instanceof Tt&&t.constructor===Tt&&t.b===At?t.a:(R("expected object of type SafeUrl, got '"+t+"' of type "+n(t)),"type_error:SafeUrl")}Tt.prototype.sa=!0,Tt.prototype.ra=function(){return this.a.toString()},Tt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Ct=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Nt(t){return t instanceof Tt?t:(t="object"==typeof t&&t.sa?t.ra():String(t),Ct.test(t)||(t="about:invalid#zClosurez"),new Tt(kt,t))}var At={},kt={};function Ot(){this.a="",this.b=Pt}function Rt(t){return t instanceof Ot&&t.constructor===Ot&&t.b===Pt?t.a:(R("expected object of type SafeHtml, got '"+t+"' of type "+n(t)),"type_error:SafeHtml")}Ot.prototype.sa=!0,Ot.prototype.ra=function(){return this.a.toString()},Ot.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Pt={};function Dt(t){var e=new Ot;return e.a=t,e}Dt("<!DOCTYPE html>");var xt=Dt("");function Lt(t){for(var e=t.split("%s"),n="",r=Array.prototype.slice.call(arguments,1);r.length&&1<e.length;)n+=e.shift()+r.shift();return n+e.join("%s")}function Mt(t){return et.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(X,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(Y,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(J,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace($,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(Z,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(tt,"&#0;"))),t}function Ft(t){return Ft[" "](t),t}Dt("<br>"),Ft[" "]=s;var Ut,jt=ot("Opera"),Vt=ot("Trident")||ot("MSIE"),qt=ot("Edge"),Bt=qt||Vt,Wt=ot("Gecko")&&!(nt(z.toLowerCase(),"webkit")&&!ot("Edge"))&&!(ot("Trident")||ot("MSIE"))&&!ot("Edge"),Ht=nt(z.toLowerCase(),"webkit")&&!ot("Edge");function Gt(){var t=l.document;return t?t.documentMode:void 0}t:{var Kt="",zt=(zt=z,Wt?/rv:([^\);]+)(\)|;)/.exec(zt):qt?/Edge\/([\d\.]+)/.exec(zt):Vt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(zt):Ht?/WebKit\/(\S+)/.exec(zt):jt?/(?:Version)[ \/]?(\S+)/.exec(zt):void 0);if(zt&&(Kt=zt?zt[1]:""),Vt){zt=Gt();if(null!=zt&&zt>parseFloat(Kt)){Ut=String(zt);break t}}Ut=Kt}var Qt,Xt={};function Yt(a){return t=a,e=function(){for(var t=0,e=Q(String(Ut)).split("."),n=Q(String(a)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=rt(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||rt(0==o[2].length,0==s[2].length)||rt(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t},n=Xt,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t);var t,e,n}Qt=l.document&&Vt?Gt():void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(t){}var Jt=!Vt||9<=Number(Qt);function $t(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function Zt(n,t){st(t,function(t,e){t&&"object"==typeof t&&t.sa&&(t=t.ra()),"style"==e?n.style.cssText=t:"class"==e?n.className=t:"for"==e?n.htmlFor=t:ne.hasOwnProperty(e)?n.setAttribute(ne[e],t):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?n.setAttribute(e,t):n[e]=t})}var te,ee,ne={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function re(){var t,e=arguments,n=document,r=String(e[0]),i=e[1];return!Jt&&i&&(i.name||i.type)&&(r=["<",r],i.name&&r.push(' name="',Mt(i.name),'"'),i.type&&(r.push(' type="',Mt(i.type),'"'),ht(t={},i),delete t.type,i=t),r.push(">"),r=r.join("")),r=ie(n,r),i&&("string"==typeof i?r.className=i:Array.isArray(i)?r.className=i.join(" "):Zt(r,i)),2<e.length&&function(e,n,t){function r(t){t&&n.appendChild("string"==typeof t?e.createTextNode(t):t)}for(var i=2;i<t.length;i++){var o=t[i];!p(o)||v(o)&&0<o.nodeType?r(o):U(function(t){if(t&&"number"==typeof t.length){if(v(t))return"function"==typeof t.item||"string"==typeof t.item;if(d(t))return"function"==typeof t.item}return!1}(o)?K(o):o,r)}}(n,r,e),r}function ie(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function oe(t){l.setTimeout(function(){throw t},0)}function se(){var t=l.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ot("Presto")&&(t=function(){var t,e,n=ie(document,"IFRAME");n.style.display="none",t=n,e=new gt(It,pt(yt)),lt(t,"HTMLIFrameElement"),t.src=mt(e).toString(),document.documentElement.appendChild(n);var r=n.contentWindow;(n=r.document).open(),n.write(Rt(xt)),n.close();var i="callImmediate"+Math.random(),o="file:"==r.location.protocol?"*":r.location.protocol+"//"+r.location.host;n=g(function(t){"*"!=o&&t.origin!=o||t.data!=i||this.port1.onmessage()},this),r.addEventListener("message",n,!1),this.port1={},this.port2={postMessage:function(){r.postMessage(i,o)}}}),void 0===t||ot("Trident")||ot("MSIE"))return function(t){l.setTimeout(t,0)};var e=new t,n={},r=n;return e.port1.onmessage=function(){var t;void 0!==n.next&&(t=(n=n.next).Fb,n.Fb=null,t())},function(t){r.next={Fb:t},r=r.next,e.port2.postMessage(0)}}function ae(t,e){ee||function(){{var t;ee=l.Promise&&l.Promise.resolve?(t=l.Promise.resolve(void 0),function(){t.then(he)}):function(){var t=he;!d(l.setImmediate)||l.Window&&l.Window.prototype&&!ot("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(te=te||se())(t):l.setImmediate(t)}}}(),ue||(ee(),ue=!0),ce.add(t,e)}var ue=!1,ce=new x;function he(){for(var t,e,n;n=e=void 0,n=null,(e=ce).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){oe(t)}D(L,t)}ue=!1}function le(t,e){if(this.a=fe,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=s)try{var n=this;t.call(e,function(t){Te(n,pe,t)},function(t){if(!(t instanceof Re))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Te(n,de,t)})}catch(t){Te(this,de,t)}}var fe=0,pe=2,de=3;function ve(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}ve.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var ye=new P(function(){return new ve},function(t){t.reset()});function ge(t,e,n){var r=ye.get();return r.g=t,r.b=e,r.f=n,r}function me(t){if(t instanceof le)return t;var e=new le(s);return Te(e,pe,t),e}function be(n){return new le(function(t,e){e(n)})}function _e(t,e,n){Se(t,e,n,null)||ae(m(e,t))}function we(n){return new le(function(r){var i=n.length,o=[];if(i)for(var t=function(t,e,n){i--,o[t]=e?{Ob:!0,value:n}:{Ob:!1,reason:n},0==i&&r(o)},e=0;e<n.length;e++)_e(n[e],m(t,e,!0),m(t,e,!1));else r(o)})}function Ee(t,e){t.b||t.a!=pe&&t.a!=de||Ce(t),t.f?t.f.next=e:t.b=e,t.f=e}function Ie(t,i,o,s){var e=ge(null,null,null);return e.a=new le(function(n,r){e.g=i?function(t){try{var e=i.call(s,t);n(e)}catch(t){r(t)}}:n,e.b=o?function(t){try{var e=o.call(s,t);void 0===e&&t instanceof Re?r(t):n(e)}catch(t){r(t)}}:r}),Ee(e.a.c=t,e),e.a}function Te(t,e,n){var r,i;t.a==fe&&(t===n&&(e=de,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Se(n,t.Zc,t.$c,t)||(t.i=n,t.a=e,t.c=null,Ce(t),e!=de||n instanceof Re||(i=n,(r=t).g=!0,ae(function(){r.g&&Oe.call(null,i)}))))}function Se(t,e,n,r){if(t instanceof le)return Ee(t,ge(e||s,n||null,r)),1;if(A(t))return t.then(e,n,r),1;if(v(t))try{var i=t.then;if(d(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,function(t){s||(s=!0,n.call(i,t))},o)}catch(t){o(t)}}(t,i,e,n,r),1}catch(t){return n.call(r,t),1}}function Ce(t){t.h||(t.h=!0,ae(t.fc,t))}function Ne(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Ae(t,e,n,r){if(n==de&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,ke(e,n,r);else try{e.c?e.g.call(e.f):ke(e,n,r)}catch(t){Oe.call(null,t)}D(ye,e)}function ke(t,e,n){e==pe?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}le.prototype.then=function(t,e,n){return Ie(this,d(t)?t:null,d(e)?e:null,n)},le.prototype.$goog_Thenable=!0,(t=le.prototype).na=function(t,e){return(t=ge(t,t,e)).c=!0,Ee(this,t),this},t.s=function(t,e){return Ie(this,null,t,e)},t.cancel=function(t){var e;this.a==fe&&(e=new Re(t),ae(function(){!function t(e,n){if(e.a==fe)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,s=null,a=r.b;a&&(a.c||(i++,a.a==e&&(o=a),!(o&&1<i)));a=a.next)o||(s=a);o&&(r.a==fe&&1==i?t(r,n):(s?((i=s).next==r.f&&(r.f=i),i.next=i.next.next):Ne(r),Ae(r,o,de,n)))}e.c=null}else Te(e,de,n)}(this,e)},this))},t.Zc=function(t){this.a=fe,Te(this,pe,t)},t.$c=function(t){this.a=fe,Te(this,de,t)},t.fc=function(){for(var t;t=Ne(this);)Ae(this,t,this.a,this.i);this.h=!1};var Oe=oe;function Re(t){k.call(this,t)}function Pe(){this.xa=this.xa,this.oa=this.oa}_(Re,k);var De=0;function xe(t){t.xa||(t.xa=!0,t.Da(),0==De)||(t=t,Object.prototype.hasOwnProperty.call(t,e)&&t[e]||(t[e]=++r))}Pe.prototype.xa=!(Re.prototype.name="cancel"),Pe.prototype.Da=function(){if(this.oa)for(;this.oa.length;)this.oa.shift()()};var Le=Object.freeze||function(t){return t},Me=!Vt||9<=Number(Qt),Fe=Vt&&!Yt("9"),Ue=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{l.addEventListener("test",s,e),l.removeEventListener("test",s,e)}catch(t){}return t}();function je(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Ve(t,e){if(je.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Wt){t:{try{Ft(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:qe[t.pointerType]||"",(this.a=t).defaultPrevented&&this.preventDefault()}}je.prototype.preventDefault=function(){this.defaultPrevented=!0},_(Ve,je);var qe=Le({2:"touch",3:"pen",4:"mouse"});Ve.prototype.preventDefault=function(){Ve.$a.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Fe)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}},Ve.prototype.g=function(){return this.a};var Be="closure_listenable_"+(1e6*Math.random()|0),We=0;function He(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Ua=i,this.key=++We,this.va=this.Oa=!1}function Ge(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Ua=null}function Ke(t){this.src=t,this.a={},this.b=0}function ze(t,e){var n=e.type;n in t.a&&W(t.a[n],e)&&(Ge(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function Qe(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Ua==r)return i}return-1}Ke.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Qe(t,e,r,i);return-1<s?(e=t[s],n||(e.Oa=!1)):((e=new He(e,this.src,o,!!r,i)).Oa=n,t.push(e)),e};var Xe="closure_lm_"+(1e6*Math.random()|0),Ye={};function Je(t,e,n,r,i){if(r&&r.once)Ze(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)Je(t,e[o],n,r,i);else n=cn(n),t&&t[Be]?ln(t,e,n,v(r)?!!r.capture:!!r,i):$e(t,e,n,!1,r,i)}function $e(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s,a,u=v(i)?!!i.capture:!!i,c=an(t);if(c||(t[Xe]=c=new Ke(t)),!(n=c.add(e,n,r,u,o)).proxy)if(s=sn,r=a=Me?function(t){return s.call(a.src,a.listener,t)}:function(t){if(!(t=s.call(a.src,a.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)Ue||(i=u),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(nn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function Ze(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Ze(t,e[o],n,r,i);else n=cn(n),t&&t[Be]?fn(t,e,n,v(r)?!!r.capture:!!r,i):$e(t,e,n,!0,r,i)}function tn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)tn(t,e[o],n,r,i);else r=v(r)?!!r.capture:!!r,n=cn(n),t&&t[Be]?(t=t.v,(e=String(e).toString())in t.a&&(-1<(n=Qe(o=t.a[e],n,r,i))&&(Ge(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):(t=t&&an(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Qe(e,n,r,i)),(n=-1<t?e[t]:null)&&en(n))}function en(t){var e,n,r;"number"!=typeof t&&t&&!t.va&&((e=t.src)&&e[Be]?ze(e.v,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(nn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=an(e))?(ze(n,t),0==n.b&&(n.src=null,e[Xe]=null)):Ge(t)))}function nn(t){return t in Ye?Ye[t]:Ye[t]="on"+t}function rn(t,e,n,r){var i=!0;if((t=an(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=on(o,r),i=i&&!1!==o)}return i}function on(t,e){var n=t.listener,r=t.Ua||t.src;return t.Oa&&en(t),n.call(r,e)}function sn(t,e){if(t.va)return!0;if(Me)return on(t,new Ve(e,this));if(!e)t:{e=["window","event"];for(var n=l,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Ve(r=e,this),n=!0,!(r.keyCode<0||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}!i&&null!=r.returnValue||(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=rn(r[i],t,!0,e),n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=rn(r[i],t,!1,e),n=n&&o}return n}function an(t){return(t=t[Xe])instanceof Ke?t:null}var un="__closure_events_fn_"+(1e9*Math.random()>>>0);function cn(e){return d(e)?e:(e[un]||(e[un]=function(t){return e.handleEvent(t)}),e[un])}function hn(){Pe.call(this),this.v=new Ke(this),(this.$b=this).fb=null}function ln(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function fn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function pn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s,a,u=e[o];u&&!u.va&&u.capture==n&&(s=u.listener,a=u.Ua||u.src,u.Oa&&ze(t.v,u),i=!1!==s.call(a,r)&&i)}return i&&!r.defaultPrevented}function dn(t,e,n){if(d(t))n&&(t=g(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=g(t.handleEvent,t)}return 2147483647<Number(e)?-1:l.setTimeout(t,e||0)}function vn(n){var r=null;return new le(function(t,e){-1==(r=dn(function(){t(void 0)},n))&&e(Error("Failed to schedule timer."))}).s(function(t){throw l.clearTimeout(r),t})}function yn(t){if(t.V&&"function"==typeof t.V)return t.V();if("string"==typeof t)return t.split("");if(p(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function gn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.V||"function"!=typeof t.V){if(p(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function mn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof mn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function bn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];_n(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){for(var i={},n=e=0;e<t.a.length;)_n(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function _n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}_(hn,Pe),hn.prototype[Be]=!0,hn.prototype.addEventListener=function(t,e,n,r){Je(this,t,e,n,r)},hn.prototype.removeEventListener=function(t,e,n,r){tn(this,t,e,n,r)},hn.prototype.dispatchEvent=function(t){var e,n=this.fb;if(n)for(e=[];n;n=n.fb)e.push(n);n=this.$b;var r=t.type||t;if("string"==typeof t?t=new je(t,n):t instanceof je?t.target=t.target||n:(s=t,ht(t=new je(r,n),s)),s=!0,e)for(var i=e.length-1;0<=i;i--)var o=t.b=e[i],s=pn(o,r,!0,t)&&s;if(s=pn(o=t.b=n,r,!0,t)&&s,s=pn(o,r,!1,t)&&s,e)for(i=0;i<e.length;i++)s=pn(o=t.b=e[i],r,!1,t)&&s;return s},hn.prototype.Da=function(){if(hn.$a.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Ge(n[r]);delete e.a[t],e.b--}}this.fb=null},(t=mn.prototype).V=function(){bn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return bn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return _n(this.b,t)?this.b[t]:e},t.set=function(t,e){_n(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var wn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/\\#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function En(t,e){var n;this.a=this.l=this.f="",this.g=null,this.h=this.c="",this.i=!1,t instanceof En?(this.i=void 0!==e?e:t.i,In(this,t.f),this.l=t.l,this.a=t.a,Tn(this,t.g),this.c=t.c,Sn(this,Hn(t.b)),this.h=t.h):t&&(n=String(t).match(wn))?(this.i=!!e,In(this,n[1]||"",!0),this.l=On(n[2]||""),this.a=On(n[3]||"",!0),Tn(this,n[4]),this.c=On(n[5]||"",!0),Sn(this,n[6]||"",!0),this.h=On(n[7]||"")):(this.i=!!e,this.b=new Un(null,this.i))}function In(t,e,n){t.f=n?On(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Tn(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Sn(t,e,n){var r,i;e instanceof Un?(t.b=e,r=t.b,(i=t.i)&&!r.f&&(jn(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(qn(this,e),Wn(this,n,t))},r)),r.f=i):(n||(e=Rn(e,Mn)),t.b=new Un(e,t.i))}function Cn(t,e,n){t.b.set(e,n)}function Nn(t,e){return t.b.get(e)}function An(t){return t instanceof En?new En(t):new En(t,void 0)}function kn(t,e,n,r){var i=new En(null,void 0);return t&&In(i,t),e&&(i.a=e),n&&Tn(i,n),r&&(i.c=r),i}function On(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Rn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Pn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Pn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}En.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Rn(e,Dn,!0),":");var n=this.a;return!n&&"file"!=e||(t.push("//"),(e=this.l)&&t.push(Rn(e,Dn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.c)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Rn(n,"/"==n.charAt(0)?Ln:xn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Rn(n,Fn)),t.join("")},En.prototype.resolve=function(t){var e=new En(this),n=!!t.f;n?In(e,t.f):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r,i=t.c;if(n)Tn(e,t.g);else if(n=!!t.c){if("/"!=i.charAt(0)&&(this.a&&!this.c?i="/"+i:-1!=(r=e.c.lastIndexOf("/"))&&(i=e.c.substr(0,r+1)+i)),".."==(r=i)||"."==r)i="";else if(nt(r,"./")||nt(r,"/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var o=[],s=0;s<r.length;){var a=r[s++];"."==a?i&&s==r.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),i&&s==r.length&&o.push("")):(o.push(a),i=!0)}i=o.join("/")}else i=r}return n?e.c=i:n=""!==t.b.toString(),n?Sn(e,Hn(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Dn=/[#\/\?@]/g,xn=/[#\?:]/g,Ln=/[#\?]/g,Mn=/[#\?@]/g,Fn=/#/g;function Un(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function jn(n){n.a||(n.a=new mn,n.b=0,n.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r,i=t[n].indexOf("="),o=null;0<=i?(r=t[n].substring(0,i),o=t[n].substring(i+1)):r=t[n],e(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function Vn(t){var e=gn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Un(null,void 0);t=yn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Wn(n,i,o):n.add(i,o)}return n}function qn(t,e){jn(t),e=Gn(t,e),_n(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,_n((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&bn(t)))}function Bn(t,e){return jn(t),e=Gn(t,e),_n(t.a.b,e)}function Wn(t,e,n){qn(t,e),0<n.length&&(t.c=null,t.a.set(Gn(t,e),K(n)),t.b+=n.length)}function Hn(t){var e=new Un;return e.c=t.c,t.a&&(e.a=new mn(t.a),e.b=t.b),e}function Gn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Kn(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",s=0;s<n;s++)r.push(o),t(e,i[s],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&(s=n[i],"function"!=typeof s&&(r.push(o),Yn(i,r),r.push(":"),t(e,s,r),o=","));return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":Yn(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new zn,t,e),e.join("")}function zn(){}(t=Un.prototype).add=function(t,e){jn(this),this.c=null,t=Gn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(n,r){jn(this),this.a.forEach(function(t,e){U(t,function(t){n.call(r,t,e,this)},this)},this)},t.Y=function(){jn(this);for(var t=this.a.V(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.V=function(t){jn(this);var e=[];if("string"==typeof t)Bn(this,t)&&(e=G(e,this.a.get(Gn(this,t))));else{t=this.a.V();for(var n=0;n<t.length;n++)e=G(e,t[n])}return e},t.set=function(t,e){return jn(this),this.c=null,Bn(this,t=Gn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),r=this.V(r),o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}return this.c=t.join("&")};var Qn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Xn=/\uffff/.test("ï¿¿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Yn(t,e){e.push('"',t.replace(Xn,function(t){var e=Qn[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Qn[t]=e),e}),'"')}function Jn(){var t=yr();return Vt&&Qt&&11==Qt||/Edge\/\d+/.test(t)}function $n(){return l.window&&l.window.location.href||self&&self.location&&self.location.href||""}function Zn(t,e){e=e||l.window;var n="about:blank";t&&(n=St(Nt(t))),e.location.href=n}function tr(t){return!!((t=(t||yr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function er(t){t=t||l.window;try{t.close()}catch(t){}}function nr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=yr().toLowerCase(),r&&(e.target=r,nt(n,"crios/")&&(e.target="_blank")),pr(yr())==lr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Tt?n:Nt(void 0!==n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((ot("iPhone")&&!ot("iPod")&&!ot("iPad")||ot("iPad")||ot("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(lt(s=ie(document,"A"),"HTMLAnchorElement"),e instanceof Tt||e instanceof Tt||(e="object"==typeof e&&e.sa?e.ra():String(e),Ct.test(e)||(e="about:invalid#zClosurez"),e=new Tt(kt,e)),s.href=St(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=r.open("",n,s),t=St(e),s&&(Bt&&nt(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t=Dt('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Mt(t)+'">'),r=s.document)&&(r.write(Rt(t)),r.close())):(s=r.open(St(e),n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var rr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ir=/^[^@]+@[^@]+$/;function or(){var e=null;return new le(function(t){"complete"==l.document.readyState?t():(e=function(){t()},Ze(window,"load",e))}).s(function(t){throw tn(window,"load",e),t})}function sr(t){return t=t||yr(),!("file:"!==wr()&&"ionic:"!==wr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function ar(){var t=l.window;try{return t&&t!=t.top}catch(t){return}}function ur(){return void 0!==l.WorkerGlobalScope&&"function"==typeof l.importScripts}function cr(){return Ql.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Ql.INTERNAL.hasOwnProperty("node")?"Node":ur()?"Worker":"Browser"}function hr(){var t=cr();return"ReactNative"===t||"Node"===t}var lr="Firefox",fr="Chrome";function pr(t){var e=t.toLowerCase();return nt(e,"opera/")||nt(e,"opr/")||nt(e,"opios/")?"Opera":nt(e,"iemobile")?"IEMobile":nt(e,"msie")||nt(e,"trident/")?"IE":nt(e,"edge/")?"Edge":nt(e,"firefox/")?lr:nt(e,"silk/")?"Silk":nt(e,"blackberry")?"Blackberry":nt(e,"webos")?"Webos":!nt(e,"safari/")||nt(e,"chrome/")||nt(e,"crios/")||nt(e,"android")?!nt(e,"chrome/")&&!nt(e,"crios/")||nt(e,"edge/")?nt(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":fr:"Safari"}var dr={ld:"FirebaseCore-web",nd:"FirebaseUI-web"};function vr(t,e){e=e||[];var n,r=[],i={};for(n in dr)i[dr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=cr())?r=pr(i=yr()):"Worker"===r&&(r=pr(i=yr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function yr(){return l.navigator&&l.navigator.userAgent||""}function gr(t,e){t=t.split("."),e=e||l;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function mr(){try{var t=l.localStorage,e=Cr();if(t)return t.setItem(e,"1"),t.removeItem(e),!Jn()||!!l.indexedDB}catch(t){return ur()&&!!l.indexedDB}return!1}function br(){return(_r()||"chrome-extension:"===wr()||sr())&&!hr()&&mr()&&!ur()}function _r(){return"http:"===wr()||"https:"===wr()}function wr(){return l.location&&l.location.protocol||null}function Er(t){return!tr(t=t||yr())&&pr(t)!=lr}function Ir(t){return void 0===t?null:Kn(t)}function Tr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Sr(t){if(null!==t)return JSON.parse(t)}function Cr(t){return t||Math.floor(1e9*Math.random()).toString()}function Nr(t){return"Safari"!=pr(t=t||yr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Ar(){var t=l.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function kr(t,e){if(e<t)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=yr(),e=cr(),this.b=tr(t)||"ReactNative"===e}function Or(){var t=l.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Rr(t){"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t)}function Pr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Dr(){return gr("fireauth.oauthhelper",l)||gr("fireauth.iframe",l)}kr.prototype.get=function(){var t=l.navigator;return!t||"boolean"!=typeof t.onLine||!_r()&&"chrome-extension:"!==wr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var xr,Lr={};function Mr(t){Lr[t]||(Lr[t]=!0,Rr(t))}try{var Fr={};Object.defineProperty(Fr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Fr,"abcd",{configurable:!0,enumerable:!0,value:2}),xr=2==Fr.abcd}catch(t){xr=!1}function Ur(t,e,n){xr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function jr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Ur(t,n,e[n])}function Vr(t){var e={};return jr(e,t),e}function qr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Ur(e,n,qr(t[n]));return e}function Br(t){var e=t&&(t[zr]?"phone":null);if(!(e&&t&&t[Kr]))throw new w("internal-error","Internal assert: invalid MultiFactorInfo object");Ur(this,"uid",t[Kr]),Ur(this,"displayName",t[Hr]||null);var n=null;t[Gr]&&(n=new Date(t[Gr]).toUTCString()),Ur(this,"enrollmentTime",n),Ur(this,"factorId",e)}function Wr(t){try{var e=new Qr(t)}catch(t){e=null}return e}Br.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Hr="displayName",Gr="enrolledAt",Kr="mfaEnrollmentId",zr="phoneInfo";function Qr(t){Br.call(this,t),Ur(this,"phoneNumber",t[zr])}function Xr(t){var e={},n=t[Zr],r=t[ei],i=t[ni];if(t=Wr(t[ti]),!i||i!=Jr&&i!=$r&&!n||i==$r&&!r||i==Yr&&!t)throw Error("Invalid checkActionCode response!");i==$r?(e[ii]=n||null,e[si]=n||null,e[ri]=r):(e[ii]=r||null,e[si]=r||null,e[ri]=n||null),e[oi]=t||null,Ur(this,ui,i),Ur(this,ai,qr(e))}_(Qr,Br),Qr.prototype.w=function(){var t=Qr.$a.w.call(this);return t.phoneNumber=this.phoneNumber,t};var Yr="REVERT_SECOND_FACTOR_ADDITION",Jr="EMAIL_SIGNIN",$r="VERIFY_AND_CHANGE_EMAIL",Zr="email",ti="mfaInfo",ei="newEmail",ni="requestType",ri="email",ii="fromEmail",oi="multiFactorInfo",si="previousEmail",ai="data",ui="operation";function ci(t){var e=Nn(t=An(t),hi)||null,n=Nn(t,li)||null,r=(r=Nn(t,di)||null)&&yi[r]||null;if(!e||!n||!r)throw new w("argument-error",hi+", "+li+"and "+di+" are required in a valid action code URL.");jr(this,{apiKey:e,operation:r,code:n,continueUrl:Nn(t,fi)||null,languageCode:Nn(t,pi)||null,tenantId:Nn(t,vi)||null})}var hi="apiKey",li="oobCode",fi="continueUrl",pi="languageCode",di="mode",vi="tenantId",yi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:Yr,signIn:Jr,verifyAndChangeEmail:$r,verifyEmail:"VERIFY_EMAIL"};function gi(t){try{return new ci(t)}catch(t){return null}}function mi(t){var e=t[Ii];if(void 0===e)throw new w("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new w("invalid-continue-uri");if(this.h=e,this.b=this.a=null,this.g=!1,(r=t[bi])&&"object"==typeof r){e=r[Ci];var n=r[Ti],r=r[Si];if("string"==typeof e&&e.length){if(this.a=e,void 0!==n&&"boolean"!=typeof n)throw new w("argument-error",Ti+" property must be a boolean when specified.");if(this.g=!!n,void 0!==r&&("string"!=typeof r||"string"==typeof r&&!r.length))throw new w("argument-error",Si+" property must be a non empty string when specified.");this.b=r||null}else{if(void 0!==e)throw new w("argument-error",Ci+" property must be a non empty string when specified.");if(void 0!==n||void 0!==r)throw new w("missing-android-pkg-name")}}else if(void 0!==r)throw new w("argument-error",bi+" property must be a non null object when specified.");if(this.f=null,(e=t[Ei])&&"object"==typeof e){if("string"==typeof(e=e[Ni])&&e.length)this.f=e;else if(void 0!==e)throw new w("argument-error",Ni+" property must be a non empty string when specified.")}else if(void 0!==e)throw new w("argument-error",Ei+" property must be a non null object when specified.");if(void 0!==(e=t[wi])&&"boolean"!=typeof e)throw new w("argument-error",wi+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[_i])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new w("argument-error",_i+" property must be a non empty string when specified.");this.i=t||null}var bi="android",_i="dynamicLinkDomain",wi="handleCodeInApp",Ei="iOS",Ii="url",Ti="installApp",Si="minimumVersion",Ci="packageName",Ni="bundleId";function Ai(t){var e,n={};for(e in n.continueUrl=t.h,n.canHandleCodeInApp=t.c,(n.androidPackageName=t.a)&&(n.androidMinimumVersion=t.b,n.androidInstallApp=t.g),n.iOSBundleId=t.f,n.dynamicLinkDomain=t.i,n)null===n[e]&&delete n[e];return n}var ki=null;function Oi(t){var e="";return function(r,t){function e(t){for(;i<r.length;){var e=r.charAt(i++),n=ki[e];if(null!=n)return n;if(!/^[\s\xa0]*$/.test(e))throw Error("Unknown base64 encoding at char: "+e)}return t}!function(){if(!ki){ki={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;n<5;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===ki[o]&&(ki[o]=i)}}}();for(var i=0;;){var n=e(-1),o=e(0),s=e(64),a=e(64);if(64===a&&-1===n)break;t(n<<2|o>>4),64!=s&&(t(o<<4&240|s>>2),64!=a&&t(s<<6&192|a))}}(t,function(t){e+=String.fromCharCode(t)}),e}function Ri(t){var e=Di(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.g=t,this.c=e.exp,this.h=e.sub,this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function Pi(t){try{return new Ri(t)}catch(t){return null}}function Di(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(Oi(t))}catch(t){}return null}Ri.prototype.S=function(){return this.f},Ri.prototype.i=function(){return this.b},Ri.prototype.toString=function(){return this.g};var xi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Li=["client_id","response_type","scope","redirect_uri","state"],Mi={md:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Wa:Li},od:{Ja:null,ua:500,ta:750,fa:"github.com",Wa:Li},pd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Wa:Li},vd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Wa:xi},jd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Wa:[]}};function Fi(t){for(var e in Mi)if(Mi[e].fa==t)return Mi[e];return null}function Ui(t){var e={};e["facebook.com"]=Wi,e["google.com"]=Gi,e["github.com"]=Hi,e["twitter.com"]=Ki;var n=t&&t[Vi];try{if(n)return new(e[n]?e[n]:Bi)(t);if(void 0!==t[ji])return new qi(t)}catch(t){}return null}var ji="idToken",Vi="providerId";function qi(t){var e,n=t[Vi];if(n||!t[ji]||(e=Pi(t[ji]))&&e.a&&(n=e.a),!n)throw Error("Invalid additional user info!");"anonymous"!=n&&"custom"!=n||(n=null),e=!1,void 0!==t.isNewUser?e=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(e=!0),Ur(this,"providerId",n),Ur(this,"isNewUser",e)}function Bi(t){qi.call(this,t),Ur(this,"profile",qr((t=Sr(t.rawUserInfo||"{}"))||{}))}function Wi(t){if(Bi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Hi(t){if(Bi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Ur(this,"username",this.profile&&this.profile.login||null)}function Gi(t){if(Bi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Ki(t){if(Bi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Ur(this,"username",t.screenName||null)}function zi(t){var e=Nn(r=An(t),"link"),n=Nn(An(e),"link"),r=Nn(r,"deep_link_id");return Nn(An(r),"link")||r||n||e||t}function Qi(t,e){if(!t&&!e)throw new w("internal-error","Internal assert: no raw session string available");if(t&&e)throw new w("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?Xi:Yi}_(Bi,qi),_(Wi,Bi),_(Hi,Bi),_(Gi,Bi),_(Ki,Bi);var Xi="enroll",Yi="signin";function Ji(){}function $i(t,n){return t.then(function(t){if(t[qs]){var e=Pi(t[qs]);if(!e||n!=e.h)throw new w("user-mismatch");return t}throw new w("user-mismatch")}).s(function(t){throw t&&t.code&&t.code==T+"user-not-found"?new w("user-mismatch"):t})}function Zi(t,e){if(!e)throw new w("internal-error","failed to construct a credential");this.a=e,Ur(this,"providerId",t),Ur(this,"signInMethod",t)}function to(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function eo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new Zi(t.providerId,t.pendingToken)}catch(t){}return null}function no(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Ur(this,"idToken",e.idToken),e.accessToken&&Ur(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Ur(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new w("internal-error","failed to construct a credential");Ur(this,"accessToken",e.oauthToken),Ur(this,"secret",e.oauthTokenSecret)}Ur(this,"providerId",t),Ur(this,"signInMethod",n)}function ro(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Vn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function io(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new no(t.providerId,e,t.signInMethod)}catch(t){}}return null}function oo(t,e){this.Pc=e||[],jr(this,{providerId:t,isOAuthProvider:!0}),this.Hb={},this.ob=(Fi(t)||{}).Ja||null,this.nb=null}function so(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new w("argument-error",'SAML provider IDs must be prefixed with "saml."');oo.call(this,t,[])}function ao(t){oo.call(this,t,Li),this.a=[]}function uo(){ao.call(this,"facebook.com")}function co(t){if(!t)throw new w("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new uo).credential({accessToken:e})}function ho(){ao.call(this,"github.com")}function lo(t){if(!t)throw new w("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new ho).credential({accessToken:e})}function fo(){ao.call(this,"google.com"),this.Ca("profile")}function po(t,e){var n=t;return v(t)&&(n=t.idToken,e=t.accessToken),(new fo).credential({idToken:n,accessToken:e})}function vo(){oo.call(this,"twitter.com",xi)}function yo(t,e){var n=t;if(v(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new w("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new no("twitter.com",n,"twitter.com")}function go(t,e,n){this.a=t,this.f=e,Ur(this,"providerId","password"),Ur(this,"signInMethod",n===bo.EMAIL_LINK_SIGN_IN_METHOD?bo.EMAIL_LINK_SIGN_IN_METHOD:bo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function mo(t){return t&&t.email&&t.password?new go(t.email,t.password,t.signInMethod):null}function bo(){jr(this,{providerId:"password",isOAuthProvider:!1})}function _o(t,e){if(!(e=wo(e)))throw new w("argument-error","Invalid email link!");return new go(t,e.code,bo.EMAIL_LINK_SIGN_IN_METHOD)}function wo(t){return(t=gi(t=zi(t)))&&t.operation===Jr?t:null}function Eo(t){if(!(t.cb&&t.bb||t.La&&t.ea))throw new w("internal-error");this.a=t,Ur(this,"providerId","phone"),this.fa="phone",Ur(this,"signInMethod","phone")}function Io(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var n={};return U(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(t){e[t]&&(n[t]=e[t])}),new Eo(n)}return null}function To(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.cb,code:t.a.bb}}function So(t){try{this.a=t||Ql.auth()}catch(t){throw new w("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}jr(this,{providerId:"phone",isOAuthProvider:!1})}function Co(t,e){if(!t)throw new w("missing-verification-id");if(!e)throw new w("missing-verification-code");return new Eo({cb:t,bb:e})}function No(t){if(t.temporaryProof&&t.phoneNumber)return new Eo({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return po(o,n);case"facebook.com":return co(n);case"github.com":return lo(n);case"twitter.com":return yo(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new Zi(e,s):new no(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new ao(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function Ao(t){if(!t.isOAuthProvider)throw new w("invalid-oauth-provider")}function ko(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new w("invalid-auth-event");if(this.g&&this.a)throw new w("invalid-auth-event");if(this.g&&!this.f)throw new w("invalid-auth-event")}function Oo(t){return(t=t||{}).type?new ko(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&E(t.error),t.postBody,t.tenantId):null}function Ro(){this.b=null,this.a=[]}Qi.prototype.Ha=function(){return this.a?me(this.a):me(this.b)},Qi.prototype.w=function(){return this.type==Xi?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},Ji.prototype.ja=function(){},Ji.prototype.b=function(){},Ji.prototype.c=function(){},Ji.prototype.w=function(){},Zi.prototype.ja=function(t){return ca(t,to(this))},Zi.prototype.b=function(t,e){var n=to(this);return n.idToken=e,ha(t,n)},Zi.prototype.c=function(t,e){return $i(la(t,to(this)),e)},Zi.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},no.prototype.ja=function(t){return ca(t,ro(this))},no.prototype.b=function(t,e){var n=ro(this);return n.idToken=e,ha(t,n)},no.prototype.c=function(t,e){return $i(la(t,ro(this)),e)},no.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},oo.prototype.Ka=function(t){return this.Hb=ut(t),this},_(so,oo),_(ao,oo),ao.prototype.Ca=function(t){return B(this.a,t)||this.a.push(t),this},ao.prototype.Pb=function(){return K(this.a)},ao.prototype.credential=function(t,e){e=v(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null};if(!e.idToken&&!e.accessToken)throw new w("argument-error","credential failed: must provide the ID token and/or the access token.");return new no(this.providerId,e,this.providerId)},_(uo,ao),Ur(uo,"PROVIDER_ID","facebook.com"),Ur(uo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),_(ho,ao),Ur(ho,"PROVIDER_ID","github.com"),Ur(ho,"GITHUB_SIGN_IN_METHOD","github.com"),_(fo,ao),Ur(fo,"PROVIDER_ID","google.com"),Ur(fo,"GOOGLE_SIGN_IN_METHOD","google.com"),_(vo,oo),Ur(vo,"PROVIDER_ID","twitter.com"),Ur(vo,"TWITTER_SIGN_IN_METHOD","twitter.com"),go.prototype.ja=function(t){return this.signInMethod==bo.EMAIL_LINK_SIGN_IN_METHOD?Ka(t,ba,{email:this.a,oobCode:this.f}):Ka(t,qa,{email:this.a,password:this.f})},go.prototype.b=function(t,e){return this.signInMethod==bo.EMAIL_LINK_SIGN_IN_METHOD?Ka(t,_a,{idToken:e,email:this.a,oobCode:this.f}):Ka(t,Da,{idToken:e,email:this.a,password:this.f})},go.prototype.c=function(t,e){return $i(this.ja(t),e)},go.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},jr(bo,{PROVIDER_ID:"password"}),jr(bo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),jr(bo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Eo.prototype.ja=function(t){return t.eb(To(this))},Eo.prototype.b=function(t,e){var n=To(this);return n.idToken=e,Ka(t,Wa,n)},Eo.prototype.c=function(t,e){var n=To(this);return n.operation="REAUTH",$i(t=Ka(t,Ha,n),e)},Eo.prototype.w=function(){var t={providerId:"phone"};return this.a.cb&&(t.verificationId=this.a.cb),this.a.bb&&(t.verificationCode=this.a.bb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},So.prototype.eb=function(r,i){var o=this.a.a;return me(i.verify()).then(function(n){if("string"!=typeof n)throw new w("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");if("recaptcha"!==i.type)throw new w("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.');var t=v(r)?r.session:null,e=v(r)?r.phoneNumber:r,t=t&&t.type==Xi?t.Ha().then(function(t){return Ka(o,La,{idToken:t,phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:n}}).then(function(t){return t.phoneSessionInfo.sessionInfo})}):t&&t.type==Yi?t.Ha().then(function(t){return e=o,t={mfaPendingCredential:t,mfaEnrollmentId:r.multiFactorHint&&r.multiFactorHint.uid||r.multiFactorUid,phoneSignInInfo:{recaptchaToken:n}},Ka(e,Ma,t).then(function(t){return t.phoneResponseInfo.sessionInfo});var e}):Ka(o,Ra,{phoneNumber:e,recaptchaToken:n});return t.then(function(t){return"function"==typeof i.reset&&i.reset(),t},function(t){throw"function"==typeof i.reset&&i.reset(),t})})},jr(So,{PROVIDER_ID:"phone"}),jr(So,{PHONE_SIGN_IN_METHOD:"phone"}),ko.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},ko.prototype.S=function(){return this.h},ko.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Po,Do=null;function xo(t){var e="unauthorized-domain",n=void 0,r=An(t);t=r.a,"chrome-extension"==(r=r.f)?n=Lt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Lt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",w.call(this,e,n)}function Lo(t,e,n){w.call(this,t,n),(t=e||{}).Ib&&Ur(this,"email",t.Ib),t.ea&&Ur(this,"phoneNumber",t.ea),t.credential&&Ur(this,"credential",t.credential),t.Yb&&Ur(this,"tenantId",t.Yb)}function Mo(t){if(t.code){var e=t.code||"";0==e.indexOf(T)&&(e=e.substring(T.length));var n={credential:No(t),Yb:t.tenantId};if(t.email)n.Ib=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new w(e,t.message||void 0);return new Lo(e,n,t.message)}return null}function Fo(){}function Uo(t){return t.c||(t.c=t.b())}function jo(){}function Vo(t){if(t.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return t.f;for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function qo(){}function Bo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=g(this.pc,this),this.a.onerror=g(this.Rb,this),this.a.onprogress=g(this.qc,this),this.a.ontimeout=g(this.uc,this)}function Wo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Ho(t,e,n){this.reset(t,e,n,void 0,void 0)}function Go(t){this.f=t,this.b=this.c=this.a=null}function Ko(t,e){this.name=t,this.value=e}_(xo,w),_(Lo,w),Lo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&ht(t,e),t},Lo.prototype.toJSON=function(){return this.w()},Fo.prototype.c=null,_(jo,Fo),jo.prototype.a=function(){var t=Vo(this);return t?new ActiveXObject(t):new XMLHttpRequest},jo.prototype.b=function(){var t={};return Vo(this)&&(t[0]=!0,t[1]=!0),t},Po=new jo,_(qo,Fo),qo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Bo;throw Error("Unsupported browser")},qo.prototype.b=function(){return{}},(t=Bo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.pc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Wo(this,4)},t.Rb=function(){this.status=500,this.response=this.responseText="",Wo(this,4)},t.uc=function(){this.Rb()},t.qc=function(){this.status=200,Wo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Ho.prototype.a=null,Ho.prototype.reset=function(t,e,n,r,i){delete this.a},Ko.prototype.toString=function(){return this.name};var zo=new Ko("SEVERE",1e3),Qo=new Ko("WARNING",900),Xo=new Ko("CONFIG",700),Yo=new Ko("FINE",500);Go.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(R("Root logger has no level set."),null)}(this).value)for(d(e)&&(e=e()),t=new Ho(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var Jo,$o={},Zo=null;function ts(t){var e,n,r;return Zo||(Zo=new Go(""),($o[""]=Zo).c=Xo),(e=$o[t])||(e=new Go(t),r=t.lastIndexOf("."),n=t.substr(r+1),(r=ts(t.substr(0,r))).b||(r.b={}),(r.b[n]=e).a=r,$o[t]=e),e}function es(t,e){t&&t.log(Yo,e,void 0)}function ns(t){this.f=t}function rs(t){hn.call(this),this.o=t,this.readyState=is,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=ts("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}_(ns,Fo),ns.prototype.a=function(){return new rs(this.f)},ns.prototype.b=(Jo={},function(){return Jo}),_(rs,hn);var is=0;function os(t){t.c.read().then(t.oc.bind(t)).catch(t.Ta.bind(t))}function ss(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,as(t)}function as(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function us(t){hn.call(this),this.headers=new mn,this.O=t||null,this.c=!1,this.A=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.G=!1,this.g=0,this.o=null,this.m=cs,this.u=this.R=!1}(t=rs.prototype).open=function(t,e){if(this.readyState!=is)throw this.abort(),Error("Error reopening a connection");this.m=t,this.g=e,this.readyState=1,as(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.i,method:this.m,credentials:void 0,cache:void 0};t&&(e.body=t),this.o.fetch(new Request(this.g,e)).then(this.tc.bind(this),this.Ta.bind(this))},t.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ss(this,!1)),this.readyState=is},t.tc=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,as(this)),this.a&&(this.readyState=3,as(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.rc.bind(this),this.Ta.bind(this)):void 0!==l.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.l=new TextDecoder,os(this)):t.text().then(this.sc.bind(this),this.Ta.bind(this)))))},t.oc=function(t){var e;this.a&&((e=this.l.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done}))&&(this.response=this.responseText+=e),t.done?ss(this,!0):as(this),3==this.readyState&&os(this))},t.sc=function(t){this.a&&(this.response=this.responseText=t,ss(this,!0))},t.rc=function(t){this.a&&(this.response=t,ss(this,!0))},t.Ta=function(t){var e=this.h;e&&e.log(Qo,"Failed to fetch url "+this.g,t instanceof Error?t:Error(t)),this.a&&ss(this,!0)},t.setRequestHeader=function(t,e){this.i.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(Qo,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(Qo,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},_(us,hn);var cs="";us.prototype.b=ts("goog.net.XhrIo");var hs=/^https?$/i,ls=["POST","PUT"];function fs(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.P=n,e.G=!1,e.c=!0,e.a=(e.O?e.O:Po).a(),e.A=e.O?Uo(e.O):Uo(Po),e.a.onreadystatechange=g(e.Ub,e);try{es(e.b,ws(e,"Opening Xhr")),e.N=!0,e.a.open(n,String(t),!0),e.N=!1}catch(t){return es(e.b,ws(e,"Error opening Xhr: "+t.message)),void ds(e,t)}t=r||"";var o,s=new mn(e.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(p(t)||"string"==typeof t)U(t,e,void 0);else for(var n=gn(t),r=yn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){s.set(e,t)}),i=function(t){t:{for(var e=ps,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(s.Y()),r=l.FormData&&t instanceof l.FormData,!B(ls,n)||i||r||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(t,e){this.a.setRequestHeader(e,t)},e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.R&&(e.a.withCredentials=e.R);try{ms(e),0<e.g&&(e.u=(o=e.a,Vt&&Yt(9)&&"number"==typeof o.timeout&&void 0!==o.ontimeout),es(e.b,ws(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.u)),e.u?(e.a.timeout=e.g,e.a.ontimeout=g(e.Ma,e)):e.o=dn(e.Ma,e.g,e)),es(e.b,ws(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(t){es(e.b,ws(e,"Send error: "+t.message)),ds(e,t)}}function ps(t){return"content-type"==t.toLowerCase()}function ds(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,vs(t),gs(t)}function vs(t){t.G||(t.G=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ys(e){if(e.c&&void 0!==h)if(e.A[1]&&4==bs(e)&&2==_s(e))es(e.b,ws(e,"Local request error detected and ignored"));else if(e.i&&4==bs(e))dn(e.Ub,0,e);else if(e.dispatchEvent("readystatechange"),4==bs(e)){es(e.b,ws(e,"Request complete")),e.c=!1;try{var t,n,r,i,o=_s(e);t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break t;default:s=!1}if((t=s)||((n=0===o)&&(!(i=String(e.l).match(wn)[1]||null)&&l.self&&l.self.location&&(i=(r=l.self.location.protocol).substr(0,r.length-1)),n=!hs.test(i?i.toLowerCase():"")),t=n),t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var a=2<bs(e)?e.a.statusText:""}catch(t){es(e.b,"Can not get status: "+t.message),a=""}e.h=a+" ["+_s(e)+"]",vs(e)}}finally{gs(e)}}}function gs(e,t){if(e.a){ms(e);var n=e.a,r=e.A[0]?s:null;e.a=null,e.A=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){(e=e.b)&&e.log(zo,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function ms(t){t.a&&t.u&&(t.a.ontimeout=null),t.o&&(l.clearTimeout(t.o),t.o=null)}function bs(t){return t.a?t.a.readyState:0}function _s(t){try{return 2<bs(t)?t.a.status:-1}catch(t){return-1}}function ws(t,e){return e+" ["+t.P+" "+t.l+" "+_s(t)+"]"}function Es(t){var e=Ds;this.g=[],this.u=e,this.o=t||null,this.f=this.a=!1,this.c=void 0,this.m=this.A=this.i=!1,this.h=0,this.b=null,this.l=0}function Is(t,e,n){t.a=!0,t.c=n,t.f=!e,Ns(t)}function Ts(t){if(t.a){if(!t.m)throw new As;t.m=!1}}function Ss(t,e,n,r){t.g.push([e,n,r]),t.a&&Ns(t)}function Cs(t){return q(t.g,function(t){return d(t[1])})}function Ns(e){var n,r;e.h&&e.a&&Cs(e)&&(n=e.h,(r=Rs[n])&&(l.clearTimeout(r.a),delete Rs[n]),e.h=0),e.b&&(e.b.l--,delete e.b),n=e.c;for(var t=r=!1;e.g.length&&!e.i;){var i=(s=e.g.shift())[0],o=s[1],s=s[2];if(i=e.f?o:i)try{var a=i.call(s||e.o,n);void 0!==a&&(e.f=e.f&&(a==n||a instanceof Error),e.c=n=a),(A(n)||"function"==typeof l.Promise&&n instanceof l.Promise)&&(t=!0,e.i=!0)}catch(t){n=t,e.f=!0,Cs(e)||(r=!0)}}e.c=n,t&&(a=g(e.v,e,!0),t=g(e.v,e,!1),n instanceof Es?(Ss(n,a,t),n.A=!0):n.then(a,t)),r&&(n=new Os(n),Rs[n.a]=n,e.h=n.a)}function As(){k.call(this)}function ks(){k.call(this)}function Os(t){this.a=l.setTimeout(g(this.c,this),0),this.b=t}(t=us.prototype).Ma=function(){void 0!==h&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",es(this.b,ws(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(es(this.b,ws(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),gs(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),gs(this,!0)),us.$a.Da.call(this)},t.Ub=function(){this.xa||(this.N||this.i||this.f?ys(this):this.Ic())},t.Ic=function(){ys(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case cs:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(zo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return es(this.b,"Can not get response: "+t.message),null}},Es.prototype.cancel=function(t){var e;this.a?this.c instanceof Es&&this.c.cancel():(this.b&&(e=this.b,delete this.b,t?e.cancel(t):(e.l--,e.l<=0&&e.cancel())),this.u?this.u.call(this.o,this):this.m=!0,this.a||(t=new ks,Ts(this),Is(this,!1,t)))},Es.prototype.v=function(t,e){this.i=!1,Is(this,t,e)},Es.prototype.then=function(t,e,n){var r,i,o=new le(function(t,e){r=t,i=e});return Ss(this,r,function(t){t instanceof ks?o.cancel():i(t)}),o.then(t,e,n)},Es.prototype.$goog_Thenable=!0,_(As,k),As.prototype.message="Deferred has already fired",As.prototype.name="AlreadyCalledError",_(ks,k),ks.prototype.message="Deferred was canceled",ks.prototype.name="CanceledError",Os.prototype.c=function(){throw delete Rs[this.a],this.b};var Rs={};function Ps(t){var e=document,n=mt(t).toString(),r=ie(document,"SCRIPT"),i={Vb:r,Ma:void 0},o=new Es(i),s=window.setTimeout(function(){xs(r,!0);var t=new Fs(Ms,"Timeout reached for loading script "+n);Ts(o),Is(o,!1,t)},5e3);return i.Ma=s,r.onload=r.onreadystatechange=function(){r.readyState&&"loaded"!=r.readyState&&"complete"!=r.readyState||(xs(r,!1,s),Ts(o),Is(o,!0,null))},r.onerror=function(){xs(r,!0,s);var t=new Fs(Ls,"Error while loading script "+n);Ts(o),Is(o,!1,t)},ht(i={},{type:"text/javascript",charset:"UTF-8"}),Zt(r,i),i=t,lt(t=r,"HTMLScriptElement"),t.src=mt(i),null===f&&(f=(i=(i=l.document).querySelector&&i.querySelector("script[nonce]"))&&(i=i.nonce||i.getAttribute("nonce"))&&a.test(i)?i:""),(i=f)&&t.setAttribute("nonce",i),((e=((i=e)||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:i.documentElement).appendChild(r),o}function Ds(){var t;this&&this.Vb&&((t=this.Vb)&&"SCRIPT"==t.tagName&&xs(t,!0,this.Ma))}function xs(t,e,n){null!=n&&l.clearTimeout(n),t.onload=s,t.onerror=s,t.onreadystatechange=s,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Ls=0,Ms=1;function Fs(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),k.call(this,n),this.code=t}function Us(t){this.f=t}function js(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.v=t.secureTokenTimeout||Bs,this.g=ut(t.secureTokenHeaders||Ws),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.m=t.firebaseTimeout||Hs,this.a=ut(t.firebaseHeaders||Gs),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==cr(),!(n=l.XMLHttpRequest||n&&Ql.INTERNAL.node&&Ql.INTERNAL.node.XMLHttpRequest)&&!ur())throw new w("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,ur()?this.f=new ns(self):hr()?this.f=new Us(n):this.f=new qo,this.b=null}_(Fs,k),_(Us,Fo),Us.prototype.a=function(){return new this.f},Us.prototype.b=function(){return{}};var Vs,qs="idToken",Bs=new kr(3e4,6e4),Ws={"Content-Type":"application/x-www-form-urlencoded"},Hs=new kr(3e4,6e4),Gs={"Content-Type":"application/json"};function Ks(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function zs(t,e){e&&(t.l=Qs("https://securetoken.googleapis.com/v1/token",e),t.h=Qs("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=Qs("https://identitytoolkit.googleapis.com/v2/",e))}function Qs(t,e){return t=An(t),e=An(e.url),t.c=t.a+t.c,In(t,e.f),t.a=e.a,Tn(t,e.g),t.toString()}function Xs(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function Ys(t,e,n,r,i,o,s){var a;(t=((a=pr(a=yr())==fr&&(a=a.match(/\sChrome\/(\d+)/i))&&2==a.length?parseInt(a[1],10):null)&&a<30||Vt&&Qt&&!(9<Qt))&&!ur()?(Vs=Vs||new le(function(t,e){!function(t,e){{((window.gapi||{}).client||{}).request?t():(l[$s]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ss(t,null,e,void 0)}(Ps(bt(Js,{onload:$s})),function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}),g(t.o,t)):g(t.u,t))(e,n,r,i,o,s)}js.prototype.S=function(){return this.b},js.prototype.u=function(t,n,e,r,i,o){if(ur()&&(void 0===l.fetch||void 0===l.Headers||void 0===l.Request))throw new w("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s,a=new us(this.f);o&&(a.g=Math.max(0,o),s=setTimeout(function(){a.dispatchEvent("timeout")},o)),ln(a,"complete",function(){s&&clearTimeout(s);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return es(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(t){e=null}n&&n(e)}),fn(a,"ready",function(){s&&clearTimeout(s),xe(this)}),fn(a,"timeout",function(){s&&clearTimeout(s),xe(this),n&&n(null)}),fs(a,t,e,r,i)};var Js=new ft(vt,"https://apis.google.com/js/client.js?onload=%{onload}"),$s="__fcb"+Math.floor(1e6*Math.random()).toString();function Zs(t,e,n,r,i,o,s){var a=An(e+n);Cn(a,"key",t.c),s&&Cn(a,"cb",b().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Cn(a,c,i[c]);return new le(function(e,n){Ys(t,a.toString(),function(t){t?t.error?n(Qa(t,o||{})):e(t):n(new w("network-request-failed"))},r,u?void 0:Kn(Tr(i)),t.a,t.m.get())})}function ta(t){if("string"!=typeof(t=t.email)||!ir.test(t))throw new w("invalid-email")}function ea(t){"email"in t&&ta(t)}function na(t){if(!t[qs]){if(t.mfaPendingCredential)throw new w("multi-factor-auth-required",null,ut(t));throw new w("internal-error")}}function ra(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new w("internal-error")}else{if(!t.sessionInfo)throw new w("missing-verification-id");if(!t.code)throw new w("missing-verification-code")}}js.prototype.o=function(t,n,r,i,o){var s=this;Vs.then(function(){window.gapi.client.setApiKey(s.c);var e=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:r,body:i,headers:o,authType:"none",callback:function(t){window.gapi.auth.setToken(e),n&&n(t)}})}).s(function(t){n&&n({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},js.prototype.yb=function(){return Ka(this,xa,{})},js.prototype.Ab=function(t,e){return Ka(this,Pa,{idToken:t,email:e})},js.prototype.Bb=function(t,e){return Ka(this,Da,{idToken:t,password:e})};var ia={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function oa(t){if(!t.phoneVerificationInfo)throw new w("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new w("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new w("missing-verification-code")}function sa(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new w("internal-error")}function aa(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(Bn(t=new Un(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function ua(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Mo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Mo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Mo(t)):t.errorMessage&&(e=za(t.errorMessage)),e)throw e;na(t)}function ca(t,e){return e.returnIdpCredential=!0,Ka(t,Fa,e)}function ha(t,e){return e.returnIdpCredential=!0,Ka(t,ja,e)}function la(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Ka(t,Ua,e)}function fa(t){if(!t.oobCode)throw new w("invalid-action-code")}(t=js.prototype).Cb=function(t,r){var i={idToken:t},o=[];return st(ia,function(t,e){var n=r[e];null===n?o.push(t):e in r&&(i[e]=n)}),o.length&&(i.deleteAttribute=o),Ka(this,Pa,i)},t.ub=function(t,e){return ht(t={requestType:"PASSWORD_RESET",email:t},e),Ka(this,Na,t)},t.vb=function(t,e){return ht(t={requestType:"EMAIL_SIGNIN",email:t},e),Ka(this,Ta,t)},t.tb=function(t,e){return ht(t={requestType:"VERIFY_EMAIL",idToken:t},e),Ka(this,Sa,t)},t.Db=function(t,e,n){return ht(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),Ka(this,Ca,t)},t.eb=function(t){return Ka(this,Ba,t)},t.mb=function(t,e){return Ka(this,Oa,{oobCode:t,newPassword:e})},t.Qa=function(t){return Ka(this,da,{oobCode:t})},t.ib=function(t){return Ka(this,pa,{oobCode:t})};var pa={endpoint:"setAccountInfo",B:fa,Z:"email",C:!0},da={endpoint:"resetPassword",B:fa,F:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new w("internal-error")},C:!0},va={endpoint:"signupNewUser",B:function(t){if(ta(t),!t.password)throw new w("weak-password")},F:na,U:!0,C:!0},ya={endpoint:"createAuthUri",C:!0},ga={endpoint:"deleteAccount",M:["idToken"]},ma={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],B:function(t){if("array"!=n(t.deleteProvider))throw new w("internal-error")}},ba={endpoint:"emailLinkSignin",M:["email","oobCode"],B:ta,F:na,U:!0,C:!0},_a={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],B:ta,F:na,U:!0},wa={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],B:oa,F:na,C:!0,Na:!0},Ea={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],B:oa,F:na,C:!0,Na:!0},Ia={endpoint:"getAccountInfo"},Ta={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new w("internal-error");ta(t)},Z:"email",C:!0},Sa={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],B:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new w("internal-error")},Z:"email",C:!0},Ca={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],B:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new w("internal-error")},Z:"email",C:!0},Na={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(t){if("PASSWORD_RESET"!=t.requestType)throw new w("internal-error");ta(t)},Z:"email",C:!0},Aa={kb:!0,endpoint:"getProjectConfig",Tb:"GET"},ka={kb:!0,endpoint:"getRecaptchaParam",Tb:"GET",F:function(t){if(!t.recaptchaSiteKey)throw new w("internal-error")}},Oa={endpoint:"resetPassword",B:fa,Z:"email",C:!0},Ra={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Z:"sessionInfo",C:!0},Pa={endpoint:"setAccountInfo",M:["idToken"],B:ea,U:!0},Da={endpoint:"setAccountInfo",M:["idToken"],B:function(t){if(ea(t),!t.password)throw new w("weak-password")},F:na,U:!0},xa={endpoint:"signupNewUser",F:na,U:!0,C:!0},La={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],B:function(t){if(!t.phoneEnrollmentInfo)throw new w("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new w("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new w("missing-app-credential")},F:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new w("internal-error")},C:!0,Na:!0},Ma={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],B:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new w("missing-app-credential")},F:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new w("internal-error")},C:!0,Na:!0},Fa={endpoint:"verifyAssertion",B:sa,Xa:aa,F:ua,U:!0,C:!0},Ua={endpoint:"verifyAssertion",B:sa,Xa:aa,F:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new w("user-not-found");if(t.errorMessage)throw za(t.errorMessage);na(t)},U:!0,C:!0},ja={endpoint:"verifyAssertion",B:function(t){if(sa(t),!t.idToken)throw new w("internal-error")},Xa:aa,F:ua,U:!0},Va={endpoint:"verifyCustomToken",B:function(t){if(!t.token)throw new w("invalid-custom-token")},F:na,U:!0,C:!0},qa={endpoint:"verifyPassword",B:function(t){if(ta(t),!t.password)throw new w("wrong-password")},F:na,U:!0,C:!0},Ba={endpoint:"verifyPhoneNumber",B:ra,F:na,C:!0},Wa={endpoint:"verifyPhoneNumber",B:function(t){if(!t.idToken)throw new w("internal-error");ra(t)},F:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Mo(t);na(t)}},Ha={Gb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",B:ra,F:na,C:!0},Ga={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],F:function(t){if(!!t[qs]^!!t.refreshToken)throw new w("internal-error")},C:!0,Na:!0};function Ka(t,e,n){if(!function(t,e){if(!e||!e.length)return 1;if(t){for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return}return 1}}(n,e.M))return be(new w("internal-error"));var r,i=!!e.Na,o=e.Tb||"POST";return me(n).then(e.B).then(function(){return e.U&&(n.returnSecureToken=!0),e.C&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),Zs(t,i?t.i:t.h,e.endpoint,o,n,e.Gb,e.kb||!1)}).then(function(t){return r=t,e.Xa?e.Xa(n,r):r}).then(e.F).then(function(){if(!e.Z)return r;if(!(e.Z in r))throw new w("internal-error");return r[e.Z]})}function za(t){return Qa({error:{errors:[{message:t}],code:400,message:t}})}function Qa(t,e){var n,r=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",i={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(r=i[r]?new w(i[r]):null)return r;for(n in r=t.error&&t.error.message||"",ht(i={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=r.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,i)if(0===r.indexOf(n))return new w(i[n],e);return!e&&t&&(e=Ir(t)),new w("internal-error",e)}function Xa(t){var o;this.b=t,this.a=null,this.qb=(o=this,(Za||(Za=new le(function(t,e){function n(){Ar(),gr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Ar(),e(Error("Network Error"))},timeout:Ja.get()})}var r;gr("gapi.iframes.Iframe")?t():gr("gapi.load")?n():(r="__iframefcb"+Math.floor(1e6*Math.random()).toString(),l[r]=function(){gr("gapi.load")?n():e(Error("Network Error"))},me(Ps(r=bt(Ya,{onload:r}))).s(function(){e(Error("Network Error"))}))}).s(function(t){throw Za=null,t}))).then(function(){return new le(function(r,i){gr("gapi.iframes.getContext")().open({where:document.body,url:o.b,messageHandlersFilter:gr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(t){function e(){clearTimeout(n),r()}o.a=t,o.a.restyle({setHideOnLeave:!1});var n=setTimeout(function(){i(Error("Network Error"))},$a.get());t.ping(e).then(e,function(){i(Error("Network Error"))})})})}))}var Ya=new ft(vt,"https://apis.google.com/js/api.js?onload=%{onload}"),Ja=new kr(3e4,6e4),$a=new kr(5e3,15e3),Za=null;function tu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?kn((t=An(this.g.url)).f,t.a,t.g,"/emulator/auth/iframe"):kn("https",this.l,null,"/__/auth/iframe"),this.a=t,Cn(this.a,"apiKey",this.h),Cn(this.a,"appName",this.i),this.b=null,this.c=[]}function eu(t,e,n,r,i,o){this.u=t,this.o=e,this.c=n,this.v=r,this.m=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function nu(t){try{return Ql.app(t).auth().Ga()}catch(t){return[]}}function ru(t,e,n,r,i,o){this.o=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.A=null,this.h=[],this.v=this.a=null}function iu(t){var a=$n();return Ka(t,Aa,{}).then(function(t){return t.authorizedDomains||[]}).then(function(t){t:{for(var e=(n=An(a)).f,n=n.a,r=0;r<t.length;r++){var i=t[r],o=n,s=e;if(o=0==i.indexOf("chrome-extension://")?An(i).a==o&&"chrome-extension"==s:("http"==s||"https"==s)&&(rr.test(i)?o==i:(i=i.split(".").join("\\."),new RegExp("^(.+\\."+i+"|"+i+")$","i").test(o)))){t=!0;break t}}t=!1}if(!t)throw new xo($n())})}function ou(i){return i.v||(i.v=or().then(function(){var t,e,n,r;i.u||(t=i.c,e=i.i,n=nu(i.b),(r=new tu(i.o,i.g,i.b,i.f)).f=t,r.b=e,r.c=K(n||[]),i.u=r.toString()),i.m=new Xa(i.u),function(r){if(!r.m)throw Error("IfcHandler must be initialized!");!function(t,e){t.qb.then(function(){t.a.register("authEvent",e,gr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(r.m,function(t){var e={};if(t&&t.authEvent){var n=!1;for(t=Oo(t.authEvent),e=0;e<r.h.length;e++)n=r.h[e](t)||n;return(e={}).status=n?"ACK":"ERROR",me(e)}return e.status="ERROR",me(e)})}(i)})),i.v}function su(t){return t.l||(t.A=t.c?vr(t.c,nu(t.b)):null,t.l=new js(t.g,N(t.i),t.A),t.f&&zs(t.l,t.f)),t.l}function au(t,e,n,r,i,o,s,a,u,c,h,l){return(t=new eu(t,e,n,r,i,l)).l=o,t.g=s,t.i=a,t.b=ut(u||null),t.f=c,t.xb(h).toString()}function uu(t){if(this.a=t||Ql.INTERNAL.reactNative&&Ql.INTERNAL.reactNative.AsyncStorage,!this.a)throw new w("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function cu(t){this.b=t,this.a={},this.f=g(this.c,this)}tu.prototype.toString=function(){return this.f?Cn(this.a,"v",this.f):qn(this.a.b,"v"),this.b?Cn(this.a,"eid",this.b):qn(this.a.b,"eid"),this.c.length?Cn(this.a,"fw",this.c.join(",")):qn(this.a.b,"fw"),this.a.toString()},eu.prototype.xb=function(t){return this.h=t,this},eu.prototype.toString=function(){var t;if(Cn(t=this.m?kn((t=An(this.m.url)).f,t.a,t.g,"/emulator/auth/handler"):kn("https",this.u,null,"/__/auth/handler"),"apiKey",this.o),Cn(t,"appName",this.c),Cn(t,"authType",this.v),this.a.isOAuthProvider){var e,n=this.a;try{var r=Ql.app(this.c).auth().ka()}catch(t){r=null}for(e in n.nb=r,Cn(t,"providerId",this.a.providerId),n=Tr((r=this.a).Hb))n[e]=n[e].toString();e=r.Pc,n=ut(n);for(var i=0;i<e.length;i++){var o=e[i];o in n&&delete n[o]}r.ob&&r.nb&&!n[r.ob]&&(n[r.ob]=r.nb),at(n)||Cn(t,"customParameters",Ir(n))}if("function"==typeof this.a.Pb&&((r=this.a.Pb()).length&&Cn(t,"scopes",r.join(","))),this.l?Cn(t,"redirectUrl",this.l):qn(t.b,"redirectUrl"),this.g?Cn(t,"eventId",this.g):qn(t.b,"eventId"),this.i?Cn(t,"v",this.i):qn(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Nn(t,s)&&Cn(t,s,this.b[s]);return this.h?Cn(t,"tid",this.h):qn(t.b,"tid"),this.f?Cn(t,"eid",this.f):qn(t.b,"eid"),(s=nu(this.c)).length&&Cn(t,"fw",s.join(",")),t.toString()},(t=ru.prototype).Nb=function(e,n,t){var r=new w("popup-closed-by-user"),i=new w("web-storage-unsupported"),o=this,s=!1;return this.la().then(function(){var t,r;r={type:"webStorageSupport"},ou(t=o).then(function(){return e=t.m,n=r,e.qb.then(function(){return new le(function(t){e.a.send(n.type,n,t,gr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})});var e,n}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}).then(function(t){t||(e&&er(e),n(i),s=!0)})}).s(function(){}).then(function(){if(!s)return n=e,new le(function(e){return function t(){vn(2e3).then(function(){return n&&!n.closed?t():void e()})}()});var n}).then(function(){if(!s)return vn(t).then(function(){n(r)})})},t.Wb=function(){var t=yr();return!Er(t)&&!Nr(t)},t.Sb=function(){return!1},t.Lb=function(e,t,n,r,i,o,s,a){if(!e)return be(new w("popup-blocked"));if(s&&!Er())return this.la().s(function(t){er(e),i(t)}),r(),me();this.a||(this.a=iu(su(this)));var u=this;return this.a.then(function(){var t=u.la().s(function(t){throw er(e),i(t),t});return r(),t}).then(function(){Ao(n),s||Zn(au(u.o,u.g,u.b,t,n,null,o,u.c,void 0,u.i,a,u.f),e)}).s(function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t})},t.Mb=function(t,e,n,r){this.a||(this.a=iu(su(this)));var i=this;return this.a.then(function(){Ao(e),Zn(au(i.o,i.g,i.b,t,e,$n(),n,i.c,void 0,i.i,r,i.f))}).s(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},t.la=function(){var t=this;return ou(this).then(function(){return t.m.qb}).s(function(){throw t.a=null,new w("network-request-failed")})},t.Zb=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Ra=function(e){H(this.h,function(t){return t==e})},(t=uu.prototype).get=function(t){return me(this.a.getItem(t)).then(function(t){return t&&Sr(t)})},t.set=function(t,e){return me(this.a.setItem(t,Ir(e)))},t.T=function(t){return me(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var hu,lu=[];function fu(t,e,n){at(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function pu(t){this.a=t}function du(t){this.c=t,this.b=!1,this.a=[]}function vu(r,t,e,n){var i,o,s,a,u=e||{},c=null;if(r.b)return be(Error("connection_unavailable"));var h=n?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new le(function(e,n){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),s=setTimeout(function(){n(Error("unsupported_event"))},h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout(function(){n(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?e(t.data.response):n(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),n(Error("invalid_response"))))}},r.a.push(c),l.port1.addEventListener("message",o),r.c.postMessage({eventType:t,eventId:i,data:u},[l.port2])):n(Error("connection_unavailable"))}).then(function(t){return yu(r,c),t}).s(function(t){throw yu(r,c),t})}function yu(t,e){var n,r;e&&(n=e.messageChannel,r=e.onMessage,n&&(n.port1.removeEventListener("message",r),n.port1.close()),H(t.a,function(t){return t==e}))}function gu(){if(!_u())throw new w("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=l.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.o=!1,this.h=null;var t,e,n,r=this;ur()&&self?(this.l=(n=ur()?self:null,U(lu,function(t){t.b==n&&(e=t)}),e||(e=new cu(n),lu.push(e)),e),fu(this.l,"keyChanged",function(t,n){return Su(r).then(function(e){return 0<e.length&&U(r.a,function(t){t(e)}),{keyProcessed:B(e,n.key)}})}),fu(this.l,"ping",function(){return me(["keyChanged"])})):((t=l.navigator)&&t.serviceWorker?me().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).s(function(){return null}):me(null)).then(function(t){(r.h=t)&&(r.g=new du(new pu(t)),vu(r.g,"ping",null,!0).then(function(t){t[0].fulfilled&&B(t[0].value,"keyChanged")&&(r.o=!0)}).s(function(){}))})}function mu(i){return new le(function(e,n){var t=i.m.open("firebaseLocalStorageDb",1);t.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},t.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},t.onsuccess=function(t){var r;(t=t.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(t):(r=i,new le(function(t,e){var n=r.m.deleteDatabase("firebaseLocalStorageDb");n.onsuccess=function(){t()},n.onerror=function(t){e(Error(t.target.error))}}).then(function(){return mu(i)}).then(function(t){e(t)}).s(function(t){n(t)}))}})}function bu(t){return t.v||(t.v=mu(t)),t.v}function _u(){try{return l.indexedDB}catch(t){return}}function wu(t){return t.objectStore("firebaseLocalStorage")}function Eu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Iu(t){return new le(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function Tu(t,e){return t.g&&t.h&&((n=l.navigator)&&n.serviceWorker&&n.serviceWorker.controller||null)===t.h?vu(t.g,"keyChanged",{key:e},t.o).then(function(){}).s(function(){}):me();var n}function Su(r){return bu(r).then(function(t){var i=wu(Eu(t,!1));return i.getAll?Iu(i.getAll()):new le(function(e,n){var r=[],t=i.openCursor();t.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},t.onerror=function(t){n(t.target.error)}})}).then(function(t){var e={},n=[];if(0==r.b){for(n=0;n<t.length;n++)e[t[n].fbase_key]=t[n].value;n=function t(e,n){var r,i=[];for(r in e)r in n&&typeof e[r]==typeof n[r]?"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(r.c,e),r.c=e}return n})}function Cu(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Nu(t){var r=this,i=null;this.a=[],this.type="indexedDB",this.c=t,this.b=me().then(function(){if(_u()){var e=Cr(),n="__sak"+e;return hu=hu||new gu,(i=hu).set(n,e).then(function(){return i.get(n)}).then(function(t){if(t!==e)throw Error("indexedDB not supported!");return i.T(n)}).then(function(){return i}).s(function(){return r.c})}return r.c}).then(function(t){return r.type=t.type,t.ca(function(e){U(r.a,function(t){t(e)})}),t})}function Au(){this.a={},this.type="inMemory"}function ku(){if(!function(){var t="Node"==cr();if(!(t=Ou()||t&&Ql.INTERNAL.node&&Ql.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==cr())throw new w("internal-error","The LocalStorage compatibility library was not found.");throw new w("web-storage-unsupported")}this.a=Ou()||Ql.INTERNAL.node.localStorage,this.type="localStorage"}function Ou(){try{var t=l.localStorage,e=Cr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Ru(){this.type="nullStorage"}function Pu(){if(!function(){var t="Node"==cr();if(!(t=Du()||t&&Ql.INTERNAL.node&&Ql.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==cr())throw new w("internal-error","The SessionStorage compatibility library was not found.");throw new w("web-storage-unsupported")}this.a=Du()||Ql.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Du(){try{var t=l.sessionStorage,e=Cr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function xu(){var t={};t.Browser=Fu,t.Node=Uu,t.ReactNative=ju,t.Worker=Vu,this.a=t[cr()]}cu.prototype.c=function(n){var e,r=n.data.eventType,i=n.data.eventId,t=this.a[r];t&&0<t.length&&(n.ports[0].postMessage({status:"ack",eventId:i,eventType:r,response:null}),e=[],U(t,function(t){e.push(me().then(function(){return t(n.origin,n.data.data)}))}),we(e).then(function(t){var e=[];U(t,function(t){e.push({fulfilled:t.Ob,value:t.value,reason:t.reason?t.reason.message:void 0})}),U(e,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:e})}))},pu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},du.prototype.close=function(){for(;0<this.a.length;)yu(this,this.a[0]);this.b=!0},(t=gu.prototype).set=function(n,r){var i,o=!1,s=this;return bu(this).then(function(t){return Iu((t=wu(Eu(i=t,!0))).get(n))}).then(function(t){var e=wu(Eu(i,!0));return t?(t.value=r,Iu(e.put(t))):(s.b++,o=!0,(t={}).fbase_key=n,t.value=r,Iu(e.add(t)))}).then(function(){return s.c[n]=r,Tu(s,n)}).na(function(){o&&s.b--})},t.get=function(e){return bu(this).then(function(t){return Iu(wu(Eu(t,!1)).get(e))}).then(function(t){return t&&t.value})},t.T=function(e){var n=!1,r=this;return bu(this).then(function(t){return n=!0,r.b++,Iu(wu(Eu(t,!0)).delete(e))}).then(function(){return delete r.c[e],Tu(r,e)}).na(function(){n&&r.b--})},t.ca=function(t){var n;0==this.a.length&&(Cu(n=this),function e(){n.f=setTimeout(function(){n.i=Su(n).then(function(e){0<e.length&&U(n.a,function(t){t(e)})}).then(function(){e()}).s(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()),this.a.push(t)},t.ia=function(e){H(this.a,function(t){return t==e}),0==this.a.length&&Cu(this)},(t=Nu.prototype).get=function(e){return this.b.then(function(t){return t.get(e)})},t.set=function(e,n){return this.b.then(function(t){return t.set(e,n)})},t.T=function(e){return this.b.then(function(t){return t.T(e)})},t.ca=function(t){this.a.push(t)},t.ia=function(e){H(this.a,function(t){return t==e})},(t=Au.prototype).get=function(t){return me(this.a[t])},t.set=function(t,e){return this.a[t]=e,me()},t.T=function(t){return delete this.a[t],me()},t.ca=function(){},t.ia=function(){},(t=ku.prototype).get=function(t){var e=this;return me().then(function(){return Sr(e.a.getItem(t))})},t.set=function(e,n){var r=this;return me().then(function(){var t=Ir(n);null===t?r.T(e):r.a.setItem(e,t)})},t.T=function(t){var e=this;return me().then(function(){e.a.removeItem(t)})},t.ca=function(t){l.window&&Je(l.window,"storage",t)},t.ia=function(t){l.window&&tn(l.window,"storage",t)},(t=Ru.prototype).get=function(){return me(null)},t.set=function(){return me()},t.T=function(){return me()},t.ca=function(){},t.ia=function(){},(t=Pu.prototype).get=function(t){var e=this;return me().then(function(){return Sr(e.a.getItem(t))})},t.set=function(e,n){var r=this;return me().then(function(){var t=Ir(n);null===t?r.T(e):r.a.setItem(e,t)})},t.T=function(t){var e=this;return me().then(function(){e.a.removeItem(t)})},t.ca=function(){},t.ia=function(){};var Lu,Mu,Fu={D:ku,ab:Pu},Uu={D:ku,ab:Pu},ju={D:uu,ab:Ru},Vu={D:ku,ab:Ru},qu={qd:"local",NONE:"none",sd:"session"};function Bu(){var t=!(Nr(yr())||!ar()),e=Er(),n=mr();this.v=t,this.h=e,this.l=n,this.a={},t=Lu=Lu||new xu;try{this.g=!Jn()&&Dr()||!l.indexedDB?new t.a.D:new Nu(new(ur()?Au:t.a.D))}catch(t){this.g=new Au,this.h=!0}try{this.i=new t.a.ab}catch(t){this.i=new Au}this.m=new Au,this.f=g(this.Xb,this),this.b={}}function Wu(){return Mu=Mu||new Bu}function Hu(t,e){switch(e){case"session":return t.i;case"none":return t.m;default:return t.g}}function Gu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Ku(t,e,n){return n=Gu(e,n),"local"==e.D&&(t.b[n]=null),Hu(t,e.D).T(n)}function zu(t){t.c&&(clearInterval(t.c),t.c=null)}function Qu(t){this.a=t,this.b=Wu()}(t=Bu.prototype).get=function(t,e){return Hu(this,t.D).get(Gu(t,e))},t.set=function(e,t,n){var r=Gu(e,n),i=this,o=Hu(this,e.D);return o.set(r,t).then(function(){return o.get(r)}).then(function(t){"local"==e.D&&(i.b[r]=t)})},t.addListener=function(t,e,n){var r;t=Gu(t,e),this.l&&(this.b[t]=l.localStorage.getItem(t)),at(this.a)&&(Hu(this,"local").ca(this.f),this.h||(Jn()||!Dr())&&l.indexedDB||!this.l||(zu(r=this),r.c=setInterval(function(){for(var t in r.a){var e=l.localStorage.getItem(t),n=r.b[t];e!=n&&(r.b[t]=e,e=new Ve({type:"storage",key:t,target:window,oldValue:n,newValue:e,a:!0}),r.Xb(e))}},1e3))),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=Gu(t,e),this.a[t]&&(H(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),at(this.a)&&(Hu(this,"local").ia(this.f),zu(this))},t.Xb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=l.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.lb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Hu(this,"local").ia(this.f):zu(this),this.v)if(n=l.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?l.localStorage.setItem(e,r):l.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this,n=function(){void 0===t.a.a&&o.b[e]===l.localStorage.getItem(e)||(o.b[e]=l.localStorage.getItem(e),o.lb(e))};Vt&&Qt&&10==Qt&&l.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else U(t,g(this.lb,this))},t.lb=function(t){this.a[t]&&U(this.a[t],function(t){t()})};var Xu,Yu={name:"authEvent",D:"local"};function Ju(){this.a=Wu()}function $u(t,e){this.b=Zu,this.f=l.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=l.Int32Array?new Int32Array(64):Array(64),void 0===Xu&&(Xu=l.Int32Array?new Int32Array(sc):sc),this.reset()}_($u,function(){this.b=-1});for(var Zu=64,tc=Zu-1,ec=[],nc=0;nc<tc;nc++)ec[nc]=0;var rc=G(128,ec);function ic(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;e<64;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;e<64;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&h^~c&l)+(0|Xu[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function oc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(ic(t),i=0);else{if(!p(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(ic(t),i=0)}}t.c=i,t.g+=n}$u.prototype.reset=function(){this.g=this.c=0,this.a=l.Int32Array?new Int32Array(this.h):K(this.h)};var sc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function ac(){$u.call(this,8,uc)}_(ac,$u);var uc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function cc(t,e,n,r,i,o){this.m=t,this.i=e,this.l=n,this.v=r||null,this.u=i||null,this.o=o,this.h=e+":"+n,this.A=new Ju,this.g=new Qu(this.h),this.f=null,this.b=[],this.a=this.c=null}function hc(t){return new w("invalid-cordova-configuration",t)}function lc(t){var e=new ac;oc(e,t),t=[];var n=8*e.g;e.c<56?oc(e,rc,56-e.c):oc(e,rc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(ic(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return V(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}function fc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function pc(a){return a.f||(a.f=a.la().then(function(){return new le(function(n){function e(r){t=!0,s&&s.cancel(),dc(i).then(function(t){var e,n=o;t&&r&&r.url&&(e=null,-1!=(n=zi(r.url)).indexOf("/__/auth/callback")&&(e=(e="object"==typeof(e=Sr(Nn(e=An(n),"firebaseError")||null))?E(e):null)?new ko(t.c,t.b,null,null,e,null,t.S()):new ko(t.c,t.b,n,t.f,null,null,t.S())),n=e||o),fc(i,n)})}var i,o,t,s,r;a.Ea(function t(e){return n(e),a.Ra(t),!1}),i=a,o=new ko("unknown",null,null,null,new w("no-auth-event")),t=!1,s=vn(500).then(function(){return dc(i).then(function(){t||fc(i,o)})}),r=l.handleOpenURL,l.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(gr("BuildInfo.packageName",l).toLowerCase()+"://")&&e({url:t}),"function"==typeof r)try{r(t)}catch(t){console.error(t)}},Do=Do||new Ro,function(t){var n=Do;n.a.push(t),n.b||(n.b=function(t){for(var e=0;e<n.a.length;e++)n.a[e](t)},"function"==typeof(t=gr("universalLinks.subscribe",l))&&t(null,n.b))}(e)})})),a.f}function dc(e){var t,n=null;return(t=e.g).b.get(Yu,t.a).then(Oo).then(function(t){return n=t,Ku((t=e.g).b,Yu,t.a)}).then(function(){return n})}function vc(t){this.a=t,this.b=Wu()}(t=cc.prototype).la=function(){return this.Ia?this.Ia:this.Ia=(sr(void 0)?or().then(function(){return new le(function(t,e){var n=l.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):be(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof gr("universalLinks.subscribe",l))throw hc("cordova-universal-links-plugin-fix is not installed");if(void 0===gr("BuildInfo.packageName",l))throw hc("cordova-plugin-buildinfo is not installed");if("function"!=typeof gr("cordova.plugins.browsertab.openUrl",l))throw hc("cordova-plugin-browsertab is not installed");if("function"!=typeof gr("cordova.InAppBrowser.open",l))throw hc("cordova-plugin-inappbrowser is not installed")},function(){throw new w("cordova-not-ready")})},t.Nb=function(t,e){return e(new w("operation-not-supported-in-this-environment")),me()},t.Lb=function(){return be(new w("operation-not-supported-in-this-environment"))},t.Zb=function(){return!1},t.Wb=function(){return!0},t.Sb=function(){return!0},t.Mb=function(t,e,n,r){if(this.c)return be(new w("redirect-operation-pending"));var i=this,o=l.document,s=null,a=null,u=null,c=null;return this.c=me().then(function(){return Ao(e),pc(i)}).then(function(){return function(n,t,e,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new ko(t,r,null,o,new w("no-auth-event"),null,i),a=gr("BuildInfo.packageName",l);if("string"!=typeof a)throw new w("invalid-cordova-configuration");var u=gr("BuildInfo.displayName",l),c={};if(yr().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=a;else{if(!yr().toLowerCase().match(/android/))return be(new w("operation-not-supported-in-this-environment"));c.apn=a}u&&(c.appDisplayName=u),o=lc(o),c.sessionId=o;var h=au(n.m,n.i,n.l,t,e,null,r,n.v,c,n.u,i,n.o);return n.la().then(function(){var t=n.h;return n.A.a.set(Yu,s.w(),t)}).then(function(){var t=gr("cordova.plugins.browsertab.isAvailable",l);if("function"!=typeof t)throw new w("invalid-cordova-configuration");var e=null;t(function(t){if(t){if("function"!=typeof(e=gr("cordova.plugins.browsertab.openUrl",l)))throw new w("invalid-cordova-configuration");e(h)}else{if("function"!=typeof(e=gr("cordova.InAppBrowser.open",l)))throw new w("invalid-cordova-configuration");t=yr(),n.a=e(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,t,e,n,r)}).then(function(){return new le(function(e,t){a=function(){var t=gr("cordova.plugins.browsertab.close",l);return e(),"function"==typeof t&&t(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(a),u=function(){s=s||vn(2e3).then(function(){t(new w("redirect-cancelled-by-user"))})},c=function(){Or()&&u()},o.addEventListener("resume",u,!1),yr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)}).s(function(t){return dc(i).then(function(){throw t})})}).na(function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),s&&s.cancel(),a&&i.Ra(a),i.c=null})},t.Ea=function(e){this.b.push(e),pc(this).s(function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new ko("unknown",null,null,null,new w("no-auth-event")),e(t))})},t.Ra=function(e){H(this.b,function(t){return t==e})};var yc={name:"pendingRedirect",D:"session"};function gc(t){return Ku(t.b,yc,t.a)}function mc(t,e,n,r){this.i={},this.u=0,this.O=t,this.m=e,this.v=n,this.G=r,this.h=[],this.f=!1,this.l=g(this.o,this),this.b=new Dc,this.A=new Uc,this.g=new vc(Rc(this.m,this.v)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.A,this.c.linkViaPopup=this.A,this.c.reauthViaPopup=this.A,this.a=bc(this.O,this.m,this.v,I,this.G)}function bc(t,e,n,r,i){var o=Ql.SDK_VERSION||null;return new(sr()?cc:ru)(t,e,n,o,r,i)}function _c(e){e.f||(e.f=!0,e.a.Ea(e.l));var n=e.a;return e.a.la().s(function(t){throw e.a==n&&e.reset(),t})}function wc(n){n.a.Wb()&&_c(n).s(function(t){var e=new ko("unknown",null,null,null,new w("operation-not-supported-in-this-environment"));Nc(t)&&n.o(e)}),n.a.Sb()||xc(n.b)}function Ec(n,t){B(n.h,t)||n.h.push(t),n.f||(t=n.g).b.get(yc,t.a).then(function(t){return"pending"==t}).then(function(t){t?gc(n.g).then(function(){_c(n).s(function(t){var e=new ko("unknown",null,null,null,new w("operation-not-supported-in-this-environment"));Nc(t)&&n.o(e)})}):wc(n)}).s(function(){wc(n)})}function Ic(t,e){H(t.h,function(t){return t==e})}mc.prototype.reset=function(){this.f=!1,this.a.Ra(this.l),this.a=bc(this.O,this.m,this.v,null,this.G),this.i={}},mc.prototype.o=function(t){if(!t)throw new w("invalid-auth-event");if(6e5<=b()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Eb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=b())),e=!0;break}}return xc(this.b),e};var Tc=new kr(2e3,1e4),Sc=new kr(3e4,6e4);function Cc(t,e,n,r,i,o,s){return t.a.Lb(e,n,r,function(){t.f||(t.f=!0,t.a.Ea(t.l))},function(){t.reset()},i,o,s)}function Nc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Ac(e,t,n,r,i){var o,s;return(s=e.g).b.set(yc,"pending",s.a).then(function(){return e.a.Mb(t,n,r,i).s(function(t){if(Nc(t))throw new w("operation-not-supported-in-this-environment");return o=t,gc(e.g).then(function(){throw o})}).then(function(){return e.a.Zb()?new le(function(){}):gc(e.g).then(function(){return e.qa()}).then(function(){}).s(function(){})})})}function kc(t,e,n,r,i){return t.a.Nb(r,function(t){e.ma(n,null,t,i)},Tc.get())}mc.prototype.qa=function(){return this.b.qa()};var Oc={};function Rc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Pc(t,e,n,r){var i=Rc(e,n,r);return Oc[i]||(Oc[i]=new mc(t,e,n,r)),Oc[i]}function Dc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function xc(t){t.g||(t.g=!0,Fc(t,!1,null,null))}function Lc(t){t.g&&!t.i&&Fc(t,!1,null,null)}function Mc(t,e){if(t.b=function(){return me(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Fc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return be(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Mc(t,n):Mc(t,{user:null}),t.f=[],t.c=[]}function Uc(){}function jc(){this.hb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.hb},set:function(t){this.hb=t},enumerable:!1})}function Vc(t,e){this.a=e,Ur(this,"verificationId",t)}function qc(t,e,n,r){return new So(t).eb(e,n).then(function(t){return new Vc(t,r)})}function Bc(t){var e=Di(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new w("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");jr(this,{token:t,expirationTime:Pr(1e3*e.exp),authTime:Pr(1e3*e.auth_time),issuedAtTime:Pr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Wc(t,e,n){var r=e&&e[Gc];if(!r)throw new w("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=ut(e),this.g=n,this.c=new Qi(null,r),this.b=[];var i=this;U(e[Hc]||[],function(t){(t=Wr(t))&&i.b.push(t)}),Ur(this,"auth",this.a),Ur(this,"session",this.c),Ur(this,"hints",this.b)}Dc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Dc.prototype.h=function(t,e){var n,r,i,o;t?(this.reset(),this.g=!0,n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code,this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Fc(this,!0,null,t.a),me()):e.Fa(n,r)?function(e,t,n){n=n.Fa(t.c,t.b);var r=t.g,i=t.f,o=t.i,s=t.S(),a=!!t.c.match(/Redirect$/);n(r,i,s,o).then(function(t){Fc(e,a,t,null)}).s(function(t){Fc(e,a,null,t)})}(this,t,e):be(new w("invalid-auth-event")):(Fc(this,!1,null,null),me())):be(new w("invalid-auth-event"))},Dc.prototype.qa=function(){var i=this;return new le(function(t,e){var n,r;i.b?i.b().then(t,e):(i.f.push(t),i.c.push(e),n=i,r=new w("timeout"),n.a&&n.a.cancel(),n.a=vn(Sc.get()).then(function(){n.b||(n.g=!0,Fc(n,!0,null,r))}))})},Uc.prototype.h=function(t,e){var n,r,i,o,s;t?(n=t.c,r=t.b,t.a?(e.ma(t.c,null,t.a,t.b),me()):e.Fa(n,r)?(i=e,o=(t=t).b,s=t.c,i.Fa(s,o)(t.g,t.f,t.S(),t.i).then(function(t){i.ma(s,t,null,o)}).s(function(t){i.ma(s,null,t,o)})):be(new w("invalid-auth-event"))):be(new w("invalid-auth-event"))},Vc.prototype.confirm=function(t){return t=Co(this.verificationId,t),this.a(t)};var Hc="mfaInfo",Gc="mfaPendingCredential";function Kc(t,e,n,r){w.call(this,"multi-factor-auth-required",r,e),this.b=new Wc(t,e,n),Ur(this,"resolver",this.b)}function zc(t,e,n){if(t&&v(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new Kc(e,t.serverResponse,n,t.message)}catch(t){}return null}function Qc(){}function Xc(t){Ur(this,"factorId",t.fa),this.a=t}function Yc(t){if(Xc.call(this,t),this.a.fa!=So.PROVIDER_ID)throw new w("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function Jc(t,e){for(var n in je.call(this,t),e)this[n]=e[n]}function $c(t,e){this.a=t,this.b=[],this.c=g(this.xc,this),Je(this.a,"userReloaded",this.c);var r=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&U(e.multiFactor.enrolledFactors,function(t){var e=null,n={};if(t){t.uid&&(n[Kr]=t.uid),t.displayName&&(n[Hr]=t.displayName),t.enrollmentTime&&(n[Gr]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(n[zr]=t.phoneNumber);try{e=new Qr(n)}catch(t){}t=e}else t=null;t&&r.push(t)}),Zc(this,r)}function Zc(t,e){t.b=e,Ur(t,"enrolledFactors",e)}function th(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function eh(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}function nh(t){this.c=t,this.b=this.a=null}function rh(t){return t.b&&1e3*t.b.c||0}function ih(t,e){var n=e.refreshToken;t.b=Pi(e[qs]||""),t.a=n}function oh(e,t){return r=e.c,i=t,new le(function(e,n){"refresh_token"==i.grant_type&&i.refresh_token||"authorization_code"==i.grant_type&&i.code?Ys(r,r.l+"?key="+encodeURIComponent(r.c),function(t){t?t.error?n(Qa(t)):t.access_token&&t.refresh_token?e(t):n(new w("internal-error")):n(new w("network-request-failed"))},"POST",Vn(i).toString(),r.g,r.v.get()):n(new w("internal-error"))}).then(function(t){return e.b=Pi(t.access_token),e.a=t.refresh_token,{accessToken:e.b.toString(),refreshToken:e.a}}).s(function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t});var r,i}function sh(t,e){this.a=t||null,this.b=e||null,jr(this,{lastSignInTime:Pr(e||null),creationTime:Pr(t||null)})}function ah(t,e,n,r,i,o){jr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function uh(t,e,n){this.G=[],this.l=t.apiKey,this.m=t.appName,this.o=t.authDomain||null;var r,i=Ql.SDK_VERSION?vr(Ql.SDK_VERSION):null;this.a=new js(this.l,N(I),i),t.emulatorConfig&&zs(this.a,t.emulatorConfig),this.b=new nh(this.a),yh(this,e[qs]),ih(this.b,e),Ur(this,"refreshToken",this.b.a),bh(this,n||{}),hn.call(this),this.P=!1,this.o&&br()&&(this.i=Pc(this.o,this.l,this.m)),this.R=[],this.f=null,this.u=(r=this,new th(function(){return r.I(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var t=rh(r.b)-b()-3e5;return 0<t?t:0})),this.$=g(this.gb,this);var o=this;this.pa=null,this.Ba=function(t){o.wa(t.h)},this.ba=null,this.za=function(t){zs(o.a,t.c)},this.W=null,this.X=[],this.Aa=function(t){lh(o,t.f)},this.aa=null,this.N=new $c(this,n),Ur(this,"multiFactor",this.N)}function ch(t,e){t.ba&&tn(t.ba,"languageCodeChanged",t.Ba),(t.ba=e)&&Je(e,"languageCodeChanged",t.Ba)}function hh(t,e){t.W&&tn(t.W,"emulatorConfigChanged",t.za),(t.W=e)&&Je(e,"emulatorConfigChanged",t.za)}function lh(t,e){t.X=e,Xs(t.a,Ql.SDK_VERSION?vr(Ql.SDK_VERSION,t.X):null)}function fh(t,e){t.aa&&tn(t.aa,"frameworkChanged",t.Aa),(t.aa=e)&&Je(e,"frameworkChanged",t.Aa)}function ph(e){try{return Ql.app(e.m).auth()}catch(t){throw new w("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function dh(t){t.A||t.u.b||(t.u.start(),tn(t,"tokenChanged",t.$),Je(t,"tokenChanged",t.$))}function vh(t){tn(t,"tokenChanged",t.$),t.u.stop()}function yh(t,e){t.ya=e,Ur(t,"_lat",e)}function gh(t){for(var e=[],n=0;n<t.R.length;n++)e.push(t.R[n](t));return we(e).then(function(){return t})}function mh(t){t.i&&!t.P&&(t.P=!0,Ec(t.i,t))}function bh(t,e){jr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new sh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function _h(){}function wh(t){return me().then(function(){if(t.A)throw new w("app-deleted")})}function Eh(t){return V(t.providerData,function(t){return t.providerId})}function Ih(t,e){e&&(Th(t,e.providerId),t.providerData.push(e))}function Th(t,e){H(t.providerData,function(t){return t.providerId==e})}function Sh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Ur(t,e,n)}function Ch(e,t){var n,r;e!=t&&(jr(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?Ur(e,"metadata",new sh((r=t.metadata).a,r.b)):Ur(e,"metadata",new sh),U(t.providerData,function(t){Ih(e,t)}),n=e.b,r=t.b,n.b=r.b,n.a=r.a,Ur(e,"refreshToken",e.b.a),Zc(e.N,t.N.b))}function Nh(i){return i.I().then(function(t){var e,n,r=i.isAnonymous;return n=t,Ka((e=i).a,Ia,{idToken:n}).then(g(e.Jc,e)).then(function(){return r||Sh(i,"isAnonymous",!1),t})})}function Ah(t,e){e[qs]&&t.ya!=e[qs]&&(ih(t.b,e),t.dispatchEvent(new Jc("tokenChanged")),yh(t,e[qs]),Sh(t,"refreshToken",t.b.a))}function kh(t,e){return Nh(t).then(function(){if(B(Eh(t),e))return gh(t).then(function(){throw new w("provider-already-linked")})})}function Oh(t,e,n){return Vr({user:t,credential:No(e),additionalUserInfo:e=Ui(e),operationType:n})}function Rh(t,e){return Ah(t,e),t.reload().then(function(){return t})}function Ph(n,r,t,e,i){if(!br())return be(new w("operation-not-supported-in-this-environment"));if(n.f&&!i)return be(n.f);var o=Fi(t.providerId),s=Cr(n.uid+":::"),a=null;(!Er()||ar())&&n.o&&t.isOAuthProvider&&(a=au(n.o,n.l,n.m,r,t,null,s,Ql.SDK_VERSION||null,null,null,n.tenantId));var u=nr(a,o&&o.ua,o&&o.ta);return e=e().then(function(){if(xh(n),!i)return n.I().then(function(){})}).then(function(){return Cc(n.i,u,r,t,s,!!a,n.tenantId)}).then(function(){return new le(function(t,e){n.ma(r,null,new w("cancelled-popup-request"),n.h||null),n.g=t,n.O=e,n.h=s,n.c=kc(n.i,n,r,u,s)})}).then(function(t){return u&&er(u),t?Vr(t):null}).s(function(t){throw u&&er(u),t}),Lh(n,e,i)}function Dh(e,t,n,r,i){if(!br())return be(new w("operation-not-supported-in-this-environment"));if(e.f&&!i)return be(e.f);var o=null,s=Cr(e.uid+":::");return r=r().then(function(){if(xh(e),!i)return e.I().then(function(){})}).then(function(){return e.ga=s,gh(e)}).then(function(t){return e.ha&&(t=(t=e.ha).b.set(Uh,e.w(),t.a)),t}).then(function(){return Ac(e.i,t,n,s,e.tenantId)}).s(function(t){if(o=t,e.ha)return jh(e.ha);throw o}).then(function(){if(o)throw o}),Lh(e,r,i)}function xh(t){if(!t.i||!t.P){if(t.i&&!t.P)throw new w("internal-error");throw new w("auth-domain-config-required")}}function Lh(n,t,e){var r,i=(t=t,e=e,(r=n).f&&!e?(t.cancel(),be(r.f)):t.s(function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(r.f||r.dispatchEvent(new Jc("userInvalidated")),r.f=t),t}));return n.G.push(i),i.na(function(){W(n.G,i)}),i.s(function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=zc(t.w(),ph(n),g(n.ic,n))),e||t})}function Mh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[qs]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=new uh(e,n,t);return t.providerData&&U(t.providerData,function(t){t&&Ih(r,Vr(t))}),t.redirectEventId&&(r.ga=t.redirectEventId),r}function Fh(t){this.a=t,this.b=Wu()}Wc.prototype.Qc=function(t){var n=this;return t.rb(this.a.a,this.c).then(function(t){var e=ut(n.f);return delete e[Hc],delete e[Gc],ht(e,t),n.g(e)})},_(Kc,w),Qc.prototype.rb=function(t,e,n){return e.type==Xi?(o=this,s=t,a=n,e.Ha().then(function(t){return t={idToken:t},void 0!==a&&(t.displayName=a),ht(t,{phoneVerificationInfo:To(o.a)}),Ka(s,wa,t)})):(r=this,i=t,e.Ha().then(function(t){return ht(t={mfaPendingCredential:t},{phoneVerificationInfo:To(r.a)}),Ka(i,Ea,t)}));var r,i,o,s,a},_(Xc,Qc),_(Yc,Xc),_(Jc,je),(t=$c.prototype).xc=function(t){var e;Zc(this,(t=t.gd,e=[],U(t.mfaInfo||[],function(t){(t=Wr(t))&&e.push(t)}),e))},t.Qb=function(){return this.a.I().then(function(t){return new Qi(t,null)})},t.ec=function(e,n){var r=this,i=this.a.a;return this.Qb().then(function(t){return e.rb(i,t,n)}).then(function(t){return Ah(r.a,t),r.a.reload()})},t.ad=function(t){var n=this,r="string"==typeof t?t:t.uid,e=this.a.a;return this.a.I().then(function(t){return Ka(e,Ga,{idToken:t,mfaEnrollmentId:r})}).then(function(t){var e=j(n.b,function(t){return t.uid!=r});return Zc(n,e),Ah(n.a,t),n.a.reload().s(function(t){if("auth/user-token-expired"!=t.code)throw t})})},t.w=function(){return{multiFactor:{enrolledFactors:V(this.b,function(t){return t.w()})}}},th.prototype.start=function(){this.a=this.c,function e(n,t){n.stop();n.b=vn(eh(n,t)).then(function(){return e=l.document,n=null,Or()||!e?me():new le(function(t){n=function(){Or()&&(e.removeEventListener("visibilitychange",n,!1),t())},e.addEventListener("visibilitychange",n,!1)}).s(function(t){throw e.removeEventListener("visibilitychange",n,!1),t});var e,n}).then(function(){return n.h()}).then(function(){e(n,!0)}).s(function(t){n.i(t)&&e(n,!1)})}(this,!0)},th.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},nh.prototype.w=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:rh(this)}},nh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?be(new w("user-token-expired")):t||!this.b||b()>rh(this)-3e4?this.a?oh(this,{grant_type:"refresh_token",refresh_token:this.a}):me(null):me({accessToken:this.b.toString(),refreshToken:this.a})},sh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},_(uh,hn),uh.prototype.wa=function(t){this.pa=t,Ks(this.a,t)},uh.prototype.ka=function(){return this.pa},uh.prototype.Ga=function(){return K(this.X)},uh.prototype.gb=function(){this.u.b&&(this.u.stop(),this.u.start())},Ur(uh.prototype,"providerId","firebase"),(t=uh.prototype).reload=function(){var t=this;return Lh(this,wh(this).then(function(){return Nh(t).then(function(){return gh(t)}).then(_h)}))},t.nc=function(t){return this.I(t).then(function(t){return new Bc(t)})},t.I=function(t){var e=this;return Lh(this,wh(this).then(function(){return e.b.getToken(t)}).then(function(t){if(!t)throw new w("internal-error");return t.accessToken!=e.ya&&(yh(e,t.accessToken),e.dispatchEvent(new Jc("tokenChanged"))),Sh(e,"refreshToken",t.refreshToken),t.accessToken}))},t.Jc=function(t){if(!(t=t.users)||!t.length)throw new w("internal-error");bh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e,n=(e=(e=t).providerUserInfo)&&e.length?V(e,function(t){return new ah(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[],r=0;r<n.length;r++)Ih(this,n[r]);Sh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new Jc("userReloaded",{gd:t}))},t.Kc=function(t){return Mr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.sb(t)},t.sb=function(t){var e=this,n=null;return Lh(this,t.c(this.a,this.uid).then(function(t){return Ah(e,t),n=Oh(e,t,"reauthenticate"),e.f=null,e.reload()}).then(function(){return n}),!0)},t.Bc=function(t){return Mr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.pb(t)},t.pb=function(e){var n=this,r=null;return Lh(this,kh(this,e.providerId).then(function(){return n.I()}).then(function(t){return e.b(n.a,t)}).then(function(t){return r=Oh(n,t,"link"),Rh(n,t)}).then(function(){return r}))},t.Cc=function(t,e){var n=this;return Lh(this,kh(this,"phone").then(function(){return qc(ph(n),t,e,g(n.pb,n))}))},t.Lc=function(t,e){var n=this;return Lh(this,me().then(function(){return qc(ph(n),t,e,g(n.sb,n))}),!0)},t.Ab=function(e){var n=this;return Lh(this,this.I().then(function(t){return n.a.Ab(t,e)}).then(function(t){return Ah(n,t),n.reload()}))},t.dd=function(e){var n=this;return Lh(this,this.I().then(function(t){return e.b(n.a,t)}).then(function(t){return Ah(n,t),n.reload()}))},t.Bb=function(e){var n=this;return Lh(this,this.I().then(function(t){return n.a.Bb(t,e)}).then(function(t){return Ah(n,t),n.reload()}))},t.Cb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return wh(this);var n=this;return Lh(this,this.I().then(function(t){return n.a.Cb(t,{displayName:e.displayName,photoUrl:e.photoURL})}).then(function(t){return Ah(n,t),Sh(n,"displayName",t.displayName||null),Sh(n,"photoURL",t.photoUrl||null),U(n.providerData,function(t){"password"===t.providerId&&(Ur(t,"displayName",n.displayName),Ur(t,"photoURL",n.photoURL))}),gh(n)}).then(_h))},t.bd=function(e){var n=this;return Lh(this,Nh(this).then(function(t){return B(Eh(n),e)?Ka(n.a,ma,{idToken:t,deleteProvider:[e]}).then(function(t){var e={};return U(t.providerUserInfo||[],function(t){e[t.providerId]=!0}),U(Eh(n),function(t){e[t]||Th(n,t)}),e[So.PROVIDER_ID]||Ur(n,"phoneNumber",null),gh(n)}):gh(n).then(function(){throw new w("no-such-provider")})}))},t.delete=function(){var e=this;return Lh(this,this.I().then(function(t){return Ka(e.a,ga,{idToken:t})}).then(function(){e.dispatchEvent(new Jc("userDeleted"))})).then(function(){for(var t=0;t<e.G.length;t++)e.G[t].cancel("app-deleted");ch(e,null),hh(e,null),fh(e,null),e.G=[],e.A=!0,vh(e),Ur(e,"refreshToken",null),e.i&&Ic(e.i,e)})},t.Eb=function(t,e){return!!("linkViaPopup"==t&&(this.h||null)==e&&this.g||"reauthViaPopup"==t&&(this.h||null)==e&&this.g||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.ma=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.h||null)||(n&&this.O?this.O(n):e&&!n&&this.g&&this.g(e),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.h||null)?g(this.Jb,this):"reauthViaPopup"==t&&e==(this.h||null)?g(this.Kb,this):"linkViaRedirect"==t&&(this.ga||null)==e?g(this.Jb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?g(this.Kb,this):null},t.Dc=function(t){var e=this;return Ph(this,"linkViaPopup",t,function(){return kh(e,t.providerId).then(function(){return gh(e)})},!1)},t.Mc=function(t){return Ph(this,"reauthViaPopup",t,function(){return me()},!0)},t.Ec=function(t){var e=this;return Dh(this,"linkViaRedirect",t,function(){return kh(e,t.providerId)},!1)},t.Nc=function(t){return Dh(this,"reauthViaRedirect",t,function(){return me()},!0)},t.Jb=function(e,n,t,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return t=this.I().then(function(t){return ha(i.a,{requestUri:e,postBody:r,sessionId:n,idToken:t})}).then(function(t){return o=Oh(i,t,"link"),Rh(i,t)}).then(function(){return o}),Lh(this,t)},t.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Lh(this,me().then(function(){return $i(la(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)}).then(function(t){return o=Oh(i,t,"reauthenticate"),Ah(i,t),i.f=null,i.reload()}).then(function(){return o}),!0)},t.tb=function(e){var n=this,r=null;return Lh(this,this.I().then(function(t){return r=t,void 0===e||at(e)?{}:Ai(new mi(e))}).then(function(t){return n.a.tb(r,t)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.Db=function(e,n){var r=this,i=null;return Lh(this,this.I().then(function(t){return i=t,void 0===n||at(n)?{}:Ai(new mi(n))}).then(function(t){return r.a.Db(i,e,t)}).then(function(t){if(r.email!=t)return r.reload()}).then(function(){}))},t.ic=function(t){var e=null,n=this;return Lh(this,t=$i(me(t),n.uid).then(function(t){return e=Oh(n,t,"reauthenticate"),Ah(n,t),n.f=null,n.reload()}).then(function(){return e}),!0)},t.toJSON=function(){return this.w()},t.w=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.o,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&ht(e,this.metadata.w()),U(this.providerData,function(t){e.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(t))}),ht(e,this.N.w()),e};var Uh={name:"redirectUser",D:"session"};function jh(t){return Ku(t.b,Uh,t.a)}function Vh(t){var e,n,r,i;this.a=t,this.b=Wu(),this.c=null,this.f=(n=Wh("local"),r=Wh("session"),i=Wh("none"),function(n,r,i){var o=Gu(r,i),s=Hu(n,r.D);return n.get(r,i).then(function(t){var e=null;try{e=Sr(l.localStorage.getItem(o))}catch(t){}if(e&&!t)return l.localStorage.removeItem(o),n.set(r,e,i);e&&t&&"localStorage"!=s.type&&l.localStorage.removeItem(o)})}((e=this).b,n,e.a).then(function(){return e.b.get(r,e.a)}).then(function(t){return t?r:e.b.get(i,e.a).then(function(t){return t?i:e.b.get(n,e.a).then(function(t){return t?n:e.b.get(Bh,e.a).then(function(t){return t?Wh(t):n})})})}).then(function(t){return e.c=t,qh(e,t.D)}).s(function(){e.c||(e.c=n)})),this.b.addListener(Wh("local"),this.a,g(this.g,this))}function qh(t,e){var n,a,r=[];for(n in qu)qu[n]!==e&&r.push(Ku(t.b,Wh(qu[n]),t.a));return r.push(Ku(t.b,Bh,t.a)),a=r,new le(function(n,e){var r=a.length,i=[];if(r)for(var t=function(t,e){r--,i[t]=e,0==r&&n(i)},o=function(t){e(t)},s=0;s<a.length;s++)_e(a[s],m(t,s),o);else n(i)})}Vh.prototype.g=function(){var e=this,n=Wh("local");zh(this,function(){return me().then(function(){return e.c&&"local"!=e.c.D?e.b.get(n,e.a):null}).then(function(t){if(t)return qh(e,"local").then(function(){e.c=n})})})};var Bh={name:"persistence",D:"session"};function Wh(t){return{name:"authUser",D:t}}function Hh(t,e){return zh(t,function(){return t.b.set(t.c,e.w(),t.a)})}function Gh(t){return zh(t,function(){return Ku(t.b,t.c,t.a)})}function Kh(t,e,n){return zh(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Mh(t||{})})})}function zh(t,e){return t.f=t.f.then(e,e),t.f}function Qh(t){if(this.m=!1,Ur(this,"settings",new jc),Ur(this,"app",t),!this.app.options||!this.app.options.apiKey)throw new w("invalid-api-key");var n,e,r,i,o,s;t=Ql.SDK_VERSION?vr(Ql.SDK_VERSION):null,this.a=new js(this.app.options&&this.app.options.apiKey,N(I),t),this.R=[],this.u=[],this.P=[],this.ac=Ql.INTERNAL.createSubscribe(g(this.yc,this)),this.X=void 0,this.bc=Ql.INTERNAL.createSubscribe(g(this.zc,this)),el(this,null),this.l=new Vh(this.app.options.apiKey+":"+this.app.name),this.G=new Fh(this.app.options.apiKey+":"+this.app.name),this.$=sl(this,(e=(n=this).app.options.authDomain,t=function(e){var t=function(t,e){return t.b.get(Uh,t.a).then(function(t){return t&&e&&(t.authDomain=e),Mh(t||{})})}(e.G,e.app.options.authDomain).then(function(t){return(e.o=t)&&(t.ha=e.G),jh(e.G)});return sl(e,t)}(n).then(function(){return Kh(n.l,e,n.f)}).then(function(e){return e?(e.ha=n.G,n.o&&(n.o.ga||null)==(e.ga||null)?e:e.reload().then(function(){return Hh(n.l,e).then(function(){return e})}).s(function(t){return"auth/network-request-failed"==t.code?e:Gh(n.l)})):null}).then(function(t){el(n,t||null)}),sl(n,t))),this.i=sl(this,(r=this).$.then(function(){return Zh(r)}).s(function(){}).then(function(){if(!r.m)return r.pa()}).s(function(){}).then(function(){var t;r.m||(r.ba=!0,(t=r.l).b.addListener(Wh("local"),t.a,r.pa))})),this.ba=!1,this.pa=g(this.Yc,this),this.Ba=g(this.da,this),this.ya=g(this.kc,this),this.za=g(this.vc,this),this.Aa=g(this.wc,this),this.b=null,o=(i=this).app.options.authDomain,s=i.app.options.apiKey,o&&br()&&(i.gb=i.$.then(function(){var t;if(!i.m)return i.b=Pc(o,s,i.app.name,i.f),Ec(i.b,i),rl(i)&&mh(rl(i)),i.o&&(mh(i.o),(t=i.o).wa(i.ka()),ch(t,i),lh(t=i.o,i.N),fh(t,i),zs((t=i.o).a,i.f),hh(t,i),i.o=null),i.b})),this.INTERNAL={},this.INTERNAL.delete=g(this.delete,this),this.INTERNAL.logFramework=g(this.Fc,this),this.A=0,hn.call(this),t=this,Object.defineProperty(t,"lc",{get:function(){return this.ka()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.S()},set:function(t){this.xb(t)},enumerable:!1}),t.W=null,this.N=[],this.f=null}function Xh(t){je.call(this,"languageCodeChanged"),this.h=t}function Yh(t){je.call(this,"emulatorConfigChanged"),this.c=t}function Jh(t){je.call(this,"frameworkChanged"),this.f=t}function $h(t){return t.gb||be(new w("auth-domain-config-required"))}function Zh(t){if(!br())return be(new w("operation-not-supported-in-this-environment"));var e=$h(t).then(function(){return t.b.qa()}).then(function(t){return t?Vr(t):null});return sl(t,e)}function tl(o,s){var a={};return a.apiKey=o.app.options.apiKey,a.authDomain=o.app.options.authDomain,a.appName=o.app.name,o.f&&(a.emulatorConfig=o.f),o.$.then(function(){return t=a,e=s,n=o.G,r=o.Ga(),i=new uh(t,e),n&&(i.ha=n),r&&lh(i,r),i.reload().then(function(){return i});var t,e,n,r,i}).then(function(t){return rl(o)&&t.uid==rl(o).uid?Ch(rl(o),t):(el(o,t),mh(t)),o.da(t)}).then(function(){ol(o)})}function el(t,e){var n,r;rl(t)&&(n=rl(t),r=t.Ba,H(n.R,function(t){return t==r}),tn(rl(t),"tokenChanged",t.ya),tn(rl(t),"userDeleted",t.za),tn(rl(t),"userInvalidated",t.Aa),vh(rl(t))),e&&(e.R.push(t.Ba),Je(e,"tokenChanged",t.ya),Je(e,"userDeleted",t.za),Je(e,"userInvalidated",t.Aa),0<t.A&&dh(e)),Ur(t,"currentUser",e),e&&(e.wa(t.ka()),ch(e,t),lh(e,t.N),fh(e,t),zs(e.a,t.f),hh(e,t))}function nl(n,t){var e=null,r=null;return sl(n,t.then(function(t){return e=No(t),r=Ui(t),tl(n,t)},function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=zc(t.w(),n,g(n.jc,n))),e||t}).then(function(){return Vr({user:rl(n),credential:e,additionalUserInfo:r,operationType:"signIn"})}))}function rl(t){return t.currentUser}function il(t){return rl(t)&&rl(t)._lat||null}function ol(t){if(t.ba){for(var e=0;e<t.u.length;e++)t.u[e]&&t.u[e](il(t));if(t.X!==t.getUid()&&t.P.length)for(t.X=t.getUid(),e=0;e<t.P.length;e++)t.P[e]&&t.P[e](il(t))}}function sl(t,e){return t.R.push(e),e.na(function(){W(t.R,e)}),e}function al(){}function ul(){this.a={},this.b=1e12}Vh.prototype.wb=function(e){var n=null,r=this;return function(t){var e=new w("invalid-persistence-type"),n=new w("unsupported-persistence-type");t:{for(r in qu)if(qu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(cr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!_u()&&"none"!==t)throw n;break;default:if(!mr()&&"none"!==t)throw n}}(e),zh(this,function(){return e!=r.c.D?r.b.get(r.c,r.a).then(function(t){return n=t,qh(r,e)}).then(function(){if(r.c=Wh(e),n)return r.b.set(r.c,n,r.a)}):me()})},_(Qh,hn),_(Xh,je),_(Yh,je),_(Jh,je),(t=Qh.prototype).wb=function(t){return t=this.l.wb(t),sl(this,t)},t.wa=function(t){this.aa===t||this.m||(this.aa=t,Ks(this.a,this.aa),this.dispatchEvent(new Xh(this.ka())))},t.ka=function(){return this.aa},t.ed=function(){var t=l.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.fd=function(t){if(!this.f){if(!/^https?:\/\//.test(t))throw new w("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");Rr("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),l.document&&or().then(function(){var t=l.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),l.document.body.appendChild(t)}),this.f={url:t},this.settings.hb=!0,zs(this.a,this.f),this.dispatchEvent(new Yh(this.f))}},t.Fc=function(t){this.N.push(t),Xs(this.a,Ql.SDK_VERSION?vr(Ql.SDK_VERSION,this.N):null),this.dispatchEvent(new Jh(this.N))},t.Ga=function(){return K(this.N)},t.xb=function(t){this.W===t||this.m||(this.W=t,this.a.b=this.W)},t.S=function(){return this.W},t.toJSON=function(){return{apiKey:this.app.options.apiKey,authDomain:this.app.options.authDomain,appName:this.app.name,currentUser:rl(this)&&rl(this).w()}},t.Eb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.h==e&&!!this.g;default:return!1}},t.ma=function(t,e,n,r){"signInViaPopup"==t&&this.h==r&&(n&&this.O?this.O(n):e&&!n&&this.g&&this.g(e),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.h==e&&this.g?g(this.hc,this):null},t.hc=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then(function(){return nl(i,ca(i.a,o))})},t.Wc=function(e){if(!br())return be(new w("operation-not-supported-in-this-environment"));var n=this,t=Fi(e.providerId),r=Cr(),i=null;(!Er()||ar())&&this.app.options.authDomain&&e.isOAuthProvider&&(i=au(this.app.options.authDomain,this.app.options.apiKey,this.app.name,"signInViaPopup",e,null,r,Ql.SDK_VERSION||null,null,null,this.S(),this.f));var o=nr(i,t&&t.ua,t&&t.ta);return sl(this,t=$h(this).then(function(t){return Cc(t,o,"signInViaPopup",e,r,!!i,n.S())}).then(function(){return new le(function(t,e){n.ma("signInViaPopup",null,new w("cancelled-popup-request"),n.h),n.g=t,n.O=e,n.h=r,n.c=kc(n.b,n,"signInViaPopup",o,r)})}).then(function(t){return o&&er(o),t?Vr(t):null}).s(function(t){throw o&&er(o),t}))},t.Xc=function(t){if(!br())return be(new w("operation-not-supported-in-this-environment"));var e=this;return sl(this,$h(this).then(function(){return zh(t=e.l,function(){return t.b.set(Bh,t.c.D,t.a)});var t}).then(function(){return Ac(e.b,"signInViaRedirect",t,void 0,e.S())}))},t.qa=function(){var e=this;return Zh(this).then(function(t){return e.b&&Lc(e.b.b),t}).s(function(t){throw e.b&&Lc(e.b.b),t})},t.cd=function(t){if(!t)return be(new w("null-user"));if(this.W!=t.tenantId)return be(new w("tenant-id-mismatch"));var e=this,n={};n.apiKey=this.app.options.apiKey,n.authDomain=this.app.options.authDomain,n.appName=this.app.name;var r,i,o,s,a,u=(r=t,i=n,o=e.G,s=e.Ga(),a=r.b,(n={})[qs]=a.b&&a.b.toString(),n.refreshToken=a.a,i=new uh(i||{apiKey:r.l,authDomain:r.o,appName:r.m},n),o&&(i.ha=o),s&&lh(i,s),Ch(i,r),i);return sl(this,this.i.then(function(){if(e.app.options.apiKey!=t.l)return u.reload()}).then(function(){return rl(e)&&t.uid==rl(e).uid?(Ch(rl(e),t),e.da(t)):(el(e,u),mh(u),e.da(u))}).then(function(){ol(e)}))},t.zb=function(){var t=this,e=this.i.then(function(){return t.b&&Lc(t.b.b),rl(t)?(el(t,null),Gh(t.l).then(function(){ol(t)})):me()});return sl(this,e)},t.Yc=function(){var r=this;return Kh(this.l,this.app.options.authDomain).then(function(t){if(!r.m){var e,n;if((n=rl(r)&&t)&&(n=rl(r).uid,e=t.uid,n=null!=n&&""!==n&&null!=e&&""!==e&&n==e),n)return Ch(rl(r),t),rl(r).I();(rl(r)||t)&&(el(r,t),t&&(mh(t),t.ha=r.G),r.b&&Ec(r.b,r),ol(r))}})},t.da=function(t){return Hh(this.l,t)},t.kc=function(){ol(this),this.da(rl(this))},t.vc=function(){this.zb()},t.wc=function(){this.zb()},t.jc=function(t){var e=this;return this.i.then(function(){return nl(e,me(t))})},t.yc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(rl(e))})},t.zc=function(t){var e,n,r=this;n=function(){t.next(rl(r))},(e=this).P.push(n),sl(e,e.i.then(function(){!e.m&&B(e.P,n)&&e.X!==e.getUid()&&(e.X=e.getUid(),n(il(e)))}))},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){"function"==typeof t?t(rl(r)):"function"==typeof t.next&&t.next(rl(r))}),this.ac(t,e,n)},t.Gc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){r.X=r.getUid(),"function"==typeof t?t(rl(r)):"function"==typeof t.next&&t.next(rl(r))}),this.bc(t,e,n)},t.mc=function(t){var e=this,n=this.i.then(function(){return rl(e)?rl(e).I(t).then(function(t){return{accessToken:t}}):null});return sl(this,n)},t.Sc=function(t){var n=this;return this.i.then(function(){return nl(n,Ka(n.a,Va,{token:t}))}).then(function(t){var e=t.user;return Sh(e,"isAnonymous",!1),n.da(e),t})},t.Tc=function(t,e){var n=this;return this.i.then(function(){return nl(n,Ka(n.a,qa,{email:t,password:e}))})},t.dc=function(t,e){var n=this;return this.i.then(function(){return nl(n,Ka(n.a,va,{email:t,password:e}))})},t.Za=function(t){var e=this;return this.i.then(function(){return nl(e,t.ja(e.a))})},t.Rc=function(t){return Mr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Za(t)},t.yb=function(){var n=this;return this.i.then(function(){var t=rl(n);if(t&&t.isAnonymous){var e=Vr({providerId:null,isNewUser:!1});return Vr({user:t,credential:null,additionalUserInfo:e,operationType:"signIn"})}return nl(n,n.a.yb()).then(function(t){var e=t.user;return Sh(e,"isAnonymous",!0),n.da(e),t})})},t.getUid=function(){return rl(this)&&rl(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.A++,0<this.A&&rl(this)&&dh(rl(this))},t.Oc=function(e){var n=this;U(this.u,function(t){t==e&&n.A--}),this.A<0&&(this.A=0),0==this.A&&rl(this)&&vh(rl(this)),this.removeAuthTokenListener(e)},t.addAuthTokenListener=function(t){var e=this;this.u.push(t),sl(this,this.i.then(function(){e.m||B(e.u,t)&&t(il(e))}))},t.removeAuthTokenListener=function(e){H(this.u,function(t){return t==e})},t.delete=function(){this.m=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.l&&(t=this.l).b.removeListener(Wh("local"),t.a,this.pa),this.b&&(Ic(this.b,this),Lc(this.b.b)),Promise.resolve()},t.gc=function(t){return sl(this,Ka(this.a,ya,{identifier:t,continueUri:_r()?$n():"http://localhost"}).then(function(t){return t.signinMethods||[]}))},t.Ac=function(t){return!!wo(t)},t.vb=function(e,n){var r=this;return sl(this,me().then(function(){var t=new mi(n);if(!t.c)throw new w("argument-error",wi+" must be true when sending sign in link to email");return Ai(t)}).then(function(t){return r.a.vb(e,t)}).then(function(){}))},t.hd=function(t){return this.Qa(t).then(function(t){return t.data.email})},t.mb=function(t,e){return sl(this,this.a.mb(t,e).then(function(){}))},t.Qa=function(t){return sl(this,this.a.Qa(t).then(function(t){return new Xr(t)}))},t.ib=function(t){return sl(this,this.a.ib(t).then(function(){}))},t.ub=function(e,t){var n=this;return sl(this,me().then(function(){return void 0===t||at(t)?{}:Ai(new mi(t))}).then(function(t){return n.a.ub(e,t)}).then(function(){}))},t.Vc=function(t,e){return sl(this,qc(this,t,e,g(this.Za,this)))},t.Uc=function(n,r){var i=this;return sl(this,me().then(function(){var t=r||$n(),e=_o(n,t);if(!(t=wo(t)))throw new w("argument-error","Invalid email link!");if(t.tenantId!==i.S())throw new w("tenant-id-mismatch");return i.Za(e)}))},al.prototype.render=function(){},al.prototype.reset=function(){},al.prototype.getResponse=function(){},al.prototype.execute=function(){};var cl=null;function hl(t,e){return(e=ll(e))&&t.a[e]||null}function ll(t){return(t=void 0===t?1e12:t)?t.toString():null}function fl(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=$t(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():Je(this.f,"click",this.i)}function pl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function dl(){}function vl(){}ul.prototype.render=function(t,e){return this.a[this.b.toString()]=new fl(t,e),this.b++},ul.prototype.reset=function(t){var e=hl(this,t);t=ll(t),e&&t&&(e.delete(),delete this.a[t])},ul.prototype.getResponse=function(t){return(t=hl(this,t))?t.getResponse():null},ul.prototype.execute=function(t){(t=hl(this,t))&&t.execute()},fl.prototype.getResponse=function(){return pl(this),this.b},fl.prototype.execute=function(){pl(this);var n=this;this.a||(this.a=setTimeout(function(){n.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var t=n.c.callback,e=n.c["expired-callback"];if(t)try{t(n.b)}catch(t){}n.a=setTimeout(function(){if(n.a=null,n.b=null,e)try{e()}catch(t){}n.h&&n.execute()},6e4)},500))},fl.prototype.delete=function(){pl(this),this.g=!0,clearTimeout(this.a),this.a=null,tn(this.f,"click",this.i)},Ur(dl,"FACTOR_ID","phone"),vl.prototype.g=function(){return me(cl=cl||new ul)},vl.prototype.c=function(){};var yl=null;function gl(){this.b=l.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var ml=new ft(vt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),bl=new kr(3e4,6e4);gl.prototype.g=function(i){var o=this;return new le(function(t,e){var r=setTimeout(function(){e(new w("network-request-failed"))},bl.get());!l.grecaptcha||i!==o.f&&!o.b?(l[o.a]=function(){var n;l.grecaptcha?(o.f=i,n=l.grecaptcha.render,l.grecaptcha.render=function(t,e){return t=n(t,e),o.b++,t},clearTimeout(r),t(l.grecaptcha)):(clearTimeout(r),e(new w("internal-error"))),delete l[o.a]},me(Ps(bt(ml,{onload:o.a,hl:i||""}))).s(function(){clearTimeout(r),e(new w("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(r),t(l.grecaptcha))})},gl.prototype.c=function(){this.b--};var _l=null;function wl(t,e,n,r,i,o,s){if(Ur(this,"type","recaptcha"),this.c=this.f=null,this.A=!1,this.m=e,this.g=null,s=s?yl=yl||new vl:_l=_l||new gl,this.v=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Tl])throw new w("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Sl],!l.document)throw new w("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!$t(e)||!this.i&&$t(e).hasChildNodes())throw new w("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.o=new js(t,o||null,i||null),this.u=r||function(){return null};var a=this;this.l=[];var u=this.a[El];this.a[El]=function(t){var e;Cl(a,t),"function"==typeof u?u(t):"string"!=typeof u||"function"==typeof(e=gr(u,l))&&e(t)};var c=this.a[Il];this.a[Il]=function(){var t;Cl(a,null),"function"==typeof c?c():"string"!=typeof c||"function"==typeof(t=gr(c,l))&&t()}}var El="callback",Il="expired-callback",Tl="sitekey",Sl="size";function Cl(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Nl(t,e){return t.h.push(e),e.na(function(){W(t.h,e)}),e}function Al(t){if(t.A)throw new w("internal-error","RecaptchaVerifier instance has been destroyed.")}function kl(t,e,n){var r=!1;try{this.b=n||Ql.app()}catch(t){throw new w("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new w("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=Ql.SDK_VERSION?vr(Ql.SDK_VERSION,o):null,wl.call(this,n,t,e,function(){try{var e=i.b.auth().ka()}catch(t){e=null}return e},o,N(I),r)}function Ol(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new w("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].K(n[i])&&!o){if(e=e[i],i<0||i>=Rl.length)throw new w("internal-error","Argument validator received an unsupported number of arguments.");n=Rl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.J+".";break t}r=null}}if(r)throw new w("argument-error",t+" failed: "+r)}(t=wl.prototype).Ia=function(){var e=this;return this.f?this.f:this.f=Nl(this,me().then(function(){if(_r()&&!ur())return or();throw new w("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return e.v.g(e.u())}).then(function(t){return e.g=t,Ka(e.o,ka,{})}).then(function(t){e.a[Tl]=t.recaptchaSiteKey}).s(function(t){throw e.f=null,t}))},t.render=function(){Al(this);var n=this;return Nl(this,this.Ia().then(function(){var t,e;return null===n.c&&(e=n.m,n.i||(t=$t(e),e=re("DIV"),t.appendChild(e)),n.c=n.g.render(e,n.a)),n.c}))},t.verify=function(){Al(this);var i=this;return Nl(this,this.render().then(function(e){return new le(function(n){var r,t=i.g.getResponse(e);t?n(t):(r=function(t){var e;t&&(e=r,H(i.l,function(t){return t==e}),n(t))},i.l.push(r),i.i&&i.g.execute(i.c))})}))},t.reset=function(){Al(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Al(this),this.A=!0,this.v.c();for(var t,e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=$t(this.m);for(;t=e.firstChild;)e.removeChild(t)}},_(kl,wl);var Rl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Pl(t,e){return{name:t||"",J:"a valid string",optional:!!e,K:function(t){return"string"==typeof t}}}function Dl(t,e){return{name:t||"",J:"a boolean",optional:!!e,K:function(t){return"boolean"==typeof t}}}function xl(t,e){return{name:t||"",J:"a valid object",optional:!!e,K:v}}function Ll(t,e){return{name:t||"",J:"a function",optional:!!e,K:function(t){return"function"==typeof t}}}function Ml(t,e){return{name:t||"",J:"null",optional:!!e,K:function(t){return null===t}}}function Fl(n){return{name:n?n+"Credential":"credential",J:n?"a valid "+n+" credential":"a valid credential",optional:!1,K:function(t){if(!t)return!1;var e=!n||t.providerId===n;return!(!t.ja||!e)}}}function Ul(){return{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.rb}}}function jl(){return{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}}function Vl(t,e){return v(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function ql(t){return v(t)&&"string"==typeof t.uid}function Bl(){return{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}}function Wl(e,n,t,r){return{name:t||"",J:e.J+" or "+n.J,optional:!!r,K:function(t){return e.K(t)||n.K(t)}}}function Hl(t,e){for(var n in e){var r=e[n].name;t[r]=zl(r,t[n],e[n].j)}}function Gl(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:m(function(t){return this[t]},n),set:m(function(t,e,n,r){Ol(t,[n],[r],!0),this[e]=r},r,n,e[n].jb),enumerable:!0})}}function Kl(t,e,n,r){t[e]=zl(e,n,r)}function zl(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Ol(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=(t=(t=t).split("."))[t.length-1];for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Hl(Qh.prototype,{ib:{name:"applyActionCode",j:[Pl("code")]},Qa:{name:"checkActionCode",j:[Pl("code")]},mb:{name:"confirmPasswordReset",j:[Pl("code"),Pl("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Pl("email"),Pl("password")]},gc:{name:"fetchSignInMethodsForEmail",j:[Pl("email")]},qa:{name:"getRedirectResult",j:[]},Ac:{name:"isSignInWithEmailLink",j:[Pl("emailLink")]},Gc:{name:"onAuthStateChanged",j:[Wl(xl(),Ll(),"nextOrObserver"),Ll("opt_error",!0),Ll("opt_completed",!0)]},Hc:{name:"onIdTokenChanged",j:[Wl(xl(),Ll(),"nextOrObserver"),Ll("opt_error",!0),Ll("opt_completed",!0)]},ub:{name:"sendPasswordResetEmail",j:[Pl("email"),Wl(xl("opt_actionCodeSettings",!0),Ml(null,!0),"opt_actionCodeSettings",!0)]},vb:{name:"sendSignInLinkToEmail",j:[Pl("email"),xl("actionCodeSettings")]},wb:{name:"setPersistence",j:[Pl("persistence")]},Rc:{name:"signInAndRetrieveDataWithCredential",j:[Fl()]},yb:{name:"signInAnonymously",j:[]},Za:{name:"signInWithCredential",j:[Fl()]},Sc:{name:"signInWithCustomToken",j:[Pl("token")]},Tc:{name:"signInWithEmailAndPassword",j:[Pl("email"),Pl("password")]},Uc:{name:"signInWithEmailLink",j:[Pl("email"),Pl("emailLink",!0)]},Vc:{name:"signInWithPhoneNumber",j:[Pl("phoneNumber"),Bl()]},Wc:{name:"signInWithPopup",j:[jl()]},Xc:{name:"signInWithRedirect",j:[jl()]},cd:{name:"updateCurrentUser",j:[Wl({name:"user",J:"an instance of Firebase User",optional:!1,K:function(t){return!!(t&&t instanceof uh)}},Ml(),"user")]},zb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Pl(null,!0)]},ed:{name:"useDeviceLanguage",j:[]},fd:{name:"useEmulator",j:[Pl("url")]},hd:{name:"verifyPasswordResetCode",j:[Pl("code")]}}),Gl(Qh.prototype,{lc:{name:"languageCode",jb:Wl(Pl(),Ml(),"languageCode")},ti:{name:"tenantId",jb:Wl(Pl(),Ml(),"tenantId")}}),(Qh.Persistence=qu).LOCAL="local",Qh.Persistence.SESSION="session",Qh.Persistence.NONE="none",Hl(uh.prototype,{delete:{name:"delete",j:[]},nc:{name:"getIdTokenResult",j:[Dl("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Dl("opt_forceRefresh",!0)]},Bc:{name:"linkAndRetrieveDataWithCredential",j:[Fl()]},pb:{name:"linkWithCredential",j:[Fl()]},Cc:{name:"linkWithPhoneNumber",j:[Pl("phoneNumber"),Bl()]},Dc:{name:"linkWithPopup",j:[jl()]},Ec:{name:"linkWithRedirect",j:[jl()]},Kc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Fl()]},sb:{name:"reauthenticateWithCredential",j:[Fl()]},Lc:{name:"reauthenticateWithPhoneNumber",j:[Pl("phoneNumber"),Bl()]},Mc:{name:"reauthenticateWithPopup",j:[jl()]},Nc:{name:"reauthenticateWithRedirect",j:[jl()]},reload:{name:"reload",j:[]},tb:{name:"sendEmailVerification",j:[Wl(xl("opt_actionCodeSettings",!0),Ml(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Pl(null,!0)]},bd:{name:"unlink",j:[Pl("provider")]},Ab:{name:"updateEmail",j:[Pl("email")]},Bb:{name:"updatePassword",j:[Pl("password")]},dd:{name:"updatePhoneNumber",j:[Fl("phone")]},Cb:{name:"updateProfile",j:[xl("profile")]},Db:{name:"verifyBeforeUpdateEmail",j:[Pl("email"),Wl(xl("opt_actionCodeSettings",!0),Ml(null,!0),"opt_actionCodeSettings",!0)]}}),Hl(ul.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Hl(al.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Hl(le.prototype,{na:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),Gl(jc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",jb:Dl("appVerificationDisabledForTesting")}}),Hl(Vc.prototype,{confirm:{name:"confirm",j:[Pl("verificationCode")]}}),Kl(Ji,"fromJSON",function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[io,mo,Io,eo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[Wl(Pl(),xl(),"json")]),Kl(bo,"credential",function(t,e){return new go(t,e)},[Pl("email"),Pl("password")]),Hl(go.prototype,{w:{name:"toJSON",j:[Pl(null,!0)]}}),Hl(uo.prototype,{Ca:{name:"addScope",j:[Pl("scope")]},Ka:{name:"setCustomParameters",j:[xl("customOAuthParameters")]}}),Kl(uo,"credential",co,[Wl(Pl(),xl(),"token")]),Kl(bo,"credentialWithLink",_o,[Pl("email"),Pl("emailLink")]),Hl(ho.prototype,{Ca:{name:"addScope",j:[Pl("scope")]},Ka:{name:"setCustomParameters",j:[xl("customOAuthParameters")]}}),Kl(ho,"credential",lo,[Wl(Pl(),xl(),"token")]),Hl(fo.prototype,{Ca:{name:"addScope",j:[Pl("scope")]},Ka:{name:"setCustomParameters",j:[xl("customOAuthParameters")]}}),Kl(fo,"credential",po,[Wl(Pl(),Wl(xl(),Ml()),"idToken"),Wl(Pl(),Ml(),"accessToken",!0)]),Hl(vo.prototype,{Ka:{name:"setCustomParameters",j:[xl("customOAuthParameters")]}}),Kl(vo,"credential",yo,[Wl(Pl(),xl(),"token"),Pl("secret",!0)]),Hl(ao.prototype,{Ca:{name:"addScope",j:[Pl("scope")]},credential:{name:"credential",j:[Wl(Pl(),Wl(xl(),Ml()),"optionsOrIdToken"),Wl(Pl(),Ml(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[xl("customOAuthParameters")]}}),Hl(no.prototype,{w:{name:"toJSON",j:[Pl(null,!0)]}}),Hl(Zi.prototype,{w:{name:"toJSON",j:[Pl(null,!0)]}}),Kl(So,"credential",Co,[Pl("verificationId"),Pl("verificationCode")]),Hl(So.prototype,{eb:{name:"verifyPhoneNumber",j:[Wl(Pl(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(t){return!!t&&(t.session&&t.phoneNumber?Vl(t.session,Xi)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Vl(t.session,Yi)&&ql(t.multiFactorHint):t.session&&t.multiFactorUid?Vl(t.session,Yi)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),Bl()]}}),Hl(Eo.prototype,{w:{name:"toJSON",j:[Pl(null,!0)]}}),Hl(w.prototype,{toJSON:{name:"toJSON",j:[Pl(null,!0)]}}),Hl(Lo.prototype,{toJSON:{name:"toJSON",j:[Pl(null,!0)]}}),Hl(xo.prototype,{toJSON:{name:"toJSON",j:[Pl(null,!0)]}}),Hl(Kc.prototype,{toJSON:{name:"toJSON",j:[Pl(null,!0)]}}),Hl(Wc.prototype,{Qc:{name:"resolveSignIn",j:[Ul()]}}),Hl($c.prototype,{Qb:{name:"getSession",j:[]},ec:{name:"enroll",j:[Ul(),Pl("displayName",!0)]},ad:{name:"unenroll",j:[Wl({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:ql},Pl(),"multiFactorInfoIdentifier")]}}),Hl(kl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Kl(ci,"parseLink",gi,[Pl("link")]),Kl(dl,"assertion",function(t){return new Yc(t)},[Fl("phone")]),function(){if(void 0===Ql||!Ql.INTERNAL||!Ql.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Jr,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:Yr,VERIFY_AND_CHANGE_EMAIL:$r,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Qh,AuthCredential:Ji,Error:w};Kl(t,"EmailAuthProvider",bo,[]),Kl(t,"FacebookAuthProvider",uo,[]),Kl(t,"GithubAuthProvider",ho,[]),Kl(t,"GoogleAuthProvider",fo,[]),Kl(t,"TwitterAuthProvider",vo,[]),Kl(t,"OAuthProvider",ao,[Pl("providerId")]),Kl(t,"SAMLAuthProvider",so,[Pl("providerId")]),Kl(t,"PhoneAuthProvider",So,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(t){return!!(t&&t instanceof Qh)}}]),Kl(t,"RecaptchaVerifier",kl,[Wl(Pl(),{name:"",J:"an HTML element",optional:!1,K:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),xl("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(t){return!!(t&&t instanceof Ql.app.App)}}]),Kl(t,"ActionCodeURL",ci,[]),Kl(t,"PhoneMultiFactorGenerator",dl,[]),Ql.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new Qh(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),Ql.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:g((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:g(t.mc,t),addAuthTokenListener:g(t.cc,t),removeAuthTokenListener:g(t.Oc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Ql.registerVersion("@firebase/auth","0.15.0"),Ql.INTERNAL.extendNamespace({User:uh})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Ys=(Js.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Jo(e))},Js.prototype.get=function(t){t=this.domStorage_.getItem(this.prefixedName_(t));return null==t?null:Yo(t)},Js.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},Js.prototype.prefixedName_=function(t){return this.prefix_+t},Js.prototype.toString=function(){return this.domStorage_.toString()},Js);function Js(t){this.domStorage_=t,this.prefix_="firebase:"}var $s=(Zs.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},Zs.prototype.get=function(t){return Zo(this.cache_,t)?this.cache_[t]:null},Zs.prototype.remove=function(t){delete this.cache_[t]},Zs);function Zs(){this.cache_={},this.isInMemoryStorage=!0}function ta(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i,o=t.charCodeAt(r);55296<=o&&o<=56319&&(i=o-55296,Ao(++r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(i<<10)+(t.charCodeAt(r)-56320)),o<128?e[n++]=o:(o<2048?e[n++]=o>>6|192:(o<65536?e[n++]=o>>12|224:(e[n++]=o>>18|240,e[n++]=o>>12&63|128),e[n++]=o>>6&63|128),e[n++]=63&o|128)}return e}(t);return(t=new rs).update(e),t=t.digest(),Oo.encodeByteArray(t)}function ea(t,e){Ao(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(fa.logLevel=Ns.VERBOSE,va=fa.log.bind(fa),e&&la.set("logging_enabled",!0)):"function"==typeof t?va=t:(va=null,la.remove("logging_enabled"))}function na(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+da.apply(void 0,Io(t));fa.error(n)}function ra(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+da.apply(void 0,Io(t));throw fa.error(n),new Error(n)}function ia(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+da.apply(void 0,Io(t));fa.warn(n)}function oa(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)}function sa(t,e){return t===e?0:t<e?-1:1}function aa(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Jo(e))}function ua(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)n<i+e?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r}var ca,Dr=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Ys(e)}}catch(t){}return new $s},ha=Dr("localStorage"),la=Dr("sessionStorage"),fa=new Ds("@firebase/database"),pa=(ca=1,function(){return ca++}),da=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=da.apply(null,i):n+="object"==typeof i?Jo(i):i,n+=" "}return n},va=null,ya=!0,ga=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];!0===ya&&(ya=!1,null===va&&!0===la.get("logging_enabled")&&ea(!0)),va&&(t=da.apply(null,e),va(t))},ma=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];ga.apply(void 0,Io([n],t))}},ba="[MIN_NAME]",_a="[MAX_NAME]",wa=function(t,e){if(t===e)return 0;if(t===ba||e===_a)return-1;if(e===ba||t===_a)return 1;var n=Aa(t),r=Aa(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null===r&&t<e?-1:1},Ea=function(t){if("object"!=typeof t||null===t)return Jo(t);var e,n=[];for(e in t)n.push(e);n.sort();for(var r="{",i=0;i<n.length;i++)0!==i&&(r+=","),r+=Jo(n[i]),r+=":",r+=Ea(t[n[i]]);return r+="}"};function Ia(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}function Ta(t){var e,n,r,i;Ao(!oa(t),"Invalid JSON number"),0===t?e=1/t==-1/(r=n=0)?1:0:(e=t<0,r=(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,Math.round(t/Math.pow(2,-1074))));for(var o=[],s=52;s;--s)o.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;--s)o.push(n%2?1:0),n=Math.floor(n/2);o.push(e?1:0),o.reverse();var a=o.join(""),u="";for(s=0;s<64;s+=8){var c=parseInt(a.substr(s,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()}function Sa(t){try{t()}catch(e){setTimeout(function(){var t=e.stack||"";throw ia("Exception was thrown by user callback.",t),e},Math.floor(0))}}function Ca(t,e){return"object"==typeof(e=setTimeout(t,e))&&e.unref&&e.unref(),e}var Na=new RegExp("^-?(0*)\\d{1,10}$"),Aa=function(t){if(Na.test(t)){t=Number(t);if(-2147483648<=t&&t<=2147483647)return t}return null},ka=(Object.defineProperty(Oa,"Empty",{get:function(){return new Oa("")},enumerable:!1,configurable:!0}),Oa.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},Oa.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},Oa.prototype.popFront=function(){var t=this.pieceNum_;return t<this.pieces_.length&&t++,new Oa(this.pieces_,t)},Oa.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},Oa.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},Oa.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},Oa.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},Oa.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var t=[],e=this.pieceNum_;e<this.pieces_.length-1;e++)t.push(this.pieces_[e]);return new Oa(t,0)},Oa.prototype.child=function(t){for(var e=[],n=this.pieceNum_;n<this.pieces_.length;n++)e.push(this.pieces_[n]);if(t instanceof Oa)for(n=t.pieceNum_;n<t.pieces_.length;n++)e.push(t.pieces_[n]);else for(var r=t.split("/"),n=0;n<r.length;n++)0<r[n].length&&e.push(r[n]);return new Oa(e,0)},Oa.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},Oa.relativePath=function(t,e){var n=t.getFront(),r=e.getFront();if(null===n)return e;if(n===r)return Oa.relativePath(t.popFront(),e.popFront());throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")},Oa.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=wa(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},Oa.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},Oa.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},Oa);function Oa(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)0<this.pieces_[r].length&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}var Ra=(Object.defineProperty(Pa,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(Pa,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),Pa.prototype.push=function(t){0<this.parts_.length&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=ps(t),this.checkValid_()},Pa.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=ps(t),0<this.parts_.length&&--this.byteLength_},Pa.prototype.checkValid_=function(){if(this.byteLength_>Pa.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+Pa.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>Pa.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Pa.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},Pa.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},Pa);function Pa(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=ps(this.parts_[n]);this.checkValid_()}var Da="firebaseio.com",xa="websocket",La="long_polling",Ma=(Fa.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},Fa.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},Fa.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},Fa.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},Fa.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&ha.set("host:"+this.host,this.internalHost))},Fa.prototype.connectionURL=function(t,e){var n;if(Ao("string"==typeof t,"typeof type must == string"),Ao("object"==typeof e,"typeof params must == object"),t===xa)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==La)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return Ia(e,function(t,e){r.push(t+"="+e)}),n+r.join("&")},Fa.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},Fa.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},Fa);function Fa(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=ha.get("host:"+t)||this.host}function Ua(t,e){var n=Ya(t),r=n.namespace;return"firebase.com"===n.domain&&ra(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||ra("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ia("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),t="ws"===n.scheme||"wss"===n.scheme,{repoInfo:new Ma(n.host,n.secure,r,e,t,"",r!==n.subdomain),path:new ka(n.pathString)}}function ja(t){return"string"==typeof t&&0!==t.length&&!Ja.test(t)}function Va(t){return"string"==typeof t&&0!==t.length&&!$a.test(t)}function qa(t){return null===t||"string"==typeof t||"number"==typeof t&&!oa(t)||t&&"object"==typeof t&&Zo(t,".sv")}function Ba(t,e,n,r,i){i&&void 0===n||tu(hs(t,e,i),n,r)}function Wa(t,e,n,r,i){if(!i||void 0!==n){var o=hs(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var s=[];Ia(n,function(t,e){t=new ka(t);if(tu(o,e,r.child(t)),".priority"===t.getBack()&&!qa(e))throw new Error(o+"contains an invalid value for '"+t.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(t)}),function(t,e){for(var n,r=0;r<e.length;r++)for(var i=(n=e[r]).slice(),o=0;o<i.length;o++)if((".priority"!==i[o]||o!==i.length-1)&&!ja(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+n.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(ka.comparePaths);var s=null;for(r=0;r<e.length;r++){if(n=e[r],null!==s&&s.contains(n))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+n.toString());s=n}}(o,s)}}function Ha(t,e,n,r){if(!r||void 0!==n){if(oa(n))throw new Error(hs(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!qa(n))throw new Error(hs(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}}function Ga(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(hs(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}function Ka(t,e,n,r){if(!(r&&void 0===n||ja(n)))throw new Error(hs(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}function za(t,e,n,r){if(!(r&&void 0===n||Va(n)))throw new Error(hs(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')}function Qa(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")}function Xa(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!ja(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&(r=(r=r)&&r.replace(/^\/*\.info(\/|$)/,"/"),!Va(r)))throw new Error(hs(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')}var Ya=function(t){var e,n,r,i="",o="",s="",a="",u="",c=!0,h="https",l=443;return"string"==typeof t&&(0<=(r=t.indexOf("//"))&&(h=t.substring(0,r-1),t=t.substring(r+2)),-1===(e=t.indexOf("/"))&&(e=t.length),-1===(n=t.indexOf("?"))&&(n=t.length),i=t.substring(0,Math.min(e,n)),e<n&&(a=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(0<n[r].length){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(e,n))),n=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=wo(t.split("&")),o=i.next();!o.done;o=i.next()){var s,a=o.value;0!==a.length&&(2===(s=a.split("=")).length?r[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):ia("Invalid query segment '"+a+"' in query '"+t+"'"))}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,n))),0<=(r=i.indexOf(":"))?(c="https"===h||"wss"===h,l=parseInt(i.substring(r+1),10)):r=i.length,"localhost"===(r=i.slice(0,r)).toLowerCase()?o="localhost":r.split(".").length<=2?o=r:(r=i.indexOf("."),s=i.substring(0,r).toLowerCase(),o=i.substring(r+1),u=s),"ns"in n&&(u=n.ns)),{host:i,port:l,domain:o,subdomain:s,secure:c,scheme:h,pathString:a,namespace:u}},Ja=/[\[\].#$\/\u0000-\u001F\u007F]/,$a=/[\[\].#$\u0000-\u001F\u007F]/,Za=10485760,tu=function(n,t,e){var r=e instanceof ka?new Ra(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+r.toErrorString());if("function"==typeof t)throw new Error(n+"contains a function "+r.toErrorString()+" with contents = "+t.toString());if(oa(t))throw new Error(n+"contains "+t.toString()+" "+r.toErrorString());if("string"==typeof t&&t.length>Za/3&&ps(t)>Za)throw new Error(n+"contains a string greater than "+Za+" utf8 bytes "+r.toErrorString()+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){var i=!1,o=!1;if(Ia(t,function(t,e){if(".value"===t)i=!0;else if(".priority"!==t&&".sv"!==t&&(o=!0,!ja(t)))throw new Error(n+" contains an invalid key ("+t+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(t),tu(n,e,r),r.pop()}),i&&o)throw new Error(n+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},eu=(nu.prototype.cancel=function(t){cs("OnDisconnect.cancel",0,1,arguments.length),ls("OnDisconnect.cancel",1,t,!0);var e=new Do;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},nu.prototype.remove=function(t){cs("OnDisconnect.remove",0,1,arguments.length),Qa("OnDisconnect.remove",this.path_),ls("OnDisconnect.remove",1,t,!0);var e=new Do;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},nu.prototype.set=function(t,e){cs("OnDisconnect.set",1,2,arguments.length),Qa("OnDisconnect.set",this.path_),Ba("OnDisconnect.set",1,t,this.path_,!1),ls("OnDisconnect.set",2,e,!0);var n=new Do;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},nu.prototype.setWithPriority=function(t,e,n){cs("OnDisconnect.setWithPriority",2,3,arguments.length),Qa("OnDisconnect.setWithPriority",this.path_),Ba("OnDisconnect.setWithPriority",1,t,this.path_,!1),Ha("OnDisconnect.setWithPriority",2,e,!1),ls("OnDisconnect.setWithPriority",3,n,!0);var r=new Do;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},nu.prototype.update=function(t,e){if(cs("OnDisconnect.update",1,2,arguments.length),Qa("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,ia("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Wa("OnDisconnect.update",1,t,this.path_,!1),ls("OnDisconnect.update",2,e,!0);var i=new Do;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},nu);function nu(t,e){this.repo_=t,this.path_=e}var ru=(iu.prototype.toJSON=function(){return cs("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},iu);function iu(t,e){this.committed=t,this.snapshot=e}var ou,su,au,uu=(ou="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",su=0,au=[],function(t){var e=t===su;su=t;for(var n=new Array(8),r=7;0<=r;r--)n[r]=ou.charAt(t%64),t=Math.floor(t/64);Ao(0===t,"Cannot push at time == 0");var i=n.join("");if(e){for(r=11;0<=r&&63===au[r];r--)au[r]=0;au[r]++}else for(r=0;r<12;r++)au[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)i+=ou.charAt(au[r]);return Ao(20===i.length,"nextPushId: Length should be 20."),i}),cu=(hu.Wrap=function(t,e){return new hu(t,e)},hu);function hu(t,e){this.name=t,this.node=e}var lu,K=(fu.prototype.getCompare=function(){return this.compare.bind(this)},fu.prototype.indexedValueChanged=function(t,e){t=new cu(ba,t),e=new cu(ba,e);return 0!==this.compare(t,e)},fu.prototype.minPost=function(){return cu.MIN},fu);function fu(){}var pu,du=(go(vu,pu=K),Object.defineProperty(vu,"__EMPTY_NODE",{get:function(){return lu},set:function(t){lu=t},enumerable:!1,configurable:!0}),vu.prototype.compare=function(t,e){return wa(t.name,e.name)},vu.prototype.isDefinedOn=function(t){throw ko("KeyIndex.isDefinedOn not expected to be called.")},vu.prototype.indexedValueChanged=function(t,e){return!1},vu.prototype.minPost=function(){return cu.MIN},vu.prototype.maxPost=function(){return new cu(_a,lu)},vu.prototype.makePost=function(t,e){return Ao("string"==typeof t,"KeyIndex indexValue must always be a string."),new cu(t,lu)},vu.prototype.toString=function(){return".key"},vu);function vu(){return null!==pu&&pu.apply(this,arguments)||this}var yu,gu=new du;function mu(t){return"number"==typeof t?"number:"+Ta(t):"string:"+t}var bu,_u,wu,Eu,Iu=function(t){var e;t.isLeafNode()?(e=t.val(),Ao("string"==typeof e||"number"==typeof e||"object"==typeof e&&Zo(e,".sv"),"Priority must be a string or number.")):Ao(t===yu||t.isEmpty(),"priority of unexpected type."),Ao(t===yu||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Tu=(Object.defineProperty(Su,"__childrenNodeConstructor",{get:function(){return bu},set:function(t){bu=t},enumerable:!1,configurable:!0}),Su.prototype.isLeafNode=function(){return!0},Su.prototype.getPriority=function(){return this.priorityNode_},Su.prototype.updatePriority=function(t){return new Su(this.value_,t)},Su.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:Su.__childrenNodeConstructor.EMPTY_NODE},Su.prototype.getChild=function(t){return t.isEmpty()?this:".priority"===t.getFront()?this.priorityNode_:Su.__childrenNodeConstructor.EMPTY_NODE},Su.prototype.hasChild=function(){return!1},Su.prototype.getPredecessorChildName=function(t,e){return null},Su.prototype.updateImmediateChild=function(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:Su.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)},Su.prototype.updateChild=function(t,e){var n=t.getFront();return null===n?e:e.isEmpty()&&".priority"!==n?this:(Ao(".priority"!==n||1===t.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(n,Su.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),e)))},Su.prototype.isEmpty=function(){return!1},Su.prototype.numChildren=function(){return 0},Su.prototype.forEachChild=function(t,e){return!1},Su.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},Su.prototype.hash=function(){var t,e;return null===this.lazyHash_&&(t="",this.priorityNode_.isEmpty()||(t+="priority:"+mu(this.priorityNode_.val())+":"),t+=(e=typeof this.value_)+":",t+="number"==e?Ta(this.value_):this.value_,this.lazyHash_=ta(t)),this.lazyHash_},Su.prototype.getValue=function(){return this.value_},Su.prototype.compareTo=function(t){return t===Su.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof Su.__childrenNodeConstructor?-1:(Ao(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},Su.prototype.compareToLeafNode_=function(t){var e=typeof t.value_,n=typeof this.value_,r=Su.VALUE_TYPE_ORDER.indexOf(e),i=Su.VALUE_TYPE_ORDER.indexOf(n);return Ao(0<=r,"Unknown leaf type: "+e),Ao(0<=i,"Unknown leaf type: "+n),r===i?"object"==n?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-r},Su.prototype.withIndex=function(){return this},Su.prototype.isIndexed=function(){return!0},Su.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))},Su.VALUE_TYPE_ORDER=["object","boolean","number","string"],Su);function Su(t,e){void 0===e&&(e=Su.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=e,this.lazyHash_=null,Ao(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Iu(this.priorityNode_)}function Cu(){return null!==Eu&&Eu.apply(this,arguments)||this}var Nu=new(go(Cu,Eu=K),Cu.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),r=n.compareTo(r);return 0===r?wa(t.name,e.name):r},Cu.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},Cu.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},Cu.prototype.minPost=function(){return cu.MIN},Cu.prototype.maxPost=function(){return new cu(_a,new Tu("[PRIORITY-POST]",wu))},Cu.prototype.makePost=function(t,e){t=_u(t);return new cu(e,new Tu("[PRIORITY-POST]",t))},Cu.prototype.toString=function(){return".priority"},Cu),Au=(ku.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_.pop(),e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value};if(this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},ku.prototype.hasNext=function(){return 0<this.nodeStack_.length},ku.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},ku);function ku(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}var Ou=(Ru.prototype.copy=function(t,e,n,r,i){return new Ru(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},Ru.prototype.count=function(){return this.left.count()+1+this.right.count()},Ru.prototype.isEmpty=function(){return!1},Ru.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},Ru.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},Ru.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},Ru.prototype.minKey=function(){return this.min_().key},Ru.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},Ru.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},Ru.prototype.removeMin_=function(){if(this.left.isEmpty())return Du.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},Ru.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed_()||r.left.left.isRed_()||(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),r.right.isEmpty()||r.right.isRed_()||r.right.left.isRed_()||(r=r.moveRedRight_()),0===e(t,r.key)){if(r.right.isEmpty())return Du.EMPTY_NODE;n=r.right.min_(),r=r.copy(n.key,n.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp_()},Ru.prototype.isRed_=function(){return this.color},Ru.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},Ru.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},Ru.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},Ru.prototype.rotateLeft_=function(){var t=this.copy(null,null,Ru.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},Ru.prototype.rotateRight_=function(){var t=this.copy(null,null,Ru.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},Ru.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},Ru.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},Ru.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},Ru.RED=!0,Ru.BLACK=!1,Ru);function Ru(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:Ru.RED,this.left=null!=r?r:Du.EMPTY_NODE,this.right=null!=i?i:Du.EMPTY_NODE}Pu.prototype.copy=function(t,e,n,r,i){return this},Pu.prototype.insert=function(t,e,n){return new Ou(t,e,null)},Pu.prototype.remove=function(t,e){return this},Pu.prototype.count=function(){return 0},Pu.prototype.isEmpty=function(){return!0},Pu.prototype.inorderTraversal=function(t){return!1},Pu.prototype.reverseTraversal=function(t){return!1},Pu.prototype.minKey=function(){return null},Pu.prototype.maxKey=function(){return null},Pu.prototype.check_=function(){return 0},Pu.prototype.isRed_=function(){return!1},M=Pu;function Pu(){}var Du=(xu.prototype.insert=function(t,e){return new xu(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,Ou.BLACK,null,null))},xu.prototype.remove=function(t){return new xu(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Ou.BLACK,null,null))},xu.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:0<e&&(n=n.right)}return null},xu.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:0<e&&(n=(r=n).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},xu.prototype.isEmpty=function(){return this.root_.isEmpty()},xu.prototype.count=function(){return this.root_.count()},xu.prototype.minKey=function(){return this.root_.minKey()},xu.prototype.maxKey=function(){return this.root_.maxKey()},xu.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},xu.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},xu.prototype.getIterator=function(t){return new Au(this.root_,null,this.comparator_,!1,t)},xu.prototype.getIteratorFrom=function(t,e){return new Au(this.root_,t,this.comparator_,!1,e)},xu.prototype.getReverseIteratorFrom=function(t,e){return new Au(this.root_,t,this.comparator_,!0,e)},xu.prototype.getReverseIterator=function(t){return new Au(this.root_,null,this.comparator_,!0,t)},xu.EMPTY_NODE=new M,xu);function xu(t,e){void 0===e&&(e=xu.EMPTY_NODE),this.comparator_=t,this.root_=e}var Lu=Math.log(2),Mu=(Fu.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},Fu);function Fu(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/Lu,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}var Uu,ju,Vu=function(c,t,h,e){c.sort(t);var l=function(t,e){var n=e-t;if(0==n)return null;if(1==n)return r=c[t],i=h?h(r):r,new Ou(i,r.node,Ou.BLACK,null,null);var n=parseInt(n/2,10)+t,t=l(t,n),e=l(n+1,e),r=c[n],i=h?h(r):r;return new Ou(i,r.node,Ou.BLACK,t,e)},n=function(t){for(var e=null,n=null,i=c.length,r=function(t,e){var n=i-t,r=i;i-=t;t=l(1+n,r),r=c[n],n=h?h(r):r;o(new Ou(n,r.node,e,null,t))},o=function(t){e=e?e.left=t:n=t},s=0;s<t.count;++s){var a=t.nextBitIsOne(),u=Math.pow(2,t.count-(s+1));a?r(u,Ou.BLACK):(r(u,Ou.BLACK),r(u,Ou.RED))}return n}(new Mu(c.length));return new Du(e||t,n)},qu={},Bu=(Object.defineProperty(Wu,"Default",{get:function(){return Ao(Nu,"ChildrenNode.ts has not been loaded"),Uu=Uu||new Wu({".priority":qu},{".priority":Nu})},enumerable:!1,configurable:!0}),Wu.prototype.get=function(t){var e=ts(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Du?e:null},Wu.prototype.hasIndex=function(t){return Zo(this.indexSet_,t.toString())},Wu.prototype.addIndex=function(t,e){Ao(t!==gu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var n,r=[],i=!1,o=e.getIterator(cu.Wrap),s=o.getNext();s;)i=i||t.isDefinedOn(s.node),r.push(s),s=o.getNext();n=i?Vu(r,t.getCompare()):qu;var a=t.toString(),u=mo({},this.indexSet_);u[a]=t;e=mo({},this.indexes_);return e[a]=n,new Wu(e,u)},Wu.prototype.addToIndexes=function(s,a){var u=this;return new Wu(ns(this.indexes_,function(t,e){var n=ts(u.indexSet_,e);if(Ao(n,"Missing index implementation for "+e),t===qu){if(n.isDefinedOn(s.node)){for(var r=[],i=a.getIterator(cu.Wrap),o=i.getNext();o;)o.name!==s.name&&r.push(o),o=i.getNext();return r.push(s),Vu(r,n.getCompare())}return qu}n=a.get(s.name);return n&&(t=t.remove(new cu(s.name,n))),t.insert(s,s.node)}),this.indexSet_)},Wu.prototype.removeFromIndexes=function(n,r){return new Wu(ns(this.indexes_,function(t){if(t===qu)return t;var e=r.get(n.name);return e?t.remove(new cu(n.name,e)):t}),this.indexSet_)},Wu);function Wu(t,e){this.indexes_=t,this.indexSet_=e}function Hu(t,e){return wa(t.name,e.name)}function Gu(t,e){return wa(t,e)}var Ku,zu=(Object.defineProperty(Qu,"EMPTY_NODE",{get:function(){return ju=ju||new Qu(new Du(Gu),null,Bu.Default)},enumerable:!1,configurable:!0}),Qu.prototype.isLeafNode=function(){return!1},Qu.prototype.getPriority=function(){return this.priorityNode_||ju},Qu.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new Qu(this.children_,t,this.indexMap_)},Qu.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();t=this.children_.get(t);return null===t?ju:t},Qu.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},Qu.prototype.hasChild=function(t){return null!==this.children_.get(t)},Qu.prototype.updateImmediateChild=function(t,e){if(Ao(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);var n=new cu(t,e),r=void 0,i=void 0,i=e.isEmpty()?(r=this.children_.remove(t),this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(t,e),this.indexMap_.addToIndexes(n,this.children_)),n=r.isEmpty()?ju:this.priorityNode_;return new Qu(r,n,i)},Qu.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;Ao(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");e=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,e)},Qu.prototype.isEmpty=function(){return this.children_.isEmpty()},Qu.prototype.numChildren=function(){return this.children_.count()},Qu.prototype.val=function(n){if(this.isEmpty())return null;var r={},i=0,o=0,s=!0;if(this.forEachChild(Nu,function(t,e){r[t]=e.val(n),i++,s&&Qu.INTEGER_REGEXP_.test(t)?o=Math.max(o,Number(t)):s=!1}),!n&&s&&o<2*i){var t,e=[];for(t in r)e[t]=r[t];return e}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r},Qu.prototype.hash=function(){var n;return null===this.lazyHash_&&(n="",this.getPriority().isEmpty()||(n+="priority:"+mu(this.getPriority().val())+":"),this.forEachChild(Nu,function(t,e){e=e.hash();""!==e&&(n+=":"+t+":"+e)}),this.lazyHash_=""===n?"":ta(n)),this.lazyHash_},Qu.prototype.getPredecessorChildName=function(t,e,n){n=this.resolveIndex_(n);if(n){e=n.getPredecessorKey(new cu(t,e));return e?e.name:null}return this.children_.getPredecessorKey(t)},Qu.prototype.getFirstChildName=function(t){t=this.resolveIndex_(t);if(t){t=t.minKey();return t&&t.name}return this.children_.minKey()},Qu.prototype.getFirstChild=function(t){t=this.getFirstChildName(t);return t?new cu(t,this.children_.get(t)):null},Qu.prototype.getLastChildName=function(t){t=this.resolveIndex_(t);if(t){t=t.maxKey();return t&&t.name}return this.children_.maxKey()},Qu.prototype.getLastChild=function(t){t=this.getLastChildName(t);return t?new cu(t,this.children_.get(t)):null},Qu.prototype.forEachChild=function(t,e){t=this.resolveIndex_(t);return t?t.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},Qu.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},Qu.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,cu.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},Qu.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},Qu.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,cu.Wrap),i=r.peek();null!=i&&0<e.compare(i,t);)r.getNext(),i=r.peek();return r},Qu.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Yu?-1:0},Qu.prototype.withIndex=function(t){if(t===gu||this.indexMap_.hasIndex(t))return this;t=this.indexMap_.addIndex(t,this.children_);return new Qu(this.children_,this.priorityNode_,t)},Qu.prototype.isIndexed=function(t){return t===gu||this.indexMap_.hasIndex(t)},Qu.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()!==t.children_.count())return!1;for(var e=this.getIterator(Nu),n=t.getIterator(Nu),r=e.getNext(),i=n.getNext();r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1},Qu.prototype.resolveIndex_=function(t){return t===gu?null:this.indexMap_.get(t.toString())},Qu.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,Qu);function Qu(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Iu(this.priorityNode_),this.children_.isEmpty()&&Ao(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}function Xu(){return Ku.call(this,new Du(Gu),zu.EMPTY_NODE,Bu.Default)||this}var Yu=new(go(Xu,Ku=zu),Xu.prototype.compareTo=function(t){return t===this?0:1},Xu.prototype.equals=function(t){return t===this},Xu.prototype.getPriority=function(){return this},Xu.prototype.getImmediateChild=function(t){return zu.EMPTY_NODE},Xu.prototype.isEmpty=function(){return!1},Xu);Object.defineProperties(cu,{MIN:{value:new cu(ba,zu.EMPTY_NODE)},MAX:{value:new cu(_a,Yu)}}),du.__EMPTY_NODE=zu.EMPTY_NODE,Tu.__childrenNodeConstructor=zu,yu=Yu,wu=Yu;var Ju,$u=!0;function Zu(n,t){if(void 0===t&&(t=null),null===n)return zu.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),Ao(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Tu(n,Zu(t));if(n instanceof Array||!$u){var r=zu.EMPTY_NODE;return Ia(n,function(t,e){Zo(n,t)&&"."!==t.substring(0,1)&&(!(e=Zu(e)).isLeafNode()&&e.isEmpty()||(r=r.updateImmediateChild(t,e)))}),r.updatePriority(Zu(t))}var i=[],o=!1;if(Ia(n,function(t,e){"."!==t.substring(0,1)&&((e=Zu(e)).isEmpty()||(o=o||!e.getPriority().isEmpty(),i.push(new cu(t,e))))}),0===i.length)return zu.EMPTY_NODE;var e=Vu(i,Hu,function(t){return t.name},Gu);if(o){var s=Vu(i,Nu.getCompare());return new zu(e,Zu(t),new Bu({".priority":s},{".priority":Nu}))}return new zu(e,Zu(t),Bu.Default)}function tc(){return null!==Ju&&Ju.apply(this,arguments)||this}_u=Zu;var ec,nc=new(go(tc,Ju=K),tc.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?wa(t.name,e.name):n},tc.prototype.isDefinedOn=function(t){return!0},tc.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},tc.prototype.minPost=function(){return cu.MIN},tc.prototype.maxPost=function(){return cu.MAX},tc.prototype.makePost=function(t,e){t=Zu(t);return new cu(e,t)},tc.prototype.toString=function(){return".value"},tc),rc=(go(ic,ec=K),ic.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},ic.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},ic.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),r=n.compareTo(r);return 0===r?wa(t.name,e.name):r},ic.prototype.makePost=function(t,e){t=Zu(t),t=zu.EMPTY_NODE.updateChild(this.indexPath_,t);return new cu(e,t)},ic.prototype.maxPost=function(){var t=zu.EMPTY_NODE.updateChild(this.indexPath_,Yu);return new cu(_a,t)},ic.prototype.toString=function(){return this.indexPath_.slice().join("/")},ic);function ic(t){var e=ec.call(this)||this;return e.indexPath_=t,Ao(!t.isEmpty()&&".priority"!==t.getFront(),"Can't create PathIndex with empty path or .priority key"),e}var oc=(sc.prototype.val=function(){return cs("DataSnapshot.val",0,0,arguments.length),this.node_.val()},sc.prototype.exportVal=function(){return cs("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},sc.prototype.toJSON=function(){return cs("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},sc.prototype.exists=function(){return cs("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},sc.prototype.child=function(t){cs("DataSnapshot.child",0,1,arguments.length),t=String(t),za("DataSnapshot.child",1,t,!1);var e=new ka(t),t=this.ref_.child(e);return new sc(this.node_.getChild(e),t,Nu)},sc.prototype.hasChild=function(t){cs("DataSnapshot.hasChild",1,1,arguments.length),za("DataSnapshot.hasChild",1,t,!1);t=new ka(t);return!this.node_.getChild(t).isEmpty()},sc.prototype.getPriority=function(){return cs("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},sc.prototype.forEach=function(n){var r=this;return cs("DataSnapshot.forEach",1,1,arguments.length),ls("DataSnapshot.forEach",1,n,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(t,e){return n(new sc(e,r.ref_.child(t),Nu))})},sc.prototype.hasChildren=function(){return cs("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(sc.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),sc.prototype.numChildren=function(){return cs("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},sc.prototype.getRef=function(){return cs("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(sc.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),sc);function sc(t,e,n){this.node_=t,this.ref_=e,this.index_=n}var ac=(uc.prototype.getPath=function(){var t=this.snapshot.getRef();return("value"===this.eventType?t:t.getParent()).path},uc.prototype.getEventType=function(){return this.eventType},uc.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},uc.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Jo(this.snapshot.exportVal())},uc);function uc(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}var cc=(hc.prototype.getPath=function(){return this.path},hc.prototype.getEventType=function(){return"cancel"},hc.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},hc.prototype.toString=function(){return this.path.toString()+":cancel"},hc);function hc(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}var lc=(fc.prototype.respondsTo=function(t){return"value"===t},fc.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new ac("value",this,new oc(t.snapshotNode,e.getRef(),n))},fc.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Ao(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},fc.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new cc(this,t,e):null},fc.prototype.matches=function(t){return t instanceof fc&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},fc.prototype.hasAnyCallback=function(){return null!==this.callback_},fc);function fc(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}var pc,dc=(vc.prototype.respondsTo=function(t){t="children_removed"===(t="children_added"===t?"child_added":t)?"child_removed":t;return Zo(this.callbacks_,t)},vc.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new cc(this,t,e):null},vc.prototype.createEvent=function(t,e){Ao(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),e=e.getQueryParams().getIndex();return new ac(t.type,this,new oc(t.snapshotNode,n,e),t.prevName)},vc.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Ao(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},vc.prototype.matches=function(e){var n=this;if(e instanceof vc){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var t=Object.keys(e.callbacks_),r=Object.keys(this.callbacks_),i=t.length;if(i===r.length){if(1!==i)return r.every(function(t){return e.callbacks_[t]===n.callbacks_[t]});t=t[0],r=r[0];return!(r!==t||e.callbacks_[t]&&this.callbacks_[r]&&e.callbacks_[t]!==this.callbacks_[r])}}}return!1},vc.prototype.hasAnyCallback=function(){return null!==this.callbacks_},vc);function vc(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}var yc=(Object.defineProperty(gc,"__referenceConstructor",{get:function(){return Ao(pc,"Reference.ts has not been loaded"),pc},set:function(t){pc=t},enumerable:!1,configurable:!0}),gc.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===gu){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==ba)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==_a)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Nu){if(null!=e&&!qa(e)||null!=n&&!qa(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Ao(t.getIndex()instanceof rc||t.getIndex()===nc,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},gc.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},gc.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},gc.prototype.getQueryParams=function(){return this.queryParams_},gc.prototype.getRef=function(){return cs("Query.ref",0,0,arguments.length),new gc.__referenceConstructor(this.repo,this.path)},gc.prototype.on=function(t,e,n,r){cs("Query.on",2,4,arguments.length),Ga("Query.on",1,t,!1),ls("Query.on",2,e,!1);n=gc.getCancelAndContextArgs_("Query.on",n,r);return"value"===t?this.onValueEvent(e,n.cancel,n.context):((r={})[t]=e,this.onChildEvent(r,n.cancel,n.context)),e},gc.prototype.onValueEvent=function(t,e,n){n=new lc(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,n)},gc.prototype.onChildEvent=function(t,e,n){n=new dc(t,e,n);this.repo.addEventCallbackForQuery(this,n)},gc.prototype.off=function(t,e,n){cs("Query.off",0,3,arguments.length),Ga("Query.off",1,t,!0),ls("Query.off",2,e,!0),fs("Query.off",3,n,!0);var r=null,i=null;"value"===t?r=new lc(e||null,null,n||null):t&&(e&&((i={})[t]=e),r=new dc(i,null,n||null)),this.repo.removeEventCallbackForQuery(this,r)},gc.prototype.once=function(e,n,t,r){var i=this;cs("Query.once",1,4,arguments.length),Ga("Query.once",1,e,!1),ls("Query.once",2,n,!0);var o=gc.getCancelAndContextArgs_("Query.once",t,r),s=!0,a=new Do;a.promise.catch(function(){});var u=function(t){s&&(s=!1,i.off(e,u),n&&n.bind(o.context)(t),a.resolve(t))};return this.on(e,u,function(t){i.off(e,u),o.cancel&&o.cancel.bind(o.context)(t),a.reject(t)}),a.promise},gc.prototype.limitToFirst=function(t){if(cs("Query.limitToFirst",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new gc(this.repo,this.path,this.queryParams_.limitToFirst(t),this.orderByCalled_)},gc.prototype.limitToLast=function(t){if(cs("Query.limitToLast",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new gc(this.repo,this.path,this.queryParams_.limitToLast(t),this.orderByCalled_)},gc.prototype.orderByChild=function(t){if(cs("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');za("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");t=new ka(t);if(t.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");t=new rc(t),t=this.queryParams_.orderBy(t);return gc.validateQueryEndpoints_(t),new gc(this.repo,this.path,t,!0)},gc.prototype.orderByKey=function(){cs("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=this.queryParams_.orderBy(gu);return gc.validateQueryEndpoints_(t),new gc(this.repo,this.path,t,!0)},gc.prototype.orderByPriority=function(){cs("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=this.queryParams_.orderBy(Nu);return gc.validateQueryEndpoints_(t),new gc(this.repo,this.path,t,!0)},gc.prototype.orderByValue=function(){cs("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=this.queryParams_.orderBy(nc);return gc.validateQueryEndpoints_(t),new gc(this.repo,this.path,t,!0)},gc.prototype.startAt=function(t,e){void 0===t&&(t=null),cs("Query.startAt",0,2,arguments.length),Ba("Query.startAt",1,t,this.path,!0),Ka("Query.startAt",2,e,!0);var n=this.queryParams_.startAt(t,e);if(gc.validateLimit_(n),gc.validateQueryEndpoints_(n),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(e=t=null),new gc(this.repo,this.path,n,this.orderByCalled_)},gc.prototype.endAt=function(t,e){void 0===t&&(t=null),cs("Query.endAt",0,2,arguments.length),Ba("Query.endAt",1,t,this.path,!0),Ka("Query.endAt",2,e,!0);e=this.queryParams_.endAt(t,e);if(gc.validateLimit_(e),gc.validateQueryEndpoints_(e),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new gc(this.repo,this.path,e,this.orderByCalled_)},gc.prototype.equalTo=function(t,e){if(cs("Query.equalTo",1,2,arguments.length),Ba("Query.equalTo",1,t,this.path,!1),Ka("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},gc.prototype.toString=function(){return cs("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},gc.prototype.toJSON=function(){return cs("Query.toJSON",0,1,arguments.length),this.toString()},gc.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},gc.prototype.queryIdentifier=function(){var t=this.queryObject(),t=Ea(t);return"{}"===t?"default":t},gc.prototype.isEqual=function(t){if(cs("Query.isEqual",1,1,arguments.length),!(t instanceof gc)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}var e=this.repo===t.repo,n=this.path.equals(t.path),t=this.queryIdentifier()===t.queryIdentifier();return e&&n&&t},gc.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,ls(t,3,r.cancel,!0),r.context=n,fs(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(hs(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(gc.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),gc);function gc(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}var mc=(bc.prototype.getImmediateChild=function(t){return new bc(this.node_.getImmediateChild(t))},bc.prototype.node=function(){return this.node_},bc);function bc(t){this.node_=t}var _c=(wc.prototype.getImmediateChild=function(t){t=this.path_.child(t);return new wc(this.syncTree_,t)},wc.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},wc);function wc(t,e){this.syncTree_=t,this.path_=e}function Ec(t,e,n,r){return Nc(e,new _c(n,t),r)}function Ic(t,e,n){return Nc(t,new mc(e),n)}var Tc=function(t,e,n){return t&&"object"==typeof t?(Ao(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?Sc(t[".sv"],e,n):"object"==typeof t[".sv"]?Cc(t[".sv"],e):void Ao(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Sc=function(t,e,n){if("timestamp"===t)return n.timestamp;Ao(!1,"Unexpected server value: "+t)},Cc=function(t,e,n){t.hasOwnProperty("increment")||Ao(!1,"Unexpected server value: "+JSON.stringify(t,null,2));t=t.increment;"number"!=typeof t&&Ao(!1,"Unexpected increment value: "+t);e=e.node();if(Ao(null!=e,"Expected ChildrenNode.EMPTY_NODE for nulls"),!e.isLeafNode())return t;e=e.getValue();return"number"!=typeof e?t:e+t};function Nc(t,r,i){var e=t.getPriority().val(),n=Tc(e,r.getImmediateChild(".priority"),i);if(t.isLeafNode()){var o=t,e=Tc(o.getValue(),r,i);return e!==o.getValue()||n!==o.getPriority().val()?new Tu(e,Zu(n)):t}var t=t,s=t;return n!==t.getPriority().val()&&(s=s.updatePriority(new Tu(n))),t.forEachChild(Nu,function(t,e){var n=Nc(e,r.getImmediateChild(t),i);n!==e&&(s=s.updateImmediateChild(t,n))}),s}var Ac,kc=(Oc.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&0<this.children.size){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},Oc.prototype.remember=function(t,e){var n;t.isEmpty()?(this.value=e,this.children.clear()):null!==this.value?this.value=this.value.updateChild(t,e):(n=t.getFront(),this.children.has(n)||this.children.set(n,new Oc),n=this.children.get(n),t=t.popFront(),n.remember(t,e))},Oc.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Nu,function(t,e){n.remember(new ka(t),e)}),this.forget(t)}if(0<this.children.size){e=t.getFront();return t=t.popFront(),this.children.has(e)&&this.children.get(e).forget(t)&&this.children.delete(e),0===this.children.size}return!0},Oc.prototype.forEachTree=function(n,r){null!==this.value?r(n,this.value):this.forEachChild(function(t,e){t=new ka(n.toString()+"/"+t);e.forEachTree(t,r)})},Oc.prototype.forEachChild=function(n){this.children.forEach(function(t,e){n(e,t)})},Oc);function Oc(){this.value=null,this.children=new Map}(Dr=Ac=Ac||{})[Dr.OVERWRITE=0]="OVERWRITE",Dr[Dr.MERGE=1]="MERGE",Dr[Dr.ACK_USER_WRITE=2]="ACK_USER_WRITE",Dr[Dr.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var Rc=(Pc.User=new Pc(!0,!1,null,!1),Pc.Server=new Pc(!1,!0,null,!1),Pc.forServerTaggedQuery=function(t){return new Pc(!1,!0,t,!0)},Pc);function Pc(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,Ao(!r||e,"Tagged queries must be from server.")}var Dc,xc=(Lc.prototype.operationForChild=function(t){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return Ao(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var e=this.affectedTree.subtree(new ka(t));return new Lc(ka.Empty,e,this.revert)}return Ao(this.path.getFront()===t,"operationForChild called for unrelated child."),new Lc(this.path.popFront(),this.affectedTree,this.revert)},Lc);function Lc(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Ac.ACK_USER_WRITE,this.source=Rc.User}var Mc=(Fc.fromObject=function(t){var n=Fc.Empty;return Ia(t,function(t,e){n=n.set(new ka(t),e)}),n},Fc.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},Fc.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:ka.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null===r)return null;e=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null==e?null:{path:new ka(n).child(e.path),value:e.value}},Fc.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},Fc.prototype.subtree=function(t){if(t.isEmpty())return this;var e=t.getFront(),e=this.children.get(e);return null!==e?e.subtree(t.popFront()):Fc.Empty},Fc.prototype.set=function(t,e){if(t.isEmpty())return new Fc(e,this.children);var n=t.getFront(),e=(this.children.get(n)||Fc.Empty).set(t.popFront(),e),e=this.children.insert(n,e);return new Fc(this.value,e)},Fc.prototype.remove=function(t){if(t.isEmpty())return this.children.isEmpty()?Fc.Empty:new Fc(null,this.children);var e=t.getFront(),n=this.children.get(e);if(n){n=n.remove(t.popFront()),t=void 0,t=n.isEmpty()?this.children.remove(e):this.children.insert(e,n);return null===this.value&&t.isEmpty()?Fc.Empty:new Fc(this.value,t)}return this},Fc.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),e=this.children.get(e);return e?e.get(t.popFront()):null},Fc.prototype.setTree=function(t,e){if(t.isEmpty())return e;var n=t.getFront(),t=(this.children.get(n)||Fc.Empty).setTree(t.popFront(),e),e=void 0,e=t.isEmpty()?this.children.remove(n):this.children.insert(n,t);return new Fc(this.value,e)},Fc.prototype.fold=function(t){return this.fold_(ka.Empty,t)},Fc.prototype.fold_=function(n,r){var i={};return this.children.inorderTraversal(function(t,e){i[t]=e.fold_(n.child(t),r)}),r(n,this.value,i)},Fc.prototype.findOnPath=function(t,e){return this.findOnPath_(t,ka.Empty,e)},Fc.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),r=this.children.get(i);return r?r.findOnPath_(t.popFront(),e.child(i),n):null},Fc.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,ka.Empty,e)},Fc.prototype.foreachOnPath_=function(t,e,n){if(t.isEmpty())return this;this.value&&n(e,this.value);var r=t.getFront(),i=this.children.get(r);return i?i.foreachOnPath_(t.popFront(),e.child(r),n):Fc.Empty},Fc.prototype.foreach=function(t){this.foreach_(ka.Empty,t)},Fc.prototype.foreach_=function(n,r){this.children.inorderTraversal(function(t,e){e.foreach_(n.child(t),r)}),this.value&&r(n,this.value)},Fc.prototype.foreachChild=function(n){this.children.inorderTraversal(function(t,e){e.value&&n(t,e.value)})},Fc.Empty=new Fc(null),Fc);function Fc(t,e){void 0===e&&(e=Dc=Dc||new Du(sa)),this.value=t,this.children=e}var Uc=(jc.prototype.operationForChild=function(t){return this.path.isEmpty()?new jc(this.source,ka.Empty):new jc(this.source,this.path.popFront())},jc);function jc(t,e){this.source=t,this.path=e,this.type=Ac.LISTEN_COMPLETE}var Vc=(qc.prototype.operationForChild=function(t){return this.path.isEmpty()?new qc(this.source,ka.Empty,this.snap.getImmediateChild(t)):new qc(this.source,this.path.popFront(),this.snap)},qc);function qc(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Ac.OVERWRITE}var Bc=(Wc.prototype.operationForChild=function(t){if(this.path.isEmpty()){var e=this.children.subtree(new ka(t));return e.isEmpty()?null:e.value?new Vc(this.source,ka.Empty,e.value):new Wc(this.source,ka.Empty,e)}return Ao(this.path.getFront()===t,"Can't get a merge for a child not on the path of the operation"),new Wc(this.source,this.path.popFront(),this.children)},Wc.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},Wc);function Wc(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Ac.MERGE}var Hc=(Gc.prototype.isFullyInitialized=function(){return this.fullyInitialized_},Gc.prototype.isFiltered=function(){return this.filtered_},Gc.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;t=t.getFront();return this.isCompleteForChild(t)},Gc.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},Gc.prototype.getNode=function(){return this.node_},Gc);function Gc(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}var Kc=(zc.prototype.updateEventSnap=function(t,e,n){return new zc(new Hc(t,e,n),this.serverCache_)},zc.prototype.updateServerSnap=function(t,e,n){return new zc(this.eventCache_,new Hc(t,e,n))},zc.prototype.getEventCache=function(){return this.eventCache_},zc.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},zc.prototype.getServerCache=function(){return this.serverCache_},zc.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},zc.Empty=new zc(new Hc(zu.EMPTY_NODE,!1,!1),new Hc(zu.EMPTY_NODE,!1,!1)),zc);function zc(t,e){this.eventCache_=t,this.serverCache_=e}var Qc=(Xc.valueChange=function(t){return new Xc(Xc.VALUE,t)},Xc.childAddedChange=function(t,e){return new Xc(Xc.CHILD_ADDED,e,t)},Xc.childRemovedChange=function(t,e){return new Xc(Xc.CHILD_REMOVED,e,t)},Xc.childChangedChange=function(t,e,n){return new Xc(Xc.CHILD_CHANGED,e,t,n)},Xc.childMovedChange=function(t,e){return new Xc(Xc.CHILD_MOVED,e,t)},Xc.CHILD_ADDED="child_added",Xc.CHILD_REMOVED="child_removed",Xc.CHILD_CHANGED="child_changed",Xc.CHILD_MOVED="child_moved",Xc.VALUE="value",Xc);function Xc(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}var Yc=(Jc.prototype.updateChild=function(t,e,n,r,i,o){Ao(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(Qc.childRemovedChange(e,s)):Ao(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(Qc.childAddedChange(e,n)):o.trackChildChange(Qc.childChangedChange(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},Jc.prototype.updateFullNode=function(r,n,i){return null!=i&&(r.isLeafNode()||r.forEachChild(Nu,function(t,e){n.hasChild(t)||i.trackChildChange(Qc.childRemovedChange(t,e))}),n.isLeafNode()||n.forEachChild(Nu,function(t,e){var n;r.hasChild(t)?(n=r.getImmediateChild(t)).equals(e)||i.trackChildChange(Qc.childChangedChange(t,e,n)):i.trackChildChange(Qc.childAddedChange(t,e))})),n.withIndex(this.index_)},Jc.prototype.updatePriority=function(t,e){return t.isEmpty()?zu.EMPTY_NODE:t.updatePriority(e)},Jc.prototype.filtersNodes=function(){return!1},Jc.prototype.getIndexedFilter=function(){return this},Jc.prototype.getIndex=function(){return this.index_},Jc);function Jc(t){this.index_=t}var $c=(Zc.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Ao(e===Qc.CHILD_ADDED||e===Qc.CHILD_CHANGED||e===Qc.CHILD_REMOVED,"Only child changes supported for tracking"),Ao(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===Qc.CHILD_ADDED&&i===Qc.CHILD_REMOVED)this.changeMap.set(n,Qc.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===Qc.CHILD_REMOVED&&i===Qc.CHILD_ADDED)this.changeMap.delete(n);else if(e===Qc.CHILD_REMOVED&&i===Qc.CHILD_CHANGED)this.changeMap.set(n,Qc.childRemovedChange(n,r.oldSnap));else if(e===Qc.CHILD_CHANGED&&i===Qc.CHILD_ADDED)this.changeMap.set(n,Qc.childAddedChange(n,t.snapshotNode));else{if(e!==Qc.CHILD_CHANGED||i!==Qc.CHILD_CHANGED)throw ko("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,Qc.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},Zc.prototype.getChanges=function(){return Array.from(this.changeMap.values())},Zc);function Zc(){this.changeMap=new Map}function th(){}var eh=new(th.prototype.getCompleteChild=function(t){return null},th.prototype.getChildAfterChild=function(t,e,n){return null},th),nh=(rh.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);e=null!=this.optCompleteServerCache_?new Hc(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,e)},rh.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),t=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===t.length?null:t[0]},rh);function rh(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}var ih=function(t,e){this.viewCache=t,this.changes=e},oh=(sh.prototype.assertIndexed=function(t){Ao(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Ao(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},sh.prototype.applyOperation=function(t,e,n,r){var i=new $c;if(e.type===Ac.OVERWRITE)var o=e,s=o.source.fromUser?this.applyUserOverwrite_(t,o.path,o.snap,n,r,i):(Ao(o.source.fromServer,"Unknown source."),a=o.source.tagged||t.getServerCache().isFiltered()&&!o.path.isEmpty(),this.applyServerOverwrite_(t,o.path,o.snap,n,r,a,i));else if(e.type===Ac.MERGE){o=e;s=o.source.fromUser?this.applyUserMerge_(t,o.path,o.children,n,r,i):(Ao(o.source.fromServer,"Unknown source."),a=o.source.tagged||t.getServerCache().isFiltered(),this.applyServerMerge_(t,o.path,o.children,n,r,a,i))}else if(e.type===Ac.ACK_USER_WRITE){var a=e;s=a.revert?this.revertUserWrite_(t,a.path,n,r,i):this.ackUserWrite_(t,a.path,a.affectedTree,n,r,i)}else{if(e.type!==Ac.LISTEN_COMPLETE)throw ko("Unknown operation type: "+e.type);s=this.listenComplete_(t,e.path,n,i)}i=i.getChanges();return sh.maybeAddValueEvent_(t,s,i),new ih(s,i)},sh.maybeAddValueEvent_=function(t,e,n){var r,i,o=e.getEventCache();o.isFullyInitialized()&&(r=o.getNode().isLeafNode()||o.getNode().isEmpty(),i=t.getCompleteEventSnap(),(0<n.length||!t.getEventCache().isFullyInitialized()||r&&!o.getNode().equals(i)||!o.getNode().getPriority().equals(i.getPriority()))&&n.push(Qc.valueChange(e.getCompleteEventSnap())))},sh.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var s,a,u,c,h=void 0,l=void 0;return h=e.isEmpty()?(Ao(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()?(s=(s=t.getCompleteServerSnap())instanceof zu?s:zu.EMPTY_NODE,s=n.calcCompleteEventChildren(s),this.filter_.updateFullNode(t.getEventCache().getNode(),s,i)):(a=n.calcCompleteEventCache(t.getCompleteServerSnap()),this.filter_.updateFullNode(t.getEventCache().getNode(),a,i))):".priority"===(a=e.getFront())?(Ao(1===e.getLength(),"Can't have a priority with additional path components"),u=o.getNode(),l=t.getServerCache().getNode(),null!=(c=n.calcEventCacheAfterServerOverwrite(e,u,l))?this.filter_.updatePriority(u,c):o.getNode()):(u=e.popFront(),c=void 0,null!=(c=o.isCompleteForChild(a)?(l=t.getServerCache().getNode(),null!=(l=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),l))?o.getNode().getImmediateChild(a).updateChild(u,l):o.getNode().getImmediateChild(a)):n.calcCompleteChild(a,t.getServerCache()))?this.filter_.updateChild(o.getNode(),a,c,u,r,i):o.getNode()),t.updateEventSnap(h,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},sh.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a=t.getServerCache(),u=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())h=u.updateFullNode(a.getNode(),n,null);else if(u.filtersNodes()&&!a.isFiltered())var c=a.getNode().updateChild(e,n),h=u.updateFullNode(a.getNode(),c,null);else{o=e.getFront();if(!a.isCompleteForPath(e)&&1<e.getLength())return t;c=e.popFront(),n=a.getNode().getImmediateChild(o).updateChild(c,n);h=".priority"===o?u.updatePriority(a.getNode(),n):u.updateChild(a.getNode(),o,n,c,eh,null)}u=t.updateServerSnap(h,a.isFullyInitialized()||e.isEmpty(),u.filtersNodes()),i=new nh(r,u,i);return this.generateEventCacheAfterServerEvent_(u,e,r,i,s)},sh.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new nh(r,t,i);return e.isEmpty()?(a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),t.updateEventSnap(a,!0,this.filter_.filtersNodes())):".priority"===(s=e.getFront())?(a=this.filter_.updatePriority(t.getEventCache().getNode(),n),t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered())):(r=e.popFront(),i=u.getNode().getImmediateChild(s),a=void 0,a=r.isEmpty()?n:null!=(e=c.getCompleteChild(s))?".priority"===r.getBack()&&e.getChild(r.parent()).isEmpty()?e:e.updateChild(r,n):zu.EMPTY_NODE,i.equals(a)?t:(o=this.filter_.updateChild(u.getNode(),s,a,r,c,o),t.updateEventSnap(o,u.isFullyInitialized(),this.filter_.filtersNodes())))},sh.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},sh.prototype.applyUserMerge_=function(n,r,t,i,o,s){var a=this,u=n;return t.foreach(function(t,e){t=r.child(t);sh.cacheHasChild_(n,t.getFront())&&(u=a.applyUserOverwrite_(u,t,e,i,o,s))}),t.foreach(function(t,e){t=r.child(t);sh.cacheHasChild_(n,t.getFront())||(u=a.applyUserOverwrite_(u,t,e,i,o,s))}),u},sh.prototype.applyMerge_=function(n,t){return t.foreach(function(t,e){n=n.updateChild(t,e)}),n},sh.prototype.applyServerMerge_=function(r,t,e,i,o,s,a){var u=this;if(r.getServerCache().getNode().isEmpty()&&!r.getServerCache().isFullyInitialized())return r;var c=r,e=t.isEmpty()?e:Mc.Empty.setTree(t,e),h=r.getServerCache().getNode();return e.children.inorderTraversal(function(t,e){var n;h.hasChild(t)&&(n=r.getServerCache().getNode().getImmediateChild(t),e=u.applyMerge_(n,e),c=u.applyServerOverwrite_(c,new ka(t),e,i,o,s,a))}),e.children.inorderTraversal(function(t,e){var n=!r.getServerCache().isCompleteForChild(t)&&null==e.value;h.hasChild(t)||n||(n=r.getServerCache().getNode().getImmediateChild(t),e=u.applyMerge_(n,e),c=u.applyServerOverwrite_(c,new ka(t),e,i,o,s,a))}),c},sh.prototype.ackUserWrite_=function(t,r,e,n,i,o){if(null!=n.shadowingWrite(r))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=e.value){if(r.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(r))return this.applyServerOverwrite_(t,r,a.getNode().getChild(r),n,i,s,o);if(r.isEmpty()){var u=Mc.Empty;return a.getNode().forEachChild(gu,function(t,e){u=u.set(new ka(t),e)}),this.applyServerMerge_(t,r,u,n,i,s,o)}return t}var c=Mc.Empty;return e.foreach(function(t,e){var n=r.child(t);a.isCompleteForPath(n)&&(c=c.set(t,a.getNode().getChild(n)))}),this.applyServerMerge_(t,r,c,n,i,s,o)},sh.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),i=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(i,e,n,eh,r)},sh.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var s,a,u=new nh(n,t,r),c=t.getEventCache().getNode(),r=void 0;return e.isEmpty()||".priority"===e.getFront()?(a=void 0,a=t.getServerCache().isFullyInitialized()?n.calcCompleteEventCache(t.getCompleteServerSnap()):(s=t.getServerCache().getNode(),Ao(s instanceof zu,"serverChildren would be complete if leaf node"),n.calcCompleteEventChildren(s)),r=this.filter_.updateFullNode(c,a,i)):(s=e.getFront(),null==(a=n.calcCompleteChild(s,t.getServerCache()))&&t.getServerCache().isCompleteForChild(s)&&(a=c.getImmediateChild(s)),(r=null!=a?this.filter_.updateChild(c,s,a,e.popFront(),u,i):t.getEventCache().getNode().hasChild(s)?this.filter_.updateChild(c,s,zu.EMPTY_NODE,e.popFront(),u,i):c).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(r=this.filter_.updateFullNode(r,o,i))),o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(ka.Empty),t.updateEventSnap(r,o,this.filter_.filtersNodes())},sh);function sh(t){this.filter_=t}var ah=(uh.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach(function(t){t.type===Qc.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(Qc.childMovedChange(t.childName,t.snapshotNode))}),this.generateEventsForType_(i,Qc.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,Qc.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,Qc.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,Qc.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,Qc.VALUE,t,n,e),i},uh.prototype.generateEventsForType_=function(r,e,t,i,o){var s=this,t=t.filter(function(t){return t.type===e});t.sort(this.compareChanges_.bind(this)),t.forEach(function(e){var n=s.materializeSingleChange_(e,o);i.forEach(function(t){t.respondsTo(e.type)&&r.push(t.createEvent(n,s.query_))})})},uh.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},uh.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw ko("Should only compare child_ events.");t=new cu(t.childName,t.snapshotNode),e=new cu(e.childName,e.snapshotNode);return this.index_.compare(t,e)},uh);function uh(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}var ch,hh=(lh.prototype.getQuery=function(){return this.query_},lh.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},lh.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},lh.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},lh.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},lh.prototype.removeEventRegistration=function(t,e){var n,r=[];if(e&&(Ao(null==t,"A cancel should cancel all event registrations."),n=this.query_.path,this.eventRegistrations_.forEach(function(t){t=t.createCancelEvent(e,n);t&&r.push(t)})),t){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var s=this.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(s)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return r},lh.prototype.applyOperation=function(t,e,n){t.type===Ac.MERGE&&null!==t.source.queryId&&(Ao(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Ao(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,n=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(n.viewCache),Ao(n.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=n.viewCache,this.generateEventsForChanges_(n.changes,n.viewCache.getEventCache().getNode(),null)},lh.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Nu,function(t,e){n.push(Qc.childAddedChange(t,e))}),e.isFullyInitialized()&&n.push(Qc.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},lh.prototype.generateEventsForChanges_=function(t,e,n){n=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,n)},lh);function lh(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new Yc(n.getIndex()),i=n.getNodeFilter();this.processor_=new oh(i);var o=e.getServerCache(),t=e.getEventCache(),n=r.updateFullNode(zu.EMPTY_NODE,o.getNode(),null),e=i.updateFullNode(zu.EMPTY_NODE,t.getNode(),null),r=new Hc(n,o.isFullyInitialized(),r.filtersNodes()),i=new Hc(e,t.isFullyInitialized(),i.filtersNodes());this.viewCache_=new Kc(i,r),this.eventGenerator_=new ah(this.query_)}var fh=(Object.defineProperty(ph,"__referenceConstructor",{get:function(){return Ao(ch,"Reference.ts has not been loaded"),ch},set:function(t){Ao(!ch,"__referenceConstructor has already been defined"),ch=t},enumerable:!1,configurable:!0}),ph.prototype.isEmpty=function(){return 0===this.views.size},ph.prototype.applyOperation=function(t,e,n){var r,i,o=t.source.queryId;if(null!==o){var s=this.views.get(o);return Ao(null!=s,"SyncTree gave us an op for an invalid query."),s.applyOperation(t,e,n)}var a=[];try{for(var u=wo(this.views.values()),c=u.next();!c.done;c=u.next())s=c.value,a=a.concat(s.applyOperation(t,e,n))}catch(t){r={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return a},ph.prototype.addEventRegistration=function(t,e,n,r,i){var o,s,a=t.queryIdentifier(),u=this.views.get(a);return u||(s=!1,s=!!(o=n.calcCompleteEventCache(i?r:null))||(o=r instanceof zu?n.calcCompleteEventChildren(r):zu.EMPTY_NODE,!1),i=new Kc(new Hc(o,s,!1),new Hc(r,i,!1)),u=new hh(t,i),this.views.set(a,u)),u.addEventRegistration(e),u.getInitialEvents(e)},ph.prototype.removeEventRegistration=function(t,e,n){var r,i,o=t.queryIdentifier(),s=[],a=[],u=this.hasCompleteView();if("default"===o)try{for(var c=wo(this.views.entries()),h=c.next();!h.done;h=c.next()){var l=Eo(h.value,2),f=l[0],p=l[1],a=a.concat(p.removeEventRegistration(e,n));p.isEmpty()&&(this.views.delete(f),p.getQuery().getQueryParams().loadsAllData()||s.push(p.getQuery()))}}catch(t){r={error:t}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}else(p=this.views.get(o))&&(a=a.concat(p.removeEventRegistration(e,n)),p.isEmpty()&&(this.views.delete(o),p.getQuery().getQueryParams().loadsAllData()||s.push(p.getQuery())));return u&&!this.hasCompleteView()&&s.push(new ph.__referenceConstructor(t.repo,t.path)),{removed:s,events:a}},ph.prototype.getQueryViews=function(){var e,t,n=[];try{for(var r=wo(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},ph.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var i=wo(this.views.values()),o=i.next();!o.done;o=i.next())var s=o.value,r=r||s.getCompleteServerCache(t)}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},ph.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();t=t.queryIdentifier();return this.views.get(t)},ph.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},ph.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},ph.prototype.getCompleteView=function(){var e,t;try{for(var n=wo(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return null},ph);function ph(){this.views=new Map}var dh=(vh.prototype.addWrite=function(t,e){if(t.isEmpty())return new vh(new Mc(e));var n=this.writeTree_.findRootMostValueAndPath(t);if(null!=n){var r=n.path,i=n.value,n=ka.relativePath(r,t),i=i.updateChild(n,e);return new vh(this.writeTree_.set(r,i))}e=new Mc(e);return new vh(this.writeTree_.setTree(t,e))},vh.prototype.addWrites=function(n,t){var r=this;return Ia(t,function(t,e){r=r.addWrite(n.child(t),e)}),r},vh.prototype.removeWrite=function(t){return t.isEmpty()?vh.Empty:new vh(this.writeTree_.setTree(t,Mc.Empty))},vh.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},vh.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(ka.relativePath(e.path,t)):null},vh.prototype.getCompleteChildren=function(){var n=[],t=this.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Nu,function(t,e){n.push(new cu(t,e))}):this.writeTree_.children.inorderTraversal(function(t,e){null!=e.value&&n.push(new cu(t,e.value))}),n},vh.prototype.childCompoundWrite=function(t){if(t.isEmpty())return this;var e=this.getCompleteNode(t);return new vh(null!=e?new Mc(e):this.writeTree_.subtree(t))},vh.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},vh.prototype.apply=function(t){return function n(r,t,i){{if(null!=t.value)return i.updateChild(r,t.value);var o=null;return t.children.inorderTraversal(function(t,e){".priority"===t?(Ao(null!==e.value,"Priority writes must always be leaf nodes"),o=e.value):i=n(r.child(t),e,i)}),i.getChild(r).isEmpty()||null===o||(i=i.updateChild(r.child(".priority"),o)),i}}(ka.Empty,this.writeTree_,t)},vh.Empty=new vh(new Mc(null)),vh);function vh(t){this.writeTree_=t}var yh=(gh.prototype.childWrites=function(t){return new mh(t,this)},gh.prototype.addOverwrite=function(t,e,n,r){Ao(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},gh.prototype.addMerge=function(t,e,n){Ao(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},gh.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},gh.prototype.removeWrite=function(e){var n=this,t=this.allWrites_.findIndex(function(t){return t.writeId===e});Ao(0<=t,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[t];this.allWrites_.splice(t,1);for(var i=r.visible,o=!1,s=this.allWrites_.length-1;i&&0<=s;){var a=this.allWrites_[s];a.visible&&(t<=s&&this.recordContainsPath_(a,r.path)?i=!1:r.path.contains(a.path)&&(o=!0)),s--}return!!i&&(o?this.resetTree_():r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):Ia(r.children,function(t){n.visibleWrites_=n.visibleWrites_.removeWrite(r.path.child(t))}),!0)},gh.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},gh.prototype.calcCompleteEventCache=function(e,t,n,r){if(n||r){var i=this.visibleWrites_.childCompoundWrite(e);if(!r&&i.isEmpty())return t;if(r||null!=t||i.hasCompleteWrite(ka.Empty)){var o=gh.layerTree_(this.allWrites_,function(t){return(t.visible||r)&&(!n||!~n.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},e),s=t||zu.EMPTY_NODE;return o.apply(s)}return null}o=this.visibleWrites_.getCompleteNode(e);if(null!=o)return o;o=this.visibleWrites_.childCompoundWrite(e);if(o.isEmpty())return t;if(null!=t||o.hasCompleteWrite(ka.Empty)){var s=t||zu.EMPTY_NODE;return o.apply(s)}return null},gh.prototype.calcCompleteEventChildren=function(t,e){var n=zu.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(Nu,function(t,e){n=n.updateImmediateChild(t,e)}),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(Nu,function(t,e){e=i.childCompoundWrite(new ka(t)).apply(e);n=n.updateImmediateChild(t,e)}),i.getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n},gh.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){Ao(n||r,"Either existingEventSnap or existingServerSnap must exist");t=t.child(e);if(this.visibleWrites_.hasCompleteWrite(t))return null;t=this.visibleWrites_.childCompoundWrite(t);return t.isEmpty()?r.getChild(e):t.apply(r.getChild(e))},gh.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),t=this.visibleWrites_.getCompleteNode(r);return null!=t?t:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},gh.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},gh.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t),t=a.getCompleteNode(ka.Empty);if(null!=t)s=t;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var u=[],c=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),l=h.getNext();l&&u.length<r;)0!==c(l,n)&&u.push(l),l=h.getNext();return u},gh.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},gh.prototype.resetTree_=function(){this.visibleWrites_=gh.layerTree_(this.allWrites_,gh.DefaultFilter_,ka.Empty),0<this.allWrites_.length?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},gh.DefaultFilter_=function(t){return t.visible},gh.layerTree_=function(t,e,n){for(var r=dh.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var s=o.path,a=void 0;if(o.snap)n.contains(s)?(a=ka.relativePath(n,s),r=r.addWrite(a,o.snap)):s.contains(n)&&(a=ka.relativePath(s,n),r=r.addWrite(ka.Empty,o.snap.getChild(a)));else{if(!o.children)throw ko("WriteRecord should have .snap or .children");n.contains(s)?(a=ka.relativePath(n,s),r=r.addWrites(a,o.children)):s.contains(n)&&((a=ka.relativePath(s,n)).isEmpty()?r=r.addWrites(ka.Empty,o.children):(o=ts(o.children,a.getFront()))&&(a=o.getChild(a.popFront()),r=r.addWrite(ka.Empty,a)))}}}return r},gh);function gh(){this.visibleWrites_=dh.Empty,this.allWrites_=[],this.lastWriteId_=-1}var mh=(bh.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},bh.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},bh.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},bh.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},bh.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},bh.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},bh.prototype.child=function(t){return new bh(this.treePath_.child(t),this.writeTree_)},bh);function bh(t,e){this.treePath_=t,this.writeTree_=e}var _h=(wh.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new Vc(Rc.User,t,e)):[]},wh.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);e=Mc.fromObject(e);return this.applyOperationToSyncPoints_(new Bc(Rc.User,t,e))},wh.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=Mc.Empty;return null!=n.snap?r=r.set(ka.Empty,!0):Ia(n.children,function(t,e){r=r.set(new ka(t),e)}),this.applyOperationToSyncPoints_(new xc(n.path,r,e))}return[]},wh.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new Vc(Rc.Server,t,e))},wh.prototype.applyServerMerge=function(t,e){e=Mc.fromObject(e);return this.applyOperationToSyncPoints_(new Bc(Rc.Server,t,e))},wh.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new Uc(Rc.Server,t))},wh.prototype.applyTaggedQueryOverwrite=function(t,e,n){var r=this.queryKeyForTag_(n);if(null==r)return[];n=wh.parseQueryKey_(r),r=n.path,n=n.queryId,t=ka.relativePath(r,t),e=new Vc(Rc.forServerTaggedQuery(n),t,e);return this.applyTaggedOperation_(r,e)},wh.prototype.applyTaggedQueryMerge=function(t,e,n){var r=this.queryKeyForTag_(n);if(r){n=wh.parseQueryKey_(r),r=n.path,n=n.queryId,t=ka.relativePath(r,t),e=Mc.fromObject(e),e=new Bc(Rc.forServerTaggedQuery(n),t,e);return this.applyTaggedOperation_(r,e)}return[]},wh.prototype.applyTaggedListenComplete=function(t,e){var n=this.queryKeyForTag_(e);if(n){e=wh.parseQueryKey_(n),n=e.path,e=e.queryId,t=ka.relativePath(n,t),t=new Uc(Rc.forServerTaggedQuery(e),t);return this.applyTaggedOperation_(n,t)}return[]},wh.prototype.addEventRegistration=function(t,e){var n=t.path,r=null,i=!1;this.syncPointTree_.foreachOnPath(n,function(t,e){t=ka.relativePath(t,n);r=r||e.getCompleteServerCache(t),i=i||e.hasCompleteView()});var o=this.syncPointTree_.get(n);o?(i=i||o.hasCompleteView(),r=r||o.getCompleteServerCache(ka.Empty)):(o=new fh,this.syncPointTree_=this.syncPointTree_.set(n,o)),null!=r?c=!0:(c=!1,r=zu.EMPTY_NODE,this.syncPointTree_.subtree(n).foreachChild(function(t,e){e=e.getCompleteServerCache(ka.Empty);e&&(r=r.updateImmediateChild(t,e))}));var s,a=o.viewExistsForQuery(t);a||t.getQueryParams().loadsAllData()||(u=wh.makeQueryKey_(t),Ao(!this.queryToTagMap.has(u),"View does not exist, but we have a tag"),s=wh.getNextQueryTag_(),this.queryToTagMap.set(u,s),this.tagToQueryMap.set(s,u));var u=this.pendingWriteTree_.childWrites(n),c=o.addEventRegistration(t,e,u,r,c);return a||i||(o=o.viewForQuery(t),c=c.concat(this.setupListener_(t,o))),c},wh.prototype.removeEventRegistration=function(t,e,n){var r=this,i=t.path,o=this.syncPointTree_.get(i),s=[];if(o&&("default"===t.queryIdentifier()||o.viewExistsForQuery(t))){var a=o.removeEventRegistration(t,e,n);o.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(i));e=a.removed,s=a.events,o=-1!==e.findIndex(function(t){return t.getQueryParams().loadsAllData()}),a=this.syncPointTree_.findOnPath(i,function(t,e){return e.hasCompleteView()});if(o&&!a){i=this.syncPointTree_.subtree(i);if(!i.isEmpty())for(var u=this.collectDistinctViewsForSubTree_(i),c=0;c<u.length;++c){var h=u[c],l=h.getQuery(),h=this.createListenerForView_(h);this.listenProvider_.startListening(wh.queryForListening_(l),this.tagForQuery_(l),h.hashFn,h.onComplete)}}!a&&0<e.length&&!n&&(o?this.listenProvider_.stopListening(wh.queryForListening_(t),null):e.forEach(function(t){var e=r.queryToTagMap.get(wh.makeQueryKey_(t));r.listenProvider_.stopListening(wh.queryForListening_(t),e)})),this.removeTags_(e)}return s},wh.prototype.calcCompleteEventCache=function(n,t){var e=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(n,function(t,e){t=ka.relativePath(t,n),t=e.getCompleteServerCache(t);if(t)return t});return e.calcCompleteEventCache(n,r,t,!0)},wh.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),Ia(n,function(t,e){r=r.concat(e)}),r})},wh.prototype.removeTags_=function(t){for(var e=0;e<t.length;++e){var n,r=t[e];r.getQueryParams().loadsAllData()||(n=wh.makeQueryKey_(r),r=this.queryToTagMap.get(n),this.queryToTagMap.delete(n),this.tagToQueryMap.delete(r))}},wh.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},wh.prototype.setupListener_=function(t,e){var n=t.path,r=this.tagForQuery_(t),e=this.createListenerForView_(e),e=this.listenProvider_.startListening(wh.queryForListening_(t),r,e.hashFn,e.onComplete),n=this.syncPointTree_.subtree(n);if(r)Ao(!n.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var i=n.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),Ia(n,function(t,e){r=r.concat(e)}),r}),o=0;o<i.length;++o){var s=i[o];this.listenProvider_.stopListening(wh.queryForListening_(s),this.tagForQuery_(s))}return e},wh.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||zu.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);t=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");n=new Error(t+" at "+e.path.toString()+": "+n);return n.code=t.toUpperCase(),n}(t,n);return e.removeEventRegistration(n,null,t)}}},wh.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},wh.parseQueryKey_=function(t){var e=t.indexOf("$");return Ao(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ka(t.substr(0,e))}},wh.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},wh.prototype.tagForQuery_=function(t){t=wh.makeQueryKey_(t);return this.queryToTagMap.get(t)},wh.getNextQueryTag_=function(){return wh.nextQueryTag_++},wh.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);Ao(n,"Missing sync point for query tag that we're tracking");t=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,t,null)},wh.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(ka.Empty))},wh.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(ka.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(ka.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),u=e.children.get(s);return u&&a&&(e=n?n.getImmediateChild(s):null,s=r.child(s),o=o.concat(this.applyOperationHelper_(a,u,e,s))),i&&(o=o.concat(i.applyOperation(t,r,n))),o},wh.prototype.applyOperationDescendantsHelper_=function(i,t,o,s){var a=this,e=t.get(ka.Empty);null==o&&null!=e&&(o=e.getCompleteServerCache(ka.Empty));var u=[];return t.children.inorderTraversal(function(t,e){var n=o?o.getImmediateChild(t):null,r=s.child(t),t=i.operationForChild(t);t&&(u=u.concat(a.applyOperationDescendantsHelper_(t,e,n,r)))}),e&&(u=u.concat(e.applyOperation(i,s,o))),u},wh.nextQueryTag_=1,wh);function wh(t){this.listenProvider_=t,this.syncPointTree_=Mc.Empty,this.pendingWriteTree_=new yh,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}var Eh=(Ih.prototype.getNode=function(t){return this.rootNode_.getChild(t)},Ih.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},Ih);function Ih(){this.rootNode_=zu.EMPTY_NODE}var Th=(Sh.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Zo(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},Sh.prototype.get=function(){return Ro(this.counters_)},Sh);function Sh(){this.counters_={}}var Ch=(Nh.getCollection=function(t){t=t.toString();return this.collections_[t]||(this.collections_[t]=new Th),this.collections_[t]},Nh.getOrCreateReporter=function(t,e){t=t.toString();return this.reporters_[t]||(this.reporters_[t]=e()),this.reporters_[t]},Nh.collections_={},Nh.reporters_={},Nh);function Nh(){}var Ah=(kh.prototype.get=function(){var t=this.collection_.get(),n=mo({},t);return this.last_&&Ia(this.last_,function(t,e){n[t]=n[t]-e}),this.last_=t,n},kh);function kh(t){this.collection_=t,this.last_=null}var Oh=(Rh.prototype.includeStat=function(t){this.statsToReport_[t]=!0},Rh.prototype.reportStats_=function(){var n=this,t=this.statsListener_.get(),r={},i=!1;Ia(t,function(t,e){0<e&&Zo(n.statsToReport_,t)&&(r[t]=e,i=!0)}),i&&this.server_.reportStats(r),Ca(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},Rh);function Rh(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Ah(t);t=1e4+2e4*Math.random();Ca(this.reportStats_.bind(this),Math.floor(t))}var Ph=(Dh.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new xh(i)),e.add(r)}e&&this.eventLists_.push(e)},Dh.prototype.raiseEventsAtPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.equals(e)})},Dh.prototype.raiseEventsForChangedPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.contains(e)||e.contains(t)})},Dh.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},Dh);function Dh(){this.eventLists_=[],this.recursionDepth_=0}var xh=(Lh.prototype.add=function(t){this.events_.push(t)},Lh.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e,n=this.events_[t];null!==n&&(this.events_[t]=null,e=n.getEventRunner(),va&&ga("event: "+n.toString()),Sa(e))}},Lh.prototype.getPath=function(){return this.path_},Lh);function Lh(t){this.path_=t,this.events_=[]}Mh.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Io(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},Mh.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});t=this.getInitialEvent(t);t&&e.apply(n,t)},Mh.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},Mh.prototype.validateEventType_=function(e){Ao(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)},M=Mh;function Mh(t){this.allowedEvents_=t,this.listeners_={},Ao(Array.isArray(t)&&0<t.length,"Requires a non-empty array")}var Fh,Uh=(go(jh,Fh=M),jh.getInstance=function(){return new jh},jh.prototype.getInitialEvent=function(t){return Ao("visible"===t,"Unknown event type: "+t),[this.visible_]},jh);function jh(){var e,t,n=Fh.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),n.visible_=!0,t&&document.addEventListener(t,function(){var t=!document[e];t!==n.visible_&&(n.visible_=t,n.trigger("visible",t))},!1),n}var Vh,qh=(go(Bh,Vh=M),Bh.getInstance=function(){return new Bh},Bh.prototype.getInitialEvent=function(t){return Ao("online"===t,"Unknown event type: "+t),[this.online_]},Bh.prototype.currentlyOnline=function(){return this.online_},Bh);function Bh(){var t=Vh.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Mo()||(window.addEventListener("online",function(){t.online_||(t.online_=!0,t.trigger("online",!0))},!1),window.addEventListener("offline",function(){t.online_&&(t.online_=!1,t.trigger("online",!1))},!1)),t}var Wh=(Hh.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},Hh.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=this;this.pendingResponses[this.currentResponseNum];){if("break"===function(){var e=r.pendingResponses[r.currentResponseNum];delete r.pendingResponses[r.currentResponseNum];for(var t=0;t<e.length;++t)!function(t){e[t]&&Sa(function(){n.onMessage_(e[t])})}(t);if(r.currentResponseNum===r.closeAfterResponse)return r.onClose&&(r.onClose(),r.onClose=null),"break";r.currentResponseNum++}())break}},Hh);function Hh(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}var Gh="pLPCommand",Kh="pRTLPCB",zh=(Qh.prototype.open=function(t,e){var n,r,i,s=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Wh(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){s.log_("Timed out trying to connect."),s.onClosed_(),s.connectTimeoutTimer_=null},Math.floor(3e4)),n=function(){var t;s.isClosed_||(s.scriptTagHolder=new Xh(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Eo(t,5),r=n[0],i=n[1],o=n[2];n[3],n[4];if(s.incrementIncomingBytes_(t),s.scriptTagHolder)if(s.connectTimeoutTimer_&&(clearTimeout(s.connectTimeoutTimer_),s.connectTimeoutTimer_=null),s.everConnected_=!0,"start"===r)s.id=i,s.password=o;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);i?(s.scriptTagHolder.sendNewPolls=!1,s.myPacketOrderer.closeAfter(i,function(){s.onClosed_()})):s.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Eo(t,2),r=n[0],n=n[1];s.incrementIncomingBytes_(t),s.myPacketOrderer.handleResponse(r,n)},function(){s.onClosed_()},s.urlFn),(t={start:"t"}).ser=Math.floor(1e8*Math.random()),s.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=s.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",s.transportSessionId&&(t.s=s.transportSessionId),s.lastSessionId&&(t.ls=s.lastSessionId),s.applicationId&&(t.p=s.applicationId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(Da)&&(t.r="f"),t=s.urlFn(t),s.log_("Connecting via long-poll to "+t),s.scriptTagHolder.addTag(t,function(){}))},"complete"===document.readyState?n():(r=!1,i=function(){document.body?r||(r=!0,n()):setTimeout(i,Math.floor(10))},document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&i()}),window.attachEvent("onload",i)))},Qh.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},Qh.forceAllow=function(){Qh.forceAllow_=!0},Qh.forceDisallow=function(){Qh.forceDisallow_=!0},Qh.isAvailable=function(){return!!Qh.forceAllow_||!(Qh.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},Qh.prototype.markConnectionHealthy=function(){},Qh.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},Qh.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},Qh.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},Qh.prototype.send=function(t){t=Jo(t);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var t=function(t){t=So(t);return Oo.encodeByteArray(t,!0)}(t),e=ua(t,1840),n=0;n<e.length;n++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,e.length,e[n]),this.curSegmentNum++},Qh.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},Qh.prototype.incrementIncomingBytes_=function(t){t=Jo(t).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},Qh);function Qh(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ma(t),this.stats_=Ch.getCollection(e),this.urlFn=function(t){return e.connectionURL(La,t)}}var Xh=(Yh.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||ga("No IE domain setting required")}catch(t){var n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},Yh.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},Yh.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},Yh.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(0<this.pendingSegs.length?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var t=this.urlFn(t),e="",n=0;0<this.pendingSegs.length;){if(!(this.pendingSegs[0].d.length+30+e.length<=1870))break;var r=this.pendingSegs.shift(),e=e+"&seg"+n+"="+r.seg+"&ts"+n+"="+r.ts+"&d"+n+"="+r.d;n++}return t+=e,this.addLongPollTag_(t,this.currentSerial),!0}return!1},Yh.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},Yh.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);function r(){n.outstandingRequests.delete(e),n.newRequest_()}var i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},Yh.prototype.addTag=function(t,n){var r=this;setTimeout(function(){try{if(!r.sendNewPolls)return;var e=r.myIFrame.doc.createElement("script");e.type="text/javascript",e.async=!0,e.src=t,e.onload=e.onreadystatechange=function(){var t=e.readyState;t&&"loaded"!==t&&"complete"!==t||(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),n())},e.onerror=function(){ga("Long-poll script failed to load: "+t),r.sendNewPolls=!1,r.close()},r.myIFrame.doc.body.appendChild(e)}catch(t){}},Math.floor(1))},Yh);function Yh(t,e,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=pa(),window[Gh+this.uniqueCallbackIdentifier]=t,window[Kh+this.uniqueCallbackIdentifier]=e,this.myIFrame=Yh.createIFrame_();e="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(e='<script>document.domain="'+document.domain+'";<\/script>');var i="<html><body>"+e+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(t){ga("frame writing exception"),t.stack&&ga(t.stack),ga(t)}}var Jh="";function $h(t){Jh=t}var Zh=null;"undefined"!=typeof MozWebSocket?Zh=MozWebSocket:"undefined"!=typeof WebSocket&&(Zh=WebSocket);var tl=(el.connectionURL_=function(t,e,n){var r={v:"5"};return"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(Da)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL(xa,r)},el.prototype.open=function(e,t){var n,r=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ha.set("previous_websocket_failure",!0);try{jo()||(n={headers:{"X-Firebase-GMPID":this.applicationId||""}},this.mySock=new Zh(this.connURL,[],n))}catch(t){this.log_("Error instantiating WebSocket.");e=t.message||t.data;return e&&this.log_(e),void this.onClosed_()}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(t){r.handleIncomingFrame(t)},this.mySock.onerror=function(t){r.log_("WebSocket error.  Closing connection.");t=t.message||t.data;t&&r.log_(t),r.onClosed_()}},el.prototype.start=function(){},el.forceDisallow=function(){el.forceDisallow_=!0},el.isAvailable=function(){var t,e=!1;return"undefined"!=typeof navigator&&navigator.userAgent&&((t=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/))&&1<t.length&&parseFloat(t[1])<4.4&&(e=!0)),!e&&null!==Zh&&!el.forceDisallow_},el.previouslyFailed=function(){return ha.isInMemoryStorage||!0===ha.get("previous_websocket_failure")},el.prototype.markConnectionHealthy=function(){ha.remove("previous_websocket_failure")},el.prototype.appendFrame_=function(t){this.frames.push(t),this.frames.length===this.totalFrames&&(t=this.frames.join(""),this.frames=null,t=Yo(t),this.onMessage(t))},el.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},el.prototype.extractFrameCount_=function(t){if(Ao(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},el.prototype.handleIncomingFrame=function(t){null!==this.mySock&&(t=t.data,this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames?this.appendFrame_(t):null!==(t=this.extractFrameCount_(t))&&this.appendFrame_(t))},el.prototype.send=function(t){this.resetKeepAlive();t=Jo(t);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var e=ua(t,16384);1<e.length&&this.sendString_(String(e.length));for(var n=0;n<e.length;n++)this.sendString_(e[n])},el.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},el.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},el.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},el.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},el.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},el.responsesRequiredToBeHealthy=2,el.healthyTimeout=3e4,el);function el(t,e,n,r,i){this.connId=t,this.applicationId=n,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ma(this.connId),this.stats_=Ch.getCollection(e),this.connURL=el.connectionURL_(e,r,i),this.nodeAdmin=e.nodeAdmin}var nl=(Object.defineProperty(rl,"ALL_TRANSPORTS",{get:function(){return[zh,tl]},enumerable:!1,configurable:!0}),rl.prototype.initTransports_=function(t){var e,n,r=tl&&tl.isAvailable(),i=r&&!tl.previouslyFailed();if(t.webSocketOnly&&(r||ia("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[tl];else{var o=this.transports_=[];try{for(var s=wo(rl.ALL_TRANSPORTS),a=s.next();!a.done;a=s.next()){var u=a.value;u&&u.isAvailable()&&o.push(u)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}}},rl.prototype.initialTransport=function(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")},rl.prototype.upgradeTransport=function(){return 1<this.transports_.length?this.transports_[1]:null},rl);function rl(t){this.initTransports_(t)}var il=(ol.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));e=e.healthyTimeout||0;0<e&&(this.healthyTimeout_=Ca(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&102400<t.conn_.bytesReceived?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&10240<t.conn_.bytesSent?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(e)))},ol.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},ol.prototype.disconnReceiver_=function(e){var n=this;return function(t){e===n.conn_?n.onConnectionLost_(t):e===n.secondaryConn_?(n.log_("Secondary connection lost."),n.onSecondaryConnectionLost_()):n.log_("closing an old connection")}},ol.prototype.connReceiver_=function(e){var n=this;return function(t){2!==n.state_&&(e===n.rx_?n.onPrimaryMessageReceived_(t):e===n.secondaryConn_?n.onSecondaryMessageReceived_(t):n.log_("message on old connection"))}},ol.prototype.sendRequest=function(t){t={t:"d",d:t};this.sendData_(t)},ol.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},ol.prototype.onSecondaryControl_=function(t){"t"in t&&("a"===(t=t.t)?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_()))},ol.prototype.onSecondaryMessageReceived_=function(t){var e=aa("t",t),t=aa("d",t);if("c"===e)this.onSecondaryControl_(t);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(t)}},ol.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},ol.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},ol.prototype.onPrimaryMessageReceived_=function(t){var e=aa("t",t),t=aa("d",t);"c"===e?this.onControl_(t):"d"===e&&this.onDataMessage_(t)},ol.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},ol.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},ol.prototype.onControl_=function(t){var e=aa("t",t);if("d"in t){t=t.d;if("h"===e)this.onHandshake_(t);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var n=0;n<this.pendingDataMessages.length;++n)this.onDataMessage_(this.pendingDataMessages[n]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(t):"r"===e?this.onReset_(t):"e"===e?na("Server Error: "+t):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):na("Unknown control packet command: "+e)}},ol.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&ia("Protocol version mismatch detected"),this.tryStartUpgrade_())},ol.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},ol.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),t=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,t),Ca(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},ol.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},ol.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ca(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},ol.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},ol.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},ol.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ha.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},ol.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},ol.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},ol.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},ol.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},ol);function ol(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ma("c:"+this.id+":"),this.transportManager_=new nl(e),this.log_("Connection created"),this.start_()}sl.prototype.put=function(t,e,n,r){},sl.prototype.merge=function(t,e,n,r){},sl.prototype.refreshAuthToken=function(t){},sl.prototype.onDisconnectPut=function(t,e,n){},sl.prototype.onDisconnectMerge=function(t,e,n){},sl.prototype.onDisconnectCancel=function(t,e){},sl.prototype.reportStats=function(t){},du=sl;function sl(){}var al,ul=1e3,cl=3e5,hl=(go(ll,al=du),ll.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,e={r:r,a:t,b:e};this.log_(Jo(e)),Ao(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(e),n&&(this.requestCBHash_[r]=n)},ll.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Ao(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Ao(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");n={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,n),this.connected_&&this.sendListen_(n)},ll.prototype.sendListen_=function(r){var i=this,o=r.query,s=o.path.toString(),a=o.queryIdentifier();this.log_("Listen on "+s+" for "+a);var t={p:s};r.tag&&(t.q=o.queryObject(),t.t=r.tag),t.h=r.hashFn(),this.sendRequest("q",t,function(t){var e=t.d,n=t.s;ll.warnOnListenWarnings_(e,o),(i.listens.get(s)&&i.listens.get(s).get(a))===r&&(i.log_("listen response",t),"ok"!==n&&i.removeListen_(s,a),r.onComplete&&r.onComplete(n,e))})},ll.warnOnListenWarnings_=function(t,e){t&&"object"==typeof t&&Zo(t,"w")&&(t=ts(t,"w"),Array.isArray(t)&&~t.indexOf("no_index")&&(t='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',e=e.path.toString(),ia("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+t+" at "+e+" to your security rules for better performance.")))},ll.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},ll.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||function(t){t=$o(t).claims;return"object"==typeof t&&!0===t.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},ll.prototype.tryAuth=function(){var n,t,e,r=this;this.connected_&&this.authToken_&&(t=function(t){t=$o(t).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(n=this.authToken_)?"auth":"gauth",e={cred:n},null===this.authOverride_?e.noauth=!0:"object"==typeof this.authOverride_&&(e.authvar=this.authOverride_),this.sendRequest(t,e,function(t){var e=t.s,t=t.d||"error";r.authToken_===n&&("ok"===e?r.invalidAuthTokenCount_=0:r.onAuthRevoked_(e,t))}))},ll.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Ao(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},ll.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);t={p:t};r&&(t.q=n,t.t=r),this.sendRequest("n",t)},ll.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},ll.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},ll.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},ll.prototype.sendOnDisconnect_=function(t,e,n,r){n={p:e,d:n};this.log_("onDisconnect "+t,n),this.sendRequest(t,n,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},ll.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},ll.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},ll.prototype.putInternal=function(t,e,n,r,i){n={p:e,d:n};void 0!==i&&(n.h=i),this.outstandingPuts_.push({action:t,request:n,onComplete:r}),this.outstandingPutCount_++;r=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(r):this.log_("Buffering put: "+e)},ll.prototype.sendPut_=function(e){var n=this,r=this.outstandingPuts_[e].action,t=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,t,function(t){n.log_(r+" response",t),delete n.outstandingPuts_[e],n.outstandingPutCount_--,0===n.outstandingPutCount_&&(n.outstandingPuts_=[]),i&&i(t.s,t.d)})},ll.prototype.reportStats=function(t){var e=this;this.connected_&&(t={c:t},this.log_("reportStats",t),this.sendRequest("s",t,function(t){"ok"!==t.s&&(t=t.d,e.log_("reportStats","Error sending stats: "+t))}))},ll.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Jo(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},ll.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):na("Unrecognized action received from server: "+Jo(t)+"\nAre you using the latest client?")},ll.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},ll.prototype.scheduleConnect_=function(t){var e=this;Ao(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},ll.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ul,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},ll.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=ul,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},ll.prototype.onRealtimeDisconnect_=function(){var t;this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()&&(this.visible_?this.lastConnectionEstablishedTime_&&(3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=ul),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime()),t=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-t),t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)),this.onConnectStatus_(!1)},ll.prototype.establishConnection_=function(){var e,n,r,i,o,s,a,u,c,t,h=this;this.shouldReconnect_()&&(this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+ll.nextConnectionId_++,s=(o=this).lastSessionId,a=!1,u=null,c=function(){u?u.close():(a=!0,r())},this.realtime_={close:c,sendRequest:function(t){Ao(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)}},t=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(t).then(function(t){a?ga("getToken() completed but was canceled"):(ga("getToken() completed. Creating connection."),o.authToken_=t&&t.accessToken,u=new il(i,o.repoInfo_,o.applicationId_,e,n,r,function(t){ia(t+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},s))}).then(null,function(t){o.log_("Failed to get token: "+t),a||(h.repoInfo_.nodeAdmin&&ia(t),c())}))},ll.prototype.interrupt=function(t){ga("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},ll.prototype.resume=function(t){ga("Resuming connection for reason: "+t),delete this.interruptReasons_[t],es(this.interruptReasons_)&&(this.reconnectDelay_=ul,this.realtime_||this.scheduleConnect_(0))},ll.prototype.handleTimestamp_=function(t){t-=(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},ll.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},ll.prototype.onListenRevoked_=function(t,e){e=e?e.map(function(t){return Ea(t)}).join("$"):"default",e=this.removeListen_(t,e);e&&e.onComplete&&e.onComplete("permission_denied")},ll.prototype.removeListen_=function(t,e){var n,r=new ka(t).toString();return this.listens.has(r)?(n=(t=this.listens.get(r)).get(e),t.delete(e),0===t.size&&this.listens.delete(r)):n=void 0,n},ll.prototype.onAuthRevoked_=function(t,e){ga("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,3<=this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},ll.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},ll.prototype.restoreState_=function(){var e,t,n,r;this.tryAuth();try{for(var i=wo(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,wo(s.values())),u=a.next();!u.done;u=a.next()){var c=u.value;this.sendListen_(c)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}},ll.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+Jh.replace(/\./g,"-")]=1,Mo()?t["framework.cordova"]=1:Uo()&&(t["framework.reactnative"]=1),this.reportStats(t)},ll.prototype.shouldReconnect_=function(){var t=qh.getInstance().currentlyOnline();return es(this.interruptReasons_)&&t},ll.nextPersistentConnectionId_=0,ll.nextConnectionId_=0,ll);function ll(t,e,n,r,i,o,s){var a=al.call(this)||this;if(a.repoInfo_=t,a.applicationId_=e,a.onDataUpdate_=n,a.onConnectStatus_=r,a.onServerInfoUpdate_=i,a.authTokenProvider_=o,a.authOverride_=s,a.id=ll.nextPersistentConnectionId_++,a.log_=ma("p:"+a.id+":"),a.interruptReasons_={},a.listens=new Map,a.outstandingPuts_=[],a.outstandingPutCount_=0,a.onDisconnectRequestQueue_=[],a.connected_=!1,a.reconnectDelay_=ul,a.maxReconnectDelay_=cl,a.securityDebugCallback_=null,a.lastSessionId=null,a.establishConnectionTimer_=null,a.visible_=!1,a.requestCBHash_={},a.requestNumber_=0,a.realtime_=null,a.authToken_=null,a.forceTokenRefresh_=!1,a.invalidAuthTokenCount_=0,a.firstConnection_=!0,a.lastConnectionAttemptTime_=null,a.lastConnectionEstablishedTime_=null,s&&!jo())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return a.scheduleConnect_(0),Uh.getInstance().on("visible",a.onVisible_,a),-1===t.host.indexOf("fblocal")&&qh.getInstance().on("online",a.onOnline_,a),a}var fl,pl=(go(dl,fl=du),dl.prototype.reportStats=function(t){throw new Error("Method not implemented.")},dl.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Ao(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},dl.prototype.listen=function(t,e,n,r){var i=this,o=t.path.toString();this.log_("Listen called for "+o+" "+t.queryIdentifier());var s=dl.getListenId_(t,n),a={};this.listens_[s]=a;t=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(o+".json",t,function(t,e){404===t&&(t=e=null),null===t&&i.onDataUpdate_(o,e,!1,n),ts(i.listens_,s)===a&&r(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},dl.prototype.unlisten=function(t,e){e=dl.getListenId_(t,e);delete this.listens_[e]},dl.prototype.refreshAuthToken=function(t){},dl.prototype.restRequest_=function(r,i,o){var s=this;void 0===i&&(i={}),i.format="export",this.authTokenProvider_.getToken(!1).then(function(t){t=t&&t.accessToken;t&&(i.auth=t);var e=(s.repoInfo_.secure?"https://":"http://")+s.repoInfo_.host+r+"?ns="+s.repoInfo_.namespace+function(t){for(var n=[],e=0,r=Object.entries(t);e<r.length;e++){var i=r[e];!function(e,t){Array.isArray(t)?t.forEach(function(t){n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}):n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}(i[0],i[1])}return n.length?"&"+n.join("&"):""}(i);s.log_("Sending REST request for "+e);var n=new XMLHttpRequest;n.onreadystatechange=function(){if(o&&4===n.readyState){s.log_("REST Response for "+e+" received. status:",n.status,"response:",n.responseText);var t=null;if(200<=n.status&&n.status<300){try{t=Yo(n.responseText)}catch(t){ia("Failed to parse JSON response for "+e+": "+n.responseText)}o(null,t)}else 401!==n.status&&404!==n.status&&ia("Got unsuccessful REST response for "+e+" Status: "+n.status),o(n.status);o=null}},n.open("GET",e,!0),n.send()})},dl);function dl(t,e,n){var r=fl.call(this)||this;return r.repoInfo_=t,r.onDataUpdate_=e,r.authTokenProvider_=n,r.log_=ma("p:rest:"),r.listens_={},r}var vl="repo_interrupt",yl=(gl.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},gl.prototype.name=function(){return this.repoInfo_.namespace},gl.prototype.serverTime=function(){var t=this.infoData_.getNode(new ka(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},gl.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},gl.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new ka(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o,s=[],t=i;0<(s=r?n?(o=ns(e,function(t){return Zu(t)}),this.serverSyncTree_.applyTaggedQueryMerge(i,o,r)):(o=Zu(e),this.serverSyncTree_.applyTaggedQueryOverwrite(i,o,r)):n?(n=ns(e,function(t){return Zu(t)}),this.serverSyncTree_.applyServerMerge(i,n)):(e=Zu(e),this.serverSyncTree_.applyServerOverwrite(i,e))).length&&(t=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(t,s)},gl.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},gl.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},gl.prototype.onServerInfoUpdate_=function(t){var n=this;Ia(t,function(t,e){n.updateInfo_(t,e)})},gl.prototype.updateInfo_=function(t,e){t=new ka("/.info/"+t),e=Zu(e);this.infoData_.updateSnapshot(t,e);e=this.infoSyncTree_.applyServerOverwrite(t,e);this.eventQueue_.raiseEventsForChangedPath(t,e)},gl.prototype.getNextWriteId_=function(){return this.nextWriteId_++},gl.prototype.setWithPriority=function(r,t,e,i){var o=this;this.log_("set",{path:r.toString(),value:t,priority:e});var n=this.generateServerValues(),t=Zu(t,e),e=this.serverSyncTree_.calcCompleteEventCache(r),n=Ic(t,e,n),s=this.getNextWriteId_(),n=this.serverSyncTree_.applyUserOverwrite(r,n,s,!0);this.eventQueue_.queueEvents(n),this.server_.put(r.toString(),t.val(!0),function(t,e){var n="ok"===t;n||ia("set at "+r+" failed: "+t);n=o.serverSyncTree_.ackUserWrite(s,!n);o.eventQueue_.raiseEventsForChangedPath(r,n),o.callOnCompleteCallback(i,t,e)});t=this.abortTransactions_(r);this.rerunTransactions_(t),this.eventQueue_.raiseEventsForChangedPath(t,[])},gl.prototype.update=function(i,t,o){var s=this;this.log_("update",{path:i.toString(),value:t});var a,e,n=!0,r=this.generateServerValues(),u={};Ia(t,function(t,e){n=!1,u[t]=Ec(i.child(t),Zu(e),s.serverSyncTree_,r)}),n?(ga("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(o,"ok")):(a=this.getNextWriteId_(),e=this.serverSyncTree_.applyUserMerge(i,u,a),this.eventQueue_.queueEvents(e),this.server_.merge(i.toString(),t,function(t,e){var n="ok"===t;n||ia("update at "+i+" failed: "+t);var r=s.serverSyncTree_.ackUserWrite(a,!n),n=0<r.length?s.rerunTransactions_(i):i;s.eventQueue_.raiseEventsForChangedPath(n,r),s.callOnCompleteCallback(o,t,e)}),Ia(t,function(t){t=s.abortTransactions_(i.child(t));s.rerunTransactions_(t)}),this.eventQueue_.raiseEventsForChangedPath(i,[]))},gl.prototype.runOnDisconnectEvents_=function(){var n=this;this.log_("onDisconnectEvents");var r=this.generateServerValues(),i=new kc;this.onDisconnect_.forEachTree(ka.Empty,function(t,e){e=Ec(t,e,n.serverSyncTree_,r);i.remember(t,e)});var o=[];i.forEachTree(ka.Empty,function(t,e){o=o.concat(n.serverSyncTree_.applyServerOverwrite(t,e));t=n.abortTransactions_(t);n.rerunTransactions_(t)}),this.onDisconnect_=new kc,this.eventQueue_.raiseEventsForChangedPath(ka.Empty,o)},gl.prototype.onDisconnectCancel=function(n,r){var i=this;this.server_.onDisconnectCancel(n.toString(),function(t,e){"ok"===t&&i.onDisconnect_.forget(n),i.callOnCompleteCallback(r,t,e)})},gl.prototype.onDisconnectSet=function(n,t,r){var i=this,o=Zu(t);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(t,e){"ok"===t&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,t,e)})},gl.prototype.onDisconnectSetWithPriority=function(n,t,e,r){var i=this,o=Zu(t,e);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(t,e){"ok"===t&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,t,e)})},gl.prototype.onDisconnectUpdate=function(n,r,i){var o=this;if(es(r))return ga("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(i,"ok");this.server_.onDisconnectMerge(n.toString(),r,function(t,e){"ok"===t&&Ia(r,function(t,e){e=Zu(e);o.onDisconnect_.remember(n.child(t),e)}),o.callOnCompleteCallback(i,t,e)})},gl.prototype.addEventCallbackForQuery=function(t,e){e=(".info"===t.path.getFront()?this.infoSyncTree_:this.serverSyncTree_).addEventRegistration(t,e);this.eventQueue_.raiseEventsAtPath(t.path,e)},gl.prototype.removeEventCallbackForQuery=function(t,e){e=(".info"===t.path.getFront()?this.infoSyncTree_:this.serverSyncTree_).removeEventRegistration(t,e);this.eventQueue_.raiseEventsAtPath(t.path,e)},gl.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(vl)},gl.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(vl)},gl.prototype.stats=function(t){var i;void 0===t&&(t=!1),"undefined"!=typeof console&&(t=t?(this.statsListener_||(this.statsListener_=new Ah(this.stats_)),this.statsListener_.get()):this.stats_.get(),i=Object.keys(t).reduce(function(t,e){return Math.max(e.length,t)},0),Ia(t,function(t,e){for(var n=t,r=t.length;r<i+2;r++)n+=" ";console.log(n+e)}))},gl.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},gl.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),ga.apply(void 0,Io([n],t))},gl.prototype.callOnCompleteCallback=function(n,r,i){n&&Sa(function(){var t,e;"ok"===r?n(null):(e=t=(r||"error").toUpperCase(),i&&(e+=": "+i),(e=new Error(e)).code=t,n(e))})},Object.defineProperty(gl.prototype,"database",{get:function(){return this.__database||(this.__database=new Ul(this))},enumerable:!1,configurable:!0}),gl);function gl(t,e,n,r){var s=this;if(this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ph,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new kc,this.persistentConnection_=null,this.stats_=Ch.getCollection(t),e||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))this.server_=new pl(this.repoInfo_,this.onDataUpdate_.bind(this),r),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var i=n.options.databaseAuthVariableOverride;if(null!=i){if("object"!=typeof i)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Jo(i)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new hl(this.repoInfo_,n.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),r,i),this.server_=this.persistentConnection_}r.addTokenChangeListener(function(t){s.server_.refreshAuthToken(t)}),this.statsReporter_=Ch.getOrCreateReporter(t,function(){return new Oh(s.stats_,s.server_)}),this.transactionsInit_(),this.infoData_=new Eh,this.infoSyncTree_=new _h({startListening:function(t,e,n,r){var i=[],o=s.infoData_.getNode(t.path);return o.isEmpty()||(i=s.infoSyncTree_.applyServerOverwrite(t.path,o),setTimeout(function(){r("ok")},0)),i},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new _h({startListening:function(n,t,e,r){return s.server_.listen(n,e,t,function(t,e){e=r(t,e);s.eventQueue_.raiseEventsForChangedPath(n.path,e)}),[]},stopListening:function(t,e){s.server_.unlisten(t,e)}})}var ml=(bl.prototype.getStartPost=function(){return this.startPost_},bl.prototype.getEndPost=function(){return this.endPost_},bl.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},bl.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new cu(e,n))||(n=zu.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},bl.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=zu.EMPTY_NODE);var r=(r=e.withIndex(this.index_)).updatePriority(zu.EMPTY_NODE),i=this;return e.forEachChild(Nu,function(t,e){i.matches(new cu(t,e))||(r=r.updateImmediateChild(t,zu.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},bl.prototype.updatePriority=function(t,e){return t},bl.prototype.filtersNodes=function(){return!0},bl.prototype.getIndexedFilter=function(){return this.indexedFilter_},bl.prototype.getIndex=function(){return this.index_},bl.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},bl.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},bl);function bl(t){this.indexedFilter_=new Yc(t.getIndex()),this.index_=t.getIndex(),this.startPost_=bl.getStartPost_(t),this.endPost_=bl.getEndPost_(t)}var _l=(wl.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new cu(e,n))||(n=zu.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},wl.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=zu.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=zu.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(zu.EMPTY_NODE);var a,u=void 0,c=void 0,h=void 0,i=void 0;h=this.reverse_?(i=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost(),a=this.index_.getCompare(),function(t,e){return a(e,t)}):(i=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),this.index_.getCompare());for(var o=0,l=!1;i.hasNext();){s=i.getNext();!l&&h(u,s)<=0&&(l=!0),l&&o<this.limit_&&h(s,c)<=0?o++:r=r.updateImmediateChild(s.name,zu.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},wl.prototype.updatePriority=function(t,e){return t},wl.prototype.filtersNodes=function(){return!0},wl.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},wl.prototype.getIndex=function(){return this.index_},wl.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o,s;s=this.reverse_?(o=this.index_.getCompare(),function(t,e){return o(e,t)}):this.index_.getCompare();var a=t;Ao(a.numChildren()===this.limit_,"");var u=new cu(e,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(a.hasChild(e)){for(var l=a.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||a.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:s(f,u);if(h&&!n.isEmpty()&&0<=p)return null!=i&&i.trackChildChange(Qc.childChangedChange(e,n,l)),a.updateImmediateChild(e,n);null!=i&&i.trackChildChange(Qc.childRemovedChange(e,l));l=a.updateImmediateChild(e,zu.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(Qc.childAddedChange(f.name,f.node)),l.updateImmediateChild(f.name,f.node)):l}return!n.isEmpty()&&h&&0<=s(c,u)?(null!=i&&(i.trackChildChange(Qc.childRemovedChange(c.name,c.node)),i.trackChildChange(Qc.childAddedChange(e,n))),a.updateImmediateChild(e,n).updateImmediateChild(c.name,zu.EMPTY_NODE)):t},wl);function wl(t){this.rangedFilter_=new ml(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}var El=(Il.prototype.hasStart=function(){return this.startSet_},Il.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===Il.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},Il.prototype.getIndexStartValue=function(){return Ao(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},Il.prototype.getIndexStartName=function(){return Ao(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ba},Il.prototype.hasEnd=function(){return this.endSet_},Il.prototype.getIndexEndValue=function(){return Ao(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},Il.prototype.getIndexEndName=function(){return Ao(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:_a},Il.prototype.hasLimit=function(){return this.limitSet_},Il.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},Il.prototype.getLimit=function(){return Ao(this.limitSet_,"Only valid if limit has been set"),this.limit_},Il.prototype.getIndex=function(){return this.index_},Il.prototype.copy_=function(){var t=new Il;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},Il.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},Il.prototype.limitToFirst=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=Il.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,e},Il.prototype.limitToLast=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=Il.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,e},Il.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},Il.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},Il.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},Il.prototype.getQueryObject=function(){var t,e=Il.WIRE_PROTOCOL_CONSTANTS_,n={};return this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_&&(n[e.LIMIT]=this.limit_,""===(t=this.viewFrom_)&&(t=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=t),this.index_!==Nu&&(n[e.INDEX]=this.index_.toString()),n},Il.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},Il.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Nu},Il.prototype.getNodeFilter=function(){return this.loadsAllData()?new Yc(this.getIndex()):new(this.hasLimit()?_l:ml)(this)},Il.prototype.toRestQueryStringParameters=function(){var t,e=Il.REST_QUERY_CONSTANTS_,n={};return this.isDefault()||(t=this.index_===Nu?e.PRIORITY_INDEX:this.index_===nc?e.VALUE_INDEX:this.index_===gu?e.KEY_INDEX:(Ao(this.index_ instanceof rc,"Unrecognized index type!"),this.index_.toString()),n[e.ORDER_BY]=Jo(t),this.startSet_&&(n[e.START_AT]=Jo(this.indexStartValue_),this.startNameSet_&&(n[e.START_AT]+=","+Jo(this.indexStartName_))),this.endSet_&&(n[e.END_AT]=Jo(this.indexEndValue_),this.endNameSet_&&(n[e.END_AT]+=","+Jo(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?n[e.LIMIT_TO_FIRST]=this.limit_:n[e.LIMIT_TO_LAST]=this.limit_)),n},Il.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},Il.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},Il.DEFAULT=new Il,Il);function Il(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Nu}var Tl,Sl=(go(Cl,Tl=yc),Cl.prototype.getKey=function(){return cs("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},Cl.prototype.child=function(t){var e,n,r,i;return cs("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof ka||(null===this.path.getFront()?(e="Reference.child",i=!(n=1),r=(r=t)&&r.replace(/^\/*\.info(\/|$)/,"/"),za(e,n,r,i)):za("Reference.child",1,t,!1)),new Cl(this.repo,this.path.child(t))},Cl.prototype.getParent=function(){cs("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new Cl(this.repo,t)},Cl.prototype.getRoot=function(){cs("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},Cl.prototype.databaseProp=function(){return this.repo.database},Cl.prototype.set=function(t,e){cs("Reference.set",1,2,arguments.length),Qa("Reference.set",this.path),Ba("Reference.set",1,t,this.path,!1),ls("Reference.set",2,e,!0);var n=new Do;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},Cl.prototype.update=function(t,e){if(cs("Reference.update",1,2,arguments.length),Qa("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,ia("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Wa("Reference.update",1,t,this.path,!1),ls("Reference.update",2,e,!0);var i=new Do;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},Cl.prototype.setWithPriority=function(t,e,n){if(cs("Reference.setWithPriority",2,3,arguments.length),Qa("Reference.setWithPriority",this.path),Ba("Reference.setWithPriority",1,t,this.path,!1),Ha("Reference.setWithPriority",2,e,!1),ls("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new Do;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},Cl.prototype.remove=function(t){return cs("Reference.remove",0,1,arguments.length),Qa("Reference.remove",this.path),ls("Reference.remove",1,t,!0),this.set(null,t)},Cl.prototype.transaction=function(t,r,e){if(cs("Reference.transaction",1,3,arguments.length),Qa("Reference.transaction",this.path),ls("Reference.transaction",1,t,!1),ls("Reference.transaction",2,r,!0),function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(hs(t,e,r)+"must be a boolean.")}("Reference.transaction",3,e,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===e&&(e=!0);var i=new Do;"function"==typeof r&&i.promise.catch(function(){});return this.repo.startTransaction(this.path,t,function(t,e,n){t?i.reject(t):i.resolve(new ru(e,n)),"function"==typeof r&&r(t,e,n)},e),i.promise},Cl.prototype.setPriority=function(t,e){cs("Reference.setPriority",1,2,arguments.length),Qa("Reference.setPriority",this.path),Ha("Reference.setPriority",1,t,!1),ls("Reference.setPriority",2,e,!0);var n=new Do;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},Cl.prototype.push=function(t,e){cs("Reference.push",0,2,arguments.length),Qa("Reference.push",this.path),Ba("Reference.push",1,t,this.path,!0),ls("Reference.push",2,e,!0);var n=this.repo.serverTime(),r=uu(n),n=this.child(r),i=this.child(r),t=null!=t?n.set(t,e).then(function(){return i}):Promise.resolve(i);return n.then=t.then.bind(t),n.catch=t.then.bind(t,void 0),"function"==typeof e&&t.catch(function(){}),n},Cl.prototype.onDisconnect=function(){return Qa("Reference.onDisconnect",this.path),new eu(this.repo,this.path)},Object.defineProperty(Cl.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(Cl.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(Cl.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(Cl.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),Cl);function Cl(t,e){if(!(t instanceof yl))throw new Error("new Reference() no longer supported - use app.database().");return Tl.call(this,t,e,El.DEFAULT,!1)||this}yc.__referenceConstructor=Sl,fh.__referenceConstructor=Sl;var Nl,Al=function(){this.children={},this.childCount=0,this.value=null},kl=(Ol.prototype.subTree=function(t){for(var e=t instanceof ka?t:new ka(t),n=this,r=e.getFront();null!==r;)n=new Ol(r,n,ts(n.node_.children,r)||new Al),r=(e=e.popFront()).getFront();return n},Ol.prototype.getValue=function(){return this.node_.value},Ol.prototype.setValue=function(t){Ao(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},Ol.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},Ol.prototype.hasChildren=function(){return 0<this.node_.childCount},Ol.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},Ol.prototype.forEachChild=function(n){var r=this;Ia(this.node_.children,function(t,e){n(new Ol(t,r,e))})},Ol.prototype.forEachDescendant=function(e,t,n){t&&!n&&e(this),this.forEachChild(function(t){t.forEachDescendant(e,!0,n)}),t&&n&&e(this)},Ol.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},Ol.prototype.forEachImmediateDescendantWithValue=function(e){this.forEachChild(function(t){null!==t.getValue()?e(t):t.forEachImmediateDescendantWithValue(e)})},Ol.prototype.path=function(){return new ka(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},Ol.prototype.name=function(){return this.name_},Ol.prototype.parent=function(){return this.parent_},Ol.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},Ol.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=Zo(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},Ol);function Ol(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new Al),this.name_=t,this.parent_=e,this.node_=n}(K=Nl=Nl||{})[K.RUN=0]="RUN",K[K.SENT=1]="SENT",K[K.COMPLETED=2]="COMPLETED",K[K.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",K[K.NEEDS_ABORT=4]="NEEDS_ABORT",yl.MAX_TRANSACTION_RETRIES_=25,yl.prototype.transactionsInit_=function(){this.transactionQueueTree_=new kl},yl.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);function i(){}var o=new Sl(this,t);o.on("value",i);var s={path:t,update:e,onComplete:n,status:null,order:pa(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},e=this.getLatestState_(t);s.currentInputSnapshot=e;var a,n=s.update(e.val());void 0===n?(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&(a=new oc(s.currentInputSnapshot,new Sl(this,s.path),Nu),s.onComplete(null,!1,a))):(tu("transaction failed: Data returned ",n,s.path),s.status=Nl.RUN,(a=(r=this.transactionQueueTree_.subTree(t)).getValue()||[]).push(s),r.setValue(a),r=void 0,"object"==typeof n&&null!==n&&Zo(n,".priority")?(r=ts(n,".priority"),Ao(qa(r),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):r=(this.serverSyncTree_.calcCompleteEventCache(t)||zu.EMPTY_NODE).getPriority().val(),a=this.generateServerValues(),r=Zu(n,r),a=Ic(r,e,a),s.currentOutputSnapshotRaw=r,s.currentOutputSnapshotResolved=a,s.currentWriteId=this.getNextWriteId_(),s=this.serverSyncTree_.applyUserOverwrite(t,a,s.currentWriteId,s.applyLocally),this.eventQueue_.raiseEventsForChangedPath(t,s),this.sendReadyTransactions_())},yl.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||zu.EMPTY_NODE},yl.prototype.sendReadyTransactions_=function(t){var e,n=this;void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()?(e=this.buildTransactionQueue_(t),Ao(0<e.length,"Sending zero length transaction queue"),e.every(function(t){return t.status===Nl.RUN})&&this.sendTransactionQueue_(t.path(),e)):t.hasChildren()&&t.forEachChild(function(t){n.sendReadyTransactions_(t)})},yl.prototype.sendTransactionQueue_=function(s,a){for(var u=this,t=a.map(function(t){return t.currentWriteId}),e=this.getLatestState_(s,t),n=e,t=e.hash(),r=0;r<a.length;r++){var i=a[r];Ao(i.status===Nl.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),i.status=Nl.SENT,i.retryCount++;var o=ka.relativePath(s,i.path),n=n.updateChild(o,i.currentOutputSnapshotRaw)}var e=n.val(!0),c=s;this.server_.put(c.toString(),e,function(t){u.log_("transaction put response",{path:c.toString(),status:t});var e=[];if("ok"===t){for(var n,r,i=[],o=0;o<a.length;o++){a[o].status=Nl.COMPLETED,e=e.concat(u.serverSyncTree_.ackUserWrite(a[o].currentWriteId)),a[o].onComplete&&(n=a[o].currentOutputSnapshotResolved,r=new Sl(u,a[o].path),r=new oc(n,r,Nu),i.push(a[o].onComplete.bind(null,null,!0,r))),a[o].unwatcher()}u.pruneCompletedTransactionsBelowNode_(u.transactionQueueTree_.subTree(s)),u.sendReadyTransactions_(),u.eventQueue_.raiseEventsForChangedPath(s,e);for(o=0;o<i.length;o++)Sa(i[o])}else{if("datastale"===t)for(o=0;o<a.length;o++)a[o].status===Nl.SENT_NEEDS_ABORT?a[o].status=Nl.NEEDS_ABORT:a[o].status=Nl.RUN;else{ia("transaction at "+c.toString()+" failed: "+t);for(o=0;o<a.length;o++)a[o].status=Nl.NEEDS_ABORT,a[o].abortReason=t}u.rerunTransactions_(s)}},t)},yl.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),t=e.path(),e=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(e,t),t},yl.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter(function(t){return t.status===Nl.RUN}).map(function(t){return t.currentWriteId}),o=0;o<t.length;o++){var s,a,u,c=t[o],h=ka.relativePath(e,c.path),l=!1,f=void 0;Ao(null!==h,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===Nl.NEEDS_ABORT?(l=!0,f=c.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(c.currentWriteId,!0))):c.status===Nl.RUN&&(r=c.retryCount>=yl.MAX_TRANSACTION_RETRIES_?(l=!0,f="maxretry",r.concat(this.serverSyncTree_.ackUserWrite(c.currentWriteId,!0))):(s=this.getLatestState_(c.path,i),c.currentInputSnapshot=s,void 0!==(u=t[o].update(s.val()))?(tu("transaction failed: Data returned ",u,c.path),a=Zu(u),"object"==typeof u&&null!=u&&Zo(u,".priority")||(a=a.updatePriority(s.getPriority())),h=c.currentWriteId,u=this.generateServerValues(),u=Ic(a,s,u),c.currentOutputSnapshotRaw=a,c.currentOutputSnapshotResolved=u,c.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(h),1),(r=r.concat(this.serverSyncTree_.applyUserOverwrite(c.path,u,c.currentWriteId,c.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(h,!0))):(l=!0,f="nodata",r.concat(this.serverSyncTree_.ackUserWrite(c.currentWriteId,!0))))),this.eventQueue_.raiseEventsForChangedPath(e,r),r=[],l&&(t[o].status=Nl.COMPLETED,c=t[o].unwatcher,setTimeout(c,Math.floor(0)),t[o].onComplete&&("nodata"===f?(l=new Sl(this,t[o].path),c=t[o].currentInputSnapshot,l=new oc(c,l,Nu),n.push(t[o].onComplete.bind(null,null,!1,l))):n.push(t[o].onComplete.bind(null,new Error(f),!1,null))))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(o=0;o<n.length;o++)Sa(n[o]);this.sendReadyTransactions_()}},yl.prototype.getAncestorTransactionNode_=function(t){for(var e=this.transactionQueueTree_,n=t.getFront();null!==n&&null===e.getValue();)e=e.subTree(n),n=(t=t.popFront()).getFront();return e},yl.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},yl.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},yl.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==Nl.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(0<n.length?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},yl.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),t=this.transactionQueueTree_.subTree(t);return t.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(t),t.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},yl.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++){e[o].status===Nl.SENT_NEEDS_ABORT||(e[o].status===Nl.SENT?(Ao(i===o-1,"All SENT items should be at beginning of queue."),e[i=o].status=Nl.SENT_NEEDS_ABORT,e[o].abortReason="set"):(Ao(e[o].status===Nl.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete&&n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))))}-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r);for(o=0;o<n.length;o++)Sa(n[o])}};var Rl=(Pl.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(ga("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},Pl.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):(setTimeout(function(){return e(null)},0),this.authProvider_.get().then(function(t){return t.addAuthTokenListener(e)}))},Pl.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then(function(t){return t.removeAuthTokenListener(e)})},Pl.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ia(t)},Pl);function Pl(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then(function(t){return n.auth_=t})}var Dl=(xl.prototype.getToken=function(t){return Promise.resolve({accessToken:xl.EMULATOR_AUTH_TOKEN})},xl.prototype.addTokenChangeListener=function(t){t(xl.EMULATOR_AUTH_TOKEN)},xl.prototype.removeTokenChangeListener=function(t){},xl.prototype.notifyForInvalidToken=function(){},xl.EMULATOR_AUTH_TOKEN="owner",xl);function xl(){}var Ll,Ml=(Fl.getInstance=function(){return Ll=Ll||new Fl},Fl.prototype.interrupt=function(){var e,t,n,r;try{for(var i=wo(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,wo(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].interrupt()}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},Fl.prototype.resume=function(){var e,t,n,r;try{for(var i=wo(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,wo(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].resume()}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},Fl.prototype.databaseFromApp=function(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||ra("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ga("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=Ua(i,r),a=s.repoInfo,n=void 0;"undefined"!=typeof process&&(n=process.env.FIREBASE_DATABASE_EMULATOR_HOST),n?(o=!0,i="http://"+n+"?ns="+a.namespace,a=(s=Ua(i,r)).repoInfo):o=!s.repoInfo.secure;e=r&&o?new Dl:new Rl(t,e);return Xa("Invalid Firebase Database URL",1,s),s.path.isEmpty()||ra("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(a,t,e).database},Fl.prototype.deleteRepo=function(t){var e=ts(this.repos_,t.app.name);e&&ts(e,t.repoInfo_.toURLString())===t||ra("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},Fl.prototype.createRepo=function(t,e,n){var r=ts(this.repos_,e.name);r||(r={},this.repos_[e.name]=r);var i=ts(r,t.toURLString());return i&&ra("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new yl(t,this.useRestClient_,e,n),r[t.toURLString()]=i},Fl.prototype.forceRestClient=function(t){this.useRestClient_=t},Fl);function Fl(){this.repos_={},this.useRestClient_=!1}var Ul=(Object.defineProperty(jl.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),jl.prototype.ref=function(t){return this.checkDeleted_("ref"),cs("database.ref",0,1,arguments.length),t instanceof Sl?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},jl.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),cs(e,1,1,arguments.length);var n=Ua(t,this.repo_.repoInfo_.nodeAdmin);Xa(e,1,n);t=n.repoInfo;return t.host!==this.repo_.repoInfo_.host&&ra(e+": Host name does not match the current database: (found "+t.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},jl.prototype.checkDeleted_=function(t){null===this.repo_&&ra("Cannot call "+t+" on a deleted database.")},jl.prototype.goOffline=function(){cs("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},jl.prototype.goOnline=function(){cs("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},jl.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},jl);function jl(t){(this.repo_=t)instanceof yl||ra("Don't call new Database() directly - please use firebase.database()."),this.root_=new Sl(t,ka.Empty),this.INTERNAL=new Vl(this)}var Vl=(ql.prototype.delete=function(){return bo(this,void 0,void 0,function(){return _o(this,function(t){return this.database.checkDeleted_("delete"),Ml.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]})})},ql);function ql(t){this.database=t}var Bl=Object.freeze({__proto__:null,forceLongPolling:function(){tl.forceDisallow(),zh.forceAllow()},forceWebSockets:function(){zh.forceDisallow()},isWebSocketsAvailable:function(){return tl.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.version,i=t.customAuthImpl,o=t.namespace,t=void 0!==(t=t.nodeAdmin)&&t;return $h(r),(r=new Es("auth-internal",new Ts("database-standalone"))).setComponent(new bs("auth-internal",function(){return i},"PRIVATE")),{instance:Ml.getInstance().databaseFromApp(e,r,n,t),namespace:o}}}),Dr=hl;hl.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},hl.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Wl,Hl=Object.freeze({__proto__:null,DataConnection:Dr,RealTimeConnection:il,hijackHash:function(i){var o=hl.prototype.put;return hl.prototype.put=function(t,e,n,r){void 0!==r&&(r=i()),o.call(this,t,e,n,r)},function(){hl.prototype.put=o}},ConnectionTarget:Ma,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){Ml.getInstance().forceRestClient(t)}}),Gl=Ul.ServerValue;$h((Wl=Ql).SDK_VERSION),Wl.INTERNAL.registerComponent(new bs("database",function(t,e){var n=t.getProvider("app").getImmediate(),t=t.getProvider("auth-internal");return Ml.getInstance().databaseFromApp(n,t,e)},"PUBLIC").setServiceProps({Reference:Sl,Query:yc,Database:Ul,DataSnapshot:oc,enableLogging:ea,INTERNAL:Bl,ServerValue:Gl,TEST_ACCESS:Hl}).setMultipleInstances(!0)),Wl.registerVersion("@firebase/database","0.6.13");var Kl=function(t,e){return(Kl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function zl(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var M="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Xl={},Yl=M||self;function Jl(){}function $l(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function Zl(t){var e=$l(t);return"array"==e||"object"==e&&"number"==typeof t.length}function tf(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var ef="closure_uid_"+(1e9*Math.random()>>>0),nf=0;function rf(t,e,n){return t.call.apply(t.bind,arguments)}function of(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function sf(t,e,n){return(sf=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?rf:of).apply(null,arguments)}function af(e){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var uf=Date.now;function cf(t,e){function n(){}n.prototype=e.prototype,t.S=e.prototype,t.prototype=new n,t.prototype.constructor=t}function hf(){this.j=this.j,this.i=this.i}hf.prototype.j=!1,hf.prototype.ja=function(){var t;!this.j&&(this.j=!0,this.G(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,ef)&&t[ef]||(t[ef]=++nf))},hf.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var lf=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},ff=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function pf(){return Array.prototype.concat.apply([],arguments)}function df(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function vf(t){return/^[\s\xa0]*$/.test(t)}var yf,gf=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function mf(t,e){return-1!=t.indexOf(e)}function bf(t,e){return t<e?-1:e<t?1:0}t:{var _f=Yl.navigator;if(_f){_f=_f.userAgent;if(_f){yf=_f;break t}}yf=""}function wf(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Ef(t){var e,n={};for(e in t)n[e]=t[e];return n}var If="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Tf(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<If.length;i++)e=If[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function Sf(t){return Sf[" "](t),t}Sf[" "]=Jl;var Cf,Nf=mf(yf,"Opera"),Af=mf(yf,"Trident")||mf(yf,"MSIE"),kf=mf(yf,"Edge"),Of=kf||Af,Rf=mf(yf,"Gecko")&&!(mf(yf.toLowerCase(),"webkit")&&!mf(yf,"Edge"))&&!(mf(yf,"Trident")||mf(yf,"MSIE"))&&!mf(yf,"Edge"),Pf=mf(yf.toLowerCase(),"webkit")&&!mf(yf,"Edge");function Df(){var t=Yl.document;return t?t.documentMode:void 0}t:{var xf="",Lf=(Lf=yf,Rf?/rv:([^\);]+)(\)|;)/.exec(Lf):kf?/Edge\/([\d\.]+)/.exec(Lf):Af?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Lf):Pf?/WebKit\/(\S+)/.exec(Lf):Nf?/(?:Version)[ \/]?(\S+)/.exec(Lf):void 0);if(Lf&&(xf=Lf?Lf[1]:""),Af){Lf=Df();if(null!=Lf&&Lf>parseFloat(xf)){Cf=String(Lf);break t}}Cf=xf}var Mf={};function Ff(a){return t=a,e=function(){for(var t=0,e=gf(String(Cf)).split("."),n=gf(String(a)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=bf(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||bf(0==o[2].length,0==s[2].length)||bf(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t},n=Mf,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t);var t,e,n}var Uf=Yl.document&&Af?Df()||(parseInt(Cf,10)||void 0):void 0,jf=!Af||9<=Number(Uf),Vf=Af&&!Ff("9"),qf=function(){if(!Yl.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Yl.addEventListener("test",Jl,e),Yl.removeEventListener("test",Jl,e)}catch(t){}return t}();function Bf(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Wf(t,e){if(Bf.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Rf){t:{try{Sf(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Hf[t.pointerType]||"",(this.c=t).defaultPrevented&&this.b()}}Bf.prototype.b=function(){this.defaultPrevented=!0},cf(Wf,Bf);var Hf={2:"touch",3:"pen",4:"mouse"};Wf.prototype.b=function(){Wf.S.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Vf)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}};var Gf="closure_listenable_"+(1e6*Math.random()|0),Kf=0;function zf(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Kf,this.Y=this.Z=!1}function Qf(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Xf(t){this.src=t,this.a={},this.b=0}function Yf(t,e){var n,r,i,o=e.type;o in t.a&&(n=t.a[o],(i=0<=(r=lf(n,e)))&&Array.prototype.splice.call(n,r,1),i&&(Qf(e),0==t.a[o].length&&(delete t.a[o],t.b--)))}function Jf(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Xf.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Jf(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new zf(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var $f="closure_lm_"+(1e6*Math.random()|0),Zf={};function tp(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}r=up(r);return e&&e[Gf]?e.wa(n,r,tf(i)?!!i.capture:!!i,o):ep(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)tp(t,e[o],n,r,i);return null}return n=up(n),t&&t[Gf]?t.va(e,n,tf(r)?!!r.capture:!!r,i):ep(t,e,n,!1,r,i)}function ep(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=tf(i)?!!i.capture:!!i;if(s&&!jf)return null;var a,u,c=sp(t);if(c||(t[$f]=c=new Xf(t)),(n=c.add(e,n,r,s,o)).proxy)return n;if(a=op,r=u=jf?function(t){return a.call(u.src,u.listener,t)}:function(t){if(!(t=a.call(u.src,u.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)qf||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(rp(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function np(t){var e,n,r;"number"!=typeof t&&t&&!t.Y&&((e=t.src)&&e[Gf]?Yf(e.c,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(rp(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=sp(e))?(Yf(n,t),0==n.b&&(n.src=null,e[$f]=null)):Qf(t)))}function rp(t){return t in Zf?Zf[t]:Zf[t]="on"+t}function ip(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&np(t),n.call(r,e)}function op(t,e){if(t.Y)return!0;if(jf)return ip(t,new Wf(e,this));if(!e)t:{e=["window","event"];for(var n=Yl,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return ip(t,e=new Wf(e,this))}function sp(t){return(t=t[$f])instanceof Xf?t:null}var ap="__closure_events_fn_"+(1e9*Math.random()>>>0);function up(e){return"function"==$l(e)?e:(e[ap]||(e[ap]=function(t){return e.handleEvent(t)}),e[ap])}function cp(){hf.call(this),this.c=new Xf(this),(this.J=this).C=null}function hp(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s,a,u=e[o];u&&!u.Y&&u.capture==n&&(s=u.listener,a=u.ca||u.src,u.Z&&Yf(t.c,u),i=!1!==s.call(a,r)&&i)}return i&&!r.defaultPrevented}cf(cp,hf),cp.prototype[Gf]=!0,(du=cp.prototype).addEventListener=function(t,e,n,r){tp(this,t,e,n,r)},du.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=tf(i)?!!i.capture:!!i,r=up(r),e&&e[Gf]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=Jf(s=e.a[n],r,i,o))&&(Qf(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):(e=e&&sp(e))&&(n=e.a[n.toString()],e=-1,n&&(e=Jf(n,r,i,o)),(r=-1<e?n[e]:null)&&np(r))}(this,t,e,n,r)},du.dispatchEvent=function(t){var e,n=this.C;if(n)for(e=[];n;n=n.C)e.push(n);n=this.J;var r=t.type||t;if("string"==typeof t?t=new Bf(t,n):t instanceof Bf?t.target=t.target||n:(s=t,Tf(t=new Bf(r,n),s)),s=!0,e)for(var i=e.length-1;0<=i;i--)var o=t.a=e[i],s=hp(o,r,!0,t)&&s;if(s=hp(o=t.a=n,r,!0,t)&&s,s=hp(o,r,!1,t)&&s,e)for(i=0;i<e.length;i++)s=hp(o=t.a=e[i],r,!1,t)&&s;return s},du.G=function(){if(cp.S.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Qf(n[r]);delete e.a[t],e.b--}}this.C=null},du.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},du.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var lp=Yl.JSON.stringify;function fp(){this.b=this.a=null}var pp,dp=(vp.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},new vp(function(){return new yp},function(t){t.reset()},100));function vp(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}function yp(){this.next=this.b=this.a=null}function gp(t,e){var n;pp||(n=Yl.Promise.resolve(void 0),pp=function(){n.then(_p)}),mp||(pp(),mp=!0),bp.add(t,e)}fp.prototype.add=function(t,e){var n=dp.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},yp.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};var mp=!(yp.prototype.reset=function(){this.next=this.b=this.a=null}),bp=new fp;function _p(){for(var t,e;n=e=void 0,n=null,(e=bp).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){!function(t){Yl.setTimeout(function(){throw t},0)}(t)}var n=dp;n.g(t),n.b<n.f&&(n.b++,t.next=n.a,n.a=t)}mp=!1}function wp(t,e){cp.call(this),this.b=t||1,this.a=e||Yl,this.f=sf(this.Ya,this),this.g=uf()}function Ep(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Ip(t,e,n){if("function"==$l(t))n&&(t=sf(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=sf(t.handleEvent,t)}return 2147483647<Number(e)?-1:Yl.setTimeout(t,e||0)}cf(wp,cp),(du=wp.prototype).aa=!1,du.M=null,du.Ya=function(){var t;this.aa&&(0<(t=uf()-this.g)&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),this.dispatchEvent("tick"),this.aa&&(Ep(this),this.start())))},du.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=uf())},du.G=function(){wp.S.G.call(this),Ep(this),delete this.a};var Tp,Sp,Cp,Np=(Kl(Sp=kp,Cp=Tp=hf),Sp.prototype=null===Cp?Object.create(Cp):(Ap.prototype=Cp.prototype,new Ap),kp.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:function t(e){e.a=Ip(function(){e.a=null,e.c&&(e.c=!1,t(e))},e.h);var n=e.b;e.b=null,e.g.apply(null,n)}(this)},kp.prototype.G=function(){Tp.prototype.G.call(this),this.a&&(Yl.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},kp);function Ap(){this.constructor=Sp}function kp(t,e,n){var r=Tp.call(this)||this;return r.g=null!=n?t.bind(n):t,r.h=e,r.b=null,r.c=!1,r.a=null,r}function Op(t){hf.call(this),this.b=t,this.a={}}cf(Op,hf);var Rp=[];function Pp(t,e,n,r){Array.isArray(n)||(n&&(Rp[0]=n.toString()),n=Rp);for(var i=0;i<n.length;i++){var o=tp(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Dp(t){wf(t.a,function(t,e){this.a.hasOwnProperty(e)&&np(t)},t),t.a={}}function xp(){this.a=!0}function Lp(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(r.length<2)){var i=r[1];if(Array.isArray(i)&&!(i.length<1)){r=i[0];if("noop"!=r&&"stop"!=r&&"close"!=r)for(var o=1;o<i.length;o++)i[o]=""}}}return lp(n)}catch(t){return e}}(t,n)+(r?" "+r:"")})}Op.prototype.G=function(){Op.S.G.call(this),Dp(this)},Op.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},xp.prototype.info=function(){};var Mp=null;function Fp(){return Mp=Mp||new cp}function Up(t){Bf.call(this,"serverreachability",t)}function jp(t){var e=Fp();e.dispatchEvent(new Up(e))}function Vp(t){Bf.call(this,"statevent",t)}function qp(t){var e=Fp();e.dispatchEvent(new Vp(e))}function Bp(t){Bf.call(this,"timingevent",t)}function Wp(t,e){if("function"!=$l(t))throw Error("Fn must not be null and must be a function");return Yl.setTimeout(function(){t()},e)}cf(Up,Bf),cf(Vp,Bf),cf(Bp,Bf);K={NO_ERROR:0,Za:1,gb:2,fb:3,bb:4,eb:5,hb:6,Da:7,TIMEOUT:8,kb:9},Dr={ab:"complete",ob:"success",Ea:"error",Da:"abort",mb:"ready",nb:"readystatechange",TIMEOUT:"timeout",ib:"incrementaldata",lb:"progress",cb:"downloadprogress",pb:"uploadprogress"};function Hp(){}function Gp(t){var e;return(e=t.a)||(e=t.a={}),e}function Kp(){}Hp.prototype.a=null;var zp,M={OPEN:"a",$a:"b",Ea:"c",jb:"d"};function Qp(){Bf.call(this,"d")}function Xp(){Bf.call(this,"c")}function Yp(){}function Jp(t,e,n,r){this.g=t,this.c=e,this.f=n,this.T=r||1,this.J=new Op(this),this.P=$p,t=Of?125:void 0,this.R=new wp(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.U=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.W=this.C=this.V=this.I=!1}cf(Qp,Bf),cf(Xp,Bf),cf(Yp,Hp),zp=new Yp;var $p=45e3,Zp={},td={};function ed(t,e,n){t.H=1,t.i=Ed(yd(e)),t.j=n,t.I=!0,nd(t,null)}function nd(t,e){t.u=uf(),id(t),t.l=yd(t.i);var s,a,u,c,h,l,n=t.l,r=t.T;Array.isArray(r)||(r=[String(r)]),Ld(n.b,"t",r),t.D=0,t.a=Av(t.g,t.g.C?e:null),0<t.O&&(t.F=new Np(sf(t.Ca,t,t.a),t.O)),Pp(t.J,t.a,"readystatechange",t.Wa),e=t.B?Ef(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),jp(1),s=t.c,a=t.m,u=t.l,c=t.f,h=t.T,l=t.j,s.info(function(){if(s.a)if(l)for(var t="",e=l.split("&"),n=0;n<e.length;n++){var r,i,o=e[n].split("=");1<o.length&&(r=o[0],o=o[1],t=2<=(i=r.split("_")).length&&"type"==i[1]?t+(r+"=")+o+"&":t+(r+"=redacted&"))}else t=null;else t=l;return"XMLHTTP REQ ("+c+") [attempt "+h+"]: "+a+"\n"+u+"\n"+t})}function rd(t,e,n){for(var r,i,o,s=!0;!t.A&&t.D<n.length;){var a=(a=n,o=i=void 0,i=(r=t).D,-1==(o=a.indexOf("\n",i))?td:(i=Number(a.substring(i,o)),isNaN(i)?Zp:(o+=1)+i>a.length?td:(a=a.substr(o,i),r.D=o+i,a)));if(a==td){4==e&&(t.h=4,qp(14),s=!1),Lp(t.c,t.f,null,"[Incomplete Response]");break}if(a==Zp){t.h=4,qp(15),Lp(t.c,t.f,n,"[Invalid Chunk]"),s=!1;break}Lp(t.c,t.f,a,null),cd(t,a)}4==e&&0==n.length&&(t.h=1,qp(16),s=!1),t.b=t.b&&s,s?0<n.length&&!t.W&&(t.W=!0,(e=t.g).a==t&&e.V&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),_v(e),e.F=!0)):(Lp(t.c,t.f,n,"[Invalid Chunked Response]"),ud(t),ad(t))}function id(t){t.U=uf()+t.P,od(t,t.P)}function od(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Wp(sf(t.Ua,t),e)}function sd(t){t.o&&(Yl.clearTimeout(t.o),t.o=null)}function ad(t){0==t.g.v||t.A||Iv(t.g,t)}function ud(t){sd(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Ep(t.R),Dp(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function cd(t,e){try{var n,r,i,o,s,a=t.g;if(0!=a.v&&(a.a==t||Bd(a.b,t)))if(a.I=t.N,!t.C&&Bd(a.b,t)&&3==a.v){try{var u=a.ka.a.parse(e)}catch(t){u=null}if(Array.isArray(u)&&3==u.length){var c=u;if(0==c[0]){t:if(!a.j){if(a.a){if(!(a.a.u+3e3<t.u))break t;Ev(a),lv(a)}bv(a),qp(18)}}else a.oa=c[1],0<a.oa-a.P&&c[2]<37500&&a.H&&0==a.o&&!a.m&&(a.m=Wp(sf(a.Ra,a),6e3));if(qd(a.b)<=1&&a.ea){try{a.ea()}catch(t){}a.ea=void 0}}else Sv(a,11)}else if(!t.C&&a.a!=t||Ev(a),!vf(e))for(e=u=a.ka.a.parse(e),u=0;u<e.length;u++){c=e[u],a.P=c[0],c=c[1],2==a.v?"c"==c[0]?(a.J=c[1],a.ga=c[2],null!=(r=c[3])&&(a.ha=r,a.c.info("VER="+a.ha)),null!=(o=c[4])&&(a.pa=o,a.c.info("SVER="+a.pa)),null!=(r=c[5])&&"number"==typeof r&&0<r&&(n=1.5*r,a.D=n,a.c.info("backChannelRequestTimeoutMs_="+n)),n=a,(o=t.a)&&(!(r=o.a?o.a.getResponseHeader("X-Client-Wire-Protocol"):null)||!(i=n.b).a&&(mf(r,"spdy")||mf(r,"quic")||mf(r,"h2"))&&(i.f=i.g,i.a=new Set,i.b&&(Wd(i,i.b),i.b=null)),!n.A||(s=o.a?o.a.getResponseHeader("X-HTTP-Session-Id"):null)&&(n.na=s,wd(n.B,n.A,s))),a.v=3,a.f&&a.f.ta(),a.V&&(a.N=uf()-t.u,a.c.info("Handshake RTT: "+a.N+"ms")),i=t,(n=a).la=Nv(n,n.C?n.ga:null,n.fa),i.C?(Hd(n.b,i),o=i,(s=n.D)&&o.setTimeout(s),o.o&&(sd(o),id(o)),n.a=i):mv(n),0<a.g.length&&dv(a)):"stop"!=c[0]&&"close"!=c[0]||Sv(a,7):3==a.v&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Sv(a,7):hv(a):"noop"!=c[0]&&a.f&&a.f.sa(c),a.o=0)}jp(4)}catch(t){}}function hd(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Zl(t)||"string"==typeof t)ff(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Zl(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Zl(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function ld(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof ld)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function fd(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];pd(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){for(var i={},n=e=0;e<t.a.length;)pd(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function pd(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(du=Jp.prototype).setTimeout=function(t){this.P=t},du.Wa=function(t){t=t.target;var e=this.F;e&&3==sv(t)?e.f():this.Ca(t)},du.Ca=function(t){try{if(t==this.a)t:{var e=sv(this.a),n=this.a.ua(),r=this.a.X();if(!(e<3||3==e&&!Of&&!this.a.$())){this.A||4!=e||7==n||jp(8==n||r<=0?3:2),sd(this);var i=this.a.X();this.N=i;n=this.a.$();if(this.b=200==i,r=this.c,a=this.m,u=this.l,c=this.f,h=this.T,l=e,f=i,r.info(function(){return"XMLHTTP RESP ("+c+") [ attempt "+h+"]: "+a+"\n"+u+"\n"+l+" "+f}),this.b){if(this.V&&!this.C){e:{if(this.a){var o=this.a;if((o=o.a?o.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!vf(o)){var s=o;break e}}s=null}if(!s){this.b=!1,this.h=3,qp(12),ud(this),ad(this);break t}Lp(this.c,this.f,s,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,cd(this,s)}this.I?(rd(this,e,n),Of&&this.b&&3==e&&(Pp(this.J,this.R,"tick",this.Va),this.R.start())):(Lp(this.c,this.f,n,null),cd(this,n)),4==e&&ud(this),this.b&&!this.A&&(4==e?Iv(this.g,this):(this.b=!1,id(this)))}else 400==i&&0<n.indexOf("Unknown SID")?(this.h=3,qp(12)):(this.h=0,qp(13)),ud(this),ad(this)}}}catch(t){}var a,u,c,h,l,f},du.Va=function(){var t,e;this.a&&(t=sv(this.a),e=this.a.$(),this.D<e.length&&(sd(this),rd(this,t,e),this.b&&4!=t&&id(this)))},du.cancel=function(){this.A=!0,ud(this)},du.Ua=function(){this.o=null;var t,e,n=uf();0<=n-this.U?(t=this.c,e=this.l,t.info(function(){return"TIMEOUT: "+e}),2!=this.H&&(jp(3),qp(17)),ud(this),this.h=2,ad(this)):od(this,this.U-n)},(du=ld.prototype).K=function(){fd(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},du.L=function(){return fd(this),this.a.concat()},du.get=function(t,e){return pd(this.b,t)?this.b[t]:e},du.set=function(t,e){pd(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},du.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var dd=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function vd(t,e){var n;this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof vd?(this.a=void 0!==e?e:t.a,gd(this,t.f),this.j=t.j,md(this,t.c),bd(this,t.h),this.g=t.g,e=t.b,(n=new Rd).c=e.c,e.a&&(n.a=new ld(e.a),n.b=e.b),_d(this,n),this.i=t.i):t&&(n=String(t).match(dd))?(this.a=!!e,gd(this,n[1]||"",!0),this.j=Id(n[2]||""),md(this,n[3]||"",!0),bd(this,n[4]),this.g=Id(n[5]||"",!0),_d(this,n[6]||"",!0),this.i=Id(n[7]||"")):(this.a=!!e,this.b=new Rd(null,this.a))}function yd(t){return new vd(t)}function gd(t,e,n){t.f=n?Id(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function md(t,e,n){t.c=n?Id(e,!0):e}function bd(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.h=e}else t.h=null}function _d(t,e,n){var r,i;e instanceof Rd?(t.b=e,r=t.b,(i=t.a)&&!r.f&&(Pd(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Dd(this,e),Ld(this,n,t))},r)),r.f=i):(n||(e=Td(e,kd)),t.b=new Rd(e,t.a))}function wd(t,e,n){t.b.set(e,n)}function Ed(t){return wd(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^uf()).toString(36)),t}function Id(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Td(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Sd),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Sd(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}vd.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Td(e,Cd,!0),":");var n=this.c;return!n&&"file"!=e||(t.push("//"),(e=this.j)&&t.push(Td(e,Cd,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Td(n,"/"==n.charAt(0)?Ad:Nd,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Td(n,Od)),t.join("")};var Cd=/[#\/\?@]/g,Nd=/[#\?:]/g,Ad=/[#\?]/g,kd=/[#\?@]/g,Od=/#/g;function Rd(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Pd(n){n.a||(n.a=new ld,n.b=0,n.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r,i=t[n].indexOf("="),o=null;0<=i?(r=t[n].substring(0,i),o=t[n].substring(i+1)):r=t[n],e(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function Dd(t,e){Pd(t),e=Md(t,e),pd(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,pd((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&fd(t)))}function xd(t,e){return Pd(t),e=Md(t,e),pd(t.a.b,e)}function Ld(t,e,n){Dd(t,e),0<n.length&&(t.c=null,t.a.set(Md(t,e),df(n)),t.b+=n.length)}function Md(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Fd(t,e){this.b=t,this.a=e}function Ud(t){this.g=t||jd,t=Yl.PerformanceNavigationTiming?0<(t=Yl.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Yl.ia&&Yl.ia.ya&&Yl.ia.ya()&&Yl.ia.ya().qb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(du=Rd.prototype).add=function(t,e){Pd(this),this.c=null,t=Md(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},du.forEach=function(n,r){Pd(this),this.a.forEach(function(t,e){ff(t,function(t){n.call(r,t,e,this)},this)},this)},du.L=function(){Pd(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},du.K=function(t){Pd(this);var e=[];if("string"==typeof t)xd(this,t)&&(e=pf(e,this.a.get(Md(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=pf(e,t[n])}return e},du.set=function(t,e){return Pd(this),this.c=null,xd(this,t=Md(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},du.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},du.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),r=this.K(r),o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}return this.c=t.join("&")};var jd=10;function Vd(t){return t.b||t.a&&t.a.size>=t.f}function qd(t){return t.b?1:t.a?t.a.size:0}function Bd(t,e){return t.b?t.b==e:t.a&&t.a.has(e)}function Wd(t,e){t.a?t.a.add(e):t.b=e}function Hd(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Gd(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null==t.a||0===t.a.size)return df(t.c);var r=t.c;try{for(var i=zl(t.a.values()),o=i.next();!o.done;o=i.next())var s=o.value,r=r.concat(s.s)}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Kd(){}function zd(){this.a=new Kd}function Qd(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}Ud.prototype.cancel=function(){var e,t;if(this.c=Gd(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=zl(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.a.clear()}},Kd.prototype.stringify=function(t){return Yl.JSON.stringify(t,void 0)},Kd.prototype.parse=function(t){return Yl.JSON.parse(t,void 0)};var Xd=Yl.JSON.parse;function Yd(t){cp.call(this),this.headers=new ld,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Jd,this.D=this.F=!1}cf(Yd,cp);var Jd="",$d=/^https?$/i,Zd=["POST","PUT"];function tv(t){return"content-type"==t.toLowerCase()}function ev(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,nv(t),iv(t)}function nv(t){t.u||(t.u=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function rv(t){if(t.b&&void 0!==Xl&&(!t.s[1]||4!=sv(t)||2!=t.X()))if(t.l&&4==sv(t))Ip(t.za,0,t);else if(t.dispatchEvent("readystatechange"),4==sv(t)){t.b=!1;try{var e,n,r,i,o=t.X();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break t;default:s=!1}if((e=s)||((n=0===o)&&(!(i=String(t.B).match(dd)[1]||null)&&Yl.self&&Yl.self.location&&(i=(r=Yl.self.location.protocol).substr(0,r.length-1)),n=!$d.test(i?i.toLowerCase():"")),e=n),e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var a=2<sv(t)?t.a.statusText:""}catch(t){a=""}t.f=a+" ["+t.X()+"]",nv(t)}}finally{iv(t)}}}function iv(t,e){if(t.a){ov(t);var n=t.a,r=t.s[0]?Jl:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){}}}function ov(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Yl.clearTimeout(t.m),t.m=null)}function sv(t){return t.a?t.a.readyState:0}function av(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}var i;r||(i="",wf(n,function(t,e){i+=e,i+=":",i+=t,i+="\r\n"}),n=i,"string"==typeof t?null!=n&&encodeURIComponent(String(n)):wd(t,e,n))}function uv(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function cv(t){this.pa=0,this.g=[],this.c=new xp,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.W=this.i=this.O=this.l=null,this.La=this.R=0,this.Ia=uv("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.T=!0,this.I=this.oa=this.P=-1,this.U=this.o=this.u=0,this.Fa=uv("baseRetryDelayMs",5e3,t),this.Ma=uv("retryDelaySeedMs",1e4,t),this.Ja=uv("forwardChannelMaxRetries",2,t),this.ma=uv("forwardChannelRequestTimeoutMs",2e4,t),this.Ka=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Ud(t&&t.concurrentRequestLimit),this.ka=new zd,this.da=t&&t.fastHandshake||!1,this.Ga=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.T=!1),this.V=!this.da&&this.T&&t&&t.c||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null}function hv(t){var e,n;fv(t),3==t.v&&(e=t.R++,wd(n=yd(t.B),"SID",t.J),wd(n,"RID",e),wd(n,"TYPE","terminate"),yv(t,n),(e=new Jp(t,t.c,e,void 0)).H=2,e.i=Ed(yd(n)),n=!1,Yl.navigator&&Yl.navigator.sendBeacon&&(n=Yl.navigator.sendBeacon(e.i.toString(),"")),!n&&Yl.Image&&((new Image).src=e.i,n=!0),n||(e.a=Av(e.g,null),e.a.ba(e.i)),e.u=uf(),id(e)),Cv(t)}function lv(t){t.a&&(_v(t),t.a.cancel(),t.a=null)}function fv(t){lv(t),t.j&&(Yl.clearTimeout(t.j),t.j=null),Ev(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Yl.clearTimeout(t.h),t.h=null)}function pv(t,e){t.g.push(new Fd(t.La++,e)),3==t.v&&dv(t)}function dv(t){Vd(t.b)||t.h||(t.h=!0,gp(t.Ba,t),t.u=0)}function vv(t,e){var n=e?e.f:t.R++,r=yd(t.B);wd(r,"SID",t.J),wd(r,"RID",n),wd(r,"AID",t.P),yv(t,r),t.i&&t.l&&av(r,t.i,t.l),n=new Jp(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=gv(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Wd(t.b,n),ed(n,r,e)}function yv(t,n){t.f&&hd({},function(t,e){wd(n,e,t)})}function gv(t,e,n){n=Math.min(t.g.length,n);var r=t.f?sf(t.f.Ha,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if((c-=o)<0)o=Math.max(0,i[u].b-100),a=!1;else try{!function(t,r,e){var i=e||"";try{hd(t,function(t,e){var n=t;tf(t)&&(n=lp(t)),r.push(i+e+"="+encodeURIComponent(n))})}catch(t){throw r.push(i+"type="+encodeURIComponent("_badmap")),t}}(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function mv(t){t.a||t.j||(t.U=1,gp(t.Aa,t),t.o=0)}function bv(t){return!(t.a||t.j||3<=t.o)&&(t.U++,t.j=Wp(sf(t.Aa,t),Tv(t,t.o)),t.o++,1)}function _v(t){null!=t.s&&(Yl.clearTimeout(t.s),t.s=null)}function wv(t){t.a=new Jp(t,t.c,"rpc",t.U),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=yd(t.la);wd(e,"RID","rpc"),wd(e,"SID",t.J),wd(e,"CI",t.H?"0":"1"),wd(e,"AID",t.P),yv(t,e),wd(e,"TYPE","xmlhttp"),t.i&&t.l&&av(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Ed(yd(e)),n.j=null,n.I=!0,nd(n,t)}function Ev(t){null!=t.m&&(Yl.clearTimeout(t.m),t.m=null)}function Iv(t,e){var n,r=null;if(t.a==e){Ev(t),_v(t),t.a=null;var i=2}else{if(!Bd(t.b,e))return;r=e.s,Hd(t.b,e),i=1}if(t.I=e.N,0!=t.v)if(e.b){1==i?(r=e.j?e.j.length:0,e=uf()-e.u,n=t.u,(i=Fp()).dispatchEvent(new Bp(i)),dv(t)):mv(t)}else if(3==(n=e.h)||0==n&&0<t.I||!(1==i&&function(t,e){if(!(qd(t.b)>=t.b.f-(t.h?1:0))){if(t.h)return t.g=e.s.concat(t.g),1;if(!(1==t.v||2==t.v||t.u>=(t.Ia?0:t.Ja)))return t.h=Wp(sf(t.Ba,t,e),Tv(t,t.u)),t.u++,1}}(t,e)||2==i&&bv(t)))switch(r&&0<r.length&&(e=t.b,e.c=e.c.concat(r)),n){case 1:Sv(t,5);break;case 4:Sv(t,10);break;case 3:Sv(t,6);break;default:Sv(t,2)}}function Tv(t,e){var n=t.Fa+Math.floor(Math.random()*t.Ma);return t.f||(n*=2),n*e}function Sv(t,e){var n,r,i,o;t.c.info("Error code "+e),2==e?(r=null,t.f&&(r=null),o=sf(t.Xa,t),r||(r=new vd("//www.google.com/images/cleardot.gif"),Yl.location&&"http"==Yl.location.protocol||gd(r,"https"),Ed(r)),n=r.toString(),r=o,o=new xp,Yl.Image?((i=new Image).onload=af(Qd,o,i,"TestLoadImage: loaded",!0,r),i.onerror=af(Qd,o,i,"TestLoadImage: error",!1,r),i.onabort=af(Qd,o,i,"TestLoadImage: abort",!1,r),i.ontimeout=af(Qd,o,i,"TestLoadImage: timeout",!1,r),Yl.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n):r(!1)):qp(2),t.v=0,t.f&&t.f.ra(e),Cv(t),fv(t)}function Cv(t){t.v=0,t.I=-1,t.f&&(0==Gd(t.b).length&&0==t.g.length||(t.b.c.length=0,df(t.g),t.g.length=0),t.f.qa())}function Nv(t,e,n){var r,i,o,s,a,u=(s=n)instanceof vd?yd(s):new vd(s,void 0);return""!=u.c?(e&&md(u,e+"."+u.c),bd(u,u.h)):(a=Yl.location,r=a.protocol,i=e?e+"."+a.hostname:a.hostname,o=+a.port,s=n,a=new vd(null,void 0),r&&gd(a,r),i&&md(a,i),o&&bd(a,o),s&&(a.g=s),u=a),t.W&&wf(t.W,function(t,e){wd(u,e,t)}),e=t.A,n=t.na,e&&n&&wd(u,e,n),wd(u,"VER",t.ha),yv(t,u),u}function Av(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Yd(t.Ka)).F=t.C,e}function kv(){}function Ov(){if(Af&&!(10<=Number(Uf)))throw Error("Environmental error: no available transport.")}function Rv(t,e){cp.call(this),this.a=new cv(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!vf(t)&&(this.a.i=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!vf(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new xv(this)}function Pv(t){Qp.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Dv(){Xp.call(this),this.status=1}function xv(t){this.a=t}(du=Yd.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?Gp(this.H):Gp(zp),this.a.onreadystatechange=sf(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void ev(this,t)}t=n||"";var i,o=new ld(this.headers);r&&hd(r,function(t,e){o.set(e,t)}),r=function(t){t:{for(var e=tv,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(o.L()),n=Yl.FormData&&t instanceof Yl.FormData,0<=lf(Zd,e)&&!r&&!n&&o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{ov(this),0<this.o&&((this.D=(i=this.a,Af&&Ff(9)&&"number"==typeof i.timeout&&void 0!==i.ontimeout))?(this.a.timeout=this.o,this.a.ontimeout=sf(this.xa,this)):this.m=Ip(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){ev(this,t)}},du.xa=function(){void 0!==Xl&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},du.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),iv(this))},du.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),iv(this,!0)),Yd.S.G.call(this)},du.za=function(){this.j||(this.A||this.l||this.g?rv(this):this.Ta())},du.Ta=function(){rv(this)},du.X=function(){try{return 2<sv(this)?this.a.status:-1}catch(t){return-1}},du.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},du.Na=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Xd(e)}},du.ua=function(){return this.h},du.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(du=cv.prototype).ha=8,du.v=1,du.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Jp(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Tf(r=Ef(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if("__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o=o.length:o=void 0,void 0===o)break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=gv(this,n,e),wd(i=yd(this.B),"RID",t),wd(i,"CVER",22),this.A&&wd(i,"X-HTTP-Session-Id",this.A),yv(this,i),this.i&&r&&av(i,this.i,r),Wd(this.b,n),this.Ga&&wd(i,"TYPE","init"),this.da?(wd(i,"$req",e),wd(i,"SID","null"),n.V=!0,ed(n,i,null)):ed(n,i,e),this.v=2}}else 3==this.v&&(t?vv(this,t):0==this.g.length||Vd(this.b)||vv(this))},du.Aa=function(){var t;this.j=null,wv(this),this.V&&!(this.F||null==this.a||this.N<=0)&&(t=2*this.N,this.c.info("BP detection timer enabled: "+t),this.s=Wp(sf(this.Sa,this),t))},du.Sa=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,lv(this),wv(this))},du.Ra=function(){null!=this.m&&(this.m=null,lv(this),bv(this),qp(19))},du.Xa=function(t){t?(this.c.info("Successfully pinged google.com"),qp(2)):(this.c.info("Failed to ping google.com"),qp(1))},(du=kv.prototype).ta=function(){},du.sa=function(){},du.ra=function(){},du.qa=function(){},du.Ha=function(){},Ov.prototype.a=function(t,e){return new Rv(t,e)},cf(Rv,cp),(du=Rv.prototype).addEventListener=function(t,e,n,r){Rv.S.addEventListener.call(this,t,e,n,r)},du.removeEventListener=function(t,e,n,r){Rv.S.removeEventListener.call(this,t,e,n,r)},du.Oa=function(){this.a.f=this.f,this.h&&(this.a.C=!0);var t=this.a,e=this.l,n=this.b||void 0;qp(0),t.fa=e,t.W=n||{},t.H=t.T,t.B=Nv(t,null,t.fa),dv(t)},du.close=function(){hv(this.a)},du.Pa=function(t){var e;"string"==typeof t?((e={}).__data__=t,pv(this.a,e)):this.g?((e={}).__data__=lp(t),pv(this.a,e)):pv(this.a,t)},du.G=function(){this.a.f=null,delete this.f,hv(this.a),delete this.a,Rv.S.G.call(this)},cf(Pv,Qp),cf(Dv,Xp),cf(xv,kv),xv.prototype.ta=function(){this.a.dispatchEvent("a")},xv.prototype.sa=function(t){this.a.dispatchEvent(new Pv(t))},xv.prototype.ra=function(t){this.a.dispatchEvent(new Dv)},xv.prototype.qa=function(){this.a.dispatchEvent("b")},Ov.prototype.createWebChannel=Ov.prototype.a,Rv.prototype.send=Rv.prototype.Pa,Rv.prototype.open=Rv.prototype.Oa,K.NO_ERROR=0,K.TIMEOUT=8,K.HTTP_ERROR=6,Dr.COMPLETE="complete",(Kp.EventType=M).OPEN="a",M.CLOSE="b",M.ERROR="c",M.MESSAGE="d",cp.prototype.listen=cp.prototype.va,Yd.prototype.listenOnce=Yd.prototype.wa,Yd.prototype.getLastError=Yd.prototype.Qa,Yd.prototype.getLastErrorCode=Yd.prototype.ua,Yd.prototype.getStatus=Yd.prototype.X,Yd.prototype.getResponseJson=Yd.prototype.Na,Yd.prototype.getResponseText=Yd.prototype.$,Yd.prototype.send=Yd.prototype.ba;var Lv,Mv=K,Fv=Dr,Uv=Kp,jv=Yd,Vv={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},qv=(go(Wv,Lv=Error),Wv),Bv=new Ds("@firebase/firestore");function Wv(t,e){var n=this;return(n=Lv.call(this,e)||this).code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function Hv(){return Bv.logLevel}function Gv(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Bv.logLevel<=Ns.DEBUG&&(e=n.map(Qv),Bv.debug.apply(Bv,To(["Firestore (7.24.0): "+t],e)))}function Kv(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Bv.logLevel<=Ns.ERROR&&(e=n.map(Qv),Bv.error.apply(Bv,To(["Firestore (7.24.0): "+t],e)))}function zv(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Bv.logLevel<=Ns.WARN&&(e=n.map(Qv),Bv.warn.apply(Bv,To(["Firestore (7.24.0): "+t],e)))}function Qv(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function Xv(t){void 0===t&&(t="Unexpected state");t="FIRESTORE (7.24.0) INTERNAL ASSERTION FAILED: "+t;throw Kv(t),new Error(t)}function Yv(t){t||Xv()}function Jv(t){var e,n=0;for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n++;return n}function $v(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Zv(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var ty,ey,M=(Object.defineProperty(cy.prototype,"length",{get:function(){return this.t},enumerable:!1,configurable:!0}),cy.prototype.isEqual=function(t){return 0===cy.i(this,t)},cy.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof cy?t.forEach(function(t){e.push(t)}):e.push(t),this.o(e)},cy.prototype.limit=function(){return this.offset+this.length},cy.prototype.u=function(t){return t=void 0===t?1:t,this.o(this.segments,this.offset+t,this.length-t)},cy.prototype.h=function(){return this.o(this.segments,this.offset,this.length-1)},cy.prototype.l=function(){return this.segments[this.offset]},cy.prototype._=function(){return this.get(this.length-1)},cy.prototype.get=function(t){return this.segments[this.offset+t]},cy.prototype.m=function(){return 0===this.length},cy.prototype.T=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},cy.prototype.I=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},cy.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},cy.prototype.A=function(){return this.segments.slice(this.offset,this.limit())},cy.i=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(o<i)return 1}return t.length<e.length?-1:t.length>e.length?1:0},cy),ny=(go(uy,ey=M),uy.prototype.o=function(t,e,n){return new uy(t,e,n)},uy.prototype.R=function(){return this.A().join("/")},uy.prototype.toString=function(){return this.R()},uy.g=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r];if(0<=o.indexOf("//"))throw new qv(Vv.INVALID_ARGUMENT,"Invalid segment ("+o+"). Paths must not contain // in them.");n.push.apply(n,o.split("/").filter(function(t){return 0<t.length}))}return new uy(n)},uy.P=function(){return new uy([])},uy),ry=/^[_a-zA-Z][_a-zA-Z0-9]*$/,iy=(go(ay,ty=M),ay.prototype.o=function(t,e,n){return new ay(t,e,n)},ay.V=function(t){return ry.test(t)},ay.prototype.R=function(){return this.A().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),ay.V(t)||(t="`"+t+"`"),t}).join(".")},ay.prototype.toString=function(){return this.R()},ay.prototype.p=function(){return 1===this.length&&"__name__"===this.get(0)},ay.v=function(){return new ay(["__name__"])},ay.S=function(t){for(var e=[],n="",r=0,i=function(){if(0===n.length)throw new qv(Vv.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;r<t.length;){var s=t[r];if("\\"===s){if(r+1===t.length)throw new qv(Vv.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[r+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new qv(Vv.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=a,r+=2}else"`"===s?o=!o:"."!==s||o?n+=s:i(),r++}if(i(),o)throw new qv(Vv.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ay(e)},ay.P=function(){return new ay([])},ay),oy=(sy.D=function(t){return new sy(ny.g(t))},sy.C=function(t){return new sy(ny.g(t).u(5))},sy.prototype.N=function(t){return 2<=this.path.length&&this.path.get(this.path.length-2)===t},sy.prototype.isEqual=function(t){return null!==t&&0===ny.i(this.path,t.path)},sy.prototype.toString=function(){return this.path.toString()},sy.i=function(t,e){return ny.i(t.path,e.path)},sy.F=function(t){return t.length%2==0},sy.$=function(t){return new sy(new ny(t.slice()))},sy);function sy(t){this.path=t}function ay(){return null!==ty&&ty.apply(this,arguments)||this}function uy(){return null!==ey&&ey.apply(this,arguments)||this}function cy(t,e,n){void 0===e?e=0:e>t.length&&Xv(),void 0===n?n=t.length-e:n>t.length-e&&Xv(),this.segments=t,this.offset=e,this.t=n}function hy(t,e){if(0!==e.length)throw new qv(Vv.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+Ay(e.length,"argument")+".")}function ly(t,e,n){if(e.length!==n)throw new qv(Vv.INVALID_ARGUMENT,"Function "+t+"() requires "+Ay(n,"argument")+", but was called with "+Ay(e.length,"argument")+".")}function fy(t,e,n){if(e.length<n)throw new qv(Vv.INVALID_ARGUMENT,"Function "+t+"() requires at least "+Ay(n,"argument")+", but was called with "+Ay(e.length,"argument")+".")}function py(t,e,n,r){if(e.length<n||e.length>r)throw new qv(Vv.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+Ay(e.length,"argument")+".")}function dy(t,e,n,r){_y(t,e,Ny(n)+" argument",r)}function vy(t,e,n,r){void 0!==r&&dy(t,e,n,r)}function yy(t,e,n,r){_y(t,e,n+" option",r)}function gy(t,e,n,r){void 0!==r&&yy(t,e,n,r)}function my(t,e,n,r,u){void 0!==r&&function(t,e,n){for(var r=[],i=0,o=u;i<o.length;i++){var s=o[i];if(s===n)return;r.push(Ey(s))}var a=Ey(n);throw new qv(Vv.INVALID_ARGUMENT,"Invalid value "+a+" provided to function "+t+'() for option "'+e+'". Acceptable values: '+r.join(", "))}(t,n,r)}function by(t,e,n,r){if(!e.some(function(t){return t===r}))throw new qv(Vv.INVALID_ARGUMENT,"Invalid value "+Ey(r)+" provided to function "+t+"() for its "+Ny(n)+" argument. Acceptable values: "+e.join(", "));return r}function _y(t,e,n,r){if(!("object"===e?wy(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){r=Ey(r);throw new qv(Vv.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+r)}}function wy(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function Ey(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return 20<e.length&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"!=typeof e)return"function"==typeof e?"a function":Xv();if(e instanceof Array)return"an array";var t=function(){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&1<t.length)return t[1]}return null}();return t?"a custom "+t+" object":"an object"}function Iy(t,e,n){if(void 0===n)throw new qv(Vv.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+Ny(e)+" argument, but it was undefined.")}function Ty(n,t,r){$v(t,function(t,e){if(r.indexOf(t)<0)throw new qv(Vv.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+n+"(). Available options: "+r.join(", "))})}function Sy(t,e,n,r){r=Ey(r);return new qv(Vv.INVALID_ARGUMENT,"Function "+t+"() requires its "+Ny(n)+" argument to be a "+e+", but it was: "+r)}function Cy(t,e,n){if(n<=0)throw new qv(Vv.INVALID_ARGUMENT,"Function "+t+"() requires its "+Ny(e)+" argument to be a positive number, but it was: "+n+".")}function Ny(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function Ay(t,e){return t+" "+e+(1===t?"":"s")}var ky=(Oy.k=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=function(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},Oy);function Oy(){}function Ry(t,e){return t<e?-1:e<t?1:0}function Py(t,n,r){return t.length===n.length&&t.every(function(t,e){return r(t,n[e])})}function Dy(t){return t+"\0"}var xy=(Ly.fromBase64String=function(t){return new Ly(atob(t))},Ly.fromUint8Array=function(t){return new Ly(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t))},Ly.prototype.toBase64=function(){return t=this.M,btoa(t);var t},Ly.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.M)},Ly.prototype.O=function(){return 2*this.M.length},Ly.prototype.L=function(t){return Ry(this.M,t.M)},Ly.prototype.isEqual=function(t){return this.M===t.M},Ly);function Ly(t){this.M=t}xy.B=new xy("");var My=(Fy.fromBase64String=function(t){try{return new Fy(xy.fromBase64String(t))}catch(t){throw new qv(Vv.INVALID_ARGUMENT,"Failed to construct Bytes from Base64 string: "+t)}},Fy.fromUint8Array=function(t){return new Fy(xy.fromUint8Array(t))},Fy.prototype.toBase64=function(){return this.q.toBase64()},Fy.prototype.toUint8Array=function(){return this.q.toUint8Array()},Fy.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},Fy.prototype.isEqual=function(t){return this.q.isEqual(t.q)},Fy);function Fy(t){this.q=t}function Uy(){if("undefined"==typeof Uint8Array)throw new qv(Vv.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function jy(){if("undefined"==typeof atob)throw new qv(Vv.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}function Vy(t,e,n,r,i,o){this.U=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.W=o}var qy,By=(go(Jy,qy=My),Jy.fromBase64String=function(t){ly("Blob.fromBase64String",arguments,1),dy("Blob.fromBase64String","string",1,t),jy();try{return new Jy(xy.fromBase64String(t))}catch(t){throw new qv(Vv.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},Jy.fromUint8Array=function(t){if(ly("Blob.fromUint8Array",arguments,1),Uy(),!(t instanceof Uint8Array))throw Sy("Blob.fromUint8Array","Uint8Array",1,t);return new Jy(xy.fromUint8Array(t))},Jy.prototype.toBase64=function(){return ly("Blob.toBase64",arguments,0),jy(),qy.prototype.toBase64.call(this)},Jy.prototype.toUint8Array=function(){return ly("Blob.toUint8Array",arguments,0),Uy(),qy.prototype.toUint8Array.call(this)},Jy.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},Jy),Wy=(Object.defineProperty(Yy.prototype,"j",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),Yy.prototype.isEqual=function(t){return t instanceof Yy&&t.projectId===this.projectId&&t.database===this.database},Yy.prototype.L=function(t){return Ry(this.projectId,t.projectId)||Ry(this.database,t.database)},Yy),Hy=(Xy.prototype.get=function(t){var e=this.K(t),e=this.H[e];if(void 0!==e)for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],i=i[1];if(this.G(o,t))return i}},Xy.prototype.has=function(t){return void 0!==this.get(t)},Xy.prototype.set=function(t,e){var n=this.K(t),r=this.H[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.G(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.H[n]=[[t,e]]},Xy.prototype.delete=function(t){var e=this.K(t),n=this.H[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.G(n[r][0],t))return 1===n.length?delete this.H[e]:n.splice(r,1),!0;return!1},Xy.prototype.forEach=function(s){$v(this.H,function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],i=i[1];s(o,i)}})},Xy.prototype.m=function(){return Zv(this.H)},Xy),Gy=(Qy.now=function(){return Qy.fromMillis(Date.now())},Qy.fromDate=function(t){return Qy.fromMillis(t.getTime())},Qy.fromMillis=function(t){var e=Math.floor(t/1e3);return new Qy(e,1e6*(t-1e3*e))},Qy.prototype.toDate=function(){return new Date(this.toMillis())},Qy.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},Qy.prototype.Y=function(t){return this.seconds===t.seconds?Ry(this.nanoseconds,t.nanoseconds):Ry(this.seconds,t.seconds)},Qy.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},Qy.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},Qy.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},Qy.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},Qy),Ky=(zy.J=function(t){return new zy(t)},zy.min=function(){return new zy(new Gy(0,0))},zy.prototype.L=function(t){return this.timestamp.Y(t.timestamp)},zy.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},zy.prototype.X=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},zy.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},zy.prototype.Z=function(){return this.timestamp},zy);function zy(t){this.timestamp=t}function Qy(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new qv(Vv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new qv(Vv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new qv(Vv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new qv(Vv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}function Xy(t,e){this.K=t,this.G=e,this.H={}}function Yy(t,e){this.projectId=t,this.database=e||"(default)"}function Jy(){return null!==qy&&qy.apply(this,arguments)||this}function $y(t){return null==t}function Zy(t){return 0===t&&1/t==-1/0}function tg(t){return"number"==typeof t&&Number.isInteger(t)&&!Zy(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var eg=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.tt=null};function ng(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new eg(t,e,n,r,i,o,s)}function rg(t){var e=t;return null===e.tt&&(t=e.path.R(),null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(function(t){return(t=t).field.R()+t.op.toString()+nm(t.value)}).join(","),t+="|ob:",t+=e.orderBy.map(function(t){return(t=t).field.R()+t.dir}).join(","),$y(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=L_(e.startAt)),e.endAt&&(t+="|ub:",t+=L_(e.endAt)),e.tt=t),e.tt}function ig(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n,r,i=0;i<t.orderBy.length;i++)if(n=t.orderBy[i],r=e.orderBy[i],n.dir!==r.dir||!n.field.isEqual(r.field))return!1;if(t.filters.length!==e.filters.length)return!1;for(var o,s,a=0;a<t.filters.length;a++)if(o=t.filters[a],s=e.filters[a],o.op!==s.op||!o.field.isEqual(s.field)||!$g(o.value,s.value))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!F_(t.startAt,e.startAt)&&F_(t.endAt,e.endAt)}function og(t){return oy.F(t.path)&&null===t.collectionGroup&&0===t.filters.length}function sg(t){this.count=t}var ag,ug=(cg.prototype.st=function(t){return new cg(this.target,this.targetId,this.et,t,this.nt,this.lastLimboFreeSnapshotVersion,this.resumeToken)},cg.prototype.it=function(t,e){return new cg(this.target,this.targetId,this.et,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},cg.prototype.rt=function(t){return new cg(this.target,this.targetId,this.et,this.sequenceNumber,this.nt,t,this.resumeToken)},cg);function cg(t,e,n,r,i,o,s){void 0===i&&(i=Ky.min()),void 0===o&&(o=Ky.min()),void 0===s&&(s=xy.B),this.target=t,this.targetId=e,this.et=n,this.sequenceNumber=r,this.nt=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}function hg(t){switch(t){case Vv.OK:return Xv(),0;case Vv.CANCELLED:case Vv.UNKNOWN:case Vv.DEADLINE_EXCEEDED:case Vv.RESOURCE_EXHAUSTED:case Vv.INTERNAL:case Vv.UNAVAILABLE:case Vv.UNAUTHENTICATED:return;case Vv.INVALID_ARGUMENT:case Vv.NOT_FOUND:case Vv.ALREADY_EXISTS:case Vv.PERMISSION_DENIED:case Vv.FAILED_PRECONDITION:case Vv.ABORTED:case Vv.OUT_OF_RANGE:case Vv.UNIMPLEMENTED:case Vv.DATA_LOSS:return 1;default:return Xv(),0}}function lg(t){if(void 0===t)return Kv("GRPC error has no .code"),Vv.UNKNOWN;switch(t){case ag.OK:return Vv.OK;case ag.CANCELLED:return Vv.CANCELLED;case ag.UNKNOWN:return Vv.UNKNOWN;case ag.DEADLINE_EXCEEDED:return Vv.DEADLINE_EXCEEDED;case ag.RESOURCE_EXHAUSTED:return Vv.RESOURCE_EXHAUSTED;case ag.INTERNAL:return Vv.INTERNAL;case ag.UNAVAILABLE:return Vv.UNAVAILABLE;case ag.UNAUTHENTICATED:return Vv.UNAUTHENTICATED;case ag.INVALID_ARGUMENT:return Vv.INVALID_ARGUMENT;case ag.NOT_FOUND:return Vv.NOT_FOUND;case ag.ALREADY_EXISTS:return Vv.ALREADY_EXISTS;case ag.PERMISSION_DENIED:return Vv.PERMISSION_DENIED;case ag.FAILED_PRECONDITION:return Vv.FAILED_PRECONDITION;case ag.ABORTED:return Vv.ABORTED;case ag.OUT_OF_RANGE:return Vv.OUT_OF_RANGE;case ag.UNIMPLEMENTED:return Vv.UNIMPLEMENTED;case ag.DATA_LOSS:return Vv.DATA_LOSS;default:return Xv()}}(K=ag=ag||{})[K.OK=0]="OK",K[K.CANCELLED=1]="CANCELLED",K[K.UNKNOWN=2]="UNKNOWN",K[K.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",K[K.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",K[K.NOT_FOUND=5]="NOT_FOUND",K[K.ALREADY_EXISTS=6]="ALREADY_EXISTS",K[K.PERMISSION_DENIED=7]="PERMISSION_DENIED",K[K.UNAUTHENTICATED=16]="UNAUTHENTICATED",K[K.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",K[K.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",K[K.ABORTED=10]="ABORTED",K[K.OUT_OF_RANGE=11]="OUT_OF_RANGE",K[K.UNIMPLEMENTED=12]="UNIMPLEMENTED",K[K.INTERNAL=13]="INTERNAL",K[K.UNAVAILABLE=14]="UNAVAILABLE",K[K.DATA_LOSS=15]="DATA_LOSS";var fg=(gg.prototype.ot=function(t,e){return new gg(this.i,this.root.ot(t,e,this.i).copy(null,null,dg.at,null,null))},gg.prototype.remove=function(t){return new gg(this.i,this.root.remove(t,this.i).copy(null,null,dg.at,null,null))},gg.prototype.get=function(t){for(var e=this.root;!e.m();){var n=this.i(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},gg.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.m();){var r=this.i(t,n.key);if(0===r)return e+n.left.size;n=r<0?n.left:(e+=n.left.size+1,n.right)}return-1},gg.prototype.m=function(){return this.root.m()},Object.defineProperty(gg.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),gg.prototype.ct=function(){return this.root.ct()},gg.prototype.ut=function(){return this.root.ut()},gg.prototype.ht=function(t){return this.root.ht(t)},gg.prototype.forEach=function(n){this.ht(function(t,e){return n(t,e),!1})},gg.prototype.toString=function(){var n=[];return this.ht(function(t,e){return n.push(t+":"+e),!1}),"{"+n.join(", ")+"}"},gg.prototype.lt=function(t){return this.root.lt(t)},gg.prototype._t=function(){return new pg(this.root,null,this.i,!1)},gg.prototype.ft=function(t){return new pg(this.root,t,this.i,!1)},gg.prototype.dt=function(){return new pg(this.root,null,this.i,!0)},gg.prototype.wt=function(t){return new pg(this.root,t,this.i,!0)},gg),pg=(yg.prototype.It=function(){var t=this.Et.pop(),e={key:t.key,value:t.value};if(this.Tt)for(t=t.left;!t.m();)this.Et.push(t),t=t.right;else for(t=t.right;!t.m();)this.Et.push(t),t=t.left;return e},yg.prototype.At=function(){return 0<this.Et.length},yg.prototype.Rt=function(){if(0===this.Et.length)return null;var t=this.Et[this.Et.length-1];return{key:t.key,value:t.value}},yg),dg=(vg.prototype.copy=function(t,e,n,r,i){return new vg(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},vg.prototype.m=function(){return!1},vg.prototype.ht=function(t){return this.left.ht(t)||t(this.key,this.value)||this.right.ht(t)},vg.prototype.lt=function(t){return this.right.lt(t)||t(this.key,this.value)||this.left.lt(t)},vg.prototype.min=function(){return this.left.m()?this:this.left.min()},vg.prototype.ct=function(){return this.min().key},vg.prototype.ut=function(){return this.right.m()?this.key:this.right.ut()},vg.prototype.ot=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.ot(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.ot(t,e,n))).gt()},vg.prototype.Pt=function(){if(this.left.m())return vg.EMPTY;var t=this;return t.left.yt()||t.left.left.yt()||(t=t.Vt()),(t=t.copy(null,null,null,t.left.Pt(),null)).gt()},vg.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left.m()||r.left.yt()||r.left.left.yt()||(r=r.Vt()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.yt()&&(r=r.bt()),r.right.m()||r.right.yt()||r.right.left.yt()||(r=r.vt()),0===e(t,r.key)){if(r.right.m())return vg.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.Pt())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.gt()},vg.prototype.yt=function(){return this.color},vg.prototype.gt=function(){var t=this;return t.right.yt()&&!t.left.yt()&&(t=t.St()),t.left.yt()&&t.left.left.yt()&&(t=t.bt()),t.left.yt()&&t.right.yt()&&(t=t.Dt()),t},vg.prototype.Vt=function(){var t=this.Dt();return t.right.left.yt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.bt())).St()).Dt()),t},vg.prototype.vt=function(){var t=this.Dt();return t.left.left.yt()&&(t=(t=t.bt()).Dt()),t},vg.prototype.St=function(){var t=this.copy(null,null,vg.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},vg.prototype.bt=function(){var t=this.copy(null,null,vg.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},vg.prototype.Dt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},vg.prototype.Ct=function(){var t=this.Nt();return Math.pow(2,t)<=this.size+1},vg.prototype.Nt=function(){if(this.yt()&&this.left.yt())throw Xv();if(this.right.yt())throw Xv();var t=this.left.Nt();if(t!==this.right.Nt())throw Xv();return t+(this.yt()?0:1)},vg);function vg(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:vg.RED,this.left=null!=r?r:vg.EMPTY,this.right=null!=i?i:vg.EMPTY,this.size=this.left.size+1+this.right.size}function yg(t,e,n,r){this.Tt=r,this.Et=[];for(var i=1;!t.m();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.Tt?t.left:t.right;else{if(0===i){this.Et.push(t);break}this.Et.push(t),t=this.Tt?t.right:t.left}}function gg(t,e){this.i=t,this.root=e||dg.EMPTY}function mg(){this.size=0}dg.EMPTY=null,dg.RED=!0,dg.at=!1,dg.EMPTY=(Object.defineProperty(mg.prototype,"key",{get:function(){throw Xv()},enumerable:!1,configurable:!0}),Object.defineProperty(mg.prototype,"value",{get:function(){throw Xv()},enumerable:!1,configurable:!0}),Object.defineProperty(mg.prototype,"color",{get:function(){throw Xv()},enumerable:!1,configurable:!0}),Object.defineProperty(mg.prototype,"left",{get:function(){throw Xv()},enumerable:!1,configurable:!0}),Object.defineProperty(mg.prototype,"right",{get:function(){throw Xv()},enumerable:!1,configurable:!0}),mg.prototype.copy=function(t,e,n,r,i){return this},mg.prototype.ot=function(t,e,n){return new dg(t,e)},mg.prototype.remove=function(t,e){return this},mg.prototype.m=function(){return!0},mg.prototype.ht=function(t){return!1},mg.prototype.lt=function(t){return!1},mg.prototype.ct=function(){return null},mg.prototype.ut=function(){return null},mg.prototype.yt=function(){return!1},mg.prototype.Ct=function(){return!0},mg.prototype.Nt=function(){return 0},new mg);var bg=(Ig.prototype.has=function(t){return null!==this.data.get(t)},Ig.prototype.first=function(){return this.data.ct()},Ig.prototype.last=function(){return this.data.ut()},Object.defineProperty(Ig.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),Ig.prototype.indexOf=function(t){return this.data.indexOf(t)},Ig.prototype.forEach=function(n){this.data.ht(function(t,e){return n(t),!1})},Ig.prototype.Ft=function(t,e){for(var n=this.data.ft(t[0]);n.At();){var r=n.It();if(0<=this.i(r.key,t[1]))return;e(r.key)}},Ig.prototype.xt=function(t,e){for(var n=void 0!==e?this.data.ft(e):this.data._t();n.At();)if(!t(n.It().key))return},Ig.prototype.$t=function(t){t=this.data.ft(t);return t.At()?t.It().key:null},Ig.prototype._t=function(){return new _g(this.data._t())},Ig.prototype.ft=function(t){return new _g(this.data.ft(t))},Ig.prototype.add=function(t){return this.copy(this.data.remove(t).ot(t,!0))},Ig.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},Ig.prototype.m=function(){return this.data.m()},Ig.prototype.kt=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},Ig.prototype.isEqual=function(t){if(!(t instanceof Ig))return!1;if(this.size!==t.size)return!1;for(var e=this.data._t(),n=t.data._t();e.At();){var r=e.It().key,i=n.It().key;if(0!==this.i(r,i))return!1}return!0},Ig.prototype.A=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},Ig.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},Ig.prototype.copy=function(t){var e=new Ig(this.i);return e.data=t,e},Ig),_g=(Eg.prototype.It=function(){return this.Mt.It().key},Eg.prototype.At=function(){return this.Mt.At()},Eg),wg=new fg(oy.i);function Eg(t){this.Mt=t}function Ig(t){this.i=t,this.data=new fg(this.i)}var Tg=new fg(oy.i);var Sg=new fg(oy.i),Cg=new bg(oy.i);function Ng(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Cg,r=0,i=t;r<i.length;r++)var o=i[r],n=n.add(o);return n}var Ag=new bg(Ry);var kg=(Gg.Bt=function(t){return new Gg(t.i)},Gg.prototype.has=function(t){return null!=this.Ot.get(t)},Gg.prototype.get=function(t){return this.Ot.get(t)},Gg.prototype.first=function(){return this.Lt.ct()},Gg.prototype.last=function(){return this.Lt.ut()},Gg.prototype.m=function(){return this.Lt.m()},Gg.prototype.indexOf=function(t){t=this.Ot.get(t);return t?this.Lt.indexOf(t):-1},Object.defineProperty(Gg.prototype,"size",{get:function(){return this.Lt.size},enumerable:!1,configurable:!0}),Gg.prototype.forEach=function(n){this.Lt.ht(function(t,e){return n(t),!1})},Gg.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Ot.ot(t.key,t),e.Lt.ot(t,null))},Gg.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Ot.remove(t),this.Lt.remove(e)):this},Gg.prototype.isEqual=function(t){if(!(t instanceof Gg))return!1;if(this.size!==t.size)return!1;for(var e=this.Lt._t(),n=t.Lt._t();e.At();){var r=e.It().key,i=n.It().key;if(!r.isEqual(i))return!1}return!0},Gg.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},Gg.prototype.copy=function(t,e){var n=new Gg;return n.i=this.i,n.Ot=t,n.Lt=e,n},Gg),Og=(Hg.prototype.track=function(t){var e=t.doc.key,n=this.qt.get(e);!n||0!==t.type&&3===n.type?this.qt=this.qt.ot(e,t):3===t.type&&1!==n.type?this.qt=this.qt.ot(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.qt=this.qt.ot(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.qt=this.qt.ot(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.qt=this.qt.remove(e):1===t.type&&2===n.type?this.qt=this.qt.ot(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.qt=this.qt.ot(e,{type:2,doc:t.doc}):Xv()},Hg.prototype.Ut=function(){var n=[];return this.qt.ht(function(t,e){n.push(e)}),n},Hg),Rg=(Wg.Gt=function(t,e,n,r){var i=[];return e.forEach(function(t){i.push({type:0,doc:t})}),new Wg(t,e,kg.Bt(e),i,n,r,!0,!1)},Object.defineProperty(Wg.prototype,"hasPendingWrites",{get:function(){return!this.Wt.m()},enumerable:!1,configurable:!0}),Wg.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.jt===t.jt&&this.Wt.isEqual(t.Wt)&&i_(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Qt.isEqual(t.Qt)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},Wg),Pg=(Bg.Xt=function(t,e){var n=new Map;return n.set(t,Dg.Zt(t,e)),new Bg(Ky.min(),n,Ag,wg,Ng())},Bg),Dg=(qg.Zt=function(t,e){return new qg(xy.B,e,Ng(),Ng(),Ng())},qg),xg=function(t,e,n,r){this.ie=t,this.removedTargetIds=e,this.key=n,this.re=r},Lg=function(t,e){this.targetId=t,this.oe=e},Mg=function(t,e,n,r){void 0===n&&(n=xy.B),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Fg=(Object.defineProperty(Vg.prototype,"te",{get:function(){return this.he},enumerable:!1,configurable:!0}),Object.defineProperty(Vg.prototype,"resumeToken",{get:function(){return this.ue},enumerable:!1,configurable:!0}),Object.defineProperty(Vg.prototype,"_e",{get:function(){return 0!==this.ae},enumerable:!1,configurable:!0}),Object.defineProperty(Vg.prototype,"fe",{get:function(){return this.le},enumerable:!1,configurable:!0}),Vg.prototype.de=function(t){0<t.O()&&(this.le=!0,this.ue=t)},Vg.prototype.we=function(){var n=Ng(),r=Ng(),i=Ng();return this.ce.forEach(function(t,e){switch(e){case 0:n=n.add(t);break;case 2:r=r.add(t);break;case 1:i=i.add(t);break;default:Xv()}}),new Dg(this.ue,this.he,n,r,i)},Vg.prototype.me=function(){this.le=!1,this.ce=zg()},Vg.prototype.Te=function(t,e){this.le=!0,this.ce=this.ce.ot(t,e)},Vg.prototype.Ee=function(t){this.le=!0,this.ce=this.ce.remove(t)},Vg.prototype.Ie=function(){this.ae+=1},Vg.prototype.Ae=function(){--this.ae},Vg.prototype.Re=function(){this.le=!0,this.he=!0},Vg),Ug=(jg.prototype.be=function(t){for(var e=0,n=t.ie;e<n.length;e++){var r=n[e];t.re instanceof jb?this.ve(r,t.re):t.re instanceof Vb&&this.Se(r,t.key,t.re)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var s=o[i];this.Se(s,t.key,t.re)}},jg.prototype.De=function(n){var r=this;this.Ce(n,function(t){var e=r.Ne(t);switch(n.state){case 0:r.Fe(t)&&e.de(n.resumeToken);break;case 1:e.Ae(),e._e||e.me(),e.de(n.resumeToken);break;case 2:e.Ae(),e._e||r.removeTarget(t);break;case 3:r.Fe(t)&&(e.Re(),e.de(n.resumeToken));break;case 4:r.Fe(t)&&(r.xe(t),e.de(n.resumeToken));break;default:Xv()}})},jg.prototype.Ce=function(t,n){var r=this;0<t.targetIds.length?t.targetIds.forEach(n):this.Pe.forEach(function(t,e){r.Fe(e)&&n(e)})},jg.prototype.$e=function(t){var e=t.targetId,n=t.oe.count,t=this.ke(e);t&&(og(t=t.target)?0===n?(t=new oy(t.path),this.Se(e,t,new Vb(t,Ky.min()))):Yv(1===n):this.Me(e)!==n&&(this.xe(e),this.pe=this.pe.add(e)))},jg.prototype.Oe=function(r){var i=this,o=new Map;this.Pe.forEach(function(t,e){var n=i.ke(e);n&&(t.te&&og(n.target)&&(n=new oy(n.target.path),null!==i.ye.get(n)||i.Le(e,n)||i.Se(e,n,new Vb(n,r))),t.fe&&(o.set(e,t.we()),t.me()))});var s=Ng();this.Ve.forEach(function(t,e){var n=!0;e.xt(function(t){t=i.ke(t);return!t||2===t.et||(n=!1)}),n&&(s=s.add(t))});var t=new Pg(r,o,this.pe,this.ye,s);return this.ye=wg,this.Ve=Kg(),this.pe=new bg(Ry),t},jg.prototype.ve=function(t,e){var n;this.Fe(t)&&(n=this.Le(t,e.key)?2:0,this.Ne(t).Te(e.key,n),this.ye=this.ye.ot(e.key,e),this.Ve=this.Ve.ot(e.key,this.Be(e.key).add(t)))},jg.prototype.Se=function(t,e,n){var r;this.Fe(t)&&(r=this.Ne(t),this.Le(t,e)?r.Te(e,1):r.Ee(e),this.Ve=this.Ve.ot(e,this.Be(e).delete(t)),n&&(this.ye=this.ye.ot(e,n)))},jg.prototype.removeTarget=function(t){this.Pe.delete(t)},jg.prototype.Me=function(t){var e=this.Ne(t).we();return this.ge.qe(t).size+e.ee.size-e.se.size},jg.prototype.Ie=function(t){this.Ne(t).Ie()},jg.prototype.Ne=function(t){var e=this.Pe.get(t);return e||(e=new Fg,this.Pe.set(t,e)),e},jg.prototype.Be=function(t){var e=this.Ve.get(t);return e||(e=new bg(Ry),this.Ve=this.Ve.ot(t,e)),e},jg.prototype.Fe=function(t){var e=null!==this.ke(t);return e||Gv("WatchChangeAggregator","Detected inactive target",t),e},jg.prototype.ke=function(t){var e=this.Pe.get(t);return e&&e._e?null:this.ge.Ue(t)},jg.prototype.xe=function(e){var n=this;this.Pe.set(e,new Fg),this.ge.qe(e).forEach(function(t){n.Se(e,t,null)})},jg.prototype.Le=function(t,e){return this.ge.qe(t).has(e)},jg);function jg(t){this.ge=t,this.Pe=new Map,this.ye=wg,this.Ve=Kg(),this.pe=new bg(Ry)}function Vg(){this.ae=0,this.ce=zg(),this.ue=xy.B,this.he=!1,this.le=!0}function qg(t,e,n,r,i){this.resumeToken=t,this.te=e,this.ee=n,this.ne=r,this.se=i}function Bg(t,e,n,r,i){this.nt=t,this.zt=e,this.Ht=n,this.Yt=r,this.Jt=i}function Wg(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Qt=n,this.docChanges=r,this.Wt=i,this.fromCache=o,this.jt=s,this.Kt=a}function Hg(){this.qt=new fg(oy.i)}function Gg(n){this.i=n?function(t,e){return n(t,e)||oy.i(t.key,e.key)}:function(t,e){return oy.i(t.key,e.key)},this.Ot=Tg,this.Lt=new fg(this.i)}function Kg(){return new fg(oy.i)}function zg(){return new fg(oy.i)}function Qg(t){return"server_timestamp"===(null===(t=((null===(t=null==t?void 0:t.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Xg(t){t=rm(t.mapValue.fields.__local_write_time__.timestampValue);return new Gy(t.seconds,t.nanos)}var Yg=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jg(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Qg(t)?4:10:Xv()}function $g(r,i){var t,e=Jg(r);if(e!==Jg(i))return!1;switch(e){case 0:return!0;case 1:return r.booleanValue===i.booleanValue;case 4:return Xg(r).isEqual(Xg(i));case 3:return function(t){if("string"==typeof r.timestampValue&&"string"==typeof t.timestampValue&&r.timestampValue.length===t.timestampValue.length)return r.timestampValue===t.timestampValue;var e=rm(r.timestampValue),t=rm(t.timestampValue);return e.seconds===t.seconds&&e.nanos===t.nanos}(i);case 5:return r.stringValue===i.stringValue;case 6:return t=i,om(r.bytesValue).isEqual(om(t.bytesValue));case 7:return r.referenceValue===i.referenceValue;case 8:return e=i,im((t=r).geoPointValue.latitude)===im(e.geoPointValue.latitude)&&im(t.geoPointValue.longitude)===im(e.geoPointValue.longitude);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return im(t.integerValue)===im(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){t=im(t.doubleValue),e=im(e.doubleValue);return t===e?Zy(t)===Zy(e):isNaN(t)&&isNaN(e)}return!1}(r,i);case 9:return Py(r.arrayValue.values||[],i.arrayValue.values||[],$g);case 10:return function(){var t,e=r.mapValue.fields||{},n=i.mapValue.fields||{};if(Jv(e)!==Jv(n))return!1;for(t in e)if(e.hasOwnProperty(t)&&(void 0===n[t]||!$g(e[t],n[t])))return!1;return!0}();default:return Xv()}}function Zg(t,e){return void 0!==(t.values||[]).find(function(t){return $g(t,e)})}function tm(t,e){var n,r,i=Jg(t),o=Jg(e);if(i!==o)return Ry(i,o);switch(i){case 0:return 0;case 1:return Ry(t.booleanValue,e.booleanValue);case 2:return n=e,r=im(t.integerValue||t.doubleValue),n=im(n.integerValue||n.doubleValue),r<n?-1:n<r?1:r===n?0:isNaN(r)?isNaN(n)?0:-1:1;case 3:return em(t.timestampValue,e.timestampValue);case 4:return em(Xg(t),Xg(e));case 5:return Ry(t.stringValue,e.stringValue);case 6:return function(t,e){t=om(t),e=om(e);return t.L(e)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Ry(n[i],r[i]);if(0!==o)return o}return Ry(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return i=t.geoPointValue,r=e.geoPointValue,0!==(n=Ry(im(i.latitude),im(r.latitude)))?n:Ry(im(i.longitude),im(r.longitude));case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=tm(n[i],r[i]);if(o)return o}return Ry(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Ry(r[s],o[s]);if(0!==a)return a;a=tm(n[r[s]],i[o[s]]);if(0!==a)return a}return Ry(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Xv()}}function em(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Ry(t,e);var n=rm(t),t=rm(e),e=Ry(n.seconds,t.seconds);return 0!==e?e:Ry(n.nanos,t.nanos)}function nm(t){return function s(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var t=rm(t);return"time("+t.seconds+","+t.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?om(t.bytesValue).toBase64():"referenceValue"in t?(e=t.referenceValue,oy.C(e).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=s(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+s(t.fields[o])}return e+"}"}(t.mapValue):Xv();var e}(t)}function rm(t){if(Yv(!!t),"string"!=typeof t)return{seconds:im(t.seconds),nanos:im(t.nanos)};var e=0,n=Yg.exec(t);Yv(!!n),n[1]&&(n=((n=n[1])+"000000000").substr(0,9),e=Number(n));t=new Date(t);return{seconds:Math.floor(t.getTime()/1e3),nanos:e}}function im(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function om(t){return"string"==typeof t?xy.fromBase64String(t):xy.fromUint8Array(t)}function sm(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.R()}}function am(t){return t&&"integerValue"in t}function um(t){return!!t&&"arrayValue"in t}function cm(t){return t&&"nullValue"in t}function hm(t){return t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function lm(t){return t&&"mapValue"in t}var fm={asc:"ASCENDING",desc:"DESCENDING"},pm={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dm=function(t,e){this.U=t,this.Qe=e};function vm(t){return{integerValue:""+t}}function ym(t,e){if(t.Qe){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zy(e)?"-0":e}}function gm(t,e){return tg(e)?vm(e):ym(t,e)}function mm(t,e){return t.Qe?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function bm(t,e){return t.Qe?e.toBase64():e.toUint8Array()}function _m(t){return Yv(!!t),Ky.J((t=rm(t),new Gy(t.seconds,t.nanos)))}function wm(t,e){return new ny(["projects",t.projectId,"databases",t.database]).child("documents").child(e).R()}function Em(t){t=ny.g(t);return Yv(Vm(t)),t}function Im(t,e){return wm(t.U,e.path)}function Tm(t,e){e=Em(e);return Yv(e.get(1)===t.U.projectId),Yv(!e.get(3)&&!t.U.database||e.get(3)===t.U.database),new oy(Am(e))}function Sm(t,e){return wm(t.U,e)}function Cm(t){t=Em(t);return 4===t.length?ny.P():Am(t)}function Nm(t){return new ny(["projects",t.U.projectId,"databases",t.U.database]).R()}function Am(t){return Yv(4<t.length&&"documents"===t.get(4)),t.u(5)}function km(t,e,n){return{name:Im(t,e),fields:n.proto.mapValue.fields}}function Om(t,e){var n,r,i;if(e instanceof gb)n={update:km(t,e.key,e.value)};else if(e instanceof Ab)n={delete:Im(t,e.key)};else if(e instanceof mb)n={update:km(t,e.key,e.data),updateMask:(i=e.We,r=[],i.fields.forEach(function(t){return r.push(t.R())}),{fieldPaths:r})};else if(e instanceof Ib)n={transform:{document:Im(t,e.key),fieldTransforms:e.fieldTransforms.map(function(t){var e=t.transform;if(e instanceof Hm)return{fieldPath:t.field.R(),setToServerValue:"REQUEST_TIME"};if(e instanceof Gm)return{fieldPath:t.field.R(),appendMissingElements:{values:e.elements}};if(e instanceof Ym)return{fieldPath:t.field.R(),removeAllFromArray:{values:e.elements}};if(e instanceof tb)return{fieldPath:t.field.R(),increment:e.je};throw Xv()})}};else{if(!(e instanceof kb))return Xv();n={verify:Im(t,e.key)}}return e.Ge.Ke||(n.currentDocument=void 0!==(i=e.Ge).updateTime?{updateTime:(e=t,t=i.updateTime,mm(e,t.Z()))}:void 0!==i.exists?{exists:i.exists}:Xv()),n}function Rm(e,t){var n=t.currentDocument?void 0!==(o=t.currentDocument).updateTime?ub.updateTime(_m(o.updateTime)):void 0!==o.exists?ub.exists(o.exists):ub.ze():ub.ze();if(t.update){t.update.name;var r=Tm(e,t.update.name),i=new Ob({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=(o=t.updateMask.fieldPaths||[],new ib(o.map(function(t){return iy.S(t)})));return new mb(r,i,o,n)}return new gb(r,i,n)}if(t.delete){var s=Tm(e,t.delete);return new Ab(s,n)}if(t.transform){i=Tm(e,t.transform.document),s=t.transform.fieldTransforms.map(function(t){return function(t,e){var n,r=null;"setToServerValue"in e?(Yv("REQUEST_TIME"===e.setToServerValue),r=new Hm):"appendMissingElements"in e?(n=e.appendMissingElements.values||[],r=new Gm(n)):"removeAllFromArray"in e?(n=e.removeAllFromArray.values||[],r=new Ym(n)):"increment"in e?r=new tb(t,e.increment):Xv();e=iy.S(e.fieldPath);return new ob(e,r)}(e,t)});return Yv(!0===n.exists),new Ib(i,s)}if(t.verify){t=Tm(e,t.verify);return new kb(t,n)}return Xv()}function Pm(t,e){return{documents:[Sm(t,e.path)]}}function Dm(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Sm(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Sm(t,r.h()),n.structuredQuery.from=[{collectionId:r._()}]);r=function(t){if(0!==t.length){t=t.map(function(t){if("=="===t.op){if(hm(t.value))return{unaryFilter:{field:Fm(t.field),op:"IS_NAN"}};if(cm(t.value))return{unaryFilter:{field:Fm(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(hm(t.value))return{unaryFilter:{field:Fm(t.field),op:"IS_NOT_NAN"}};if(cm(t.value))return{unaryFilter:{field:Fm(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fm(t.field),op:(e=t.op,pm[e]),value:t.value}};var e});return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(e.filters);r&&(n.structuredQuery.where=r);r=function(t){if(0!==t.length)return t.map(function(t){return{field:Fm((t=t).field),direction:(t=t.dir,fm[t])}})}(e.orderBy);r&&(n.structuredQuery.orderBy=r);r=e.limit,r=t.Qe||$y(r)?r:{value:r};return null!==r&&(n.structuredQuery.limit=r),e.startAt&&(n.structuredQuery.startAt=Lm(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Lm(e.endAt)),n}function xm(t){var e=Cm(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;0<r&&(Yv(1===r),(s=n.from[0]).allDescendants?i=s.collectionId:e=e.child(s.collectionId));var o=[];n.where&&(o=function e(t){return t?void 0!==t.unaryFilter?[jm(t)]:void 0!==t.fieldFilter?[(n=t,h_.create(Um(n.fieldFilter.field),function(){switch(n.fieldFilter.op){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Xv()}}(),n.fieldFilter.value))]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e(t)}).reduce(function(t,e){return t.concat(e)}):Xv():[];var n}(n.where));t=[];n.orderBy&&(t=n.orderBy.map(function(t){return new U_(Um((e=t).field),function(){switch(e.direction){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}());var e}));r=null;n.limit&&(r=$y(a="object"==typeof(a=n.limit)?a.value:a)?null:a);var s=null;n.startAt&&(s=Mm(n.startAt));var a=null;return n.endAt&&(a=Mm(n.endAt)),t_(Kb(e,i,t,o,r,"F",s,a))}function Lm(t){return{before:t.before,values:t.position}}function Mm(t){var e=!!t.before,t=t.values||[];return new O_(t,e)}function Fm(t){return{fieldPath:t.R()}}function Um(t){return iy.S(t.fieldPath)}function jm(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Um(t.unaryFilter.field);return h_.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Um(t.unaryFilter.field);return h_.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":n=Um(t.unaryFilter.field);return h_.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":t=Um(t.unaryFilter.field);return h_.create(t,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Xv()}}function Vm(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)}Dr=function(){this.He=void 0};function qm(t,e){return t instanceof tb?am(t=e)||t&&"doubleValue"in t?e:{integerValue:0}:null}var Bm,Wm,Hm=(go(zm,Wm=Dr),zm),Gm=(go(Km,Bm=Dr),Km);function Km(t){var e=this;return(e=Bm.call(this)||this).elements=t,e}function zm(){return null!==Wm&&Wm.apply(this,arguments)||this}function Qm(t,e){for(var n=rb(e),r=0,i=t.elements;r<i.length;r++)!function(e){n.some(function(t){return $g(t,e)})||n.push(e)}(i[r]);return{arrayValue:{values:n}}}var Xm,Ym=(go(Jm,Xm=Dr),Jm);function Jm(t){var e=this;return(e=Xm.call(this)||this).elements=t,e}function $m(t,e){for(var n=rb(e),r=0,i=t.elements;r<i.length;r++)!function(e){n=n.filter(function(t){return!$g(t,e)})}(i[r]);return{arrayValue:{values:n}}}var Zm,tb=(go(eb,Zm=Dr),eb);function eb(t,e){var n=this;return(n=Zm.call(this)||this).serializer=t,n.je=e,n}function nb(t){return im(t.integerValue||t.doubleValue)}function rb(t){return um(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var ib=(sb.prototype.Ye=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].T(t))return!0;return!1},sb.prototype.isEqual=function(t){return Py(this.fields,t.fields,function(t,e){return t.isEqual(e)})},sb),ob=function(t,e){this.field=t,this.transform=e};function sb(t){(this.fields=t).sort(iy.i)}function ab(t,e){this.version=t,this.transformResults=e}var ub=(cb.ze=function(){return new cb},cb.exists=function(t){return new cb(void 0,t)},cb.updateTime=function(t){return new cb(t)},Object.defineProperty(cb.prototype,"Ke",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),cb.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},cb);function cb(t,e){this.updateTime=t,this.exists=e}function hb(t,e){return void 0!==t.updateTime?e instanceof jb&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof jb}M=function(){};function lb(t,e,n){return t instanceof gb?new jb(t.key,n.version,t.value,{hasCommittedMutations:!0}):t instanceof mb?function(t,e,n){if(!hb(t.Ge,e))return new qb(t.key,n.version);e=wb(t,e);return new jb(t.key,n.version,e,{hasCommittedMutations:!0})}(t,e,n):t instanceof Ib?function(t,e,n){if(Yv(null!=n.transformResults),!hb(t.Ge,e))return new qb(t.key,n.version);var r=e,e=function(t,e,n){var r=[];Yv(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof jb&&(a=e.field(o.field)),r.push((o=s,s=a,a=n[i],o instanceof Gm?Qm(o,s):o instanceof Ym?$m(o,s):a))}return r}(t.fieldTransforms,e,n.transformResults),n=n.version,e=Sb(t,r.data(),e);return new jb(t.key,n,e,{hasCommittedMutations:!0})}(t,e,n):new Vb(t.key,n.version,{hasCommittedMutations:!0})}function fb(t,e,n,r){return t instanceof gb?function(t,e){if(!hb(t.Ge,e))return e;e=db(e);return new jb(t.key,e,t.value,{Je:!0})}(t,e):t instanceof mb?function(t,e){if(!hb(t.Ge,e))return e;var n=db(e),e=wb(t,e);return new jb(t.key,n,e,{Je:!0})}(t,e):t instanceof Ib?function(t,e,n,r){if(!hb(t.Ge,e))return e;var i=e,r=function(t,e,n,r){for(var i,o=[],s=0,a=t;s<a.length;s++){var u=a[s],c=u.transform,h=null;n instanceof jb&&(h=n.field(u.field)),null===h&&r instanceof jb&&(h=r.field(u.field)),o.push((i=h,u=e,h=void 0,(c=c)instanceof Hm?(h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}},i&&(h.fields.__previous_value__=i),{mapValue:h}):c instanceof Gm?Qm(c,i):c instanceof Ym?$m(c,i):(c=qm(h=c,i),i=nb(c)+nb(h.je),am(c)&&am(h.je)?vm(i):ym(h.serializer,i))))}return o}(t.fieldTransforms,n,e,r),r=Sb(t,i.data(),r);return new jb(t.key,i.version,r,{Je:!0})}(t,e,r,n):(e=e,hb((t=t).Ge,e)?new Vb(t.key,Ky.min()):e)}function pb(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Ge.isEqual(e.Ge)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.We.isEqual(e.We):2!==t.type||Py(t.fieldTransforms,t.fieldTransforms,function(t,e){return e=e,(t=t).field.isEqual(e.field)&&(t=t.transform,e=e.transform,t instanceof Gm&&e instanceof Gm||t instanceof Ym&&e instanceof Ym?Py(t.elements,e.elements,$g):t instanceof tb&&e instanceof tb?$g(t.je,e.je):t instanceof Hm&&e instanceof Hm)}))}function db(t){return t instanceof jb?t.version:Ky.min()}var vb,yb,gb=(go(_b,yb=M),_b),mb=(go(bb,vb=M),bb);function bb(t,e,n,r){var i=this;return(i=vb.call(this)||this).key=t,i.data=e,i.We=n,i.Ge=r,i.type=1,i}function _b(t,e,n){var r=this;return(r=yb.call(this)||this).key=t,r.value=e,r.Ge=n,r.type=0,r}function wb(t,e){return n=t,e=e instanceof jb?e.data():Ob.empty(),r=new Rb(e),n.We.fields.forEach(function(t){var e;t.m()||(null!==(e=n.data.field(t))?r.set(t,e):r.delete(t))}),r.Xe();var n,r}var Eb,Ib=(go(Tb,Eb=M),Tb);function Tb(t,e){var n=this;return(n=Eb.call(this)||this).key=t,n.fieldTransforms=e,n.type=2,n.Ge=ub.exists(!0),n}function Sb(t,e,n){for(var r=new Rb(e),i=0;i<t.fieldTransforms.length;i++){var o=t.fieldTransforms[i];r.set(o.field,n[i])}return r.Xe()}var Cb,Nb,Ab=(go(Lb,Nb=M),Lb),kb=(go(xb,Cb=M),xb),Ob=(Db.empty=function(){return new Db({mapValue:{}})},Db.prototype.field=function(t){if(t.m())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!lm(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t._()])||null},Db.prototype.isEqual=function(t){return $g(this.proto,t.proto)},Db),Rb=(Pb.prototype.set=function(t,e){return this.en(t,e),this},Pb.prototype.delete=function(t){return this.en(t,null),this},Pb.prototype.en=function(t,e){for(var n=this.tn,r=0;r<t.length-1;++r)var i=t.get(r),o=n.get(i),n=(o instanceof Map||(o=o&&10===Jg(o)?new Map(Object.entries(o.mapValue.fields||{})):new Map,n.set(i,o)),o);n.set(t._(),e)},Pb.prototype.Xe=function(){var t=this.nn(iy.P(),this.tn);return null!=t?new Ob(t):this.Ze},Pb.prototype.nn=function(r,t){var i=this,o=!1,e=this.Ze.field(r),s=lm(e)?Object.assign({},e.mapValue.fields):{};return t.forEach(function(t,e){var n;t instanceof Map?null!=(n=i.nn(r.child(e),t))&&(s[e]=n,o=!0):null!==t?(s[e]=t,o=!0):s.hasOwnProperty(e)&&(delete s[e],o=!0)}),o?{mapValue:{fields:s}}:null},Pb);function Pb(t){void 0===t&&(t=Ob.empty()),this.Ze=t,this.tn=new Map}function Db(t){this.proto=t}function xb(t,e){var n=this;return(n=Cb.call(this)||this).key=t,n.Ge=e,n.type=4,n}function Lb(t,e){var n=this;return(n=Nb.call(this)||this).key=t,n.Ge=e,n.type=3,n}var Mb,Fb,Ub,K=function(t,e){this.key=t,this.version=e},jb=(go(Gb,Ub=K),Gb.prototype.field=function(t){return this.sn.field(t)},Gb.prototype.data=function(){return this.sn},Gb.prototype.rn=function(){return this.sn.proto},Gb.prototype.isEqual=function(t){return t instanceof Gb&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Je===t.Je&&this.hasCommittedMutations===t.hasCommittedMutations&&this.sn.isEqual(t.sn)},Gb.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.sn.toString()+", {hasLocalMutations: "+this.Je+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(Gb.prototype,"hasPendingWrites",{get:function(){return this.Je||this.hasCommittedMutations},enumerable:!1,configurable:!0}),Gb),Vb=(go(Hb,Fb=K),Hb.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(Hb.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),Hb.prototype.isEqual=function(t){return t instanceof Hb&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},Hb),qb=(go(Wb,Mb=K),Wb.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(Wb.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),Wb.prototype.isEqual=function(t){return t instanceof Wb&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},Wb),Bb=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.on=n,this.filters=r,this.limit=i,this.an=o,this.startAt=s,this.endAt=a,this.cn=null,this.un=null,this.startAt,this.endAt};function Wb(){return null!==Mb&&Mb.apply(this,arguments)||this}function Hb(t,e,n){var r=this;return(r=Fb.call(this,t,e)||this).hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}function Gb(t,e,n,r){var i=this;return(i=Ub.call(this,t,e)||this).sn=n,i.Je=!!r.Je,i.hasCommittedMutations=!!r.hasCommittedMutations,i}function Kb(t,e,n,r,i,o,s,a){return new Bb(t,e,n,r,i,o,s,a)}function zb(t){return new Bb(t)}function Qb(t){return!$y(t.limit)&&"F"===t.an}function Xb(t){return!$y(t.limit)&&"L"===t.an}function Yb(t){return 0<t.on.length?t.on[0].field:null}function Jb(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.hn())return r.field}return null}function $b(t){return null!==t.collectionGroup}function Zb(t){var e=t;if(null===e.cn){e.cn=[];var n=Jb(e),t=Yb(e);if(null!==n&&null===t)n.p()||e.cn.push(new U_(n)),e.cn.push(new U_(iy.v(),"asc"));else{for(var r=!1,i=0,o=e.on;i<o.length;i++){var s=o[i];e.cn.push(s),s.field.p()&&(r=!0)}r||(n=0<e.on.length?e.on[e.on.length-1].dir:"asc",e.cn.push(new U_(iy.v(),n)))}}return e.cn}function t_(t){var e=t;if(!e.un)if("F"===e.an)e.un=ng(e.path,e.collectionGroup,Zb(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Zb(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new U_(o.field,s))}var a=e.endAt?new O_(e.endAt.position,!e.endAt.before):null,t=e.startAt?new O_(e.startAt.position,!e.startAt.before):null;e.un=ng(e.path,e.collectionGroup,n,e.filters,e.limit,a,t)}return e.un}function e_(t,e,n){return new Bb(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function n_(t,e){return new Bb(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),t.limit,t.an,e,t.endAt)}function r_(t,e){return new Bb(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),t.limit,t.an,t.startAt,e)}function i_(t,e){return ig(t_(t),t_(e))&&t.an===e.an}function o_(t){return rg(t_(t))+"|lt:"+t.an}function s_(t){return"Query(target="+(e=t_(t),n=e.path.R(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),0<e.filters.length&&(n+=", filters: ["+e.filters.map(function(t){return(t=t).field.R()+" "+t.op+" "+nm(t.value)}).join(", ")+"]"),$y(e.limit)||(n+=", limit: "+e.limit),0<e.orderBy.length&&(n+=", orderBy: ["+e.orderBy.map(function(t){return(t=t).field.R()+" ("+t.dir+")"}).join(", ")+"]"),e.startAt&&(n+=", startAt: "+L_(e.startAt)),e.endAt&&(n+=", endAt: "+L_(e.endAt)),"Target("+n+")")+"; limitType="+t.an+")";var e,n}function a_(i,t){return e=i,n=t.key.path,(null!==e.collectionGroup?t.key.N(e.collectionGroup)&&e.path.T(n):oy.F(e.path)?e.path.isEqual(n):e.path.I(n))&&function(t){for(var e=0,n=i.on;e<n.length;e++){var r=n[e];if(!r.field.p()&&null===t.field(r.field))return}return 1}(t)&&function(t){for(var e=0,n=i.filters;e<n.length;e++)if(!n[e].matches(t))return;return 1}(t)&&(n=t,(!(t=i).startAt||M_(t.startAt,Zb(t),n))&&(!t.endAt||!M_(t.endAt,Zb(t),n)));var e,n}function u_(a){return function(t,e){for(var n=!1,r=0,i=Zb(a);r<i.length;r++){var o=i[r],s=function(t,r,e){e=t.field.p()?oy.i(r.key,e.key):function(t,e){var n=r.field(t),t=e.field(t);return null!==n&&null!==t?tm(n,t):Xv()}(t.field,e);switch(t.dir){case"asc":return e;case"desc":return-1*e;default:return Xv()}}(o,t,e);if(0!==s)return s;n=n||o.field.p()}return 0}}var c_,h_=(go(l_,c_=function(){}),l_.create=function(t,e,n){if(t.p())return"in"===e||"not-in"===e?this.ln(t,e,n):new v_(t,e,n);if(cm(n)){if("=="!==e&&"!="!==e)throw new qv(Vv.INVALID_ARGUMENT,"Invalid query. Null only supports '==' and '!=' comparisons.");return new l_(t,e,n)}if(hm(n)){if("=="!==e&&"!="!==e)throw new qv(Vv.INVALID_ARGUMENT,"Invalid query. NaN only supports '==' and '!=' comparisons.");return new l_(t,e,n)}return"array-contains"===e?new C_(t,n):"in"===e?new N_(t,n):"not-in"===e?new A_(t,n):"array-contains-any"===e?new k_(t,n):new l_(t,e,n)},l_.ln=function(t,e,n){return new("in"===e?y_:g_)(t,n)},l_.prototype.matches=function(t){t=t.field(this.field);return"!="===this.op?null!==t&&this._n(tm(t,this.value)):null!==t&&Jg(this.value)===Jg(t)&&this._n(tm(t,this.value))},l_.prototype._n=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return 0<t;case">=":return 0<=t;default:return Xv()}},l_.prototype.hn=function(){return 0<=["<","<=",">",">=","!=","not-in"].indexOf(this.op)},l_);function l_(t,e,n){var r=this;return(r=c_.call(this)||this).field=t,r.op=e,r.value=n,r}var f_,p_,d_,v_=(go(__,d_=h_),__.prototype.matches=function(t){t=oy.i(t.key,this.key);return this._n(t)},__),y_=(go(b_,p_=h_),b_.prototype.matches=function(e){return this.keys.some(function(t){return t.isEqual(e.key)})},b_),g_=(go(m_,f_=h_),m_.prototype.matches=function(e){return!this.keys.some(function(t){return t.isEqual(e.key)})},m_);function m_(t,e){var n=this;return(n=f_.call(this,t,"not-in",e)||this).keys=w_(0,e),n}function b_(t,e){var n=this;return(n=p_.call(this,t,"in",e)||this).keys=w_(0,e),n}function __(t,e,n){var r=this;return(r=d_.call(this,t,e,n)||this).key=oy.C(n.referenceValue),r}function w_(t,e){return((null===(e=e.arrayValue)||void 0===e?void 0:e.values)||[]).map(function(t){return oy.C(t.referenceValue)})}var E_,I_,T_,S_,C_=(go(x_,S_=h_),x_.prototype.matches=function(t){t=t.field(this.field);return um(t)&&Zg(t.arrayValue,this.value)},x_),N_=(go(D_,T_=h_),D_.prototype.matches=function(t){t=t.field(this.field);return null!==t&&Zg(this.value.arrayValue,t)},D_),A_=(go(P_,I_=h_),P_.prototype.matches=function(t){if(Zg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;t=t.field(this.field);return null!==t&&!Zg(this.value.arrayValue,t)},P_),k_=(go(R_,E_=h_),R_.prototype.matches=function(t){var e=this,t=t.field(this.field);return!(!um(t)||!t.arrayValue.values)&&t.arrayValue.values.some(function(t){return Zg(e.value.arrayValue,t)})},R_),O_=function(t,e){this.position=t,this.before=e};function R_(t,e){return E_.call(this,t,"array-contains-any",e)||this}function P_(t,e){return I_.call(this,t,"not-in",e)||this}function D_(t,e){return T_.call(this,t,"in",e)||this}function x_(t,e){return S_.call(this,t,"array-contains",e)||this}function L_(t){return(t.before?"b":"a")+":"+t.position.map(nm).join(",")}function M_(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i],r=o.field.p()?oy.i(oy.C(s.referenceValue),n.key):tm(s,n.field(o.field));if("desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function F_(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!$g(t.position[n],e.position[n]))return!1;return!0}var U_=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function j_(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}var V_,q_=(Y_.prototype.reset=function(){this.En=0},Y_.prototype.Rn=function(){this.En=this.Tn},Y_.prototype.gn=function(t){var e=this;this.cancel();var n=Math.floor(this.En+this.Pn()),r=Math.max(0,Date.now()-this.An),i=Math.max(0,n-r);0<i&&Gv("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.En+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.In=this.fn.yn(this.dn,i,function(){return e.An=Date.now(),t()}),this.En*=this.mn,this.En<this.wn&&(this.En=this.wn),this.En>this.Tn&&(this.En=this.Tn)},Y_.prototype.Vn=function(){null!==this.In&&(this.In.pn(),this.In=null)},Y_.prototype.cancel=function(){null!==this.In&&(this.In.cancel(),this.In=null)},Y_.prototype.Pn=function(){return(Math.random()-.5)*this.En},Y_),B_=(X_.prototype.catch=function(t){return this.next(void 0,t)},X_.prototype.next=function(r,i){var o=this;return this.Dn&&Xv(),this.Dn=!0,this.Sn?this.error?this.Cn(i,this.error):this.Nn(r,this.result):new X_(function(e,n){o.bn=function(t){o.Nn(r,t).next(e,n)},o.vn=function(t){o.Cn(i,t).next(e,n)}})},X_.prototype.Fn=function(){var n=this;return new Promise(function(t,e){n.next(t,e)})},X_.prototype.xn=function(t){try{var e=t();return e instanceof X_?e:X_.resolve(e)}catch(t){return X_.reject(t)}},X_.prototype.Nn=function(t,e){return t?this.xn(function(){return t(e)}):X_.resolve(e)},X_.prototype.Cn=function(t,e){return t?this.xn(function(){return t(e)}):X_.reject(e)},X_.resolve=function(n){return new X_(function(t,e){t(n)})},X_.reject=function(n){return new X_(function(t,e){e(n)})},X_.$n=function(t){return new X_(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(t){return n(t)})}),o=!0,i===r&&e()})},X_.kn=function(t){for(var n=X_.resolve(!1),e=0,r=t;e<r.length;e++)!function(e){n=n.next(function(t){return t?X_.resolve(t):e()})}(r[e]);return n},X_.forEach=function(t,n){var r=this,i=[];return t.forEach(function(t,e){i.push(n.call(r,t,e))}),this.$n(i)},X_),W_=(Q_.delete=function(t){return Gv("SimpleDb","Removing database:",t),nw(window.indexedDB.deleteDatabase(t)).Fn()},Q_.Ln=function(){if("undefined"==typeof indexedDB)return!1;if(Q_.Bn())return!0;var t=Lo(),e=Q_.On(t),n=0<e&&e<10,e=Q_.qn(t),e=0<e&&e<4.5;return!(0<t.indexOf("MSIE ")||0<t.indexOf("Trident/")||0<t.indexOf("Edge/")||n||e)},Q_.Bn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Un)},Q_.Qn=function(t,e){return t.store(e)},Q_.On=function(t){t=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),t=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(t)},Q_.qn=function(t){t=t.match(/Android ([\d.]+)/i),t=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(t)},Q_.prototype.Wn=function(o){return bo(this,void 0,void 0,function(){var e,i=this;return _o(this,function(t){switch(t.label){case 0:return this.db?[3,2]:(Gv("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,n){var r=indexedDB.open(i.name,i.version);r.onsuccess=function(t){t=t.target.result;e(t)},r.onblocked=function(){n(new G_(o,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=function(t){t=t.target.error;"VersionError"===t.name?n(new qv(Vv.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):n(new G_(o,t))},r.onupgradeneeded=function(t){Gv("SimpleDb",'Database "'+i.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;i.Mn.createOrUpgrade(e,r.transaction,t.oldVersion,i.version).next(function(){Gv("SimpleDb","Database upgrade to version "+i.version+" complete")})}})]);case 1:e.db=t.sent(),t.label=2;case 2:return[2,(this.jn&&(this.db.onversionchange=function(t){return i.jn(t)}),this.db)]}})})},Q_.prototype.Kn=function(e){this.jn=e,this.db&&(this.db.onversionchange=function(t){return e(t)})},Q_.prototype.runTransaction=function(a,n,u,c){return bo(this,void 0,void 0,function(){var i,o,s,e;return _o(this,function(t){switch(t.label){case 0:i="readonly"===n,o=0,e=function(){var e,n,r;return _o(this,function(t){switch(t.label){case 0:++o,t.label=1;case 1:return t.trys.push([1,4,,5]),[4,s.Wn(a)];case 2:return s.db=t.sent(),e=$_.open(s.db,a,i?"readonly":"readwrite",u),n=c(e).catch(function(t){return e.abort(t),B_.reject(t)}).Fn(),r={},n.catch(function(){}),[4,e.Gn];case 3:return[2,(r.value=(t.sent(),n),r)];case 4:return n=t.sent(),r="FirebaseError"!==n.name&&o<3,Gv("SimpleDb","Transaction failed with error:",n.message,"Retrying:",r),s.close(),r?[3,5]:[2,{value:Promise.reject(n)}];case 5:return[2]}})},s=this,t.label=1;case 1:return[5,e()];case 2:if("object"==typeof(e=t.sent()))return[2,e.value];t.label=3;case 3:return[3,1];case 4:return[2]}})})},Q_.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},Q_),H_=(Object.defineProperty(z_.prototype,"Sn",{get:function(){return this.Hn},enumerable:!1,configurable:!0}),Object.defineProperty(z_.prototype,"Jn",{get:function(){return this.Yn},enumerable:!1,configurable:!0}),Object.defineProperty(z_.prototype,"cursor",{set:function(t){this.zn=t},enumerable:!1,configurable:!0}),z_.prototype.done=function(){this.Hn=!0},z_.prototype.Xn=function(t){this.Yn=t},z_.prototype.delete=function(){return nw(this.zn.delete())},z_),G_=(go(K_,V_=qv),K_);function K_(t,e){var n=this;return(n=V_.call(this,Vv.UNAVAILABLE,"IndexedDB transaction '"+t+"' failed: "+e)||this).name="IndexedDbTransactionError",n}function z_(t){this.zn=t,this.Hn=!1,this.Yn=null}function Q_(t,e,n){this.name=t,this.version=e,this.Mn=n,12.2===Q_.On(Lo())&&Kv("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}function X_(t){var e=this;this.bn=null,this.vn=null,this.result=void 0,this.error=void 0,this.Sn=!1,this.Dn=!1,t(function(t){e.Sn=!0,e.result=t,e.bn&&e.bn(t)},function(t){e.Sn=!0,e.error=t,e.vn&&e.vn(t)})}function Y_(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.fn=t,this.dn=e,this.wn=n,this.mn=r,this.Tn=i,this.En=0,this.In=null,this.An=Date.now(),this.reset()}function J_(t){return"IndexedDbTransactionError"===t.name}var $_=(ew.open=function(t,e,n,r){try{return new ew(e,t.transaction(r,n))}catch(t){throw new G_(e,t)}},Object.defineProperty(ew.prototype,"Gn",{get:function(){return this.Zn.promise},enumerable:!1,configurable:!0}),ew.prototype.abort=function(t){t&&this.Zn.reject(t),this.aborted||(Gv("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},ew.prototype.store=function(t){t=this.transaction.objectStore(t);return new Z_(t)},ew),Z_=(tw.prototype.put=function(t,e){t=void 0!==e?(Gv("SimpleDb","PUT",this.store.name,t,e),this.store.put(e,t)):(Gv("SimpleDb","PUT",this.store.name,"<auto-key>",t),this.store.put(t));return nw(t)},tw.prototype.add=function(t){return Gv("SimpleDb","ADD",this.store.name,t,t),nw(this.store.add(t))},tw.prototype.get=function(e){var n=this;return nw(this.store.get(e)).next(function(t){return void 0===t&&(t=null),Gv("SimpleDb","GET",n.store.name,e,t),t})},tw.prototype.delete=function(t){return Gv("SimpleDb","DELETE",this.store.name,t),nw(this.store.delete(t))},tw.prototype.count=function(){return Gv("SimpleDb","COUNT",this.store.name),nw(this.store.count())},tw.prototype.ts=function(t,e){var e=this.cursor(this.options(t,e)),n=[];return this.es(e,function(t,e){n.push(e)}).next(function(){return n})},tw.prototype.ns=function(t,e){Gv("SimpleDb","DELETE ALL",this.store.name);e=this.options(t,e);e.ss=!1;e=this.cursor(e);return this.es(e,function(t,e,n){return n.delete()})},tw.prototype.rs=function(t,e){e?n=t:(n={},e=t);var n=this.cursor(n);return this.es(n,e)},tw.prototype.os=function(r){var t=this.cursor({});return new B_(function(n,e){t.onerror=function(t){t=iw(t.target.error);e(t)},t.onsuccess=function(t){var e=t.target.result;e?r(e.primaryKey,e.value).next(function(t){t?e.continue():n()}):n()}})},tw.prototype.es=function(t,i){var o=[];return new B_(function(r,e){t.onerror=function(t){e(t.target.error)},t.onsuccess=function(t){var e,n=t.target.result;n?(e=new H_(n),(t=i(n.primaryKey,n.value,e))instanceof B_&&(t=t.catch(function(t){return e.done(),B_.reject(t)}),o.push(t)),e.Sn?r():null===e.Jn?n.continue():n.continue(e.Jn)):r()}}).next(function(){return B_.$n(o)})},tw.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},tw.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.ss?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},tw);function tw(t){this.store=t}function ew(e,t){var n=this;this.action=e,this.transaction=t,this.aborted=!1,this.Zn=new j_,this.transaction.oncomplete=function(){n.Zn.resolve()},this.transaction.onabort=function(){t.error?n.Zn.reject(new G_(e,t.error)):n.Zn.resolve()},this.transaction.onerror=function(t){t=iw(t.target.error);n.Zn.reject(new G_(e,t))}}function nw(t){return new B_(function(e,n){t.onsuccess=function(t){t=t.target.result;e(t)},t.onerror=function(t){t=iw(t.target.error);n(t)}})}var rw=!1;function iw(t){var e=W_.On(Lo());if(12.2<=e&&e<13){e="An internal error was encountered in the Indexed Database server";if(0<=t.message.indexOf(e)){var n=new qv("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+e+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return rw||(rw=!0,setTimeout(function(){throw n},0)),n}}return t}function ow(){return"undefined"!=typeof window?window:null}function sw(){return"undefined"!=typeof document?document:null}var aw=(hw._s=function(t,e,n,r,i){i=new hw(t,e,Date.now()+n,r,i);return i.start(n),i},hw.prototype.start=function(t){var e=this;this.fs=setTimeout(function(){return e.ds()},t)},hw.prototype.pn=function(){return this.ds()},hw.prototype.cancel=function(t){null!==this.fs&&(this.clearTimeout(),this.ls.reject(new qv(Vv.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},hw.prototype.ds=function(){var e=this;this.cs.ws(function(){return null!==e.fs?(e.clearTimeout(),e.op().then(function(t){return e.ls.resolve(t)})):Promise.resolve()})},hw.prototype.clearTimeout=function(){null!==this.fs&&(this.hs(this),clearTimeout(this.fs),this.fs=null)},hw),uw=(Object.defineProperty(cw.prototype,"ps",{get:function(){return this.Is},enumerable:!1,configurable:!0}),cw.prototype.ws=function(t){this.enqueue(t)},cw.prototype.bs=function(t){this.vs(),this.Ss(t)},cw.prototype.Ds=function(){var t;this.Is||(this.Is=!0,(t=sw())&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vs))},cw.prototype.enqueue=function(t){return this.vs(),this.Is?new Promise(function(t){}):this.Ss(t)},cw.prototype.Cs=function(t){var e=this;this.ws(function(){return e.Es.push(t),e.Ns()})},cw.prototype.Ns=function(){return bo(this,void 0,void 0,function(){var e,n=this;return _o(this,function(t){switch(t.label){case 0:if(0===this.Es.length)return[3,5];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.Es[0]()];case 2:return t.sent(),this.Es.shift(),this.ys.reset(),[3,4];case 3:if(!J_(e=t.sent()))throw e;return Gv("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:0<this.Es.length&&this.ys.gn(function(){return n.Ns()}),t.label=5;case 5:return[2]}})})},cw.prototype.Ss=function(t){var r=this,e=this.Ts.then(function(){return r.gs=!0,t().catch(function(t){throw r.Rs=t,r.gs=!1,Kv("INTERNAL UNHANDLED ERROR: ",(n=(e=t).message||"",e.stack&&(n=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),n)),t;var e,n}).then(function(t){return r.gs=!1,t})});return this.Ts=e},cw.prototype.yn=function(t,e,n){var r=this;this.vs(),-1<this.Ps.indexOf(t)&&(e=0);n=aw._s(this,t,e,n,function(t){return r.Fs(t)});return this.As.push(n),n},cw.prototype.vs=function(){this.Rs&&Xv()},cw.prototype.xs=function(){},cw.prototype.$s=function(){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return[4,e=this.Ts];case 1:t.sent(),t.label=2;case 2:if(e!==this.Ts)return[3,0];t.label=3;case 3:return[2]}})})},cw.prototype.ks=function(t){for(var e=0,n=this.As;e<n.length;e++)if(n[e].dn===t)return!0;return!1},cw.prototype.Ms=function(r){var i=this;return this.$s().then(function(){i.As.sort(function(t,e){return t.us-e.us});for(var t=0,e=i.As;t<e.length;t++){var n=e[t];if(n.pn(),"all"!==r&&n.dn===r)break}return i.$s()})},cw.prototype.Os=function(t){this.Ps.push(t)},cw.prototype.Fs=function(t){t=this.As.indexOf(t);this.As.splice(t,1)},cw);function cw(){var e=this;this.Ts=Promise.resolve(),this.Es=[],this.Is=!1,this.As=[],this.Rs=null,this.gs=!1,this.Ps=[],this.ys=new q_(this,"async_queue_retry"),this.Vs=function(){var t=sw();t&&Gv("AsyncQueue","Visibility state changed to  ",t.visibilityState),e.ys.Vn()};var t=sw();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vs)}function hw(t,e,n,r,i){this.cs=t,this.dn=e,this.us=n,this.op=r,this.hs=i,this.ls=new j_,this.then=this.ls.promise.then.bind(this.ls.promise),this.ls.promise.catch(function(t){})}function lw(t,e){if(Kv("AsyncQueue",e+": "+t),J_(t))return new qv(Vv.UNAVAILABLE,e+": "+t);throw t}function fw(){this.Ls=void 0,this.listeners=[]}function pw(){this.Bs=new Hy(o_,i_),this.onlineState="Unknown",this.qs=new Set}function dw(s,a){return bo(this,void 0,void 0,function(){var e,n,r,i,o;return _o(this,function(t){switch(t.label){case 0:if(e=s,n=a.query,r=!1,(i=e.Bs.get(n))||(r=!0,i=new fw),!r)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),o=i,[4,e.Us(n)];case 2:return o.Ls=t.sent(),[3,4];case 3:return o=t.sent(),o=lw(o,"Initialization of query '"+s_(a.query)+"' failed"),[2,void a.onError(o)];case 4:return e.Bs.set(n,i),i.listeners.push(a),a.Qs(e.onlineState),i.Ls&&a.Ws(i.Ls)&&yw(e),[2]}})})}function vw(s,a){return bo(this,void 0,void 0,function(){var e,n,r,i,o;return _o(this,function(t){return e=s,n=a.query,r=!1,(i=e.Bs.get(n))&&0<=(o=i.listeners.indexOf(a))&&(i.listeners.splice(o,1),r=0===i.listeners.length),r?[2,(e.Bs.delete(n),e.js(n))]:[2]})})}function yw(t){t.qs.forEach(function(t){t.next()})}var gw=(_w.prototype.Ws=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Rg(t.query,t.docs,t.Qt,e,t.Wt,t.fromCache,t.jt,!0)}var o=!1;return this.Gs?this.Hs(t)&&(this.Ks.next(t),o=!0):this.Ys(t,this.onlineState)&&(this.Js(t),o=!0),this.zs=t,o},_w.prototype.onError=function(t){this.Ks.error(t)},_w.prototype.Qs=function(t){this.onlineState=t;var e=!1;return this.zs&&!this.Gs&&this.Ys(this.zs,t)&&(this.Js(this.zs),e=!0),e},_w.prototype.Ys=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.Xs&&n||t.docs.m()&&"Offline"!==e)},_w.prototype.Hs=function(t){if(0<t.docChanges.length)return!0;var e=this.zs&&this.zs.hasPendingWrites!==t.hasPendingWrites;return!(!t.jt&&!e)&&!0===this.options.includeMetadataChanges},_w.prototype.Js=function(t){t=Rg.Gt(t.query,t.docs,t.Wt,t.fromCache),this.Gs=!0,this.Ks.next(t)},_w),mw=(bw.prototype.Zs=function(){return null!=this.uid},bw.prototype.ti=function(){return this.Zs()?"uid:"+this.uid:"anonymous-user"},bw.prototype.isEqual=function(t){return t.uid===this.uid},bw);function bw(t){this.uid=t}function _w(t,e,n){this.query=t,this.Ks=e,this.Gs=!1,this.zs=null,this.onlineState="Unknown",this.options=n||{}}mw.UNAUTHENTICATED=new mw(null),mw.ei=new mw("google-credentials-uid"),mw.ni=new mw("first-party-uid");var ww=(Ew.prototype.ii=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},Ew.prototype.next=function(){var t=++this.previousValue;return this.ri&&this.ri(t),t},Ew);function Ew(t,e){var n=this;this.previousValue=t,e&&(e.si=function(t){return n.ii(t)},this.ri=function(t){return e.oi(t)})}function Iw(t,e){return"firestore_clients_"+t+"_"+e}function Tw(t,e,n){n="firestore_mutations_"+t+"_"+n;return e.Zs()&&(n+="_"+e.uid),n}function Sw(t,e){return"firestore_targets_"+t+"_"+e}ww.ai=-1;var Cw=(Yw.ci=function(t,e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new qv(r.error.code,r.error.message)),i?new Yw(t,e,r.state,o):(Kv("SharedClientState","Failed to parse mutation state for ID '"+e+"': "+n),null)},Yw.prototype.ui=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},Yw),Nw=(Xw.ci=function(t,e){var n=JSON.parse(e),r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error),i=void 0;return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(i=new qv(n.error.code,n.error.message)),r?new Xw(t,n.state,i):(Kv("SharedClientState","Failed to parse target state for ID '"+t+"': "+e),null)},Xw.prototype.ui=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},Xw),Aw=(Qw.ci=function(t,e){for(var n=JSON.parse(e),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Ag,o=0;r&&o<n.activeTargetIds.length;++o)r=tg(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new Qw(t,i):(Kv("SharedClientState","Failed to parse client data for instance '"+t+"': "+e),null)},Qw),kw=(zw.ci=function(t){var e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new zw(e.clientId,e.onlineState):(Kv("SharedClientState","Failed to parse online state: "+t),null)},zw),Ow=(Kw.prototype.hi=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},Kw.prototype.li=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},Kw.prototype.ui=function(){var t={activeTargetIds:this.activeTargetIds.A(),updateTimeMs:Date.now()};return JSON.stringify(t)},Kw),Rw=(Gw.Ln=function(t){return!(!t||!t.localStorage)},Gw.prototype.start=function(){return bo(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l=this;return _o(this,function(t){switch(t.label){case 0:return[4,this.fi.pi()];case 1:for(s=t.sent(),e=0,n=s;e<n.length;e++)(r=n[e])!==this._i&&(i=this.getItem(Iw(this.persistenceKey,r)))&&(o=Aw.ci(r,i))&&(this.Ti=this.Ti.ot(o.clientId,o));for(this.bi(),(s=this.storage.getItem(this.Vi))&&(a=this.vi(s))&&this.Si(a),u=0,c=this.Ii;u<c.length;u++)h=c[u],this.mi(h);return this.Ii=[],this.window.addEventListener("unload",function(){return l.Di()}),this.Ei=!0,[2]}})})},Gw.prototype.oi=function(t){this.setItem(this.Ri,JSON.stringify(t))},Gw.prototype.Ci=function(){return this.Ni(this.Ti)},Gw.prototype.Fi=function(n){var r=!1;return this.Ti.forEach(function(t,e){e.activeTargetIds.has(n)&&(r=!0)}),r},Gw.prototype.xi=function(t){this.$i(t,"pending")},Gw.prototype.ki=function(t,e,n){this.$i(t,e,n),this.Mi(t)},Gw.prototype.Oi=function(t){var e,n="not-current";return this.Fi(t)&&(!(e=this.storage.getItem(Sw(this.persistenceKey,t)))||(e=Nw.ci(t,e))&&(n=e.state)),this.Li.hi(t),this.bi(),n},Gw.prototype.Bi=function(t){this.Li.li(t),this.bi()},Gw.prototype.qi=function(t){return this.Li.activeTargetIds.has(t)},Gw.prototype.Ui=function(t){this.removeItem(Sw(this.persistenceKey,t))},Gw.prototype.Qi=function(t,e,n){this.Wi(t,e,n)},Gw.prototype.ji=function(t,e,n){var r=this;e.forEach(function(t){r.Mi(t)}),this.currentUser=t,n.forEach(function(t){r.xi(t)})},Gw.prototype.Ki=function(t){this.Gi(t)},Gw.prototype.Di=function(){this.Ei&&(this.window.removeEventListener("storage",this.wi),this.removeItem(this.Ai),this.Ei=!1)},Gw.prototype.getItem=function(t){var e=this.storage.getItem(t);return Gv("SharedClientState","READ",t,e),e},Gw.prototype.setItem=function(t,e){Gv("SharedClientState","SET",t,e),this.storage.setItem(t,e)},Gw.prototype.removeItem=function(t){Gv("SharedClientState","REMOVE",t),this.storage.removeItem(t)},Gw.prototype.mi=function(t){var e=this,s=t;if(s.storageArea===this.storage){if(Gv("SharedClientState","EVENT",s.key,s.newValue),s.key===this.Ai)return void Kv("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.fn.Cs(function(){return bo(e,void 0,void 0,function(){var e,n,r,i,o;return _o(this,function(t){if(this.Ei){if(null!==s.key)if(this.gi.test(s.key)){if(null==s.newValue)return e=this.zi(s.key),[2,this.Hi(e,null)];if(e=this.Yi(s.key,s.newValue))return[2,this.Hi(e.clientId,e)]}else if(this.Pi.test(s.key)){if(null!==s.newValue&&(n=this.Ji(s.key,s.newValue)))return[2,this.Xi(n)]}else if(this.yi.test(s.key)){if(null!==s.newValue&&(r=this.Zi(s.key,s.newValue)))return[2,this.tr(r)]}else if(s.key===this.Vi){if(null!==s.newValue&&(i=this.vi(s.newValue)))return[2,this.Si(i)]}else s.key===this.Ri&&(o=function(t){var e=ww.ai;if(null!=t)try{var n=JSON.parse(t);Yv("number"==typeof n),e=n}catch(t){Kv("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(s.newValue))!==ww.ai&&this.si(o)}else this.Ii.push(s);return[2]})})})}},Object.defineProperty(Gw.prototype,"Li",{get:function(){return this.Ti.get(this._i)},enumerable:!1,configurable:!0}),Gw.prototype.bi=function(){this.setItem(this.Ai,this.Li.ui())},Gw.prototype.$i=function(t,e,n){n=new Cw(this.currentUser,t,e,n),t=Tw(this.persistenceKey,this.currentUser,t);this.setItem(t,n.ui())},Gw.prototype.Mi=function(t){t=Tw(this.persistenceKey,this.currentUser,t);this.removeItem(t)},Gw.prototype.Gi=function(t){t={clientId:this._i,onlineState:t};this.storage.setItem(this.Vi,JSON.stringify(t))},Gw.prototype.Wi=function(t,e,n){var r=Sw(this.persistenceKey,t),n=new Nw(t,e,n);this.setItem(r,n.ui())},Gw.prototype.zi=function(t){t=this.gi.exec(t);return t?t[1]:null},Gw.prototype.Yi=function(t,e){t=this.zi(t);return Aw.ci(t,e)},Gw.prototype.Ji=function(t,e){var n=this.Pi.exec(t),t=Number(n[1]),n=void 0!==n[2]?n[2]:null;return Cw.ci(new mw(n),t,e)},Gw.prototype.Zi=function(t,e){t=this.yi.exec(t),t=Number(t[1]);return Nw.ci(t,e)},Gw.prototype.vi=function(t){return kw.ci(t)},Gw.prototype.Xi=function(e){return bo(this,void 0,void 0,function(){return _o(this,function(t){return e.user.uid===this.currentUser.uid?[2,this.fi.er(e.batchId,e.state,e.error)]:(Gv("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])})})},Gw.prototype.tr=function(t){return this.fi.nr(t.targetId,t.state,t.error)},Gw.prototype.Hi=function(t,e){var n=this,r=e?this.Ti.ot(t,e):this.Ti.remove(t),i=this.Ni(this.Ti),o=this.Ni(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.fi.sr(s,a).then(function(){n.Ti=r})},Gw.prototype.Si=function(t){this.Ti.get(t.clientId)&&this.di(t.onlineState)},Gw.prototype.Ni=function(t){var n=Ag;return t.forEach(function(t,e){n=n.kt(e.activeTargetIds)}),n},Gw),Pw=(Hw.prototype.xi=function(t){},Hw.prototype.ki=function(t,e,n){},Hw.prototype.Oi=function(t){return this.ir.hi(t),this.rr[t]||"not-current"},Hw.prototype.Qi=function(t,e,n){this.rr[t]=e},Hw.prototype.Bi=function(t){this.ir.li(t)},Hw.prototype.qi=function(t){return this.ir.activeTargetIds.has(t)},Hw.prototype.Ui=function(t){delete this.rr[t]},Hw.prototype.Ci=function(){return this.ir.activeTargetIds},Hw.prototype.Fi=function(t){return this.ir.activeTargetIds.has(t)},Hw.prototype.start=function(){return this.ir=new Ow,Promise.resolve()},Hw.prototype.ji=function(t,e,n){},Hw.prototype.Ki=function(t){},Hw.prototype.Di=function(){},Hw.prototype.oi=function(t){},Hw),Dw=(Ww.prototype.cr=function(t,e,n){for(var r=n.ur,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=lb(o,e,r[i]))}return e},Ww.prototype.hr=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=fb(i,e,e,this.ar))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=fb(u,e,o,this.ar))}return e},Ww.prototype.lr=function(n){var r=this,i=n;return this.mutations.forEach(function(t){var e=r.hr(t.key,n.get(t.key));e&&(i=i.ot(t.key,e))}),i},Ww.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Ng())},Ww.prototype.isEqual=function(t){return this.batchId===t.batchId&&Py(this.mutations,t.mutations,pb)&&Py(this.baseMutations,t.baseMutations,pb)},Ww),xw=(Bw.from=function(t,e,n){Yv(t.mutations.length===n.length);for(var r=Sg,i=t.mutations,o=0;o<i.length;o++)r=r.ot(i[o].key,n[o].version);return new Bw(t,e,n,r)},Bw),Dr=(Object.defineProperty(qw.prototype,"readTime",{get:function(){return this.Tr},set:function(t){this.Tr=t},enumerable:!1,configurable:!0}),qw.prototype.Er=function(t,e){this.Ir(),this.readTime=e,this.wr.set(t.key,t)},qw.prototype.Ar=function(t,e){this.Ir(),e&&(this.readTime=e),this.wr.set(t,null)},qw.prototype.Rr=function(t,e){this.Ir();var n=this.wr.get(e);return void 0!==n?B_.resolve(n):this.gr(t,e)},qw.prototype.getEntries=function(t,e){return this.Pr(t,e)},qw.prototype.apply=function(t){return this.Ir(),this.mr=!0,this.yr(t)},qw.prototype.Ir=function(){},qw),Lw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",M=(Vw.prototype.pr=function(t){this.Vr.push(t)},Vw.prototype.br=function(){this.Vr.forEach(function(t){return t()})},Vw),Mw=(jw.prototype.Cr=function(e,n){var r=this;return this.Sr.Nr(e,n).next(function(t){return r.Fr(e,n,t)})},jw.prototype.Fr=function(t,r,i){return this.vr.Rr(t,r).next(function(t){for(var e=0,n=i;e<n.length;e++)t=n[e].hr(r,t);return t})},jw.prototype.$r=function(t,e,i){var o=wg;return e.forEach(function(t,e){for(var n=0,r=i;n<r.length;n++)e=r[n].hr(t,e);o=o.ot(t,e)}),o},jw.prototype.kr=function(e,t){var n=this;return this.vr.getEntries(e,t).next(function(t){return n.Mr(e,t)})},jw.prototype.Mr=function(e,r){var i=this;return this.Sr.Or(e,r).next(function(t){var t=i.$r(e,r,t),n=wg;return t.forEach(function(t,e){e=e||new Vb(t,Ky.min()),n=n.ot(t,e)}),n})},jw.prototype.Lr=function(t,e,n){return r=e,oy.F(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.Br(t,e.path):$b(e)?this.qr(t,e,n):this.Ur(t,e,n);var r},jw.prototype.Br=function(t,e){return this.Cr(t,new oy(e)).next(function(t){var e=Tg;return t instanceof jb&&(e=e.ot(t.key,t)),e})},jw.prototype.qr=function(n,r,i){var o=this,s=r.collectionGroup,a=Tg;return this.Dr.Qr(n,s).next(function(t){return B_.forEach(t,function(t){var e,e=(e=r,t=t.child(s),new Bb(t,null,e.on.slice(),e.filters.slice(),e.limit,e.an,e.startAt,e.endAt));return o.Ur(n,e,i).next(function(t){t.forEach(function(t,e){a=a.ot(t,e)})})}).next(function(){return a})})},jw.prototype.Ur=function(e,n,t){var c,h,r=this;return this.vr.Lr(e,n,t).next(function(t){return c=t,r.Sr.Wr(e,n)}).next(function(t){return h=t,r.jr(e,h,c).next(function(t){c=t;for(var e=0,n=h;e<n.length;e++)for(var r=n[e],i=0,o=r.mutations;i<o.length;i++){var s=o[i],a=s.key,u=c.get(a),u=fb(s,u,u,r.ar);c=u instanceof jb?c.ot(a,u):c.remove(a)}})}).next(function(){return c.forEach(function(t,e){a_(n,e)||(c=c.remove(t))}),c})},jw.prototype.jr=function(t,e,n){for(var r=Ng(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof mb&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.vr.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof jb&&(c=c.ot(t,e))}),c})},jw),Fw=(Uw.zr=function(t,e){for(var n=Ng(),r=Ng(),i=0,o=e.docChanges;i<o.length;i++){var s=o[i];switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}}return new Uw(t,e.fromCache,n,r)},Uw);function Uw(t,e,n,r){this.targetId=t,this.fromCache=e,this.Kr=n,this.Gr=r}function jw(t,e,n){this.vr=t,this.Sr=e,this.Dr=n}function Vw(){this.Vr=[]}function qw(){this.wr=new Hy(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.mr=!1}function Bw(t,e,n,r){this.batch=t,this._r=e,this.ur=n,this.dr=r}function Ww(t,e,n,r){this.batchId=t,this.ar=e,this.baseMutations=n,this.mutations=r}function Hw(){this.ir=new Ow,this.rr={},this.di=null,this.si=null}function Gw(t,e,n,r,i){this.window=t,this.fn=e,this.persistenceKey=n,this._i=r,this.fi=null,this.di=null,this.si=null,this.wi=this.mi.bind(this),this.Ti=new fg(Ry),this.Ei=!1,this.Ii=[];n=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ai=Iw(this.persistenceKey,this._i),this.Ri="firestore_sequence_number_"+this.persistenceKey,this.Ti=this.Ti.ot(this._i,new Ow),this.gi=new RegExp("^firestore_clients_"+n+"_([^_]*)$"),this.Pi=new RegExp("^firestore_mutations_"+n+"_(\\d+)(?:_(.*))?$"),this.yi=new RegExp("^firestore_targets_"+n+"_(\\d+)$"),this.Vi="firestore_online_state_"+this.persistenceKey,this.window.addEventListener("storage",this.wi)}function Kw(){this.activeTargetIds=Ag}function zw(t,e){this.clientId=t,this.onlineState=e}function Qw(t,e){this.clientId=t,this.activeTargetIds=e}function Xw(t,e,n){this.targetId=t,this.state=e,this.error=n}function Yw(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}function Jw(t,e){var n=t[0],r=t[1],t=e[0],e=e[1],t=Ry(n,t);return 0===t?Ry(r,e):t}var $w=(nE.prototype.Jr=function(){return++this.Yr},nE.prototype.Xr=function(t){var e=[t,this.Jr()];this.buffer.size<this.Hr?this.buffer=this.buffer.add(e):Jw(e,t=this.buffer.last())<0&&(this.buffer=this.buffer.delete(t).add(e))},Object.defineProperty(nE.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),nE),Zw={Zr:!1,eo:0,no:0,so:0},tE=(eE.ao=function(t){return new eE(t,eE.co,eE.uo)},eE);function eE(t,e,n){this.io=t,this.ro=e,this.oo=n}function nE(t){this.Hr=t,this.buffer=new bg(Jw),this.Yr=0}tE.ho=-1,tE.lo=1048576,tE._o=41943040,tE.co=10,tE.uo=1e3,tE.fo=new tE(tE._o,tE.co,tE.uo),tE.do=new tE(tE.ho,0,0);var rE=(sE.prototype.start=function(t){this.wo.params.io!==tE.ho&&this.Eo(t)},sE.prototype.stop=function(){this.To&&(this.To.cancel(),this.To=null)},Object.defineProperty(sE.prototype,"Ei",{get:function(){return null!==this.To},enumerable:!1,configurable:!0}),sE.prototype.Eo=function(n){var t=this,e=this.mo?3e5:6e4;Gv("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.To=this.cs.yn("lru_garbage_collection",e,function(){return bo(t,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:this.To=null,this.mo=!0,t.label=1;case 1:return t.trys.push([1,3,,7]),[4,n.Io(this.wo)];case 2:return t.sent(),[3,7];case 3:return J_(e=t.sent())?(Gv("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,UI(e)];case 5:t.sent(),t.label=6;case 6:return[3,7];case 7:return[4,this.Eo(n)];case 8:return t.sent(),[2]}})})})},sE),iE=(oE.prototype.Ro=function(t,e){return this.Ao.Po(t).next(function(t){return Math.floor(e/100*t)})},oE.prototype.yo=function(t,e){var n=this;if(0===e)return B_.resolve(ww.ai);var r=new $w(e);return this.Ao.Ce(t,function(t){return r.Xr(t.sequenceNumber)}).next(function(){return n.Ao.Vo(t,function(t){return r.Xr(t)})}).next(function(){return r.maxValue})},oE.prototype.po=function(t,e,n){return this.Ao.po(t,e,n)},oE.prototype.bo=function(t,e){return this.Ao.bo(t,e)},oE.prototype.vo=function(e,n){var r=this;return this.params.io===tE.ho?(Gv("LruGarbageCollector","Garbage collection skipped; disabled"),B_.resolve(Zw)):this.So(e).next(function(t){return t<r.params.io?(Gv("LruGarbageCollector","Garbage collection skipped; Cache size "+t+" is lower than threshold "+r.params.io),Zw):r.Do(e,n)})},oE.prototype.So=function(t){return this.Ao.So(t)},oE.prototype.Do=function(e,n){var r,i,o,s,a,u,c,h=this,l=Date.now();return this.Ro(e,this.params.ro).next(function(t){return i=t>h.params.oo?(Gv("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.params.oo+" from "+t),h.params.oo):t,s=Date.now(),h.yo(e,i)}).next(function(t){return r=t,a=Date.now(),h.po(e,r,n)}).next(function(t){return o=t,u=Date.now(),h.bo(e,r)}).next(function(t){return c=Date.now(),Hv()<=Ns.DEBUG&&Gv("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-l)+"ms\n\tDetermined least recently used "+i+" in "+(a-s)+"ms\n\tRemoved "+o+" targets in "+(u-a)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-l)+"ms"),B_.resolve({Zr:!0,eo:i,no:o,so:t})})},oE);function oE(t,e){this.Ao=t,this.params=e}function sE(t,e){this.wo=t,this.cs=e,this.mo=!1,this.To=null}function aE(t){for(var e="",n=0;n<t.length;n++)0<e.length&&(e=uE(e)),e=function(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}(t.get(n),e);return uE(e)}function uE(t){return t+""}function cE(t){var e=t.length;if(Yv(2<=e),2===e)return Yv(""===t.charAt(0)&&""===t.charAt(1)),ny.P();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||n<s)&&Xv(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:Xv()}o=s+2}return new ny(r)}var hE=function(t){this.Co=t};function lE(t,e){if(e.document)return n=t.Co,r=e.document,i=!!e.hasCommittedMutations,t=Tm(n,r.name),n=_m(r.updateTime),r=new Ob({mapValue:{fields:r.fields}}),new jb(t,n,r,{hasCommittedMutations:!!i});var n,r;if(e.noDocument){var i=oy.$(e.noDocument.path),o=yE(e.noDocument.readTime);return new Vb(i,o,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){o=oy.$(e.unknownDocument.path),e=yE(e.unknownDocument.version);return new qb(o,e)}return Xv()}function fE(t,e,n){var r=pE(n),n=e.key.path.h().A();if(e instanceof jb){var i={name:Im(i=t.Co,(o=e).key),fields:o.rn().mapValue.fields,updateTime:mm(i,o.version.Z())},o=e.hasCommittedMutations;return new YE(null,null,i,o,r,n)}if(e instanceof Vb){var i=e.key.path.A(),o=vE(e.version),s=e.hasCommittedMutations;return new YE(null,new QE(i,o),null,s,r,n)}if(e instanceof qb){s=e.key.path.A(),e=vE(e.version);return new YE(new XE(s,e),null,null,!0,r,n)}return Xv()}function pE(t){t=t.Z();return[t.seconds,t.nanoseconds]}function dE(t){t=new Gy(t[0],t[1]);return Ky.J(t)}function vE(t){t=t.Z();return new jE(t.seconds,t.nanoseconds)}function yE(t){t=new Gy(t.seconds,t.nanoseconds);return Ky.J(t)}function gE(e,t){var n=(t.baseMutations||[]).map(function(t){return Rm(e.Co,t)}),r=t.mutations.map(function(t){return Rm(e.Co,t)}),i=Gy.fromMillis(t.localWriteTimeMs);return new Dw(t.batchId,i,n,r)}function mE(t){var e=yE(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?yE(t.lastLimboFreeSnapshotVersion):Ky.min(),r=void 0!==t.query.documents?(Yv(1===(r=t.query).documents.length),t_(zb(Cm(r.documents[0])))):xm(t.query);return new ug(r,t.targetId,0,t.lastListenSequenceNumber,e,n,xy.fromBase64String(t.resumeToken))}function bE(t,e){var n=vE(e.nt),r=vE(e.lastLimboFreeSnapshotVersion),i=(og(e.target)?Pm:Dm)(t.Co,e.target),t=e.resumeToken.toBase64();return new $E(e.targetId,rg(e.target),n,t,e.sequenceNumber,r,i)}var _E=(wE.xo=function(t,e,n,r){return Yv(""!==t.uid),new wE(t.Zs()?t.uid:"",e,n,r)},wE.prototype.$o=function(t){var r=!0,e=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return TE(t).rs({index:GE.userMutationsIndex,range:e},function(t,e,n){r=!1,n.done()}).next(function(){return r})},wE.prototype.ko=function(d,v,y,g){var m=this,b=SE(d),_=TE(d);return _.add({}).next(function(t){Yv("number"==typeof t);for(var e,n,r,i,o,s=new Dw(t,v,y,g),a=(e=m.serializer,n=m.userId,i=(r=s).baseMutations.map(function(t){return Om(e.Co,t)}),o=r.mutations.map(function(t){return Om(e.Co,t)}),new GE(n,r.batchId,r.ar.toMillis(),i,o)),u=[],c=new bg(function(t,e){return Ry(t.R(),e.R())}),h=0,l=g;h<l.length;h++){var f=l[h],p=KE.key(m.userId,f.key.path,t),c=c.add(f.key.path.h());u.push(_.put(a)),u.push(b.put(p,KE.PLACEHOLDER))}return c.forEach(function(t){u.push(m.Dr.Mo(d,t))}),d.pr(function(){m.Fo[t]=s.keys()}),B_.$n(u).next(function(){return s})})},wE.prototype.Oo=function(t,e){var n=this;return TE(t).get(e).next(function(t){return t?(Yv(t.userId===n.userId),gE(n.serializer,t)):null})},wE.prototype.Lo=function(t,e){var n=this;return this.Fo[e]?B_.resolve(this.Fo[e]):this.Oo(t,e).next(function(t){if(t){t=t.keys();return n.Fo[e]=t}return null})},wE.prototype.Bo=function(t,e){var r=this,i=e+1,e=IDBKeyRange.lowerBound([this.userId,i]),o=null;return TE(t).rs({index:GE.userMutationsIndex,range:e},function(t,e,n){e.userId===r.userId&&(Yv(e.batchId>=i),o=gE(r.serializer,e)),n.done()}).next(function(){return o})},wE.prototype.qo=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return TE(t).rs({index:GE.userMutationsIndex,range:e,reverse:!0},function(t,e,n){r=e.batchId,n.done()}).next(function(){return r})},wE.prototype.Uo=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return TE(t).ts(GE.userMutationsIndex,n).next(function(t){return t.map(function(t){return gE(e.serializer,t)})})},wE.prototype.Nr=function(o,s){var a=this,t=KE.prefixForPath(this.userId,s.path),t=IDBKeyRange.lowerBound(t),u=[];return SE(o).rs({range:t},function(t,e,n){var r=t[0],i=t[1],t=t[2],i=cE(i);if(r===a.userId&&s.path.isEqual(i))return TE(o).get(t).next(function(t){if(!t)throw Xv();Yv(t.userId===a.userId),u.push(gE(a.serializer,t))});n.done()}).next(function(){return u})},wE.prototype.Or=function(e,t){var s=this,a=new bg(Ry),n=[];return t.forEach(function(o){var t=KE.prefixForPath(s.userId,o.path),t=IDBKeyRange.lowerBound(t),t=SE(e).rs({range:t},function(t,e,n){var r=t[0],i=t[1],t=t[2],i=cE(i);r===s.userId&&o.path.isEqual(i)?a=a.add(t):n.done()});n.push(t)}),B_.$n(n).next(function(){return s.Qo(e,a)})},wE.prototype.Wr=function(t,e){var o=this,s=e.path,a=s.length+1,e=KE.prefixForPath(this.userId,s),e=IDBKeyRange.lowerBound(e),u=new bg(Ry);return SE(t).rs({range:e},function(t,e,n){var r=t[0],i=t[1],t=t[2],i=cE(i);r===o.userId&&s.T(i)?i.length===a&&(u=u.add(t)):n.done()}).next(function(){return o.Qo(t,u)})},wE.prototype.Qo=function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(TE(e).get(t).next(function(t){if(null===t)throw Xv();Yv(t.userId===n.userId),r.push(gE(n.serializer,t))}))}),B_.$n(i).next(function(){return r})},wE.prototype.Wo=function(e,n){var r=this;return IE(e.jo,this.userId,n).next(function(t){return e.pr(function(){r.Ko(n.batchId)}),B_.forEach(t,function(t){return r.No.Go(e,t)})})},wE.prototype.Ko=function(t){delete this.Fo[t]},wE.prototype.zo=function(e){var i=this;return this.$o(e).next(function(t){if(!t)return B_.resolve();var t=IDBKeyRange.lowerBound(KE.prefixForUser(i.userId)),r=[];return SE(e).rs({range:t},function(t,e,n){t[0]===i.userId?(t=cE(t[1]),r.push(t)):n.done()}).next(function(){Yv(0===r.length)})})},wE.prototype.Ho=function(t,e){return EE(t,this.userId,e)},wE.prototype.Yo=function(t){var e=this;return CE(t).get(this.userId).next(function(t){return t||new HE(e.userId,-1,"")})},wE);function wE(t,e,n,r){this.userId=t,this.serializer=e,this.Dr=n,this.No=r,this.Fo={}}function EE(t,o,e){var e=KE.prefixForPath(o,e.path),s=e[1],e=IDBKeyRange.lowerBound(e),a=!1;return SE(t).rs({range:e,ss:!0},function(t,e,n){var r=t[0],i=t[1];t[2],r===o&&i===s&&(a=!0),n.done()}).next(function(){return a})}function IE(t,e,n){var r=t.store(GE.store),i=t.store(KE.store),o=[],t=IDBKeyRange.only(n.batchId),s=0,t=r.rs({range:t},function(t,e,n){return s++,n.delete()});o.push(t.next(function(){Yv(1===s)}));for(var a=[],u=0,c=n.mutations;u<c.length;u++){var h=c[u],l=KE.key(e,h.key.path,n.batchId);o.push(i.delete(l)),a.push(h.key)}return B_.$n(o).next(function(){return a})}function TE(t){return mI.Qn(t,GE.store)}function SE(t){return mI.Qn(t,KE.store)}function CE(t){return mI.Qn(t,HE.store)}var NE,AE=(RE.prototype.Er=function(t,e,n){return DE(t).put(xE(e),n)},RE.prototype.Ar=function(t,e){t=DE(t),e=xE(e);return t.delete(e)},RE.prototype.updateMetadata=function(e,n){var r=this;return this.getMetadata(e).next(function(t){return t.byteSize+=n,r.Jo(e,t)})},RE.prototype.Rr=function(t,e){var n=this;return DE(t).get(xE(e)).next(function(t){return n.Xo(t)})},RE.prototype.Zo=function(t,e){var n=this;return DE(t).get(xE(e)).next(function(t){var e=n.Xo(t);return e?{ta:e,size:LE(t)}:null})},RE.prototype.getEntries=function(t,e){var n=this,r=wg;return this.ea(t,e,function(t,e){e=n.Xo(e);r=r.ot(t,e)}).next(function(){return r})},RE.prototype.na=function(t,e){var r=this,i=wg,o=new fg(oy.i);return this.ea(t,e,function(t,e){var n=r.Xo(e);o=n?(i=i.ot(t,n),o.ot(t,LE(e))):(i=i.ot(t,null),o.ot(t,0))}).next(function(){return{sa:i,ia:o}})},RE.prototype.ea=function(t,e,i){if(e.m())return B_.resolve();var n=IDBKeyRange.bound(e.first().path.A(),e.last().path.A()),o=e._t(),s=o.It();return DE(t).rs({range:n},function(t,e,n){for(var r=oy.$(t);s&&oy.i(s,r)<0;)i(s,null),s=o.It();s&&s.isEqual(r)&&(i(s,e),s=o.At()?o.It():null),s?n.Xn(s.path.A()):n.done()}).next(function(){for(;s;)i(s,null),s=o.At()?o.It():null})},RE.prototype.Lr=function(t,r,e){var n,i=this,o=Tg,s=r.path.length+1,a={};return e.isEqual(Ky.min())?(n=r.path.A(),a.range=IDBKeyRange.lowerBound(n)):(n=r.path.A(),e=pE(e),a.range=IDBKeyRange.lowerBound([n,e],!0),a.index=YE.collectionReadTimeIndex),DE(t).rs(a,function(t,e,n){t.length===s&&(e=lE(i.serializer,e),r.path.T(e.key.path)?e instanceof jb&&a_(r,e)&&(o=o.ot(e.key,e)):n.done())}).next(function(){return o})},RE.prototype.ra=function(t){return new kE(this,!!t&&t.oa)},RE.prototype.aa=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},RE.prototype.getMetadata=function(t){return PE(t).get(JE.key).next(function(t){return Yv(!!t),t})},RE.prototype.Jo=function(t,e){return PE(t).put(JE.key,e)},RE.prototype.Xo=function(t){if(t){t=lE(this.serializer,t);return t instanceof Vb&&t.version.isEqual(Ky.min())?null:t}return null},RE),kE=(go(OE,NE=Dr),OE.prototype.yr=function(i){var o=this,s=[],a=0,u=new bg(function(t,e){return Ry(t.R(),e.R())});return this.wr.forEach(function(t,e){var n,r=o.ua.get(t);e?(n=fE(o.ca.serializer,e,o.readTime),u=u.add(t.path.h()),e=LE(n),a+=e-r,s.push(o.ca.Er(i,t,n))):(a-=r,o.oa?(r=fE(o.ca.serializer,new Vb(t,Ky.min()),o.readTime),s.push(o.ca.Er(i,t,r))):s.push(o.ca.Ar(i,t)))}),u.forEach(function(t){s.push(o.ca.Dr.Mo(i,t))}),s.push(this.ca.updateMetadata(i,a)),B_.$n(s)},OE.prototype.gr=function(t,e){var n=this;return this.ca.Zo(t,e).next(function(t){return null===t?(n.ua.set(e,0),null):(n.ua.set(e,t.size),t.ta)})},OE.prototype.Pr=function(t,e){var n=this;return this.ca.na(t,e).next(function(t){var e=t.sa;return t.ia.forEach(function(t,e){n.ua.set(t,e)}),e})},OE);function OE(t,e){var n=this;return(n=NE.call(this)||this).ca=t,n.oa=e,n.ua=new Hy(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),n}function RE(t,e){this.serializer=t,this.Dr=e}function PE(t){return mI.Qn(t,JE.store)}function DE(t){return mI.Qn(t,YE.store)}function xE(t){return t.path.A()}function LE(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Xv();e=t.noDocument}return JSON.stringify(e).length}var ME=(WE.prototype.Mo=function(t,e){return this.ha.add(e),B_.resolve()},WE.prototype.Qr=function(t,e){return B_.resolve(this.ha.getEntries(e))},WE),FE=(BE.prototype.add=function(t){var e=t._(),n=t.h(),r=this.index[e]||new bg(ny.i),t=!r.has(n);return this.index[e]=r.add(n),t},BE.prototype.has=function(t){var e=t._(),t=t.h(),e=this.index[e];return e&&e.has(t)},BE.prototype.getEntries=function(t){return(this.index[t]||new bg(ny.i)).A()},BE),UE=(qE.prototype.createOrUpgrade=function(e,n,t,r){var i=this;Yv(t<r&&0<=t&&r<=10);var o=new $_("createOrUpgrade",n);t<1&&1<=r&&(e.createObjectStore(VE.store),(s=e).createObjectStore(HE.store,{keyPath:HE.keyPath}),s.createObjectStore(GE.store,{keyPath:GE.keyPath,autoIncrement:!0}).createIndex(GE.userMutationsIndex,GE.userMutationsKeyPath,{unique:!0}),s.createObjectStore(KE.store),nI(e),e.createObjectStore(YE.store));var s,a=B_.resolve();return t<3&&3<=r&&(0!==t&&((s=e).deleteObjectStore(ZE.store),s.deleteObjectStore($E.store),s.deleteObjectStore(tI.store),nI(e)),a=a.next(function(){return t=o.store(tI.store),e=new tI(0,0,Ky.min().Z(),0),t.put(tI.key,e);var t,e})),t<4&&4<=r&&(0!==t&&(a=a.next(function(){return n=e,(r=o).store(GE.store).ts().next(function(t){n.deleteObjectStore(GE.store),n.createObjectStore(GE.store,{keyPath:GE.keyPath,autoIncrement:!0}).createIndex(GE.userMutationsIndex,GE.userMutationsKeyPath,{unique:!0});var e=r.store(GE.store),t=t.map(function(t){return e.put(t)});return B_.$n(t)});var n,r})),a=a.next(function(){e.createObjectStore(rI.store,{keyPath:rI.keyPath})})),t<5&&5<=r&&(a=a.next(function(){return i.removeAcknowledgedMutations(o)})),t<6&&6<=r&&(a=a.next(function(){return e.createObjectStore(JE.store),i.addDocumentGlobal(o)})),t<7&&7<=r&&(a=a.next(function(){return i.ensureSequenceNumbers(o)})),t<8&&8<=r&&(a=a.next(function(){return i.createCollectionParentIndex(e,o)})),t<9&&9<=r&&(a=a.next(function(){var t;(t=e).objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges"),(t=n.objectStore(YE.store)).createIndex(YE.readTimeIndex,YE.readTimeIndexPath,{unique:!1}),t.createIndex(YE.collectionReadTimeIndex,YE.collectionReadTimeIndexPath,{unique:!1})})),t<10&&10<=r&&(a=a.next(function(){return i.rewriteCanonicalIds(o)})),a},qE.prototype.addDocumentGlobal=function(e){var n=0;return e.store(YE.store).rs(function(t,e){n+=LE(e)}).next(function(){var t=new JE(n);return e.store(JE.store).put(JE.key,t)})},qE.prototype.removeAcknowledgedMutations=function(n){var r=this,t=n.store(HE.store),i=n.store(GE.store);return t.ts().next(function(t){return B_.forEach(t,function(e){var t=IDBKeyRange.bound([e.userId,-1],[e.userId,e.lastAcknowledgedBatchId]);return i.ts(GE.userMutationsIndex,t).next(function(t){return B_.forEach(t,function(t){Yv(t.userId===e.userId);t=gE(r.serializer,t);return IE(n,e.userId,t).next(function(){})})})})})},qE.prototype.ensureSequenceNumbers=function(t){var o=t.store(ZE.store),e=t.store(YE.store);return t.store(tI.store).get(tI.key).next(function(r){var i=[];return e.rs(function(t,e){var n=new ny(t),t=[0,aE(n)];i.push(o.get(t).next(function(t){return t?B_.resolve():o.put(new ZE(0,aE(n),r.highestListenSequenceNumber))}))}).next(function(){return B_.$n(i)})})},qE.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(eI.store,{keyPath:eI.keyPath});function r(t){if(i.add(t)){var e=t._(),t=t.h();return n.put({collectionId:e,parent:aE(t)})}}var n=e.store(eI.store),i=new FE;return e.store(YE.store).rs({ss:!0},function(t,e){t=new ny(t);return r(t.h())}).next(function(){return e.store(KE.store).rs({ss:!0},function(t,e){t[0];var n=t[1],n=(t[2],cE(n));return r(n.h())})})},qE.prototype.rewriteCanonicalIds=function(t){var n=this,r=t.store($E.store);return r.rs(function(t,e){e=mE(e),e=bE(n.serializer,e);return r.put(e)})},qE),jE=function(t,e){this.seconds=t,this.nanoseconds=e},VE=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};function qE(t){this.serializer=t}function BE(){this.index={}}function WE(){this.ha=new FE}VE.store="owner",VE.key="owner";var HE=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};HE.store="mutationQueues",HE.keyPath="userId";var GE=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};GE.store="mutations",GE.keyPath="batchId",GE.userMutationsIndex="userMutationsIndex",GE.userMutationsKeyPath=["userId","batchId"];var KE=(zE.prefixForUser=function(t){return[t]},zE.prefixForPath=function(t,e){return[t,aE(e)]},zE.key=function(t,e,n){return[t,aE(e),n]},zE);function zE(){}KE.store="documentMutations",KE.PLACEHOLDER=new KE;var QE=function(t,e){this.path=t,this.readTime=e},XE=function(t,e){this.path=t,this.version=e},YE=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};YE.store="remoteDocuments",YE.readTimeIndex="readTimeIndex",YE.readTimeIndexPath="readTime",YE.collectionReadTimeIndex="collectionReadTimeIndex",YE.collectionReadTimeIndexPath=["parentPath","readTime"];var JE=function(t){this.byteSize=t};JE.store="remoteDocumentGlobal",JE.key="remoteDocumentGlobalKey";var $E=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};$E.store="targets",$E.keyPath="targetId",$E.queryTargetsIndexName="queryTargetsIndex",$E.queryTargetsKeyPath=["canonicalId","targetId"];var ZE=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};ZE.store="targetDocuments",ZE.keyPath=["targetId","path"],ZE.documentTargetsIndex="documentTargetsIndex",ZE.documentTargetsKeyPath=["path","targetId"];var tI=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};tI.key="targetGlobalKey",tI.store="targetGlobal";var eI=function(t,e){this.collectionId=t,this.parent=e};function nI(t){t.createObjectStore(ZE.store,{keyPath:ZE.keyPath}).createIndex(ZE.documentTargetsIndex,ZE.documentTargetsKeyPath,{unique:!0}),t.createObjectStore($E.store,{keyPath:$E.keyPath}).createIndex($E.queryTargetsIndexName,$E.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(tI.store)}eI.store="collectionParents",eI.keyPath=["collectionId","parent"];var rI=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};rI.store="clientMetadata",rI.keyPath="clientId";var iI=To(To(To([HE.store,GE.store,KE.store,YE.store,$E.store,VE.store,tI.store,ZE.store],[rI.store]),[JE.store]),[eI.store]),oI=(sI.prototype.Mo=function(t,e){var n=this;if(this.la.has(e))return B_.resolve();var r=e._(),i=e.h();t.pr(function(){n.la.add(e)});i={collectionId:r,parent:aE(i)};return aI(t).put(i)},sI.prototype.Qr=function(t,i){var o=[],e=IDBKeyRange.bound([i,""],[Dy(i),""],!1,!0);return aI(t).ts(e).next(function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if(r.collectionId!==i)break;o.push(cE(r.parent))}return o})},sI);function sI(){this.la=new FE}function aI(t){return mI.Qn(t,eI.store)}var uI=(lI.prototype.next=function(){return this._a+=2,this._a},lI.fa=function(){return new lI(0)},lI.da=function(){return new lI(-1)},lI),cI=(hI.prototype.wa=function(n){var r=this;return this.ma(n).next(function(t){var e=new uI(t.highestTargetId);return t.highestTargetId=e.next(),r.Ta(n,t).next(function(){return t.highestTargetId})})},hI.prototype.Ea=function(t){return this.ma(t).next(function(t){return Ky.J(new Gy(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},hI.prototype.Ia=function(t){return this.ma(t).next(function(t){return t.highestListenSequenceNumber})},hI.prototype.Aa=function(e,n,r){var i=this;return this.ma(e).next(function(t){return t.highestListenSequenceNumber=n,r&&(t.lastRemoteSnapshotVersion=r.Z()),n>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=n),i.Ta(e,t)})},hI.prototype.Ra=function(e,n){var r=this;return this.ga(e,n).next(function(){return r.ma(e).next(function(t){return t.targetCount+=1,r.Pa(n,t),r.Ta(e,t)})})},hI.prototype.ya=function(t,e){return this.ga(t,e)},hI.prototype.Va=function(e,t){var n=this;return this.pa(e,t.targetId).next(function(){return fI(e).delete(t.targetId)}).next(function(){return n.ma(e)}).next(function(t){return Yv(0<t.targetCount),--t.targetCount,n.Ta(e,t)})},hI.prototype.po=function(n,r,i){var o=this,s=0,a=[];return fI(n).rs(function(t,e){e=mE(e);e.sequenceNumber<=r&&null===i.get(e.targetId)&&(s++,a.push(o.Va(n,e)))}).next(function(){return B_.$n(a)}).next(function(){return s})},hI.prototype.Ce=function(t,n){return fI(t).rs(function(t,e){e=mE(e);n(e)})},hI.prototype.ma=function(t){return pI(t).get(tI.key).next(function(t){return Yv(null!==t),t})},hI.prototype.Ta=function(t,e){return pI(t).put(tI.key,e)},hI.prototype.ga=function(t,e){return fI(t).put(bE(this.serializer,e))},hI.prototype.Pa=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},hI.prototype.ba=function(t){return this.ma(t).next(function(t){return t.targetCount})},hI.prototype.va=function(t,r){var e=rg(r),e=IDBKeyRange.bound([e,Number.NEGATIVE_INFINITY],[e,Number.POSITIVE_INFINITY]),i=null;return fI(t).rs({range:e,index:$E.queryTargetsIndexName},function(t,e,n){e=mE(e);ig(r,e.target)&&(i=e,n.done())}).next(function(){return i})},hI.prototype.Sa=function(n,t,r){var i=this,o=[],s=dI(n);return t.forEach(function(t){var e=aE(t.path);o.push(s.put(new ZE(r,e))),o.push(i.No.Da(n,r,t))}),B_.$n(o)},hI.prototype.Ca=function(n,t,r){var i=this,o=dI(n);return B_.forEach(t,function(t){var e=aE(t.path);return B_.$n([o.delete([r,e]),i.No.Na(n,r,t)])})},hI.prototype.pa=function(t,e){t=dI(t),e=IDBKeyRange.bound([e],[e+1],!1,!0);return t.delete(e)},hI.prototype.Fa=function(t,e){var e=IDBKeyRange.bound([e],[e+1],!1,!0),t=dI(t),r=Ng();return t.rs({range:e,ss:!0},function(t,e,n){t=cE(t[1]),t=new oy(t);r=r.add(t)}).next(function(){return r})},hI.prototype.Ho=function(t,e){var e=aE(e.path),e=IDBKeyRange.bound([e],[Dy(e)],!1,!0),i=0;return dI(t).rs({index:ZE.documentTargetsIndex,ss:!0,range:e},function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())}).next(function(){return 0<i})},hI.prototype.Ue=function(t,e){return fI(t).get(e).next(function(t){return t?mE(t):null})},hI);function hI(t,e){this.No=t,this.serializer=e}function lI(t){this._a=t}function fI(t){return mI.Qn(t,$E.store)}function pI(t){return mI.Qn(t,tI.store)}function dI(t){return mI.Qn(t,ZE.store)}var vI,yI="Failed to obtain exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",gI=(go(_I,vI=M),_I),mI=(bI.Qn=function(t,e){if(t instanceof gI)return W_.Qn(t.jo,e);throw Xv()},bI.prototype.start=function(){var e=this;return this.za().then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new qv(Vv.FAILED_PRECONDITION,yI);return e.Ha(),e.Ya(),e.Ja(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(t){return e.Ka.Ia(t)})}).then(function(t){e.Ma=new ww(t,e.$a)}).then(function(){e.Oa=!0}).catch(function(t){return e.ja&&e.ja.close(),Promise.reject(t)})},bI.prototype.Xa=function(n){var t=this;return this.Qa=function(e){return bo(t,void 0,void 0,function(){return _o(this,function(t){return this.Ei?[2,n(e)]:[2]})})},n(this.isPrimary)},bI.prototype.Za=function(n){var t=this;this.ja.Kn(function(e){return bo(t,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return null===e.newVersion?[4,n()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})},bI.prototype.tc=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.fn.ws(function(){return bo(e,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return this.Ei?[4,this.za()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},bI.prototype.za=function(){var n=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return EI(e).put(new rI(n.clientId,Date.now(),n.networkEnabled,n.inForeground)).next(function(){if(n.isPrimary)return n.ec(e).next(function(t){t||(n.isPrimary=!1,n.fn.Cs(function(){return n.Qa(!1)}))})}).next(function(){return n.nc(e)}).next(function(t){return n.isPrimary&&!t?n.sc(e).next(function(){return!1}):!!t&&n.ic(e).next(function(){return!0})})}).catch(function(t){if(J_(t))return Gv("IndexedDbPersistence","Failed to extend owner lease: ",t),n.isPrimary;if(!n.allowTabSynchronization)throw t;return Gv("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(function(t){n.isPrimary!==t&&n.fn.Cs(function(){return n.Qa(t)}),n.isPrimary=t})},bI.prototype.ec=function(t){var e=this;return wI(t).get(VE.key).next(function(t){return B_.resolve(e.rc(t))})},bI.prototype.oc=function(t){return EI(t).delete(this.clientId)},bI.prototype.ac=function(){return bo(this,void 0,void 0,function(){var e,n,r,i,o=this;return _o(this,function(t){switch(t.label){case 0:return!this.isPrimary||this.cc(this.Ua,18e5)?[3,2]:(this.Ua=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var r=bI.Qn(t,rI.store);return r.ts().next(function(t){var e=o.uc(t,18e5),n=t.filter(function(t){return-1===e.indexOf(t)});return B_.forEach(n,function(t){return r.delete(t.clientId)}).next(function(){return n})})}).catch(function(){return[]})]);case 1:if(e=t.sent(),this.Ga)for(n=0,r=e;n<r.length;n++)i=r[n],this.Ga.removeItem(this.hc(i.clientId));t.label=2;case 2:return[2]}})})},bI.prototype.Ja=function(){var t=this;this.qa=this.fn.yn("client_metadata_refresh",4e3,function(){return t.za().then(function(){return t.ac()}).then(function(){return t.Ja()})})},bI.prototype.rc=function(t){return!!t&&t.ownerId===this.clientId},bI.prototype.nc=function(e){var r=this;return this.ka?B_.resolve(!0):wI(e).get(VE.key).next(function(t){if(null!==t&&r.cc(t.leaseTimestampMs,5e3)&&!r.lc(t.ownerId)){if(r.rc(t)&&r.networkEnabled)return!0;if(!r.rc(t)){if(!t.allowTabSynchronization)throw new qv(Vv.FAILED_PRECONDITION,yI);return!1}}return!(!r.networkEnabled||!r.inForeground)||EI(e).ts().next(function(t){return void 0===r.uc(t,5e3).find(function(t){if(r.clientId!==t.clientId){var e=!r.networkEnabled&&t.networkEnabled,n=!r.inForeground&&t.inForeground,t=r.networkEnabled===t.networkEnabled;if(e||n&&t)return!0}return!1})})}).next(function(t){return r.isPrimary!==t&&Gv("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},bI.prototype.Di=function(){return bo(this,void 0,void 0,function(){var n=this;return _o(this,function(t){switch(t.label){case 0:return this.Oa=!1,this._c(),this.qa&&(this.qa.cancel(),this.qa=null),this.fc(),this.dc(),[4,this.ja.runTransaction("shutdown","readwrite",[VE.store,rI.store],function(t){var e=new gI(t,ww.ai);return n.sc(e).next(function(){return n.oc(e)})})];case 1:return t.sent(),this.ja.close(),this.wc(),[2]}})})},bI.prototype.uc=function(t,e){var n=this;return t.filter(function(t){return n.cc(t.updateTimeMs,e)&&!n.lc(t.clientId)})},bI.prototype.pi=function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(t){return EI(t).ts().next(function(t){return e.uc(t,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(bI.prototype,"Ei",{get:function(){return this.Oa},enumerable:!1,configurable:!0}),bI.prototype.mc=function(t){return _E.xo(t,this.serializer,this.Dr,this.No)},bI.prototype.Tc=function(){return this.Ka},bI.prototype.Ec=function(){return this.vr},bI.prototype.Ic=function(){return this.Dr},bI.prototype.runTransaction=function(e,n,r){var i=this;Gv("IndexedDbPersistence","Starting transaction:",e);var o,t="readonly"===n?"readonly":"readwrite";return this.ja.runTransaction(e,t,iI,function(t){return o=new gI(t,i.Ma?i.Ma.next():ww.ai),"readwrite-primary"===n?i.ec(o).next(function(t){return!!t||i.nc(o)}).next(function(t){if(!t)throw Kv("Failed to obtain primary lease for action '"+e+"'."),i.isPrimary=!1,i.fn.Cs(function(){return i.Qa(!1)}),new qv(Vv.FAILED_PRECONDITION,Lw);return r(o)}).next(function(t){return i.ic(o).next(function(){return t})}):i.Ac(o).next(function(){return r(o)})}).then(function(t){return o.br(),t})},bI.prototype.Ac=function(t){var e=this;return wI(t).get(VE.key).next(function(t){if(null!==t&&e.cc(t.leaseTimestampMs,5e3)&&!e.lc(t.ownerId)&&!e.rc(t)&&!(e.ka||e.allowTabSynchronization&&t.allowTabSynchronization))throw new qv(Vv.FAILED_PRECONDITION,yI)})},bI.prototype.ic=function(t){var e=new VE(this.clientId,this.allowTabSynchronization,Date.now());return wI(t).put(VE.key,e)},bI.Ln=function(){return W_.Ln()},bI.prototype.sc=function(t){var e=this,n=wI(t);return n.get(VE.key).next(function(t){return e.rc(t)?(Gv("IndexedDbPersistence","Releasing primary lease."),n.delete(VE.key)):B_.resolve()})},bI.prototype.cc=function(t,e){var n=Date.now();return!(t<n-e||n<t&&(Kv("Detected an update time that is in the future: "+t+" > "+n),1))},bI.prototype.Ha=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ba=function(){t.fn.ws(function(){return t.inForeground="visible"===t.document.visibilityState,t.za()})},this.document.addEventListener("visibilitychange",this.Ba),this.inForeground="visible"===this.document.visibilityState)},bI.prototype.fc=function(){this.Ba&&(this.document.removeEventListener("visibilitychange",this.Ba),this.Ba=null)},bI.prototype.Ya=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.La=function(){e._c(),e.fn.ws(function(){return e.Di()})},this.window.addEventListener("unload",this.La))},bI.prototype.dc=function(){this.La&&(this.window.removeEventListener("unload",this.La),this.La=null)},bI.prototype.lc=function(t){try{var e=null!==(null===(e=this.Ga)||void 0===e?void 0:e.getItem(this.hc(t)));return Gv("IndexedDbPersistence","Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return Kv("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},bI.prototype._c=function(){if(this.Ga)try{this.Ga.setItem(this.hc(this.clientId),String(Date.now()))}catch(t){Kv("Failed to set zombie client id.",t)}},bI.prototype.wc=function(){if(this.Ga)try{this.Ga.removeItem(this.hc(this.clientId))}catch(t){}},bI.prototype.hc=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},bI);function bI(t,e,n,r,i,o,s,a,u,c){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.fn=i,this.window=o,this.document=s,this.$a=u,this.ka=c,this.Ma=null,this.Oa=!1,this.isPrimary=!1,this.networkEnabled=!0,this.La=null,this.inForeground=!1,this.Ba=null,this.qa=null,this.Ua=Number.NEGATIVE_INFINITY,this.Qa=function(t){return Promise.resolve()},!bI.Ln())throw new qv(Vv.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.No=new II(this,r),this.Wa=e+"main",this.serializer=new hE(a),this.ja=new W_(this.Wa,10,new UE(this.serializer)),this.Ka=new cI(this.No,this.serializer),this.Dr=new oI,this.vr=(e=this.serializer,a=this.Dr,new AE(e,a)),this.window&&this.window.localStorage?this.Ga=this.window.localStorage:(this.Ga=null,!1===c&&Kv("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}function _I(t,e){var n=this;return(n=vI.call(this)||this).jo=t,n.xa=e,n}function wI(t){return mI.Qn(t,VE.store)}function EI(t){return mI.Qn(t,rI.store)}var II=(TI.prototype.Po=function(t){var n=this.Rc(t);return this.db.Tc().ba(t).next(function(e){return n.next(function(t){return e+t})})},TI.prototype.Rc=function(t){var e=0;return this.Vo(t,function(t){e++}).next(function(){return e})},TI.prototype.Ce=function(t,e){return this.db.Tc().Ce(t,e)},TI.prototype.Vo=function(t,n){return this.gc(t,function(t,e){return n(e)})},TI.prototype.Da=function(t,e,n){return SI(t,n)},TI.prototype.Na=function(t,e,n){return SI(t,n)},TI.prototype.po=function(t,e,n){return this.db.Tc().po(t,e,n)},TI.prototype.Go=SI,TI.prototype.Pc=function(t,e){return r=e,i=!1,CE(n=t).os(function(t){return EE(n,t,r).next(function(t){return t&&(i=!0),B_.resolve(!t)})}).next(function(){return i});var n,r,i},TI.prototype.bo=function(n,r){var i=this,o=this.db.Ec().ra(),s=[],a=0;return this.gc(n,function(e,t){t<=r&&(t=i.Pc(n,e).next(function(t){if(!t)return a++,o.Rr(n,e).next(function(){return o.Ar(e),dI(n).delete([0,aE(e.path)])})}),s.push(t))}).next(function(){return B_.$n(s)}).next(function(){return o.apply(n)}).next(function(){return a})},TI.prototype.removeTarget=function(t,e){e=e.st(t.xa);return this.db.Tc().ya(t,e)},TI.prototype.yc=SI,TI.prototype.gc=function(t,r){var i,t=dI(t),o=ww.ai;return t.rs({index:ZE.documentTargetsIndex},function(t,e){var n=t[0],t=(t[1],e.path),e=e.sequenceNumber;0===n?(o!==ww.ai&&r(new oy(cE(i)),o),o=e,i=t):o=ww.ai}).next(function(){o!==ww.ai&&r(new oy(cE(i)),o)})},TI.prototype.So=function(t){return this.db.Ec().aa(t)},TI);function TI(t,e){this.db=t,this.wo=new iE(this,e)}function SI(t,e){return dI(t).put((t=t.xa,new ZE(0,aE(e.path),t)))}function CI(t,e){var n=t.projectId;return t.j||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var NI=(AI.prototype.Io=function(e){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(t){return e.vo(t,n.bc)})},AI);function AI(t,e,n){this.persistence=t,this.Vc=e,this.bc=new fg(Ry),this.vc=new Hy(rg,ig),this.Sc=Ky.min(),this.Sr=t.mc(n),this.Dc=t.Ec(),this.Ka=t.Tc(),this.Cc=new Mw(this.Dc,this.Sr,this.persistence.Ic()),this.Vc.Nc(this.Cc)}function kI(t,h){var l=t;return l.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var e,r,i,o,s,n,a,u=h.batch.keys(),c=l.Dc.ra({oa:!0});return e=l,r=t,o=c,s=(i=h).batch,n=s.keys(),a=B_.resolve(),n.forEach(function(n){a=a.next(function(){return o.Rr(r,n)}).next(function(t){var e=t,t=i.dr.get(n);Yv(null!==t),(!e||e.version.L(t)<0)&&(e=s.cr(n,e,i))&&o.Er(e,i._r)})}),a.next(function(){return e.Sr.Wo(r,s)}).next(function(){return c.apply(t)}).next(function(){return l.Sr.zo(t)}).next(function(){return l.Cc.kr(t,u)})})}function OI(t){var e=t;return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.Ka.Ea(t)})}function RI(t,u){var c=t,h=u.nt,l=c.bc;return c.persistence.runTransaction("Apply remote event","readwrite-primary",function(s){var i=c.Dc.ra({oa:!0});l=c.bc;var a=[];u.zt.forEach(function(t,e){var n,r,i,o=l.get(e);o&&(a.push(c.Ka.Ca(s,t.se,e).next(function(){return c.Ka.Sa(s,t.ee,e)})),0<(i=t.resumeToken).O()&&(n=o.it(i,h).st(s.xa),l=l.ot(e,n),r=o,i=t,Yv(0<(o=n).resumeToken.O()),(0===r.resumeToken.O()||3e8<=o.nt.X()-r.nt.X()||0<i.ee.size+i.ne.size+i.se.size)&&a.push(c.Ka.ya(s,n))))});var t,o=wg,n=Ng();return u.Yt.forEach(function(t,e){n=n.add(t)}),a.push(i.getEntries(s,n).next(function(r){u.Yt.forEach(function(t,e){var n=r.get(t);e instanceof Vb&&e.version.isEqual(Ky.min())?(i.Ar(t,h),o=o.ot(t,e)):null==n||0<e.version.L(n.version)||0===e.version.L(n.version)&&n.hasPendingWrites?(i.Er(e,h),o=o.ot(t,e)):Gv("LocalStore","Ignoring outdated watch update for ",t,". Current version:",n.version," Watch version:",e.version),u.Jt.has(t)&&a.push(c.persistence.No.yc(s,t))})})),h.isEqual(Ky.min())||(t=c.Ka.Ea(s).next(function(t){return c.Ka.Aa(s,s.xa,h)}),a.push(t)),B_.$n(a).next(function(){return i.apply(s)}).next(function(){return c.Cc.Mr(s,o)})}).then(function(t){return c.bc=l,t})}function PI(t,r){var i=t;return i.persistence.runTransaction("Allocate target","readwrite",function(e){var n;return i.Ka.va(e,r).next(function(t){return t?(n=t,B_.resolve(n)):i.Ka.wa(e).next(function(t){return n=new ug(r,t,0,e.xa),i.Ka.Ra(e,n).next(function(){return n})})})}).then(function(t){var e=i.bc.get(t.targetId);return(null===e||0<t.nt.L(e.nt))&&(i.bc=i.bc.ot(t.targetId,t),i.vc.set(r,t.targetId)),t})}function DI(i,o,s){return bo(this,void 0,void 0,function(){var e,n,r;return _o(this,function(t){switch(t.label){case 0:n=(e=i).bc.get(o),r=s?"readwrite":"readwrite-primary",t.label=1;case 1:return t.trys.push([1,4,,5]),s?[3,3]:[4,e.persistence.runTransaction("Release target",r,function(t){return e.persistence.No.removeTarget(t,n)})];case 2:t.sent(),t.label=3;case 3:return[3,5];case 4:if(!J_(r=t.sent()))throw r;return Gv("LocalStore","Failed to update sequence numbers for target "+o+": "+r),[3,5];case 5:return e.bc=e.bc.remove(o),e.vc.delete(n.target),[2]}})})}function xI(t,o,s){var a=t,u=Ky.min(),c=Ng();return a.persistence.runTransaction("Execute query","readonly",function(e){return t=a,n=e,r=t_(o),(void 0!==(t=(i=t).vc.get(r))?B_.resolve(i.bc.get(t)):i.Ka.va(n,r)).next(function(t){if(t)return u=t.lastLimboFreeSnapshotVersion,a.Ka.Fa(e,t.targetId).next(function(t){c=t})}).next(function(){return a.Vc.Lr(e,o,s?u:Ky.min(),s?c:Ng())}).next(function(t){return{documents:t,Fc:c}});var t,n,r,i})}function LI(t,e){var n=t,r=n.Ka,t=n.bc.get(e);return t?Promise.resolve(t.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.Ue(t,e).next(function(t){return t?t.target:null})})}function MI(t){var s=t;return s.persistence.runTransaction("Get new document changes","readonly",function(t){return e=s.Dc,n=t,t=s.Sc,r=e,i=wg,o=pE(t),t=DE(n),n=IDBKeyRange.lowerBound(o,!0),t.rs({index:YE.readTimeIndex,range:n},function(t,e){var n=lE(r.serializer,e);i=i.ot(n.key,n),o=e.readTime}).next(function(){return{xc:i,readTime:dE(o)}});var e,n,r,i,o}).then(function(t){var e=t.xc,t=t.readTime;return s.Sc=t,e})}function FI(n){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){return[2,(e=n).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return t=DE(t),r=Ky.min(),t.rs({index:YE.readTimeIndex,reverse:!0},function(t,e,n){e.readTime&&(r=dE(e.readTime)),n.done()}).next(function(){return r});var r}).then(function(t){e.Sc=t})]})})}function UI(e){return bo(this,void 0,void 0,function(){return _o(this,function(t){if(e.code!==Vv.FAILED_PRECONDITION||e.message!==Lw)throw e;return Gv("LocalStore","Unexpectedly lost primary lease"),[2]})})}function jI(t,e){this.user=e,this.type="OAuth",this.Kc={},this.Kc.Authorization="Bearer "+t}function VI(t,e,n,r,i){var o=this;this.ju=t,this.Ku=e,this.cs=n,this.Gu={},this.zu=[],this.Hu=new Map,this.Yu=new Set,this.Ju=[],this.Xu=i,this.Xu.Zu(function(t){n.ws(function(){return bo(o,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return _T(this)?(Gv("RemoteStore","Restarting streams for network reachability change."),[4,function(n){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return(e=n).Yu.add(4),[4,fT(e)];case 1:return t.sent(),e.th.set("Unknown"),e.Yu.delete(4),[4,lT(e)];case 2:return t.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.th=new ZI(n,r)}var qI,BI,WI,HI=(hT.prototype.m=function(){return this.$c.m()},hT.prototype.Da=function(t,e){e=new GI(t,e);this.$c=this.$c.add(e),this.Mc=this.Mc.add(e)},hT.prototype.Lc=function(t,e){var n=this;t.forEach(function(t){return n.Da(t,e)})},hT.prototype.Na=function(t,e){this.Bc(new GI(t,e))},hT.prototype.qc=function(t,e){var n=this;t.forEach(function(t){return n.Na(t,e)})},hT.prototype.Uc=function(t){var e=this,n=new oy(new ny([])),r=new GI(n,t),t=new GI(n,t+1),i=[];return this.Mc.Ft([r,t],function(t){e.Bc(t),i.push(t.key)}),i},hT.prototype.Qc=function(){var e=this;this.$c.forEach(function(t){return e.Bc(t)})},hT.prototype.Bc=function(t){this.$c=this.$c.delete(t),this.Mc=this.Mc.delete(t)},hT.prototype.Wc=function(t){var e=new oy(new ny([])),n=new GI(e,t),t=new GI(e,t+1),r=Ng();return this.Mc.Ft([n,t],function(t){r=r.add(t.key)}),r},hT.prototype.Ho=function(t){var e=new GI(t,0),e=this.$c.$t(e);return null!==e&&t.isEqual(e.key)},hT),GI=(cT.kc=function(t,e){return oy.i(t.key,e.key)||Ry(t.jc,e.jc)},cT.Oc=function(t,e){return Ry(t.jc,e.jc)||oy.i(t.key,e.key)},cT),KI=(uT.prototype.getToken=function(){return Promise.resolve(null)},uT.prototype.zc=function(){},uT.prototype.Hc=function(t){(this.Gc=t)(mw.UNAUTHENTICATED)},uT.prototype.Yc=function(){this.Gc=null},uT),zI=(aT.prototype.getToken=function(){var e=this,n=this.Zc,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(function(t){return e.Zc!==n?(Gv("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):t?(Yv("string"==typeof t.accessToken),new jI(t.accessToken,e.currentUser)):null}):Promise.resolve(null)},aT.prototype.zc=function(){this.forceRefresh=!0},aT.prototype.Hc=function(t){this.Gc=t,this.Xc&&t(this.currentUser)},aT.prototype.Yc=function(){this.auth&&this.auth.removeAuthTokenListener(this.Jc),this.Jc=null,this.Gc=null},aT.prototype.tu=function(){var t=this.auth&&this.auth.getUid();return Yv(null===t||"string"==typeof t),new mw(t)},aT),QI=(Object.defineProperty(sT.prototype,"Kc",{get:function(){var t={"X-Goog-AuthUser":this.nu},e=this.eu.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),sT),XI=(oT.prototype.getToken=function(){return Promise.resolve(new QI(this.eu,this.nu))},oT.prototype.Hc=function(t){t(mw.ni)},oT.prototype.Yc=function(){},oT.prototype.zc=function(){},oT),K=(iT.prototype.cu=function(){return 1===this.state||2===this.state||4===this.state},iT.prototype.uu=function(){return 2===this.state},iT.prototype.start=function(){3!==this.state?this.auth():this.hu()},iT.prototype.stop=function(){return bo(this,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return this.cu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},iT.prototype.lu=function(){this.state=0,this.ys.reset()},iT.prototype._u=function(){var t=this;this.uu()&&null===this.au&&(this.au=this.fn.yn(this.su,6e4,function(){return t.fu()}))},iT.prototype.du=function(t){this.wu(),this.stream.send(t)},iT.prototype.fu=function(){return bo(this,void 0,void 0,function(){return _o(this,function(t){return this.uu()?[2,this.close(0)]:[2]})})},iT.prototype.wu=function(){this.au&&(this.au.cancel(),this.au=null)},iT.prototype.close=function(e,n){return bo(this,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return this.wu(),this.ys.cancel(),this.ou++,3!==e?this.ys.reset():n&&n.code===Vv.RESOURCE_EXHAUSTED?(Kv(n.toString()),Kv("Using maximum backoff delay to prevent overloading the backend."),this.ys.Rn()):n&&n.code===Vv.UNAUTHENTICATED&&this.ru.zc(),null!==this.stream&&(this.mu(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Tu(n)];case 1:return t.sent(),[2]}})})},iT.prototype.mu=function(){},iT.prototype.auth=function(){var n=this;this.state=1;var t=this.Eu(this.ou),e=this.ou;this.ru.getToken().then(function(t){n.ou===e&&n.Iu(t)},function(e){t(function(){var t=new qv(Vv.UNKNOWN,"Fetching auth token failed: "+e.message);return n.Au(t)})})},iT.prototype.Iu=function(t){var e=this,n=this.Eu(this.ou);this.stream=this.Ru(t),this.stream.gu(function(){n(function(){return e.state=2,e.listener.gu()})}),this.stream.Tu(function(t){n(function(){return e.Au(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},iT.prototype.hu=function(){var t=this;this.state=4,this.ys.gn(function(){return bo(t,void 0,void 0,function(){return _o(this,function(t){return this.state=0,this.start(),[2]})})})},iT.prototype.Au=function(t){return Gv("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},iT.prototype.Eu=function(e){var n=this;return function(t){n.fn.ws(function(){return n.ou===e?t():(Gv("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},iT),YI=(go(rT,WI=K),rT.prototype.Ru=function(t){return this.iu.Pu("Listen",t)},rT.prototype.onMessage=function(t){this.ys.reset();var e=function(t,e){if("targetChange"in e){e.targetChange;var n="NO_CHANGE"===(i=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===i?1:"REMOVE"===i?2:"CURRENT"===i?3:"RESET"===i?4:Xv(),r=e.targetChange.targetIds||[],i=(o=e.targetChange.resumeToken,t.Qe?(Yv(void 0===o||"string"==typeof o),xy.fromBase64String(o||"")):(Yv(void 0===o||o instanceof Uint8Array),xy.fromUint8Array(o||new Uint8Array))),o=e.targetChange.cause,s=o&&(o=void 0===(s=o).code?Vv.UNKNOWN:lg(s.code),new qv(o,s.message||"")),r=new Mg(n,r,i,s||null)}else if("documentChange"in e){e.documentChange;var a=e.documentChange;a.document,a.document.name,a.document.updateTime;var i=Tm(t,a.document.name),u=_m(a.document.updateTime),s=new Ob({mapValue:{fields:a.document.fields}}),u=new jb(i,u,s,{}),s=a.targetIds||[],a=a.removedTargetIds||[];r=new xg(s,a,u.key,u)}else if("documentDelete"in e){e.documentDelete;a=e.documentDelete;a.document;var u=Tm(t,a.document),c=a.readTime?_m(a.readTime):Ky.min(),c=new Vb(u,c),a=a.removedTargetIds||[];r=new xg([],a,c.key,c)}else if("documentRemove"in e){e.documentRemove;c=e.documentRemove;c.document;var h=Tm(t,c.document),c=c.removedTargetIds||[];r=new xg([],c,h,null)}else{if(!("filter"in e))return Xv();e.filter;h=e.filter;h.targetId;e=h.count||0,e=new sg(e),h=h.targetId;r=new Lg(h,e)}return r}(this.serializer,t),t=function(t){if(!("targetChange"in t))return Ky.min();t=t.targetChange;return(!t.targetIds||!t.targetIds.length)&&t.readTime?_m(t.readTime):Ky.min()}(t);return this.listener.yu(e,t)},rT.prototype.Vu=function(t){var e,n,r,i={};i.database=Nm(this.serializer),i.addTarget=(e=this.serializer,(r=og(r=(n=t).target)?{documents:Pm(e,r)}:{query:Dm(e,r)}).targetId=n.targetId,0<n.resumeToken.O()&&(r.resumeToken=bm(e,n.resumeToken)),r);var o,t=(this.serializer,o=t,null==(t=function(){switch(o.et){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Xv()}}())?null:{"goog-listen-tags":t});t&&(i.labels=t),this.du(i)},rT.prototype.pu=function(t){var e={};e.database=Nm(this.serializer),e.removeTarget=t,this.du(e)},rT),JI=(go(nT,BI=K),Object.defineProperty(nT.prototype,"vu",{get:function(){return this.bu},enumerable:!1,configurable:!0}),nT.prototype.start=function(){this.bu=!1,this.lastStreamToken=void 0,BI.prototype.start.call(this)},nT.prototype.mu=function(){this.bu&&this.Su([])},nT.prototype.Ru=function(t){return this.iu.Pu("Write",t)},nT.prototype.onMessage=function(t){if(Yv(!!t.streamToken),this.lastStreamToken=t.streamToken,this.bu){this.ys.reset();var e=(n=t.writeResults,r=t.commitTime,n&&0<n.length?(Yv(void 0!==r),n.map(function(t){return function(t,e){var n=t.updateTime?_m(t.updateTime):_m(e);n.isEqual(Ky.min())&&(n=_m(e));e=null;return t.transformResults&&0<t.transformResults.length&&(e=t.transformResults),new ab(n,e)}(t,r)})):[]),n=_m(t.commitTime);return this.listener.Du(n,e)}var n,r;return Yv(!t.writeResults||0===t.writeResults.length),this.bu=!0,this.listener.Cu()},nT.prototype.Nu=function(){var t={};t.database=Nm(this.serializer),this.du(t)},nT.prototype.Su=function(t){var e=this,t={streamToken:this.lastStreamToken,writes:t.map(function(t){return Om(e.serializer,t)})};this.du(t)},nT),$I=(go(eT,qI=function(){}),eT.prototype.xu=function(){if(this.Fu)throw new qv(Vv.FAILED_PRECONDITION,"The client has already been terminated.")},eT.prototype.$u=function(e,n,r){var i=this;return this.xu(),this.credentials.getToken().then(function(t){return i.iu.$u(e,n,r,t)}).catch(function(t){throw t.code===Vv.UNAUTHENTICATED&&i.credentials.zc(),t})},eT.prototype.ku=function(e,n,r){var i=this;return this.xu(),this.credentials.getToken().then(function(t){return i.iu.ku(e,n,r,t)}).catch(function(t){throw t.code===Vv.UNAUTHENTICATED&&i.credentials.zc(),t})},eT.prototype.terminate=function(){this.Fu=!1},eT),ZI=(tT.prototype.Bu=function(){var t=this;0===this.Mu&&(this.qu("Unknown"),this.Ou=this.cs.yn("online_state_timeout",1e4,function(){return t.Ou=null,t.Uu("Backend didn't respond within 10 seconds."),t.qu("Offline"),Promise.resolve()}))},tT.prototype.Qu=function(t){"Online"===this.state?this.qu("Unknown"):(this.Mu++,1<=this.Mu&&(this.Wu(),this.Uu("Connection failed 1 times. Most recent error: "+t.toString()),this.qu("Offline")))},tT.prototype.set=function(t){this.Wu(),this.Mu=0,"Online"===t&&(this.Lu=!1),this.qu(t)},tT.prototype.qu=function(t){t!==this.state&&(this.state=t,this.di(t))},tT.prototype.Uu=function(t){t="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Lu?(Kv(t),this.Lu=!1):Gv("OnlineStateTracker",t)},tT.prototype.Wu=function(){null!==this.Ou&&(this.Ou.cancel(),this.Ou=null)},tT);function tT(t,e){this.cs=t,this.di=e,this.state="Unknown",this.Mu=0,this.Ou=null,this.Lu=!0}function eT(t,e,n){var r=this;return(r=qI.call(this)||this).credentials=t,r.iu=e,r.serializer=n,r.Fu=!1,r}function nT(t,e,n,r,i){var o=this;return(o=BI.call(this,t,"write_stream_connection_backoff","write_stream_idle",e,n,i)||this).serializer=r,o.bu=!1,o}function rT(t,e,n,r,i){var o=this;return(o=WI.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",e,n,i)||this).serializer=r,o}function iT(t,e,n,r,i,o){this.fn=t,this.su=n,this.iu=r,this.ru=i,this.listener=o,this.state=0,this.ou=0,this.au=null,this.stream=null,this.ys=new q_(t,e)}function oT(t,e){this.eu=t,this.nu=e}function sT(t,e){this.eu=t,this.nu=e,this.type="FirstParty",this.user=mw.ni}function aT(t){var e=this;this.Jc=null,this.currentUser=mw.UNAUTHENTICATED,this.Xc=!1,this.Zc=0,this.Gc=null,this.forceRefresh=!1,this.Jc=function(){e.Zc++,e.currentUser=e.tu(),e.Xc=!0,e.Gc&&e.Gc(e.currentUser)},this.Zc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.Jc):(this.Jc(null),t.get().then(function(t){e.auth=t,e.Jc&&e.auth.addAuthTokenListener(e.Jc)},function(){}))}function uT(){this.Gc=null}function cT(t,e){this.key=t,this.jc=e}function hT(){this.$c=new bg(GI.kc),this.Mc=new bg(GI.Oc)}function lT(r){return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:if(!_T(r))return[3,4];e=0,n=r.Ju,t.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function fT(r){return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:e=0,n=r.Ju,t.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function pT(n){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return e=n,Gv("RemoteStore","RemoteStore shutting down."),e.Yu.add(5),[4,fT(e)];case 1:return t.sent(),e.Xu.Di(),e.th.set("Unknown"),[2]}})})}function dT(t,e){t.Hu.has(e.targetId)||(t.Hu.set(e.targetId,e),bT(t)?mT(t):kT(t).uu()&&yT(t,e))}function vT(t,e){var n=t,t=kT(n);n.Hu.delete(e),t.uu()&&gT(n,e),0===n.Hu.size&&(t.uu()?t._u():_T(n)&&n.th.set("Unknown"))}function yT(t,e){t.eh.Ie(e.targetId),kT(t).Vu(e)}function gT(t,e){t.eh.Ie(e),kT(t).pu(e)}function mT(e){e.eh=new Ug({qe:function(t){return e.Gu.qe(t)},Ue:function(t){return e.Hu.get(t)||null}}),kT(e).start(),e.th.Bu()}function bT(t){return _T(t)&&!kT(t).cu()&&0<t.Hu.size}function _T(t){return 0===t.Yu.size}function wT(t){t.eh=void 0}function ET(s,a,u){return bo(this,void 0,void 0,function(){var n,o;return _o(this,function(t){switch(t.label){case 0:if(s.th.set("Online"),!(a instanceof Mg&&2===a.state&&a.cause))return[3,6];t.label=1;case 1:return t.trys.push([1,3,,5]),[4,function(o,s){return bo(this,void 0,void 0,function(){var e,n,r,i;return _o(this,function(t){switch(t.label){case 0:e=s.cause,n=0,r=s.targetIds,t.label=1;case 1:return n<r.length?(i=r[n],o.Hu.has(i)?[4,o.Gu.nh(i,e)]:[3,3]):[3,5];case 2:t.sent(),o.Hu.delete(i),o.eh.removeTarget(i),t.label=3;case 3:t.label=4;case 4:return n++,[3,1];case 5:return[2]}})})}(s,a)];case 2:return t.sent(),[3,5];case 3:return n=t.sent(),Gv("RemoteStore","Failed to remove targets %s: %s ",a.targetIds.join(","),n),[4,IT(s,n)];case 4:return t.sent(),[3,5];case 5:return[3,13];case 6:if(a instanceof xg?s.eh.be(a):a instanceof Lg?s.eh.$e(a):s.eh.De(a),u.isEqual(Ky.min()))return[3,13];t.label=7;case 7:return t.trys.push([7,11,,13]),[4,OI(s.ju)];case 8:return o=t.sent(),0<=u.L(o)?[4,(i=u,(e=(r=s).eh.Oe(i)).zt.forEach(function(t,e){var n;0<t.resumeToken.O()&&((n=r.Hu.get(e))&&r.Hu.set(e,n.it(t.resumeToken,i)))}),e.Ht.forEach(function(t){var e=r.Hu.get(t);e&&(r.Hu.set(t,e.it(xy.B,e.nt)),gT(r,t),e=new ug(e.target,t,1,e.sequenceNumber),yT(r,e))}),r.Gu.sh(e))]:[3,10];case 9:t.sent(),t.label=10;case 10:return[3,13];case 11:return Gv("RemoteStore","Failed to raise snapshot:",o=t.sent()),[4,IT(s,o)];case 12:return t.sent(),[3,13];case 13:return[2]}var r,i,e})})}function IT(n,r,i){return bo(this,void 0,void 0,function(){var e=this;return _o(this,function(t){switch(t.label){case 0:if(!J_(r))throw r;return n.Yu.add(1),[4,fT(n)];case 1:return t.sent(),n.th.set("Offline"),i=i||function(){return OI(n.ju)},n.cs.Cs(function(){return bo(e,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return Gv("RemoteStore","Retrying IndexedDB access"),[4,i()];case 1:return t.sent(),n.Yu.delete(1),[4,lT(n)];case 2:return t.sent(),[2]}})})}),[2]}})})}function TT(e,n){return n().catch(function(t){return IT(e,t,n)})}function ST(u){return bo(this,void 0,void 0,function(){var i,o,s,a;return _o(this,function(t){switch(t.label){case 0:o=OT(i=u),s=0<i.zu.length?i.zu[i.zu.length-1].batchId:-1,t.label=1;case 1:if(!(_T(i)&&i.zu.length<10))return[3,7];t.label=2;case 2:return t.trys.push([2,4,,6]),[4,(e=i.ju,n=s,(r=e).persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===n&&(n=-1),r.Sr.Bo(t,n)}))];case 3:return null===(a=t.sent())?(0===i.zu.length&&o._u(),[3,7]):(s=a.batchId,function(t,e){t.zu.push(e);t=OT(t);t.uu()&&t.vu&&t.Su(e.mutations)}(i,a),[3,6]);case 4:return a=t.sent(),[4,IT(i,a)];case 5:return t.sent(),[3,6];case 6:return[3,1];case 7:return CT(i)&&NT(i),[2]}var e,n,r})})}function CT(t){return _T(t)&&!OT(t).cu()&&0<t.zu.length}function NT(t){OT(t).start()}function AT(n,r){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return e=n,r?(e.Yu.delete(2),[4,lT(e)]):[3,2];case 1:return t.sent(),[3,5];case 2:return r?[3,4]:(e.Yu.add(2),[4,fT(e)]);case 3:t.sent(),e.th.set("Unknown"),t.label=4;case 4:t.label=5;case 5:return[2]}})})}function kT(n){var t,e,r,i=this;return n.oh||(n.oh=(t=n.Ku,e=n.cs,r={gu:function(n){return bo(this,void 0,void 0,function(){return _o(this,function(t){return n.Hu.forEach(function(t,e){yT(n,t)}),[2]})})}.bind(null,n),Tu:function(e,n){return bo(this,void 0,void 0,function(){return _o(this,function(t){return wT(e),bT(e)?(e.th.Qu(n),mT(e)):e.th.set("Unknown"),[2]})})}.bind(null,n),yu:ET.bind(null,n)},t.xu(),new YI(e,t.iu,t.credentials,t.serializer,r)),n.Ju.push(function(e){return bo(i,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return e?(n.oh.lu(),bT(n)?mT(n):n.th.set("Unknown"),[3,3]):[3,1];case 1:return[4,n.oh.stop()];case 2:t.sent(),wT(n),t.label=3;case 3:return[2]}})})})),n.oh}function OT(n){var t,e,r,i=this;return n.ah||(n.ah=(t=n.Ku,e=n.cs,r={gu:function(e){return bo(this,void 0,void 0,function(){return _o(this,function(t){return OT(e).Nu(),[2]})})}.bind(null,n),Tu:function(e,n){return bo(this,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return n&&OT(e).vu?[4,function(r,i){return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:return hg(n=i.code)&&n!==Vv.ABORTED?(e=r.zu.shift(),OT(r).lu(),[4,TT(r,function(){return r.Gu.rh(e.batchId,i)})]):[3,3];case 1:return t.sent(),[4,ST(r)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(e,n)]:[3,2];case 1:t.sent(),t.label=2;case 2:return CT(e)&&NT(e),[2]}})})}.bind(null,n),Cu:function(o){return bo(this,void 0,void 0,function(){var e,n,r,i;return _o(this,function(t){for(e=OT(o),n=0,r=o.zu;n<r.length;n++)i=r[n],e.Su(i.mutations);return[2]})})}.bind(null,n),Du:function(r,i,o){return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:return e=r.zu.shift(),n=xw.from(e,i,o),[4,TT(r,function(){return r.Gu.ih(n)})];case 1:return t.sent(),[4,ST(r)];case 2:return t.sent(),[2]}})})}.bind(null,n)},t.xu(),new JI(e,t.iu,t.credentials,t.serializer,r)),n.Ju.push(function(e){return bo(i,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return e?(n.ah.lu(),[4,ST(n)]):[3,2];case 1:return t.sent(),[3,4];case 2:return[4,n.ah.stop()];case 3:t.sent(),0<n.zu.length&&(Gv("RemoteStore","Stopping write stream with "+n.zu.length+" pending writes"),n.zu=[]),t.label=4;case 4:return[2]}})})})),n.ah}var RT=function(t){this.key=t},PT=function(t){this.key=t},DT=(Object.defineProperty(UT.prototype,"dh",{get:function(){return this.uh},enumerable:!1,configurable:!0}),UT.prototype.wh=function(t,e){var s=this,a=e?e.mh:new Og,u=(e||this).fh,c=(e||this).Wt,h=u,l=!1,f=Qb(this.query)&&u.size===this.query.limit?u.last():null,p=Xb(this.query)&&u.size===this.query.limit?u.first():null;if(t.ht(function(t,e){var n=u.get(t),r=(r=e instanceof jb?e:null)&&(a_(s.query,r)?r:null),i=!!n&&s.Wt.has(n.key),o=!!r&&(r.Je||s.Wt.has(r.key)&&r.hasCommittedMutations),e=!1;n&&r?n.data().isEqual(r.data())?i!==o&&(a.track({type:3,doc:r}),e=!0):s.Th(n,r)||(a.track({type:2,doc:r}),e=!0,(f&&0<s._h(r,f)||p&&s._h(r,p)<0)&&(l=!0)):!n&&r?(a.track({type:0,doc:r}),e=!0):n&&!r&&(a.track({type:1,doc:n}),e=!0,(f||p)&&(l=!0)),e&&(c=r?(h=h.add(r),o?c.add(t):c.delete(t)):(h=h.delete(t),c.delete(t)))}),Qb(this.query)||Xb(this.query))for(;h.size>this.query.limit;){var n=Qb(this.query)?h.last():h.first(),h=h.delete(n.key),c=c.delete(n.key);a.track({type:1,doc:n})}return{fh:h,mh:a,Eh:l,Wt:c}},UT.prototype.Th=function(t,e){return t.Je&&e.hasCommittedMutations&&!e.Je},UT.prototype.yr=function(t,e,n){var o=this,r=this.fh;this.fh=t.fh,this.Wt=t.Wt;var i=t.mh.Ut();i.sort(function(t,e){return r=t.type,i=e.type,n(r)-n(i)||o._h(t.doc,e.doc);function n(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xv()}}var r,i}),this.Ih(n);var s=e?this.Ah():[],n=0===this.lh.size&&this.te?1:0,e=n!==this.hh;return this.hh=n,0!==i.length||e?{snapshot:new Rg(this.query,t.fh,r,i,t.Wt,0==n,e,!1),Rh:s}:{Rh:s}},UT.prototype.Qs=function(t){return this.te&&"Offline"===t?(this.te=!1,this.yr({fh:this.fh,mh:new Og,Wt:this.Wt,Eh:!1},!1)):{Rh:[]}},UT.prototype.gh=function(t){return!this.uh.has(t)&&!!this.fh.has(t)&&!this.fh.get(t).Je},UT.prototype.Ih=function(t){var e=this;t&&(t.ee.forEach(function(t){return e.uh=e.uh.add(t)}),t.ne.forEach(function(t){}),t.se.forEach(function(t){return e.uh=e.uh.delete(t)}),this.te=t.te)},UT.prototype.Ah=function(){var e=this;if(!this.te)return[];var n=this.lh;this.lh=Ng(),this.fh.forEach(function(t){e.gh(t.key)&&(e.lh=e.lh.add(t.key))});var r=[];return n.forEach(function(t){e.lh.has(t)||r.push(new PT(t))}),this.lh.forEach(function(t){n.has(t)||r.push(new RT(t))}),r},UT.prototype.Ph=function(t){this.uh=t.Fc,this.lh=Ng();t=this.wh(t.documents);return this.yr(t,!0)},UT.prototype.yh=function(){return Rg.Gt(this.query,this.fh,this.Wt,0===this.hh)},UT),xT=function(t,e,n){this.query=t,this.targetId=e,this.view=n},LT=function(t){this.key=t,this.Vh=!1},MT=(Object.defineProperty(FT.prototype,"Uh",{get:function(){return!0===this.qh},enumerable:!1,configurable:!0}),FT);function FT(t,e,n,r,i,o){this.ju=t,this.ph=e,this.bh=n,this.Sh=r,this.currentUser=i,this.Dh=o,this.Ch={},this.Nh=new Hy(o_,i_),this.Fh=new Map,this.xh=[],this.$h=new fg(oy.i),this.kh=new Map,this.Mh=new HI,this.Oh={},this.Lh=new Map,this.Bh=uI.da(),this.onlineState="Unknown",this.qh=void 0}function UT(t,e){this.query=t,this.uh=e,this.hh=null,this.te=!1,this.lh=Ng(),this.Wt=Ng(),this._h=u_(t),this.fh=new kg(this._h)}function jT(i,o,s,a){return bo(this,void 0,void 0,function(){var e,n,r;return _o(this,function(t){switch(t.label){case 0:return i.Qh=function(t,e,n){return function(r,i,o,s){return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:return(e=i.view.wh(o)).Eh?[4,xI(r.ju,i.query,!1).then(function(t){t=t.documents;return i.view.wh(t,e)})]:[3,2];case 1:e=t.sent(),t.label=2;case 2:return n=s&&s.zt.get(i.targetId),n=i.view.yr(e,r.Uh,n),[2,(zT(r,i.targetId,n.Rh),n.snapshot)]}})})}(i,t,e,n)},[4,xI(i.ju,o,!0)];case 1:return n=t.sent(),r=new DT(o,n.Fc),e=r.wh(n.documents),n=Dg.Zt(s,a&&"Offline"!==i.onlineState),n=r.yr(e,i.Uh,n),zT(i,s,n.Rh),r=new xT(o,s,r),[2,(i.Nh.set(o,r),i.Fh.has(s)?i.Fh.get(s).push(o):i.Fh.set(s,[o]),n.snapshot)]}})})}function VT(r,i){return bo(this,void 0,void 0,function(){var n,e;return _o(this,function(t){switch(t.label){case 0:n=r,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,RI(n.ju,i)];case 2:return e=t.sent(),i.zt.forEach(function(t,e){e=n.kh.get(e);e&&(Yv(t.ee.size+t.ne.size+t.se.size<=1),0<t.ee.size?e.Vh=!0:0<t.ne.size?Yv(e.Vh):0<t.se.size&&(Yv(e.Vh),e.Vh=!1))}),[4,XT(n,e,i)];case 3:return t.sent(),[3,6];case 4:return[4,UI(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})}function qT(t,n,e){var r,t=t;(t.Uh&&0===e||!t.Uh&&1===e)&&(r=[],t.Nh.forEach(function(t,e){e=e.view.Qs(n);e.snapshot&&r.push(e.snapshot)}),function(t,i){t.onlineState=i;var o=!1;t.Bs.forEach(function(t,e){for(var n=0,r=e.listeners;n<r.length;n++)r[n].Qs(i)&&(o=!0)}),o&&yw(t)}(t.bh,n),r.length&&t.Ch.yu(r),t.onlineState=n,t.Uh&&t.Sh.Ki(n))}function BT(s,a,u){return bo(this,void 0,void 0,function(){var n,o;return _o(this,function(t){switch(t.label){case 0:n=s,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,(e=n.ju,r=a,(i=e).persistence.runTransaction("Reject batch","readwrite-primary",function(e){var n;return i.Sr.Oo(e,r).next(function(t){return Yv(null!==t),n=t.keys(),i.Sr.Wo(e,t)}).next(function(){return i.Sr.zo(e)}).next(function(){return i.Cc.kr(e,n)})}))];case 2:return o=t.sent(),HT(n,a,u),WT(n,a),n.Sh.ki(a,"rejected",u),[4,XT(n,o)];case 3:return t.sent(),[3,6];case 4:return[4,UI(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}var e,r,i})})}function WT(t,e){(t.Lh.get(e)||[]).forEach(function(t){t.resolve()}),t.Lh.delete(e)}function HT(t,e,n){var r=t,i=r.Oh[r.currentUser.ti()];i&&((t=i.get(e))&&(n?t.reject(n):t.resolve(),i=i.remove(e)),r.Oh[r.currentUser.ti()]=i)}function GT(e,t,n){void 0===n&&(n=null),e.Sh.Bi(t);for(var r=0,i=e.Fh.get(t);r<i.length;r++){var o=i[r];e.Nh.delete(o),n&&e.Ch.Wh(o,n)}e.Fh.delete(t),e.Uh&&e.Mh.Uc(t).forEach(function(t){e.Mh.Ho(t)||KT(e,t)})}function KT(t,e){var n=t.$h.get(e);null!==n&&(vT(t.ph,n),t.$h=t.$h.remove(e),t.kh.delete(n),QT(t))}function zT(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof RT?(t.Mh.Da(o.key,e),function(t,e){e=e.key;t.$h.get(e)||(Gv("SyncEngine","New document in limbo: "+e),t.xh.push(e),QT(t))}(t,o)):o instanceof PT?(Gv("SyncEngine","Document no longer in limbo: "+o.key),t.Mh.Na(o.key,e),t.Mh.Ho(o.key)||KT(t,o.key)):Xv()}}function QT(t){for(;0<t.xh.length&&t.$h.size<t.Dh;){var e=t.xh.shift(),n=t.Bh.next();t.kh.set(n,new LT(e)),t.$h=t.$h.ot(e,n),dT(t.ph,new ug(t_(zb(e.path)),n,2,ww.ai))}}function XT(e,s,a){return bo(this,void 0,void 0,function(){var n,r,i,o;return _o(this,function(t){switch(t.label){case 0:return r=[],i=[],o=[],(n=e).Nh.m()?[3,3]:(n.Nh.forEach(function(t,e){o.push(n.Qh(e,s,a).then(function(t){t&&(n.Uh&&n.Sh.Qi(e.targetId,t.fromCache?"not-current":"current"),r.push(t),t=Fw.zr(e.targetId,t),i.push(t))}))}),[4,Promise.all(o)]);case 1:return t.sent(),n.Ch.yu(r),[4,function(u,c){return bo(this,void 0,void 0,function(){var r,e,n,i,o,s,a;return _o(this,function(t){switch(t.label){case 0:r=u,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return B_.forEach(c,function(e){return B_.forEach(e.Kr,function(t){return r.persistence.No.Da(n,e.targetId,t)}).next(function(){return B_.forEach(e.Gr,function(t){return r.persistence.No.Na(n,e.targetId,t)})})})})];case 2:return t.sent(),[3,4];case 3:if(!J_(e=t.sent()))throw e;return Gv("LocalStore","Failed to update sequence numbers: "+e),[3,4];case 4:for(n=0,i=c;n<i.length;n++)a=i[n],o=a.targetId,a.fromCache||(s=r.bc.get(o),a=s.nt,a=s.rt(a),r.bc=r.bc.ot(o,a));return[2]}})})}(n.ju,i)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}function YT(i,o){return bo(this,void 0,void 0,function(){var n,r;return _o(this,function(t){switch(t.label){case 0:return(n=i).currentUser.isEqual(o)?[3,3]:(Gv("SyncEngine","User change. New user:",o.ti()),[4,function(i,o){return bo(this,void 0,void 0,function(){var e,n,m,r;return _o(this,function(t){switch(t.label){case 0:return n=(e=i).Sr,m=e.Cc,[4,e.persistence.runTransaction("Handle user change","readonly",function(y){var g;return e.Sr.Uo(y).next(function(t){return g=t,n=e.persistence.mc(o),m=new Mw(e.Dc,n,e.persistence.Ic()),n.Uo(y)}).next(function(t){for(var e=[],n=[],r=Ng(),i=0,o=g;i<o.length;i++){var s=o[i];e.push(s.batchId);for(var a=0,u=s.mutations;a<u.length;a++)var c=u[a],r=r.add(c.key)}for(var h=0,l=t;h<l.length;h++){var f=l[h];n.push(f.batchId);for(var p=0,d=f.mutations;p<d.length;p++){var v=d[p];r=r.add(v.key)}}return m.kr(y,r).next(function(t){return{jh:t,Kh:e,Gh:n}})})})];case 1:return r=t.sent(),[2,(e.Sr=n,e.Cc=m,e.Vc.Nc(e.Cc),r)]}})})}(n.ju,o)]);case 1:return r=t.sent(),n.currentUser=o,(e=n).Lh.forEach(function(t){t.forEach(function(t){t.reject(new qv(Vv.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Lh.clear(),n.Sh.ji(o,r.Kh,r.Gh),[4,XT(n,r.jh)];case 2:t.sent(),t.label=3;case 3:return[2]}var e})})}function JT(a,u,c,h){return bo(this,void 0,void 0,function(){var o,s;return _o(this,function(t){switch(t.label){case 0:return[4,(e=(o=a).ju,n=u,i=(r=e).Sr,r.persistence.runTransaction("Lookup mutation documents","readonly",function(e){return i.Lo(e,n).next(function(t){return t?r.Cc.kr(e,t):B_.resolve(null)})}))];case 1:return null===(s=t.sent())?[3,6]:"pending"!==c?[3,3]:[4,ST(o.ph)];case 2:return t.sent(),[3,4];case 3:"acknowledged"===c||"rejected"===c?(HT(o,u,h||null),WT(o,u),o.ju.Sr.Ko(u)):Xv(),t.label=4;case 4:return[4,XT(o,s)];case 5:return t.sent(),[3,7];case 6:Gv("SyncEngine","Cannot apply mutation batch with id: "+u),t.label=7;case 7:return[2]}var e,n,r,i})})}function $T(h,l){return bo(this,void 0,void 0,function(){var r,e,i,o,s,a,u,c;return _o(this,function(t){switch(t.label){case 0:return eS(r=h),nS(r),!0!==l||!0===r.qh?[3,3]:(e=r.Sh.Ci(),[4,ZT(r,e.A())]);case 1:return i=t.sent(),r.qh=!0,[4,AT(r.ph,!0)];case 2:for(t.sent(),o=0,s=i;o<s.length;o++)a=s[o],dT(r.ph,a);return[3,7];case 3:return!1!==l||!1===r.qh?[3,7]:(u=[],c=Promise.resolve(),r.Fh.forEach(function(t,e){r.Sh.qi(e)?u.push(e):c=c.then(function(){return GT(r,e),DI(r.ju,e,!0)}),vT(r.ph,e)}),[4,c]);case 4:return t.sent(),[4,ZT(r,u)];case 5:return t.sent(),(n=r).kh.forEach(function(t,e){vT(n.ph,e)}),n.Mh.Qc(),n.kh=new Map,n.$h=new fg(oy.i),r.qh=!1,[4,AT(r.ph,!1)];case 6:t.sent(),t.label=7;case 7:return[2]}var n})})}function ZT(p,d){return bo(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l,f;return _o(this,function(t){switch(t.label){case 0:e=p,n=[],r=[],i=0,o=d,t.label=1;case 1:return i<o.length?(s=o[i],a=void 0,(u=e.Fh.get(s))&&0!==u.length?[4,PI(e.ju,t_(u[0]))]:[3,7]):[3,13];case 2:a=t.sent(),c=0,h=u,t.label=3;case 3:return c<h.length?(l=h[c],l=e.Nh.get(l),[4,function(r,i){return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:return[4,xI((e=r).ju,i.query,!0)];case 1:return n=t.sent(),n=i.view.Ph(n),[2,(e.Uh&&zT(e,i.targetId,n.Rh),n)]}})})}(e,l)]):[3,6];case 4:(l=t.sent()).snapshot&&r.push(l.snapshot),t.label=5;case 5:return c++,[3,3];case 6:return[3,11];case 7:return[4,LI(e.ju,s)];case 8:return f=t.sent(),[4,PI(e.ju,f)];case 9:return a=t.sent(),[4,jT(e,tS(f),s,!1)];case 10:t.sent(),t.label=11;case 11:n.push(a),t.label=12;case 12:return i++,[3,1];case 13:return[2,(e.Ch.yu(r),n)]}})})}function tS(t){return Kb(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function eS(t){return t.ph.Gu.sh=VT.bind(null,t),t.ph.Gu.qe=function(t,e){var n=t;if((t=n.kh.get(e))&&t.Vh)return Ng().add(t.key);var r=Ng();if(!(e=n.Fh.get(e)))return r;for(var i=0,o=e;i<o.length;i++)var s=o[i],s=n.Nh.get(s),r=r.kt(s.view.dh);return r}.bind(null,t),t.ph.Gu.nh=function(o,s,a){return bo(this,void 0,void 0,function(){var e,n,r,i;return _o(this,function(t){switch(t.label){case 0:return(e=o).Sh.Qi(s,"rejected",a),i=e.kh.get(s),(n=i&&i.key)?(r=(r=new fg(oy.i)).ot(n,new Vb(n,Ky.min())),i=Ng().add(n),i=new Pg(Ky.min(),new Map,new bg(Ry),r,i),[4,VT(e,i)]):[3,2];case 1:return t.sent(),e.$h=e.$h.remove(n),e.kh.delete(s),QT(e),[3,4];case 2:return[4,DI(e.ju,s,!1).then(function(){return GT(e,s,a)}).catch(UI)];case 3:t.sent(),t.label=4;case 4:return[2]}})})}.bind(null,t),t.Ch.yu=function(t,e){for(var n=t,r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,a=n.Bs.get(a);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Ws(s)&&(r=!0);a.Ls=s}}r&&yw(n)}.bind(null,t.bh),t.Ch.Wh=function(t,e,n){var r=t;if(t=r.Bs.get(e))for(var i=0,o=t.listeners;i<o.length;i++)o[i].onError(n);r.Bs.delete(e)}.bind(null,t.bh),t}function nS(t){return t.ph.Gu.ih=function(i,o){return bo(this,void 0,void 0,function(){var e,n,r;return _o(this,function(t){switch(t.label){case 0:e=i,n=o.batch.batchId,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,kI(e.ju,o)];case 2:return r=t.sent(),HT(e,n,null),WT(e,n),e.Sh.ki(n,"acknowledged"),[4,XT(e,r)];case 3:return t.sent(),[3,6];case 4:return[4,UI(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})}.bind(null,t),t.ph.Gu.rh=BT.bind(null,t),t}var rS,iS,oS,sS=(RS.prototype.Nc=function(t){this.zh=t},RS.prototype.Lr=function(e,r,i,o){var s=this;return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.on.length||1===r.on.length&&r.on[0].field.p())||i.isEqual(Ky.min())?this.Hh(e,r):this.zh.kr(e,o).next(function(t){var n=s.Yh(r,t);return(Qb(r)||Xb(r))&&s.Eh(r.an,n,o,i)?s.Hh(e,r):(Hv()<=Ns.DEBUG&&Gv("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),s_(r)),s.zh.Lr(e,r,i).next(function(e){return n.forEach(function(t){e=e.ot(t.key,t)}),e}))})},RS.prototype.Yh=function(n,t){var r=new bg(u_(n));return t.forEach(function(t,e){e instanceof jb&&a_(n,e)&&(r=r.add(e))}),r},RS.prototype.Eh=function(t,e,n,r){if(n.size!==e.size)return!0;e="F"===t?e.last():e.first();return!!e&&(e.hasPendingWrites||0<e.version.L(r))},RS.prototype.Hh=function(t,e){return Hv()<=Ns.DEBUG&&Gv("IndexFreeQueryEngine","Using full collection scan to execute query:",s_(e)),this.zh.Lr(t,e,Ky.min())},RS),aS=(OS.prototype.$o=function(t){return B_.resolve(0===this.Sr.length)},OS.prototype.ko=function(t,e,n,r){var i=this.Jh;this.Jh++,0<this.Sr.length&&this.Sr[this.Sr.length-1];n=new Dw(i,e,n,r);this.Sr.push(n);for(var o=0,s=r;o<s.length;o++){var a=s[o];this.Xh=this.Xh.add(new GI(a.key,i)),this.Dr.Mo(t,a.key.path.h())}return B_.resolve(n)},OS.prototype.Oo=function(t,e){return B_.resolve(this.Zh(e))},OS.prototype.Bo=function(t,e){e+=1,e=this.tl(e),e=e<0?0:e;return B_.resolve(this.Sr.length>e?this.Sr[e]:null)},OS.prototype.qo=function(){return B_.resolve(0===this.Sr.length?-1:this.Jh-1)},OS.prototype.Uo=function(t){return B_.resolve(this.Sr.slice())},OS.prototype.Nr=function(t,e){var n=this,r=new GI(e,0),e=new GI(e,Number.POSITIVE_INFINITY),i=[];return this.Xh.Ft([r,e],function(t){t=n.Zh(t.jc);i.push(t)}),B_.resolve(i)},OS.prototype.Or=function(t,e){var n=this,r=new bg(Ry);return e.forEach(function(t){var e=new GI(t,0),t=new GI(t,Number.POSITIVE_INFINITY);n.Xh.Ft([e,t],function(t){r=r.add(t.jc)})}),B_.resolve(this.el(r))},OS.prototype.Wr=function(t,e){var n=e.path,r=n.length+1,e=n;oy.F(e)||(e=e.child(""));var e=new GI(new oy(e),0),i=new bg(Ry);return this.Xh.xt(function(t){var e=t.key.path;return!!n.T(e)&&(e.length===r&&(i=i.add(t.jc)),!0)},e),B_.resolve(this.el(i))},OS.prototype.el=function(t){var e=this,n=[];return t.forEach(function(t){t=e.Zh(t);null!==t&&n.push(t)}),n},OS.prototype.Wo=function(n,r){var i=this;Yv(0===this.nl(r.batchId,"removed")),this.Sr.shift();var o=this.Xh;return B_.forEach(r.mutations,function(t){var e=new GI(t.key,r.batchId);return o=o.delete(e),i.No.Go(n,t.key)}).next(function(){i.Xh=o})},OS.prototype.Ko=function(t){},OS.prototype.Ho=function(t,e){var n=new GI(e,0),n=this.Xh.$t(n);return B_.resolve(e.isEqual(n&&n.key))},OS.prototype.zo=function(t){return this.Sr.length,B_.resolve()},OS.prototype.nl=function(t,e){return this.tl(t)},OS.prototype.tl=function(t){return 0===this.Sr.length?0:t-this.Sr[0].batchId},OS.prototype.Zh=function(t){t=this.tl(t);return t<0||t>=this.Sr.length?null:this.Sr[t]},OS),uS=(kS.prototype.Er=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,i=this.sl(e);return this.docs=this.docs.ot(r,{ta:e,size:i,readTime:n}),this.size+=i-o,this.Dr.Mo(t,r.path.h())},kS.prototype.Ar=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},kS.prototype.Rr=function(t,e){e=this.docs.get(e);return B_.resolve(e?e.ta:null)},kS.prototype.getEntries=function(t,e){var n=this,r=wg;return e.forEach(function(t){var e=n.docs.get(t);r=r.ot(t,e?e.ta:null)}),B_.resolve(r)},kS.prototype.Lr=function(t,e,n){for(var r=Tg,i=new oy(e.path.child("")),o=this.docs.ft(i);o.At();){var s=o.It(),a=s.key,u=s.value,s=u.ta,u=u.readTime;if(!e.path.T(a.path))break;u.L(n)<=0||s instanceof jb&&a_(e,s)&&(r=r.ot(s.key,s))}return B_.resolve(r)},kS.prototype.il=function(t,e){return B_.forEach(this.docs,function(t){return e(t)})},kS.prototype.ra=function(t){return new cS(this)},kS.prototype.aa=function(t){return B_.resolve(this.size)},kS),cS=(go(AS,oS=Dr),AS.prototype.yr=function(n){var r=this,i=[];return this.wr.forEach(function(t,e){e?i.push(r.ca.Er(n,e,r.readTime)):r.ca.Ar(t)}),B_.$n(i)},AS.prototype.gr=function(t,e){return this.ca.Rr(t,e)},AS.prototype.Pr=function(t,e){return this.ca.getEntries(t,e)},AS),hS=(NS.prototype.Ce=function(t,n){return this.rl.forEach(function(t,e){return n(e)}),B_.resolve()},NS.prototype.Ea=function(t){return B_.resolve(this.lastRemoteSnapshotVersion)},NS.prototype.Ia=function(t){return B_.resolve(this.ol)},NS.prototype.wa=function(t){return this.highestTargetId=this.cl.next(),B_.resolve(this.highestTargetId)},NS.prototype.Aa=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ol&&(this.ol=e),B_.resolve()},NS.prototype.ga=function(t){this.rl.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.cl=new uI(e),this.highestTargetId=e),t.sequenceNumber>this.ol&&(this.ol=t.sequenceNumber)},NS.prototype.Ra=function(t,e){return this.ga(e),this.targetCount+=1,B_.resolve()},NS.prototype.ya=function(t,e){return this.ga(e),B_.resolve()},NS.prototype.Va=function(t,e){return this.rl.delete(e.target),this.al.Uc(e.targetId),--this.targetCount,B_.resolve()},NS.prototype.po=function(n,r,i){var o=this,s=0,a=[];return this.rl.forEach(function(t,e){e.sequenceNumber<=r&&null===i.get(e.targetId)&&(o.rl.delete(t),a.push(o.pa(n,e.targetId)),s++)}),B_.$n(a).next(function(){return s})},NS.prototype.ba=function(t){return B_.resolve(this.targetCount)},NS.prototype.va=function(t,e){e=this.rl.get(e)||null;return B_.resolve(e)},NS.prototype.Sa=function(t,e,n){return this.al.Lc(e,n),B_.resolve()},NS.prototype.Ca=function(e,t,n){this.al.qc(t,n);var r=this.persistence.No,i=[];return r&&t.forEach(function(t){i.push(r.Go(e,t))}),B_.$n(i)},NS.prototype.pa=function(t,e){return this.al.Uc(e),B_.resolve()},NS.prototype.Fa=function(t,e){e=this.al.Wc(e);return B_.resolve(e)},NS.prototype.Ho=function(t,e){return B_.resolve(this.al.Ho(e))},NS),lS=(CS.prototype.start=function(){return Promise.resolve()},CS.prototype.Di=function(){return this.Oa=!1,Promise.resolve()},Object.defineProperty(CS.prototype,"Ei",{get:function(){return this.Oa},enumerable:!1,configurable:!0}),CS.prototype.Za=function(){},CS.prototype.tc=function(){},CS.prototype.Ic=function(){return this.Dr},CS.prototype.mc=function(t){var e=this.ul[t.ti()];return e||(e=new aS(this.Dr,this.No),this.ul[t.ti()]=e),e},CS.prototype.Tc=function(){return this.Ka},CS.prototype.Ec=function(){return this.vr},CS.prototype.runTransaction=function(t,e,n){var r=this;Gv("MemoryPersistence","Starting transaction:",t);var i=new fS(this.Ma.next());return this.No.ll(),n(i).next(function(t){return r.No._l(i).next(function(){return t})}).Fn().then(function(t){return i.br(),t})},CS.prototype.fl=function(e,n){return B_.kn(Object.values(this.ul).map(function(t){return function(){return t.Ho(e,n)}}))},CS),fS=(go(SS,iS=M),SS),pS=(TS.ml=function(t){return new TS(t)},Object.defineProperty(TS.prototype,"Tl",{get:function(){if(this.wl)return this.wl;throw Xv()},enumerable:!1,configurable:!0}),TS.prototype.Da=function(t,e,n){return this.dl.Da(n,e),this.Tl.delete(n.toString()),B_.resolve()},TS.prototype.Na=function(t,e,n){return this.dl.Na(n,e),this.Tl.add(n.toString()),B_.resolve()},TS.prototype.Go=function(t,e){return this.Tl.add(e.toString()),B_.resolve()},TS.prototype.removeTarget=function(t,e){var n=this;this.dl.Uc(e.targetId).forEach(function(t){return n.Tl.add(t.toString())});var r=this.persistence.Tc();return r.Fa(t,e.targetId).next(function(t){t.forEach(function(t){return n.Tl.add(t.toString())})}).next(function(){return r.Va(t,e)})},TS.prototype.ll=function(){this.wl=new Set},TS.prototype._l=function(n){var r=this,i=this.persistence.Ec().ra();return B_.forEach(this.Tl,function(t){var e=oy.D(t);return r.El(n,e).next(function(t){t||i.Ar(e)})}).next(function(){return r.wl=null,i.apply(n)})},TS.prototype.yc=function(t,e){var n=this;return this.El(t,e).next(function(t){t?n.Tl.delete(e.toString()):n.Tl.add(e.toString())})},TS.prototype.hl=function(t){return 0},TS.prototype.El=function(t,e){var n=this;return B_.kn([function(){return B_.resolve(n.dl.Ho(e))},function(){return n.persistence.Tc().Ho(t,e)},function(){return n.persistence.fl(t,e)}])},TS),dS=(IS.prototype.gu=function(t){this.Rl=t},IS.prototype.Tu=function(t){this.gl=t},IS.prototype.onMessage=function(t){this.Pl=t},IS.prototype.close=function(){this.Al()},IS.prototype.send=function(t){this.Il(t)},IS.prototype.yl=function(){this.Rl()},IS.prototype.Vl=function(t){this.gl(t)},IS.prototype.pl=function(t){this.Pl(t)},IS),vS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},yS=(ES.prototype.$u=function(e,t,n,r){var i=this.Dl(e,t);Gv("RestConnection","Sending: ",i,n);t={};return this.Cl(t,r),this.Nl(e,i,t,n).then(function(t){return Gv("RestConnection","Received: ",t),t},function(t){throw zv("RestConnection",e+" failed with error: ",t,"url: ",i,"request:",n),t})},ES.prototype.ku=function(t,e,n,r){return this.$u(t,e,n,r)},ES.prototype.Cl=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/7.24.0",t["Content-Type"]="text/plain",e)for(var n in e.Kc)e.Kc.hasOwnProperty(n)&&(t[n]=e.Kc[n])},ES.prototype.Dl=function(t,e){t=vS[t];return this.vl+"/v1/"+e+":"+t},go(wS,rS=ES),wS.prototype.Nl=function(o,e,s,a){return new Promise(function(n,r){var i=new jv;i.listenOnce(Fv.COMPLETE,function(){try{switch(i.getLastErrorCode()){case Mv.NO_ERROR:var t=i.getResponseJson();Gv("Connection","XHR received:",JSON.stringify(t)),n(t);break;case Mv.TIMEOUT:Gv("Connection",'RPC "'+o+'" timed out'),r(new qv(Vv.DEADLINE_EXCEEDED,"Request time out"));break;case Mv.HTTP_ERROR:var e=i.getStatus();Gv("Connection",'RPC "'+o+'" failed with status:',e,"response text:",i.getResponseText()),0<e?(t=i.getResponseJson().error)&&t.status&&t.message?(e=t.status.toLowerCase().replace("_","-"),e=0<=Object.values(Vv).indexOf(e)?e:Vv.UNKNOWN,r(new qv(e,t.message))):r(new qv(Vv.UNKNOWN,"Server responded with status "+i.getStatus())):r(new qv(Vv.UNAVAILABLE,"Connection failed."));break;default:Xv()}}finally{Gv("Connection",'RPC "'+o+'" completed.')}});var t=JSON.stringify(a);i.send(e,"POST",t,s,15)})},wS.prototype.Pu=function(t,e){var n=[this.vl,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Ov,t={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.U.projectId+"/databases/"+this.U.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.W};this.Cl(t.initMessageHeaders,e),Mo()||Uo()||0<=Lo().indexOf("Electron/")||(0<=(e=Lo()).indexOf("MSIE ")||0<=e.indexOf("Trident/"))||0<=Lo().indexOf("MSAppHost/")||Fo()||(t.httpHeadersOverwriteParam="$httpHeaders");n=n.join("");Gv("Connection","Creating WebChannel: "+n,t);var o=r.createWebChannel(n,t),i=!1,s=!1,a=new dS({Il:function(t){s?Gv("Connection","Not sending because WebChannel is closed:",t):(i||(Gv("Connection","Opening WebChannel transport."),o.open(),i=!0),Gv("Connection","WebChannel sending:",t),o.send(t))},Al:function(){return o.close()}}),t=function(t,e){o.listen(t,function(t){try{e(t)}catch(t){setTimeout(function(){throw t},0)}})};return t(Uv.EventType.OPEN,function(){s||Gv("Connection","WebChannel transport opened.")}),t(Uv.EventType.CLOSE,function(){s||(s=!0,Gv("Connection","WebChannel transport closed"),a.Vl())}),t(Uv.EventType.ERROR,function(t){s||(s=!0,zv("Connection","WebChannel transport errored:",t),a.Vl(new qv(Vv.UNAVAILABLE,"The operation could not be completed")))}),t(Uv.EventType.MESSAGE,function(t){var e,n,r,i;s||(Yv(!!(e=t.data[0])),(n=e.error||(null===(i=e[0])||void 0===i?void 0:i.error))?(Gv("Connection","WebChannel received error:",n),r=n.status,t=function(){var t=ag[r];if(void 0!==t)return lg(t)}(),i=n.message,void 0===t&&(t=Vv.INTERNAL,i="Unknown error status: "+r+" with message "+n.message),s=!0,a.Vl(new qv(t,i)),o.close()):(Gv("Connection","WebChannel received:",e),a.pl(e)))}),setTimeout(function(){a.yl()},0),a},wS),gS=(_S.prototype.Zu=function(t){this.Ml.push(t)},_S.prototype.Di=function(){window.removeEventListener("online",this.Fl),window.removeEventListener("offline",this.$l)},_S.prototype.Ol=function(){window.addEventListener("online",this.Fl),window.addEventListener("offline",this.$l)},_S.prototype.xl=function(){Gv("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Ml;t<e.length;t++)(0,e[t])(0)},_S.prototype.kl=function(){Gv("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Ml;t<e.length;t++)(0,e[t])(1)},_S.Ln=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},_S),mS=(bS.prototype.Zu=function(t){},bS.prototype.Di=function(){},bS);function bS(){}function _S(){var t=this;this.Fl=function(){return t.xl()},this.$l=function(){return t.kl()},this.Ml=[],this.Ol()}function wS(t){var e=this;return(e=rS.call(this,t)||this).forceLongPolling=t.forceLongPolling,e.W=t.W,e}function ES(t){this.bl=t,this.U=t.U;var e=t.ssl?"https":"http";this.vl=e+"://"+t.host,this.Sl="projects/"+this.U.projectId+"/databases/"+this.U.database+"/documents"}function IS(t){this.Il=t.Il,this.Al=t.Al}function TS(t){this.persistence=t,this.dl=new HI,this.wl=null}function SS(t){var e=this;return(e=iS.call(this)||this).xa=t,e}function CS(t){var e=this;this.ul={},this.Ma=new ww(0),this.Oa=!1,this.Oa=!0,this.No=t(this),this.Ka=new hS(this),this.Dr=new ME,this.vr=(t=this.Dr,new uS(t,function(t){return e.No.hl(t)}))}function NS(t){this.persistence=t,this.rl=new Hy(rg,ig),this.lastRemoteSnapshotVersion=Ky.min(),this.highestTargetId=0,this.ol=0,this.al=new HI,this.targetCount=0,this.cl=uI.fa()}function AS(t){var e=this;return(e=oS.call(this)||this).ca=t,e}function kS(t,e){this.Dr=t,this.sl=e,this.docs=new fg(oy.i),this.size=0}function OS(t,e){this.Dr=t,this.No=e,this.Sr=[],this.Jh=1,this.Xh=new bg(GI.kc)}function RS(){}function PS(t){return new dm(t,!0)}var DS,xS,LS,MS,FS="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",US=(ZS.prototype.initialize=function(e){return bo(this,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return this.Sh=this.Ll(e),this.persistence=this.Bl(e),[4,this.persistence.start()];case 1:return t.sent(),this.ql=this.Ul(e),this.ju=this.Ql(e),[2]}})})},ZS.prototype.Ul=function(t){return null},ZS.prototype.Ql=function(t){return e=this.persistence,n=new sS,t=t.Wl,new NI(e,n,t);var e,n},ZS.prototype.Bl=function(t){if(t.persistenceSettings.jl)throw new qv(Vv.FAILED_PRECONDITION,FS);return new lS(pS.ml)},ZS.prototype.Ll=function(t){return new Pw},ZS.prototype.terminate=function(){return bo(this,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return this.ql&&this.ql.stop(),[4,this.Sh.Di()];case 1:return t.sent(),[4,this.persistence.Di()];case 2:return t.sent(),[2]}})})},ZS.prototype.clearPersistence=function(t,e){throw new qv(Vv.FAILED_PRECONDITION,FS)},ZS),jS=(go($S,MS=US),$S.prototype.initialize=function(e){return bo(this,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return[4,MS.prototype.initialize.call(this,e)];case 1:return t.sent(),[4,FI(this.ju)];case 2:return t.sent(),[4,this.Kl.initialize(this,e)];case 3:return t.sent(),[4,nS(this.Kl.fi)];case 4:return t.sent(),[4,ST(this.Kl.ph)];case 5:return t.sent(),[2]}})})},$S.prototype.Ul=function(t){var e=this.persistence.No.wo;return new rE(e,t.cs)},$S.prototype.Bl=function(t){var e=CI(t.bl.U,t.bl.persistenceKey),n=PS(t.bl.U);return new mI(t.persistenceSettings.synchronizeTabs,e,t.clientId,tE.ao(t.persistenceSettings.cacheSizeBytes),t.cs,ow(),sw(),n,this.Sh,t.persistenceSettings.ka)},$S.prototype.Ll=function(t){return new Pw},$S.prototype.clearPersistence=function(t,e){return function(n){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return W_.Ln()?(e=n+"main",[4,W_.delete(e)]):[2,Promise.resolve()];case 1:return t.sent(),[2]}})})}(CI(t,e))},go(JS,LS=$S),JS.prototype.initialize=function(r){return bo(this,void 0,void 0,function(){var e,n=this;return _o(this,function(t){switch(t.label){case 0:return[4,LS.prototype.initialize.call(this,r)];case 1:return t.sent(),e=this.Kl.fi,this.Sh instanceof Rw?(this.Sh.fi={er:JT.bind(null,e),nr:function(i,o,s,a){return bo(this,void 0,void 0,function(){var e,n,r;return _o(this,function(t){switch(t.label){case 0:return(e=i).qh?(Gv("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!e.Fh.has(o))return[3,8];switch(s){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,MI(e.ju)];case 3:return n=t.sent(),r=Pg.Xt(o,"current"===s),[4,XT(e,n,r)];case 4:return t.sent(),[3,8];case 5:return[4,DI(e.ju,o,!0)];case 6:return t.sent(),GT(e,o,a),[3,8];case 7:Xv(),t.label=8;case 8:return[2]}})})}.bind(null,e),sr:function(c,h,l){return bo(this,void 0,void 0,function(){var n,e,r,i,o,s,a,u;return _o(this,function(t){switch(t.label){case 0:if(!(n=eS(c)).qh)return[3,10];e=0,r=h,t.label=1;case 1:return e<r.length?(r=r[e],n.Fh.has(r)?(Gv("SyncEngine","Adding an already active target "+r),[3,5]):[4,LI(n.ju,r)]):[3,6];case 2:return i=t.sent(),[4,PI(n.ju,i)];case 3:return o=t.sent(),[4,jT(n,tS(i),o.targetId,!1)];case 4:t.sent(),dT(n.ph,o),t.label=5;case 5:return e++,[3,1];case 6:s=function(e){return _o(this,function(t){switch(t.label){case 0:return n.Fh.has(e)?[4,DI(n.ju,e,!1).then(function(){vT(n.ph,e),GT(n,e)}).catch(UI)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})},a=0,u=l,t.label=7;case 7:return a<u.length?(u=u[a],[5,s(u)]):[3,10];case 8:t.sent(),t.label=9;case 9:return a++,[3,7];case 10:return[2]}})})}.bind(null,e),pi:function(t){return t.ju.persistence.pi()}.bind(null,e)},[4,this.Sh.start()]):[3,3];case 2:t.sent(),t.label=3;case 3:return[4,this.persistence.Xa(function(e){return bo(n,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return[4,$T(this.Kl.fi,e)];case 1:return t.sent(),this.ql&&(e&&!this.ql.Ei?this.ql.start(this.ju):e||this.ql.stop()),[2]}})})})];case 4:return t.sent(),[2]}})})},JS.prototype.Ll=function(t){if(t.persistenceSettings.jl&&t.persistenceSettings.synchronizeTabs){var e=ow();if(!Rw.Ln(e))throw new qv(Vv.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=CI(t.bl.U,t.bl.persistenceKey);return new Rw(e,t.cs,n,t.clientId,t.Wl)}return new Pw},JS),VS=(YS.prototype.initialize=function(n,r){return bo(this,void 0,void 0,function(){var e=this;return _o(this,function(t){switch(t.label){case 0:return this.ju?[3,2]:(this.ju=n.ju,this.Sh=n.Sh,this.Ku=this.Gl(r),this.ph=this.zl(r),this.bh=this.Hl(r),this.fi=this.Yl(r),this.Sh.di=function(t){return qT(e.fi,t,1)},this.ph.Gu.Jl=YT.bind(null,this.fi),[4,AT(this.ph,this.fi.Uh)]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},YS.prototype.Hl=function(t){return new pw},YS.prototype.Gl=function(t){var e=PS(t.bl.U),n=(n=t.bl,new yS(n));return t=t.credentials,new $I(t,n,e)},YS.prototype.zl=function(t){var e=this,n=this.ju,r=this.Ku,i=t.cs,o=function(t){return qT(e.fi,t,0)},t=new(gS.Ln()?gS:mS);return new VI(n,r,i,o,t)},YS.prototype.Yl=function(t){return function(t,e,n,r,i,o,s){o=new MT(t,e,n,r,i,o);return s&&(o.qh=!0),o}(this.ju,this.ph,this.bh,this.Sh,t.Wl,t.Dh,!t.persistenceSettings.jl||!t.persistenceSettings.synchronizeTabs)},YS.prototype.terminate=function(){return pT(this.ph)},YS),qS=(XS.prototype.next=function(t){this.observer.next&&this.Xl(this.observer.next,t)},XS.prototype.error=function(t){this.observer.error?this.Xl(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},XS.prototype.Zl=function(){this.muted=!0},XS.prototype.Xl=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},XS),BS=function(t){!function(){if(!(t instanceof Array)||t.length<1)throw new qv(Vv.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least 1 element.")}();for(var e=0;e<t.length;++e)if(dy("FieldPath","string",e,t[e]),0===t[e].length)throw new qv(Vv.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.t_=new iy(t)},WS=(go(QS,xS=BS),QS.documentId=function(){return new QS(iy.v().R())},QS.prototype.isEqual=function(t){if(!(t instanceof QS))throw Sy("isEqual","FieldPath",1,t);return this.t_.isEqual(t.t_)},QS),HS=new RegExp("[~\\*/\\[\\]]"),GS=function(t){this.e_=t},KS=(go(zS,DS=GS),zS.prototype.n_=function(t){if(2!==t.s_)throw 1===t.s_?t.i_(this.e_+"() can only appear at the top level of your update data"):t.i_(this.e_+"() cannot be used with set() unless you pass {merge:true}");return t.We.push(t.path),null},zS.prototype.isEqual=function(t){return t instanceof zS},zS);function zS(){return null!==DS&&DS.apply(this,arguments)||this}function QS(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return xS.call(this,t)||this}function XS(t){this.observer=t,this.muted=!1}function YS(){}function JS(){return null!==LS&&LS.apply(this,arguments)||this}function $S(t){var e=this;return(e=MS.call(this)||this).Kl=t,e}function ZS(){}function tC(t,e,n){return new IC({s_:3,r_:e.settings.r_,methodName:t.e_,o_:n},e.U,e.serializer,e.ignoreUndefinedProperties)}var eC,nC,rC,iC,oC=(go(wC,iC=GS),wC.prototype.n_=function(t){return new ob(t.path,new Hm)},wC.prototype.isEqual=function(t){return t instanceof wC},wC),sC=(go(_C,rC=GS),_C.prototype.n_=function(t){var e=tC(this,t,!0),n=this.a_.map(function(t){return RC(t,e)}),n=new Gm(n);return new ob(t.path,n)},_C.prototype.isEqual=function(t){return this===t},_C),aC=(go(bC,nC=GS),bC.prototype.n_=function(t){var e=tC(this,t,!0),n=this.a_.map(function(t){return RC(t,e)}),n=new Ym(n);return new ob(t.path,n)},bC.prototype.isEqual=function(t){return this===t},bC),uC=(go(mC,eC=GS),mC.prototype.n_=function(t){var e=new tb(t.serializer,gm(t.serializer,this.c_));return new ob(t.path,e)},mC.prototype.isEqual=function(t){return this===t},mC),cC=(Object.defineProperty(gC.prototype,"latitude",{get:function(){return this.u_},enumerable:!1,configurable:!0}),Object.defineProperty(gC.prototype,"longitude",{get:function(){return this.h_},enumerable:!1,configurable:!0}),gC.prototype.isEqual=function(t){return this.u_===t.u_&&this.h_===t.h_},gC.prototype.toJSON=function(){return{latitude:this.u_,longitude:this.h_}},gC.prototype.Y=function(t){return Ry(this.u_,t.u_)||Ry(this.h_,t.h_)},gC),hC=function(t){this.l_=t},lC=/^__.*__$/,fC=function(t,e,n){this.__=t,this.f_=e,this.d_=n},pC=(yC.prototype.w_=function(t,e){var n=[];return null!==this.We?n.push(new mb(t,this.data,this.We,e)):n.push(new gb(t,this.data,e)),0<this.fieldTransforms.length&&n.push(new Ib(t,this.fieldTransforms)),n},yC),dC=(vC.prototype.w_=function(t,e){e=[new mb(t,this.data,this.We,e)];return 0<this.fieldTransforms.length&&e.push(new Ib(t,this.fieldTransforms)),e},vC);function vC(t,e,n){this.data=t,this.We=e,this.fieldTransforms=n}function yC(t,e,n){this.data=t,this.We=e,this.fieldTransforms=n}function gC(t,e){if(ly("GeoPoint",arguments,2),dy("GeoPoint","number",1,t),dy("GeoPoint","number",2,e),!isFinite(t)||t<-90||90<t)throw new qv(Vv.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new qv(Vv.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.u_=t,this.h_=e}function mC(t,e){var n=this;return(n=eC.call(this,t)||this).c_=e,n}function bC(t,e){var n=this;return(n=nC.call(this,t)||this).a_=e,n}function _C(t,e){var n=this;return(n=rC.call(this,t)||this).a_=e,n}function wC(){return null!==iC&&iC.apply(this,arguments)||this}function EC(t){switch(t){case 0:case 2:case 1:return 1;case 3:case 4:return;default:throw Xv()}}var IC=(Object.defineProperty(CC.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(CC.prototype,"s_",{get:function(){return this.settings.s_},enumerable:!1,configurable:!0}),CC.prototype.T_=function(t){return new CC(Object.assign(Object.assign({},this.settings),t),this.U,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.We)},CC.prototype.E_=function(t){var e=null===(e=this.path)||void 0===e?void 0:e.child(t),e=this.T_({path:e,o_:!1});return e.I_(t),e},CC.prototype.A_=function(t){var e,t=null===(e=this.path)||void 0===e?void 0:e.child(t),t=this.T_({path:t,o_:!1});return t.m_(),t},CC.prototype.R_=function(t){return this.T_({path:void 0,o_:!0})},CC.prototype.i_=function(t){return FC(t,this.settings.methodName,this.settings.g_||!1,this.path,this.settings.r_)},CC.prototype.contains=function(e){return void 0!==this.We.find(function(t){return e.T(t)})||void 0!==this.fieldTransforms.find(function(t){return e.T(t.field)})},CC.prototype.m_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.I_(this.path.get(t))},CC.prototype.I_=function(t){if(0===t.length)throw this.i_("Document fields must not be empty");if(EC(this.s_)&&lC.test(t))throw this.i_('Document fields cannot begin and end with "__"')},CC),TC=(SC.prototype.P_=function(t,e,n,r){return void 0===r&&(r=!1),new IC({s_:t,methodName:e,r_:n,path:iy.P(),o_:!1,g_:r},this.U,this.serializer,this.ignoreUndefinedProperties)},SC);function SC(t,e,n){this.U=t,this.ignoreUndefinedProperties=e,this.serializer=n||PS(t)}function CC(t,e,n,r,i,o){this.settings=t,this.U=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.m_(),this.fieldTransforms=i||[],this.We=o||[]}function NC(t,e,n,r,i,o){void 0===o&&(o={});var s=t.P_(o.merge||o.mergeFields?2:0,e,n,i);xC("Data must be an object, but it was:",s,r);var a,u,r=PC(r,s);if(o.merge)a=new ib(s.We),u=s.fieldTransforms;else if(o.mergeFields){for(var c=[],h=0,l=o.mergeFields;h<l.length;h++){var f=l[h],p=void 0;if(f instanceof BS)p=f.t_;else{if("string"!=typeof f)throw Xv();p=MC(e,f,n)}if(!s.contains(p))throw new qv(Vv.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");UC(c,p)||c.push(p)}a=new ib(c),u=s.fieldTransforms.filter(function(t){return a.Ye(t.field)})}else a=null,u=s.fieldTransforms;return new pC(new Ob(r),a,u)}function AC(t,r,i,e){var o=t.P_(1,r,i);xC("Data must be an object, but it was:",o,e);var s=[],a=new Rb;$v(e,function(t,e){var n=MC(r,t,i),t=o.A_(n);e instanceof KS||e instanceof hC&&e.l_ instanceof KS?s.push(n):null!=(t=RC(e,t))&&(s.push(n),a.set(n,t))});e=new ib(s);return new dC(a.Xe(),e,o.fieldTransforms)}function kC(t,e,n,r,i,o){var s=t.P_(1,e,n),a=[LC(e,r,n)],u=[i];if(o.length%2!=0)throw new qv(Vv.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(LC(e,o[c])),u.push(o[c+1]);for(var h,l,f,p=[],d=new Rb,v=a.length-1;0<=v;--v){UC(p,a[v])||(h=a[v],l=u[v],f=s.A_(h),l instanceof KS||l instanceof hC&&l.l_ instanceof KS?p.push(h):null!=(f=RC(l,f))&&(p.push(h),d.set(h,f)))}i=new ib(p);return new dC(d.Xe(),i,s.fieldTransforms)}function OC(t,e,n,r){return void 0===r&&(r=!1),RC(n,t.P_(r?4:3,e))}function RC(s,t){if(s instanceof hC&&(s=s.l_),DC(s))return xC("Unsupported field value:",t,s),PC(s,t);if(s instanceof GS)return function(t,e){if(!EC(e.s_))throw e.i_(t.e_+"() can only be used with update() and set()");if(!e.path)throw e.i_(t.e_+"() is not currently supported inside arrays");t=t.n_(e);t&&e.fieldTransforms.push(t)}(s,t),null;if(t.path&&t.We.push(t.path),s instanceof Array){if(t.settings.o_&&4!==t.s_)throw t.i_("Nested arrays are not supported");return function(t){for(var e=[],n=0,r=0,i=s;r<i.length;r++){var o=RC(i[r],t.R_(n));null==o&&(o={nullValue:"NULL_VALUE"}),e.push(o),n++}return{arrayValue:{values:e}}}(t)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return gm(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Gy.fromDate(t);return{timestampValue:mm(e.serializer,n)}}if(t instanceof Gy){var r=new Gy(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:mm(e.serializer,r)}}if(t instanceof cC)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof My)return{bytesValue:bm(e.serializer,t.q)};if(t instanceof fC){n=e.U,r=t.__;if(!r.isEqual(n))throw e.i_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:wm(t.__||e.U,t.f_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.i_("Unsupported field value: "+Ey(t))}(s,t)}function PC(t,n){var r={};return Zv(t)?n.path&&0<n.path.length&&n.We.push(n.path):$v(t,function(t,e){e=RC(e,n.E_(t));null!=e&&(r[t]=e)}),{mapValue:{fields:r}}}function DC(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Gy||t instanceof cC||t instanceof My||t instanceof fC||t instanceof GS)}function xC(t,e,n){if(!DC(n)||!wy(n)){n=Ey(n);throw"an object"===n?e.i_(t+" a custom object"):e.i_(t+" "+n)}}function LC(t,e,n){if(e instanceof BS)return e.t_;if("string"==typeof e)return MC(t,e);throw FC("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}function MC(t,e,n){try{return function(e){if(0<=e.search(HS))throw new qv(Vv.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(WS.bind.apply(WS,To([void 0],e.split("."))))}catch(t){throw new qv(Vv.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).t_}catch(e){throw FC(e instanceof Error?e.message:e.toString(),t,!1,void 0,n)}}function FC(t,e,n,r,i){var o=r&&!r.m(),s=void 0!==i,e="Function "+e+"() called with invalid data";n&&(e+=" (via `toFirestore()`)");n="";return(o||s)&&(n+=" (found",o&&(n+=" in field "+r),s&&(n+=" in document "+i),n+=")"),new qv(Vv.INVALID_ARGUMENT,(e+=". ")+t+n)}function UC(t,e){return t.some(function(t){return t.isEqual(e)})}var jC=(HC.prototype.v_=function(r){return bo(this,void 0,void 0,function(){var e,n=this;return _o(this,function(t){switch(t.label){case 0:if(this.S_(),0<this.mutations.length)throw new qv(Vv.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(s,a){return bo(this,void 0,void 0,function(){var n,e,r,i,o;return _o(this,function(t){switch(t.label){case 0:return e=Nm((n=s).serializer)+"/documents",r={documents:a.map(function(t){return Im(n.serializer,t)})},[4,n.ku("BatchGetDocuments",e,r)];case 1:return r=t.sent(),i=new Map,r.forEach(function(t){var e,t=(e=n.serializer,"found"in(t=t)?function(t,e){Yv(!!e.found),e.found.name,e.found.updateTime;var n=Tm(t,e.found.name),t=_m(e.found.updateTime),e=new Ob({mapValue:{fields:e.found.fields}});return new jb(n,t,e,{})}(e,t):"missing"in t?function(t,e){Yv(!!e.missing),Yv(!!e.readTime);t=Tm(t,e.missing),e=_m(e.readTime);return new Vb(t,e)}(e,t):Xv());i.set(t.key.toString(),t)}),o=[],[2,(a.forEach(function(t){t=i.get(t.toString());Yv(!!t),o.push(t)}),o)]}})})}(this.Ku,r)];case 1:return[2,((e=t.sent()).forEach(function(t){t instanceof Vb||t instanceof jb?n.D_(t):Xv()}),e)]}})})},HC.prototype.set=function(t,e){this.write(e.w_(t,this.Ge(t))),this.b_.add(t.toString())},HC.prototype.update=function(t,e){try{this.write(e.w_(t,this.C_(t)))}catch(t){this.p_=t}this.b_.add(t.toString())},HC.prototype.delete=function(t){this.write([new Ab(t,this.Ge(t))]),this.b_.add(t.toString())},HC.prototype.commit=function(){return bo(this,void 0,void 0,function(){var e,n=this;return _o(this,function(t){switch(t.label){case 0:if(this.S_(),this.p_)throw this.p_;return e=this.y_,this.mutations.forEach(function(t){e.delete(t.key.toString())}),e.forEach(function(t,e){e=oy.D(e);n.mutations.push(new kb(e,n.Ge(e)))}),[4,function(i,o){return bo(this,void 0,void 0,function(){var e,n,r;return _o(this,function(t){switch(t.label){case 0:return n=Nm((e=i).serializer)+"/documents",r={writes:o.map(function(t){return Om(e.serializer,t)})},[4,e.$u("Commit",n,r)];case 1:return t.sent(),[2]}})})}(this.Ku,this.mutations)];case 1:return t.sent(),this.V_=!0,[2]}})})},HC.prototype.D_=function(t){var e;if(t instanceof jb)e=t.version;else{if(!(t instanceof Vb))throw Xv();e=Ky.min()}var n=this.y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new qv(Vv.ABORTED,"Document version changed between two reads.")}else this.y_.set(t.key.toString(),e)},HC.prototype.Ge=function(t){var e=this.y_.get(t.toString());return!this.b_.has(t.toString())&&e?ub.updateTime(e):ub.ze()},HC.prototype.C_=function(t){var e=this.y_.get(t.toString());if(this.b_.has(t.toString())||!e)return ub.exists(!0);if(e.isEqual(Ky.min()))throw new qv(Vv.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ub.updateTime(e)},HC.prototype.write=function(t){this.S_(),this.mutations=this.mutations.concat(t)},HC.prototype.S_=function(){},HC),VC=(WC.prototype.run=function(){this.F_()},WC.prototype.F_=function(){var t=this;this.ys.gn(function(){return bo(t,void 0,void 0,function(){var e,n,r=this;return _o(this,function(t){return e=new jC(this.Ku),(n=this.x_(e))&&n.then(function(t){r.cs.ws(function(){return e.commit().then(function(){r.ls.resolve(t)}).catch(function(t){r.k_(t)})})}).catch(function(t){r.k_(t)}),[2]})})})},WC.prototype.x_=function(t){try{var e=this.updateFunction(t);return!$y(e)&&e.catch&&e.then?e:(this.ls.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.ls.reject(t),null}},WC.prototype.k_=function(t){var e=this;0<this.N_&&this.M_(t)?(--this.N_,this.cs.ws(function(){return e.F_(),Promise.resolve()})):this.ls.reject(t)},WC.prototype.M_=function(t){if("FirebaseError"!==t.name)return!1;t=t.code;return"aborted"===t||"failed-precondition"===t||!hg(t)},WC),qC=(BC.prototype.start=function(t,e,n,r){var i=this;this.L_(),this.bl=t;var o=new j_,s=!1;return this.credentials.Hc(function(t){return s?void i.cs.Cs(function(){return function(r,i){return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:return(e=r).cs.xs(),Gv("RemoteStore","RemoteStore received new credentials"),n=_T(e),e.Yu.add(3),[4,fT(e)];case 1:return t.sent(),n&&e.th.set("Unknown"),[4,e.Gu.Jl(i)];case 2:return t.sent(),e.Yu.delete(3),[4,lT(e)];case 3:return t.sent(),[2]}})})}(i.ph,t)}):(s=!0,Gv("FirestoreClient","Initializing. user=",t.uid),i.B_(e,n,r,t,o).then(i.O_.resolve,i.O_.reject))}),this.cs.ws(function(){return i.O_.promise}),o.promise},BC.prototype.enableNetwork=function(){var e=this;return this.L_(),this.cs.enqueue(function(){return e.persistence.tc(!0),(t=e.ph).Yu.delete(0),lT(t);var t})},BC.prototype.B_=function(r,i,o,s,a){return bo(this,void 0,void 0,function(){var e,n=this;return _o(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),e={cs:this.cs,bl:this.bl,clientId:this.clientId,credentials:this.credentials,Wl:s,Dh:100,persistenceSettings:o},[4,r.initialize(e)];case 1:return t.sent(),[4,i.initialize(r,e)];case 2:return t.sent(),this.persistence=r.persistence,this.Sh=r.Sh,this.ju=r.ju,this.ql=r.ql,this.Ku=i.Ku,this.ph=i.ph,this.fi=i.fi,this.q_=i.bh,this.q_.Us=function(s,a){return bo(this,void 0,void 0,function(){var e,n,r,i,o;return _o(this,function(t){switch(t.label){case 0:return e=eS(s),(o=e.Nh.get(a))?(n=o.targetId,e.Sh.Oi(n),r=o.view.yh(),[3,4]):[3,1];case 1:return[4,PI(e.ju,t_(a))];case 2:return i=t.sent(),o=e.Sh.Oi(i.targetId),n=i.targetId,[4,jT(e,a,n,"current"===o)];case 3:r=t.sent(),e.Uh&&dT(e.ph,i),t.label=4;case 4:return[2,r]}})})}.bind(null,this.fi),this.q_.js=function(i,o){return bo(this,void 0,void 0,function(){var e,n,r;return _o(this,function(t){switch(t.label){case 0:return n=(e=i).Nh.get(o),1<(r=e.Fh.get(n.targetId)).length?[2,(e.Fh.set(n.targetId,r.filter(function(t){return!i_(t,o)})),void e.Nh.delete(o))]:e.Uh?(e.Sh.Bi(n.targetId),e.Sh.Fi(n.targetId)?[3,2]:[4,DI(e.ju,n.targetId,!1).then(function(){e.Sh.Ui(n.targetId),vT(e.ph,n.targetId),GT(e,n.targetId)}).catch(UI)]):[3,3];case 1:t.sent(),t.label=2;case 2:return[3,5];case 3:return GT(e,n.targetId),[4,DI(e.ju,n.targetId,!0)];case 4:t.sent(),t.label=5;case 5:return[2]}})})}.bind(null,this.fi),this.persistence.Za(function(){return bo(n,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}})})}),a.resolve(),[3,4];case 3:if(e=t.sent(),a.reject(e),!this.U_(e))throw e;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),this.B_(new US,new VS,{jl:!1},s,a))];case 4:return[2]}})})},BC.prototype.U_=function(t){return"FirebaseError"===t.name?t.code===Vv.FAILED_PRECONDITION||t.code===Vv.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},BC.prototype.L_=function(){if(this.cs.ps)throw new qv(Vv.FAILED_PRECONDITION,"The client has already been terminated.")},BC.prototype.disableNetwork=function(){var t=this;return this.L_(),this.cs.enqueue(function(){return t.persistence.tc(!1),function(n){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return(e=n).Yu.add(0),[4,fT(e)];case 1:return t.sent(),e.th.set("Offline"),[2]}})})}(t.ph)})},BC.prototype.terminate=function(){var t=this;this.cs.Ds();var n=new j_;return this.cs.bs(function(){return bo(t,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return t.trys.push([0,4,,5]),this.ql&&this.ql.stop(),[4,pT(this.ph)];case 1:return t.sent(),[4,this.Sh.Di()];case 2:return t.sent(),[4,this.persistence.Di()];case 3:return t.sent(),this.credentials.Yc(),n.resolve(),[3,5];case 4:return e=t.sent(),e=lw(e,"Failed to shutdown persistence"),n.reject(e),[3,5];case 5:return[2]}})})}),n.promise},BC.prototype.waitForPendingWrites=function(){var t=this;this.L_();var e=new j_;return this.cs.ws(function(){return function(o,s){return bo(this,void 0,void 0,function(){var n,r,i;return _o(this,function(t){switch(t.label){case 0:_T((n=o).ph)||Gv("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(e=n.ju).persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.Sr.qo(t)})];case 2:return-1===(r=t.sent())?[2,void s.resolve()]:((i=n.Lh.get(r)||[]).push(s),n.Lh.set(r,i),[3,4]);case 3:return i=t.sent(),i=lw(i,"Initialization of waitForPendingWrites() operation failed"),s.reject(i),[3,4];case 4:return[2]}var e})})}(t.fi,e)}),e.promise},BC.prototype.listen=function(t,e,n){var r=this;this.L_();var i=new qS(n),o=new gw(t,i,e);return this.cs.ws(function(){return dw(r.q_,o)}),function(){i.Zl(),r.cs.ws(function(){return vw(r.q_,o)})}},BC.prototype.Q_=function(r){return bo(this,void 0,void 0,function(){var e,n=this;return _o(this,function(t){switch(t.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return t.sent(),e=new j_,[2,(this.cs.ws(function(){return function(i,o,s){return bo(this,void 0,void 0,function(){var r;return _o(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(e=o,(n=i).persistence.runTransaction("read document","readonly",function(t){return n.Cc.Cr(t,e)}))];case 1:return(r=t.sent())instanceof jb?s.resolve(r):r instanceof Vb?s.resolve(null):s.reject(new qv(Vv.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=t.sent(),r=lw(r,"Failed to get document '"+o+" from cache"),s.reject(r),[3,3];case 3:return[2]}var e,n})})}(n.ju,r,e)}),e.promise)]}})})},BC.prototype.W_=function(c,h){return void 0===h&&(h={}),bo(this,void 0,void 0,function(){var e,u=this;return _o(this,function(t){switch(t.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return t.sent(),e=new j_,[2,(this.cs.ws(function(){return n=u.q_,r=u.cs,i=c,o=h,s=e,t=new qS({next:function(t){r.ws(function(){return vw(n,a)});var e=t.docs.has(i);!e&&t.fromCache?s.reject(new qv(Vv.UNAVAILABLE,"Failed to get document because the client is offline.")):e&&t.fromCache&&o&&"server"===o.source?s.reject(new qv(Vv.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(t)},error:function(t){return s.reject(t)}}),a=new gw(zb(i.path),t,{includeMetadataChanges:!0,Xs:!0}),dw(n,a);var n,r,i,o,s,t,a}),e.promise)]}})})},BC.prototype.j_=function(r){return bo(this,void 0,void 0,function(){var e,n=this;return _o(this,function(t){switch(t.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return t.sent(),e=new j_,[2,(this.cs.ws(function(){return function(r,i,o){return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,xI(r,i,!0)];case 1:return n=t.sent(),e=new DT(i,n.Fc),n=e.wh(n.documents),n=e.yr(n,!1),o.resolve(n.snapshot),[3,3];case 2:return n=t.sent(),n=lw(n,"Failed to execute query '"+i+" against cache"),o.reject(n),[3,3];case 3:return[2]}})})}(n.ju,r,e)}),e.promise)]}})})},BC.prototype.K_=function(c,h){return void 0===h&&(h={}),bo(this,void 0,void 0,function(){var a,u=this;return _o(this,function(t){switch(t.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return t.sent(),a=new j_,[2,(this.cs.ws(function(){return e=u.q_,n=u.cs,t=c,r=h,i=a,o=new qS({next:function(t){n.ws(function(){return vw(e,s)}),t.fromCache&&"server"===r.source?i.reject(new qv(Vv.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(t)},error:function(t){return i.reject(t)}}),s=new gw(t,o,{includeMetadataChanges:!0,Xs:!0}),dw(e,s);var e,n,t,r,i,o,s}),a.promise)]}})})},BC.prototype.write=function(t){var e=this;this.L_();var n=new j_;return this.cs.ws(function(){return function(f,p,d){return bo(this,void 0,void 0,function(){var s,a;return _o(this,function(t){switch(t.label){case 0:a=nS(f),t.label=1;case 1:return t.trys.push([1,5,,6]),[4,(i=a.ju,u=p,h=i,l=Gy.now(),o=u.reduce(function(t,e){return t.add(e.key)},Ng()),h.persistence.runTransaction("Locally write mutations","readwrite",function(a){return h.Cc.kr(a,o).next(function(t){c=t;for(var s,e=[],n=0,r=u;n<r.length;n++){var i=r[n],o=(s=i,o=c.get(i.key),s instanceof Ib?function(t){for(var e=null,n=0,r=s.fieldTransforms;n<r.length;n++){var i=r[n],o=t instanceof jb?t.field(i.field):void 0,o=qm(i.transform,o||null);null!=o&&(e=(null==e?new Rb:e).set(i.field,o))}return e?e.Xe():null}(o):null);null!=o&&e.push(new mb(i.key,o,function s(t){var a=[];return $v(t.fields||{},function(t,e){var n=new iy([t]);if(lm(e))if(0===(e=s(e.mapValue).fields).length)a.push(n);else for(var r=0,i=e;r<i.length;r++){var o=i[r];a.push(n.child(o))}else a.push(n)}),new ib(a)}(o.proto.mapValue),ub.exists(!0)))}return h.Sr.ko(a,l,e,u)})}).then(function(t){var e=t.lr(c);return{batchId:t.batchId,wr:e}}))];case 2:return s=t.sent(),a.Sh.xi(s.batchId),e=a,n=s.batchId,r=d,i=(i=(i=e.Oh[e.currentUser.ti()])||new fg(Ry)).ot(n,r),e.Oh[e.currentUser.ti()]=i,[4,XT(a,s.wr)];case 3:return t.sent(),[4,ST(a.ph)];case 4:return t.sent(),[3,6];case 5:return a=t.sent(),a=lw(a,"Failed to persist write"),d.reject(a),[3,6];case 6:return[2]}var e,n,r,i,u,c,h,l,o})})}(e.fi,t,n)}),n.promise},BC.prototype.U=function(){return this.bl.U},BC.prototype.G_=function(t){var e=this;this.L_();var r=new qS(t);return this.cs.ws(function(){return bo(e,void 0,void 0,function(){return _o(this,function(t){return[2,(e=this.q_,n=r,e.qs.add(n),void n.next())];var e,n})})}),function(){r.Zl(),e.cs.ws(function(){return bo(e,void 0,void 0,function(){return _o(this,function(t){return[2,void this.q_.qs.delete(r)]})})})}},Object.defineProperty(BC.prototype,"z_",{get:function(){return this.cs.ps},enumerable:!1,configurable:!0}),BC.prototype.transaction=function(t){var e=this;this.L_();var n=new j_;return this.cs.ws(function(){return new VC(e.cs,e.Ku,t,n).run(),Promise.resolve()}),n.promise},BC);function BC(t,e){this.credentials=t,this.cs=e,this.clientId=ky.k(),this.O_=new j_}function WC(t,e,n,r){this.cs=t,this.Ku=e,this.updateFunction=n,this.ls=r,this.N_=5,this.ys=new q_(this.cs,"transaction_retry")}function HC(t){this.Ku=t,this.y_=new Map,this.mutations=[],this.V_=!1,this.p_=null,this.b_=new Set}function GC(i){return function(){if("object"==typeof i&&null!==i)for(var t=i,e=0,n=["next","error","complete"];e<n.length;e++){var r=n[e];if(r in t&&"function"==typeof t[r])return 1}}()}var KC,zC,QC=(fN.prototype.X_=function(t){switch(Jg(t)){case 0:return null;case 1:return t.booleanValue;case 2:return im(t.integerValue||t.doubleValue);case 3:return this.Z_(t.timestampValue);case 4:return this.tf(t);case 5:return t.stringValue;case 6:return this.J_(om(t.bytesValue));case 7:return this.ef(t.referenceValue);case 8:return this.nf(t.geoPointValue);case 9:return this.sf(t.arrayValue);case 10:return this.if(t.mapValue);default:throw Xv()}},fN.prototype.if=function(t){var n=this,r={};return $v(t.fields||{},function(t,e){r[t]=n.X_(e)}),r},fN.prototype.nf=function(t){return new cC(im(t.latitude),im(t.longitude))},fN.prototype.sf=function(t){var e=this;return(t.values||[]).map(function(t){return e.X_(t)})},fN.prototype.tf=function(t){switch(this.H_){case"previous":var e=function t(e){e=e.mapValue.fields.__previous_value__;return Qg(e)?t(e):e}(t);return null==e?null:this.X_(e);case"estimate":return this.Z_(Xg(t));default:return null}},fN.prototype.Z_=function(t){t=rm(t),t=new Gy(t.seconds,t.nanos);return this.timestampsInSnapshots?t:t.toDate()},fN.prototype.ef=function(t){var e=ny.g(t);Yv(Vm(e));t=new Wy(e.get(1),e.get(3)),e=new oy(e.u(5));return t.isEqual(this.U)||Kv("Document "+e+" contains a document reference within a different database ("+t.projectId+"/"+t.database+") which is not supported. It will be treated as a reference in the current database ("+this.U.projectId+"/"+this.U.database+") instead."),this.Y_(e)},fN),XC=tE.ho,YC=(lN.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},lN),JC=(Object.defineProperty(hN.prototype,"mf",{get:function(){return this.Tf||(this.Tf=new TC(this.__,this.wf.ignoreUndefinedProperties)),this.Tf},enumerable:!1,configurable:!0}),hN.prototype.settings=function(t){ly("Firestore.settings",arguments,1),dy("Firestore.settings","object",1,t),t.merge&&delete(t=Object.assign(Object.assign({},this.wf),t)).merge;t=new YC(t);if(this.lf&&!this.wf.isEqual(t))throw new qv(Vv.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");void 0!==(this.wf=t).credentials&&(this.df=function(t){if(!t)return new KI;switch(t.type){case"gapi":var e=t.client;return Yv(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new XI(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new qv(Vv.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},hN.prototype.enableNetwork=function(){return this.hf(),this.lf.enableNetwork()},hN.prototype.disableNetwork=function(){return this.hf(),this.lf.disableNetwork()},hN.prototype.enablePersistence=function(t){var e;if(this.lf)throw new qv(Vv.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var n=!1,r=!1;if(t&&(void 0!==t.experimentalTabSynchronization&&Kv("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),n=null!==(e=null!==(e=t.synchronizeTabs)&&void 0!==e?e:t.experimentalTabSynchronization)&&void 0!==e&&e,r=!!t.experimentalForceOwningTab&&t.experimentalForceOwningTab,n&&r))throw new qv(Vv.INVALID_ARGUMENT,"The 'experimentalForceOwningTab' setting cannot be used with 'synchronizeTabs'.");return this.Ef(this.rf,this.af,{jl:!0,cacheSizeBytes:this.wf.cacheSizeBytes,synchronizeTabs:n,ka:r})},hN.prototype.clearPersistence=function(){return bo(this,void 0,void 0,function(){var n,e=this;return _o(this,function(t){if(void 0!==this.lf&&!this.lf.z_)throw new qv(Vv.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");return n=new j_,[2,(this.uf.bs(function(){return bo(e,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.rf.clearPersistence(this.__,this.ff)];case 1:return t.sent(),n.resolve(),[3,3];case 2:return e=t.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise)]})})},hN.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(hN.prototype,"If",{get:function(){return this.hf(),this.lf.z_},enumerable:!1,configurable:!0}),hN.prototype.waitForPendingWrites=function(){return this.hf(),this.lf.waitForPendingWrites()},hN.prototype.onSnapshotsInSync=function(t){if(this.hf(),GC(t))return this.lf.G_(t);dy("Firestore.onSnapshotsInSync","function",1,t);t={next:t};return this.lf.G_(t)},hN.prototype.hf=function(){return this.lf||this.Ef(new US,new VS,{jl:!1}),this.lf},hN.prototype.Af=function(){return new Vy(this.__,this.ff,this.wf.host,this.wf.ssl,this.wf.experimentalForceLongPolling,this.wf.experimentalAutoDetectLongPolling)},hN.prototype.Ef=function(t,e,n){var r=this.Af();return this.lf=new qC(this.df,this.uf),this.lf.start(r,t,e,n)},hN._f=function(t){if(e=t.options,!Object.prototype.hasOwnProperty.call(e,"projectId"))throw new qv(Vv.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e,t=t.options.projectId;if(!t||"string"!=typeof t)throw new qv(Vv.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new Wy(t)},Object.defineProperty(hN.prototype,"app",{get:function(){if(!this.cf)throw new qv(Vv.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.cf},enumerable:!1,configurable:!0}),hN.prototype.collection=function(t){return ly("Firestore.collection",arguments,1),dy("Firestore.collection","non-empty string",1,t),this.hf(),new _N(ny.g(t),this,null)},hN.prototype.doc=function(t){return ly("Firestore.doc",arguments,1),dy("Firestore.doc","non-empty string",1,t),this.hf(),tN.Rf(ny.g(t),this,null)},hN.prototype.collectionGroup=function(t){if(ly("Firestore.collectionGroup",arguments,1),dy("Firestore.collectionGroup","non-empty string",1,t),0<=t.indexOf("/"))throw new qv(Vv.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.hf(),new mN((t=t,new Bb(ny.P(),t)),this,null)},hN.prototype.runTransaction=function(e){var n=this;return ly("Firestore.runTransaction",arguments,1),dy("Firestore.runTransaction","function",1,e),this.hf().transaction(function(t){return e(new $C(n,t))})},hN.prototype.batch=function(){return this.hf(),new ZC(this)},Object.defineProperty(hN,"logLevel",{get:function(){switch(Hv()){case Ns.DEBUG:return"debug";case Ns.ERROR:return"error";case Ns.SILENT:return"silent";case Ns.WARN:return"warn";case Ns.INFO:return"info";case Ns.VERBOSE:return"verbose";default:return"error"}},enumerable:!1,configurable:!0}),hN.setLogLevel=function(t){ly("Firestore.setLogLevel",arguments,1),by("setLogLevel",["debug","error","silent","warn","info","verbose"],1,t),Bv.setLogLevel(t)},hN.prototype.gf=function(){return this.wf.timestampsInSnapshots},hN.prototype.Pf=function(){return this.wf},hN),$C=(cN.prototype.get=function(t){var e=this;ly("Transaction.get",arguments,1);var n=NN("Transaction.get",t,this.yf);return this.Vf.v_([n.f_]).then(function(t){if(!t||1!==t.length)return Xv();t=t[0];if(t instanceof Vb)return new nN(e.yf,n.f_,null,!1,!1,n.d_);if(t instanceof jb)return new nN(e.yf,n.f_,t,!1,!1,n.d_);throw Xv()})},cN.prototype.set=function(t,e,n){py("Transaction.set",arguments,2,3);t=NN("Transaction.set",t,this.yf);n=TN("Transaction.set",n);e=AN(t.d_,e,n),n=NC(this.yf.mf,"Transaction.set",t.f_,e,null!==t.d_,n);return this.Vf.set(t.f_,n),this},cN.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return e="string"==typeof e||e instanceof WS?(fy("Transaction.update",arguments,3),r=NN("Transaction.update",t,this.yf),kC(this.yf.mf,"Transaction.update",r.f_,e,n,i)):(ly("Transaction.update",arguments,2),r=NN("Transaction.update",t,this.yf),AC(this.yf.mf,"Transaction.update",r.f_,e)),this.Vf.update(r.f_,e),this},cN.prototype.delete=function(t){ly("Transaction.delete",arguments,1);t=NN("Transaction.delete",t,this.yf);return this.Vf.delete(t.f_),this},cN),ZC=(uN.prototype.set=function(t,e,n){py("WriteBatch.set",arguments,2,3),this.vf();t=NN("WriteBatch.set",t,this.yf);n=TN("WriteBatch.set",n);e=AN(t.d_,e,n),n=NC(this.yf.mf,"WriteBatch.set",t.f_,e,null!==t.d_,n);return this.pf=this.pf.concat(n.w_(t.f_,ub.ze())),this},uN.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return this.vf(),e="string"==typeof e||e instanceof WS?(fy("WriteBatch.update",arguments,3),r=NN("WriteBatch.update",t,this.yf),kC(this.yf.mf,"WriteBatch.update",r.f_,e,n,i)):(ly("WriteBatch.update",arguments,2),r=NN("WriteBatch.update",t,this.yf),AC(this.yf.mf,"WriteBatch.update",r.f_,e)),this.pf=this.pf.concat(e.w_(r.f_,ub.exists(!0))),this},uN.prototype.delete=function(t){ly("WriteBatch.delete",arguments,1),this.vf();t=NN("WriteBatch.delete",t,this.yf);return this.pf=this.pf.concat(new Ab(t.f_,ub.ze())),this},uN.prototype.commit=function(){return this.vf(),this.bf=!0,0<this.pf.length?this.yf.hf().write(this.pf):Promise.resolve()},uN.prototype.vf=function(){if(this.bf)throw new qv(Vv.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},uN),tN=(go(aN,zC=fC),aN.Rf=function(t,e,n){if(t.length%2!=0)throw new qv(Vv.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.R()+" has "+t.length);return new aN(new oy(t),e,n)},Object.defineProperty(aN.prototype,"id",{get:function(){return this.f_.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(aN.prototype,"parent",{get:function(){return new _N(this.f_.path.h(),this.firestore,this.d_)},enumerable:!1,configurable:!0}),Object.defineProperty(aN.prototype,"path",{get:function(){return this.f_.path.R()},enumerable:!1,configurable:!0}),aN.prototype.collection=function(t){if(ly("DocumentReference.collection",arguments,1),dy("DocumentReference.collection","non-empty string",1,t),!t)throw new qv(Vv.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");t=ny.g(t);return new _N(this.f_.path.child(t),this.firestore,null)},aN.prototype.isEqual=function(t){if(!(t instanceof aN))throw Sy("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this.f_.isEqual(t.f_)&&this.d_===t.d_},aN.prototype.set=function(t,e){py("DocumentReference.set",arguments,1,2),e=TN("DocumentReference.set",e);t=AN(this.d_,t,e),e=NC(this.firestore.mf,"DocumentReference.set",this.f_,t,null!==this.d_,e);return this.lf.write(e.w_(this.f_,ub.ze()))},aN.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return t="string"==typeof t||t instanceof WS?(fy("DocumentReference.update",arguments,2),kC(this.firestore.mf,"DocumentReference.update",this.f_,t,e,n)):(ly("DocumentReference.update",arguments,1),AC(this.firestore.mf,"DocumentReference.update",this.f_,t)),this.lf.write(t.w_(this.f_,ub.exists(!0)))},aN.prototype.delete=function(){return ly("DocumentReference.delete",arguments,0),this.lf.write([new Ab(this.f_,ub.ze())])},aN.prototype.onSnapshot=function(){for(var e=this,n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];py("DocumentReference.onSnapshot",arguments,1,4);var r={includeMetadataChanges:!1},i=0;"object"!=typeof n[i]||GC(n[i])||(Ty("DocumentReference.onSnapshot",r=n[i],["includeMetadataChanges"]),gy("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};GC(n[i])?(s=n[i],n[i]=null===(r=s.next)||void 0===r?void 0:r.bind(s),n[i+1]=null===(r=s.error)||void 0===r?void 0:r.bind(s),n[i+2]=null===(r=s.complete)||void 0===r?void 0:r.bind(s)):(dy("DocumentReference.onSnapshot","function",i,n[i]),vy("DocumentReference.onSnapshot","function",i+1,n[i+1]),vy("DocumentReference.onSnapshot","function",i+2,n[i+2]));var s={next:function(t){n[i]&&n[i](e.Sf(t))},error:n[i+1],complete:n[i+2]};return this.lf.listen(zb(this.f_.path),o,s)},aN.prototype.get=function(t){var e=this;py("DocumentReference.get",arguments,0,1),CN("DocumentReference.get",t);var n=this.firestore.hf();return t&&"cache"===t.source?n.Q_(this.f_).then(function(t){return new nN(e.firestore,e.f_,t,!0,t instanceof jb&&t.Je,e.d_)}):n.W_(this.f_,t).then(function(t){return e.Sf(t)})},aN.prototype.withConverter=function(t){return new aN(this.f_,this.firestore,t)},aN.prototype.Sf=function(t){var e=t.docs.get(this.f_);return new nN(this.firestore,this.f_,e,t.fromCache,t.hasPendingWrites,this.d_)},aN),eN=(sN.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},sN),nN=(oN.prototype.data=function(t){var e=this;if(py("DocumentSnapshot.data",arguments,0,1),t=SN("DocumentSnapshot.data",t),this.Df){if(this.d_){var n=new rN(this.yf,this.f_,this.Df,this.Cf,this.Nf,null);return this.d_.fromFirestore(n,t)}return new QC(this.yf.__,this.yf.gf(),t.serverTimestamps||"none",function(t){return new tN(t,e.yf,null)},function(t){return new By(t)}).X_(this.Df.rn())}},oN.prototype.get=function(t,e){var n=this;if(py("DocumentSnapshot.get",arguments,1,2),e=SN("DocumentSnapshot.get",e),this.Df){t=this.Df.data().field(LC("DocumentSnapshot.get",t,this.f_));if(null!==t)return new QC(this.yf.__,this.yf.gf(),e.serverTimestamps||"none",function(t){return new tN(t,n.yf,n.d_)},function(t){return new By(t)}).X_(t)}},Object.defineProperty(oN.prototype,"id",{get:function(){return this.f_.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(oN.prototype,"ref",{get:function(){return new tN(this.f_,this.yf,this.d_)},enumerable:!1,configurable:!0}),Object.defineProperty(oN.prototype,"exists",{get:function(){return null!==this.Df},enumerable:!1,configurable:!0}),Object.defineProperty(oN.prototype,"metadata",{get:function(){return new eN(this.Nf,this.Cf)},enumerable:!1,configurable:!0}),oN.prototype.isEqual=function(t){if(!(t instanceof oN))throw Sy("isEqual","DocumentSnapshot",1,t);return this.yf===t.yf&&this.Cf===t.Cf&&this.f_.isEqual(t.f_)&&(null===this.Df?null===t.Df:this.Df.isEqual(t.Df))&&this.d_===t.d_},oN),rN=(go(iN,KC=nN),iN.prototype.data=function(t){return KC.prototype.data.call(this,t)},iN);function iN(){return null!==KC&&KC.apply(this,arguments)||this}function oN(t,e,n,r,i,o){this.yf=t,this.f_=e,this.Df=n,this.Cf=r,this.Nf=i,this.d_=o}function sN(t,e){this.hasPendingWrites=t,this.fromCache=e}function aN(t,e,n){var r=this;return(r=zC.call(this,e.__,t,n)||this).f_=t,r.firestore=e,r.d_=n,r.lf=r.firestore.hf(),r}function uN(t){this.yf=t,this.pf=[],this.bf=!1}function cN(t,e){this.yf=t,this.Vf=e}function hN(t,e,n,r){var i=this;if(void 0===n&&(n=new US),void 0===r&&(r=new VS),this.rf=n,this.af=r,this.cf=null,this.uf=new uw,this.INTERNAL={delete:function(){return bo(i,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return this.hf(),[4,this.lf.terminate()];case 1:return t.sent(),[2]}})})}},"object"==typeof t.options){r=t;this.cf=r,this.__=hN._f(r),this.ff=r.name,this.df=new zI(e)}else{t=t;if(!t.projectId)throw new qv(Vv.INVALID_ARGUMENT,"Must provide projectId");this.__=new Wy(t.projectId,t.database),this.ff="[DEFAULT]",this.df=new KI}this.wf=new YC({})}function lN(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new qv(Vv.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else yy("settings","non-empty string","host",t.host),this.host=t.host,gy("settings","boolean","ssl",t.ssl),this.ssl=null===(e=t.ssl)||void 0===e||e;if(Ty("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling","experimentalAutoDetectLongPolling","ignoreUndefinedProperties"]),gy("settings","object","credentials",t.credentials),this.credentials=t.credentials,gy("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),gy("settings","boolean","ignoreUndefinedProperties",t.ignoreUndefinedProperties),!0===t.timestampsInSnapshots?Kv("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===t.timestampsInSnapshots&&Kv("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(e=t.timestampsInSnapshots)||void 0===e||e,this.ignoreUndefinedProperties=null!==(e=t.ignoreUndefinedProperties)&&void 0!==e&&e,gy("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=tE._o;else{if(t.cacheSizeBytes!==XC&&t.cacheSizeBytes<tE.lo)throw new qv(Vv.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+tE.lo);this.cacheSizeBytes=t.cacheSizeBytes}gy("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.experimentalForceLongPolling=null!==(e=t.experimentalForceLongPolling)&&void 0!==e&&e,gy("settings","boolean","experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalAutoDetectLongPolling=null!==(e=t.experimentalAutoDetectLongPolling)&&void 0!==e&&e,function(t,e){if(!0===t&&!0===e)throw new qv(Vv.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")}(t.experimentalForceLongPolling,t.experimentalAutoDetectLongPolling)}function fN(t,e,n,r,i){this.U=t,this.timestampsInSnapshots=e,this.H_=n,this.Y_=r,this.J_=i}function pN(t,e,n){if("string"==typeof n){if(""===n)throw new qv(Vv.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!$b(e)&&-1!==n.indexOf("/"))throw new qv(Vv.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");e=e.path.child(ny.g(n));if(!oy.F(e))throw new qv(Vv.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return sm(t,new oy(e))}if(n instanceof fC)return sm(t,n.f_);throw new qv(Vv.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Ey(n)+".")}function dN(t,e){if(!Array.isArray(t)||0===t.length)throw new qv(Vv.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t.length)throw new qv(Vv.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if("in"===e||"array-contains-any"===e){if(0<=t.indexOf(null))throw new qv(Vv.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(0<t.filter(function(t){return Number.isNaN(t)}).length)throw new qv(Vv.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")}}function vN(t,e,n){if(!n.isEqual(e))throw new qv(Vv.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function yN(t){if(Xb(t)&&0===t.on.length)throw new qv(Vv.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var gN,mN=(IN.prototype.where=function(t,e,n){ly("Query.where",arguments,3),Iy("Query.where",3,n);e=by("Query.where",["<","<=","==","!=",">=",">","array-contains","in","array-contains-any","not-in"],2,e),t=LC("Query.where",t),e=function(t,e,n,r,i,o,s){if(i.p()){if("array-contains"===o||"array-contains-any"===o)throw new qv(Vv.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){dN(s,o);for(var a=[],u=0,c=s;u<c.length;u++){var h=c[u];a.push(pN(r,t,h))}l={arrayValue:{values:a}}}else l=pN(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||dN(s,o),l=OC(n,e,s,"in"===o||"not-in"===o);var l=h_.create(i,o,l);return function(t,e){if(e.hn()){var n=Jb(t);if(null!==n&&!n.isEqual(e.field))throw new qv(Vv.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");n=Yb(t);null!==n&&vN(0,e.field,n)}t=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(0<=e.indexOf(i.op))return i.op}return null}(t,function(){switch(e.op){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}());if(null!==t)throw t===e.op?new qv(Vv.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new qv(Vv.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+t.toString()+"' filters.")}(t,l),l}(this.Ff,"Query.where",this.firestore.mf,this.firestore.__,t,e,n);return new IN((n=this.Ff,e=n.filters.concat([e]),new Bb(n.path,n.collectionGroup,n.on.slice(),e,n.limit,n.an,n.startAt,n.endAt)),this.firestore,this.d_)},IN.prototype.orderBy=function(t,e){if(py("Query.orderBy",arguments,1,2),vy("Query.orderBy","non-empty string",2,e),void 0===e||"asc"===e)n="asc";else{if("desc"!==e)throw new qv(Vv.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+e+"', expected 'asc' or 'desc'.");n="desc"}var n,t=LC("Query.orderBy",t),t=function(t,e,n){if(null!==t.startAt)throw new qv(Vv.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new qv(Vv.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new U_(e,n);return e=r,null!==Yb(n=t)||null!==(t=Jb(n))&&vN(0,t,e.field),r}(this.Ff,t,n);return new IN((n=this.Ff,t=n.on.concat([t]),new Bb(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.an,n.startAt,n.endAt)),this.firestore,this.d_)},IN.prototype.limit=function(t){return ly("Query.limit",arguments,1),dy("Query.limit","number",1,t),Cy("Query.limit",1,t),new IN(e_(this.Ff,t,"F"),this.firestore,this.d_)},IN.prototype.limitToLast=function(t){return ly("Query.limitToLast",arguments,1),dy("Query.limitToLast","number",1,t),Cy("Query.limitToLast",1,t),new IN(e_(this.Ff,t,"L"),this.firestore,this.d_)},IN.prototype.startAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];fy("Query.startAt",arguments,1);t=this.xf("Query.startAt",t,e,!0);return new IN(n_(this.Ff,t),this.firestore,this.d_)},IN.prototype.startAfter=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];fy("Query.startAfter",arguments,1);t=this.xf("Query.startAfter",t,e,!1);return new IN(n_(this.Ff,t),this.firestore,this.d_)},IN.prototype.endBefore=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];fy("Query.endBefore",arguments,1);t=this.xf("Query.endBefore",t,e,!0);return new IN(r_(this.Ff,t),this.firestore,this.d_)},IN.prototype.endAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];fy("Query.endAt",arguments,1);t=this.xf("Query.endAt",t,e,!1);return new IN(r_(this.Ff,t),this.firestore,this.d_)},IN.prototype.isEqual=function(t){if(!(t instanceof IN))throw Sy("isEqual","Query",1,t);return this.firestore===t.firestore&&i_(this.Ff,t.Ff)&&this.d_===t.d_},IN.prototype.withConverter=function(t){return new IN(this.Ff,this.firestore,t)},IN.prototype.xf=function(c,t,e,n){if(Iy(c,1,t),t instanceof nN)return ly(c,To([t],e),1),function(t,e,n,r){if(!n)throw new qv(Vv.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+c+"().");for(var i=[],o=0,s=Zb(t);o<s.length;o++){var a=s[o];if(a.field.p())i.push(sm(e,n.key));else{var u=n.field(a.field);if(Qg(u))throw new qv(Vv.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===u){a=a.field.R();throw new qv(Vv.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+a+"' (used as the orderBy) does not exist.")}i.push(u)}}return new O_(i,r)}(this.Ff,this.firestore.__,t.Df,n);e=[t].concat(e);return function(t,e,n,r,i,o){var s=t.on;if(i.length>s.length)throw new qv(Vv.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.p()){if("string"!=typeof c)throw new qv(Vv.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!$b(t)&&-1!==c.indexOf("/"))throw new qv(Vv.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(ny.g(c));if(!oy.F(h))throw new qv(Vv.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");h=new oy(h);a.push(sm(e,h))}else{c=OC(n,r,c);a.push(c)}}return new O_(a,o)}(this.Ff,this.firestore.__,this.firestore.mf,c,e,n)},IN.prototype.onSnapshot=function(){for(var t,e=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];py("Query.onSnapshot",arguments,1,4);var i={},o=0;"object"!=typeof n[o]||GC(n[o])||(Ty("Query.onSnapshot",i=n[o],["includeMetadataChanges"]),gy("Query.onSnapshot","boolean","includeMetadataChanges",i.includeMetadataChanges),o++),GC(n[o])?(s=n[o],n[o]=null===(t=s.next)||void 0===t?void 0:t.bind(s),n[o+1]=null===(t=s.error)||void 0===t?void 0:t.bind(s),n[o+2]=null===(t=s.complete)||void 0===t?void 0:t.bind(s)):(dy("Query.onSnapshot","function",o,n[o]),vy("Query.onSnapshot","function",o+1,n[o+1]),vy("Query.onSnapshot","function",o+2,n[o+2]));var s={next:function(t){n[o]&&n[o](new bN(e.firestore,e.Ff,t,e.d_))},error:n[o+1],complete:n[o+2]};return yN(this.Ff),this.firestore.hf().listen(this.Ff,i,s)},IN.prototype.get=function(t){var e=this;py("Query.get",arguments,0,1),CN("Query.get",t),yN(this.Ff);var n=this.firestore.hf();return(t&&"cache"===t.source?n.j_(this.Ff):n.K_(this.Ff,t)).then(function(t){return new bN(e.firestore,e.Ff,t,e.d_)})},IN),bN=(Object.defineProperty(EN.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!1,configurable:!0}),Object.defineProperty(EN.prototype,"empty",{get:function(){return this.kf.docs.m()},enumerable:!1,configurable:!0}),Object.defineProperty(EN.prototype,"size",{get:function(){return this.kf.docs.size},enumerable:!1,configurable:!0}),EN.prototype.forEach=function(e,n){var r=this;py("QuerySnapshot.forEach",arguments,1,2),dy("QuerySnapshot.forEach","function",1,e),this.kf.docs.forEach(function(t){e.call(n,r.Lf(t,r.metadata.fromCache,r.kf.Wt.has(t.key)))})},Object.defineProperty(EN.prototype,"query",{get:function(){return new mN(this.$f,this.yf,this.d_)},enumerable:!1,configurable:!0}),EN.prototype.docChanges=function(t){t&&(Ty("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),gy("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));t=!(!t||!t.includeMetadataChanges);if(t&&this.kf.Kt)throw new qv(Vv.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.Mf&&this.Of===t||(this.Mf=function(i,e,o){if(i.Qt.m()){var n=0;return i.docChanges.map(function(t){var e=o(t.doc,i.fromCache,i.Wt.has(t.doc.key));return t.doc,{type:"added",doc:e,oldIndex:-1,newIndex:n++}})}var s=i.Qt;return i.docChanges.filter(function(t){return e||3!==t.type}).map(function(t){var e=o(t.doc,i.fromCache,i.Wt.has(t.doc.key)),n=-1,r=-1;return 0!==t.type&&(n=s.indexOf(t.doc.key),s=s.delete(t.doc.key)),1!==t.type&&(r=(s=s.add(t.doc)).indexOf(t.doc.key)),{type:function(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xv()}}(t.type),doc:e,oldIndex:n,newIndex:r}})}(this.kf,t,this.Lf.bind(this)),this.Of=t),this.Mf},EN.prototype.isEqual=function(t){if(!(t instanceof EN))throw Sy("isEqual","QuerySnapshot",1,t);return this.yf===t.yf&&i_(this.$f,t.$f)&&this.kf.isEqual(t.kf)&&this.d_===t.d_},EN.prototype.Lf=function(t,e,n){return new rN(this.yf,t.key,t,e,n,this.d_)},EN),_N=(go(wN,gN=mN),Object.defineProperty(wN.prototype,"id",{get:function(){return this.Ff.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(wN.prototype,"parent",{get:function(){var t=this.Ff.path.h();return t.m()?null:new tN(new oy(t),this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(wN.prototype,"path",{get:function(){return this.Ff.path.R()},enumerable:!1,configurable:!0}),wN.prototype.doc=function(t){py("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=ky.k()),dy("CollectionReference.doc","non-empty string",1,t);t=ny.g(t);return tN.Rf(this.Ff.path.child(t),this.firestore,this.d_)},wN.prototype.add=function(t){ly("CollectionReference.add",arguments,1);t=this.d_?this.d_.toFirestore(t):t;dy("CollectionReference.add","object",1,t);var e=this.doc();return new tN(e.f_,this.firestore,null).set(t).then(function(){return e})},wN.prototype.withConverter=function(t){return new wN(this.Bf,this.firestore,t)},wN);function wN(t,e,n){var r=this;if(((r=gN.call(this,zb(t),e,n)||this).Bf=t).length%2!=1)throw new qv(Vv.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.R()+" has "+t.length);return r}function EN(t,e,n,r){this.yf=t,this.$f=e,this.kf=n,this.d_=r,this.Mf=null,this.Of=null,this.metadata=new eN(n.hasPendingWrites,n.fromCache)}function IN(t,e,n){this.Ff=t,this.firestore=e,this.d_=n}function TN(t,e){if(void 0===e)return{merge:!1};if(Ty(t,e,["merge","mergeFields"]),gy(t,"boolean","merge",e.merge),void 0!==(n=e.mergeFields)&&function(t,e,n,r){if(!(n instanceof Array))throw new qv(Vv.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+Ey(n));for(var i=0;i<n.length;++i)if(!r(n[i]))throw new qv(Vv.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+i+" was: "+Ey(n[i]))}(t,"mergeFields",n,function(t){return"string"==typeof t||t instanceof WS}),void 0!==e.mergeFields&&void 0!==e.merge)throw new qv(Vv.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');var n;return e}function SN(t,e){return void 0===e?{}:(Ty(t,e,["serverTimestamps"]),my(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function CN(t,e){vy(t,"object",1,e),e&&(Ty(t,e,["source"]),my(t,0,"source",e.source,["default","server","cache"]))}function NN(t,e,n){if(e instanceof fC){if(e.firestore!==n)throw new qv(Vv.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw Sy(t,"DocumentReference",1,e)}function AN(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var kN,ON,Dr=(go(PN,kN=hC),PN.serverTimestamp=function(){hy("FieldValue.serverTimestamp",arguments);var t=new oC("serverTimestamp");return t.e_="FieldValue.serverTimestamp",new PN(t)},PN.delete=function(){hy("FieldValue.delete",arguments);var t=new KS("deleteField");return t.e_="FieldValue.delete",new PN(t)},PN.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];fy("FieldValue.arrayUnion",arguments,1);var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return fy("arrayUnion()",arguments,1),new sC("arrayUnion",t)}.apply(void 0,t);return n.e_="FieldValue.arrayUnion",new PN(n)},PN.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];fy("FieldValue.arrayRemove",arguments,1);var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return fy("arrayRemove()",arguments,1),new aC("arrayRemove",t)}.apply(void 0,t);return n.e_="FieldValue.arrayRemove",new PN(n)},PN.increment=function(t){dy("FieldValue.increment","number",1,t),ly("FieldValue.increment",arguments,1);t=new uC("increment",t);return t.e_="FieldValue.increment",new PN(t)},PN.prototype.isEqual=function(t){return this.l_.isEqual(t.l_)},PN),RN={Firestore:JC,GeoPoint:cC,Timestamp:Gy,Blob:By,Transaction:$C,WriteBatch:ZC,DocumentReference:tN,DocumentSnapshot:nN,Query:mN,QueryDocumentSnapshot:rN,QuerySnapshot:bN,CollectionReference:_N,FieldPath:WS,FieldValue:Dr,setLogLevel:JC.setLogLevel,CACHE_SIZE_UNLIMITED:XC};function PN(){return null!==kN&&kN.apply(this,arguments)||this}(ON=Ql).INTERNAL.registerComponent(new bs("firestore",function(t){return e=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),r=new VS,t=new jS(r),new JC(e,n,t,r);var e,n,r},"PUBLIC").setServiceProps(Object.assign({},RN))),ON.registerVersion("@firebase/firestore","1.18.0");var DN,xN={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},LN=(go(MN,DN=Error),MN);function MN(t,e,n){e=DN.call(this,e)||this;return Object.setPrototypeOf(e,MN.prototype),e.code=t,e.details=n,e}function FN(t,e,n){var r=function(t){if(200<=t&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"==typeof a){if(!xN[a])return new LN("internal","internal");r=xN[a],i=a}a=s.message;"string"==typeof a&&(i=a),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(t){}return"ok"===r?null:new LN(r,i,o)}var UN=(jN.prototype.getAuthToken=function(){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:if(!this.auth)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(e=t.sent())?[2,e.accessToken]:[2,void 0];case 3:return t.sent(),[2,void 0];case 4:return[2]}})})},jN.prototype.getInstanceIdToken=function(){return bo(this,void 0,void 0,function(){return _o(this,function(t){if(!(this.messaging&&"Notification"in self&&"granted"===Notification.permission))return[2,void 0];try{return[2,this.messaging.getToken()]}catch(t){return[2,void 0]}return[2]})})},jN.prototype.getContext=function(){return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:return[4,this.getAuthToken()];case 1:return e=t.sent(),[4,this.getInstanceIdToken()];case 2:return n=t.sent(),[2,{authToken:e,instanceIdToken:n}]}})})},jN);function jN(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then(function(t){return n.auth=t},function(){}),this.messaging||e.get().then(function(t){return n.messaging=t},function(){})}function VN(t,e){var n,r={};for(n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}var qN=(BN.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map(function(t){return e.encode(t)});if("function"==typeof t||"object"==typeof t)return VN(t,function(t){return e.encode(t)});throw new Error("Data cannot be encoded in JSON: "+t)},BN.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(t){return e.decode(t)}):"function"==typeof t||"object"==typeof t?VN(t,function(t){return e.decode(t)}):t},BN);function BN(){}var WN=(Object.defineProperty(HN.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),HN.prototype._url=function(t){var e=this.app_.options.projectId;return null===this.emulatorOrigin?null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t:this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t},HN.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},HN.prototype.httpsCallable=function(e,n){var r=this;return function(t){return r.call(e,t,n||{})}},HN.prototype.postJSON=function(r,i,o){return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:o["Content-Type"]="application/json",t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.fetchImpl(r,{method:"POST",body:JSON.stringify(i),headers:o})];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),[2,{status:0,json:null}];case 4:n=null,t.label=5;case 5:return t.trys.push([5,7,,8]),[4,e.json()];case 6:return n=t.sent(),[3,8];case 7:return t.sent(),[3,8];case 8:return[2,{status:e.status,json:n}]}})})},HN.prototype.call=function(c,h,l){return bo(this,void 0,void 0,function(){var i,o,s,a,u;return _o(this,function(t){switch(t.label){case 0:return i=this._url(c),h=this.serializer.encode(h),o={data:h},s={},[4,this.contextProvider.getContext()];case 1:return(a=t.sent()).authToken&&(s.Authorization="Bearer "+a.authToken),a.instanceIdToken&&(s["Firebase-Instance-ID-Token"]=a.instanceIdToken),u=l.timeout||7e4,n=u,e=new Promise(function(t,e){r=setTimeout(function(){e(new LN("deadline-exceeded","deadline-exceeded"))},n)}),u=(a={timer:r,promise:e}).timer,a=a.promise,[4,Promise.race([GN(u,this.postJSON(i,o,s)),a,GN(u,this.cancelAllRequests)])];case 2:if(!(a=t.sent()))throw new LN("cancelled","Firebase Functions instance was deleted.");if(u=FN(a.status,a.json,this.serializer))throw u;if(!a.json)throw new LN("internal","Response is not valid JSON object.");if(void 0===(u=a.json.data)&&(u=a.json.result),void 0===u)throw new LN("internal","Response is missing data field.");return[2,{data:this.serializer.decode(u)}]}var n,r,e})})},HN);function HN(t,e,n,r,i){var o=this;void 0===r&&(r="us-central1"),this.app_=t,this.fetchImpl=i,this.serializer=new qN,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(o.deleteService())}},this.contextProvider=new UN(e,n),this.cancelAllRequests=new Promise(function(t){o.deleteService=function(){return t()}});try{var s=new URL(r);this.customDomain=s.origin,this.region="us-central1"}catch(t){this.customDomain=null,this.region=r}}function GN(n,r){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return[4,r];case 1:return e=t.sent(),clearTimeout(n),[2,e]}})})}var KN,zN,QN;function XN(n){return new Promise(function(t,e){n.onsuccess=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function YN(n,r,i){var o,t=new Promise(function(t,e){XN(o=n[r].apply(n,i)).then(t,e)});return t.request=o,t}function JN(t,n,e){e.forEach(function(e){Object.defineProperty(t.prototype,e,{get:function(){return this[n][e]},set:function(t){this[n][e]=t}})})}function $N(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return YN(this[n],t,arguments)})})}function ZN(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return this[n][t].apply(this[n],arguments)})})}function tA(t,r,e,n){n.forEach(function(n){n in e.prototype&&(t.prototype[n]=function(){return t=this[r],(e=YN(t,n,arguments)).then(function(t){if(t)return new nA(t,e.request)});var t,e})})}function eA(t){this._index=t}function nA(t,e){this._cursor=t,this._request=e}function rA(t){this._store=t}function iA(n){this._tx=n,this.complete=new Promise(function(t,e){n.oncomplete=function(){t()},n.onerror=function(){e(n.error)},n.onabort=function(){e(n.error)}})}function oA(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new iA(n)}function sA(t){this._db=t}function aA(t,e,n){var e=YN(indexedDB,"open",[t,e]),r=e.request;return r&&(r.onupgradeneeded=function(t){n&&n(new oA(r.result,t.oldVersion,r.transaction))}),e.then(function(t){return new sA(t)})}function uA(t){return YN(indexedDB,"deleteDatabase",[t])}KN=Ql,zN=fetch.bind(self),QN={Functions:WN},KN.INTERNAL.registerComponent(new bs("functions",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),t=t.getProvider("messaging");return new WN(n,r,t,e,zN)},"PUBLIC").setServiceProps(QN).setMultipleInstances(!0)),Ql.registerVersion("@firebase/functions","0.5.1"),JN(eA,"_index",["name","keyPath","multiEntry","unique"]),$N(eA,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),tA(eA,"_index",IDBIndex,["openCursor","openKeyCursor"]),JN(nA,"_cursor",["direction","key","primaryKey","value"]),$N(nA,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(n){n in IDBCursor.prototype&&(nA.prototype[n]=function(){var e=this,t=arguments;return Promise.resolve().then(function(){return e._cursor[n].apply(e._cursor,t),XN(e._request).then(function(t){if(t)return new nA(t,e._request)})})})}),rA.prototype.createIndex=function(){return new eA(this._store.createIndex.apply(this._store,arguments))},rA.prototype.index=function(){return new eA(this._store.index.apply(this._store,arguments))},JN(rA,"_store",["name","keyPath","indexNames","autoIncrement"]),$N(rA,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),tA(rA,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),ZN(rA,"_store",IDBObjectStore,["deleteIndex"]),iA.prototype.objectStore=function(){return new rA(this._tx.objectStore.apply(this._tx,arguments))},JN(iA,"_tx",["objectStoreNames","mode"]),ZN(iA,"_tx",IDBTransaction,["abort"]),oA.prototype.createObjectStore=function(){return new rA(this._db.createObjectStore.apply(this._db,arguments))},JN(oA,"_db",["name","version","objectStoreNames"]),ZN(oA,"_db",IDBDatabase,["deleteObjectStore","close"]),sA.prototype.transaction=function(){return new iA(this._db.transaction.apply(this._db,arguments))},JN(sA,"_db",["name","version","objectStoreNames"]),ZN(sA,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(i){[rA,eA].forEach(function(t){i in t.prototype&&(t.prototype[i.replace("open","iterate")]=function(){var t=(n=arguments,Array.prototype.slice.call(n)),e=t[t.length-1],n=this._store||this._index,r=n[i].apply(n,t.slice(0,-1));r.onsuccess=function(){e(r.result)}})})}),[eA,rA].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(t,n){var r=this,i=[];return new Promise(function(e){r.iterateCursor(t,function(t){t?(i.push(t.value),void 0===n||i.length!=n?t.continue():e(i)):e(i)})})})});var cA=1e4,hA="w:0.4.17",lA="FIS_v2",fA="https://firebaseinstallations.googleapis.com/v1",pA=36e5,Dr=((M={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',M["not-registered"]="Firebase Installation is not registered.",M["installation-not-found"]="Firebase Installation not found.",M["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',M["app-offline"]="Could not process request. Application offline.",M["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",M),dA=new zo("installations","Installations",Dr);function vA(t){return t instanceof Go&&t.code.includes("request-failed")}function yA(t){t=t.projectId;return fA+"/projects/"+t+"/installations"}function gA(t){return{token:t.token,requestStatus:2,expiresIn:(t=t.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()}}function mA(n,r){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return[4,r.json()];case 1:return e=t.sent(),e=e.error,[2,dA.create("request-failed",{requestName:n,serverCode:e.code,serverMessage:e.message,serverStatus:e.status})]}})})}function bA(t){t=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function _A(t,e){e=e.refreshToken,t=bA(t);return t.append("Authorization",lA+" "+e),t}function wA(n){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return[4,n()];case 1:return 500<=(e=t.sent()).status&&e.status<600?[2,n()]:[2,e]}})})}function EA(e){return new Promise(function(t){setTimeout(t,e)})}var IA=/^[cdef][\w-]{21}$/,TA="";function SA(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;t=function(t){return btoa(String.fromCharCode.apply(String,Io(t))).replace(/\+/g,"-").replace(/\//g,"_")}(t).substr(0,22);return IA.test(t)?t:TA}catch(t){return TA}}function CA(t){return t.appName+"!"+t.appId}var NA=new Map;function AA(t,e){t=CA(t);kA(t,e),function(t,e){var n=RA();n&&n.postMessage({key:t,fid:e});PA()}(t,e)}function kA(t,e){var n,r,i=NA.get(t);if(i)try{for(var o=wo(i),s=o.next();!s.done;s=o.next()){(0,s.value)(e)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var OA=null;function RA(){return!OA&&"BroadcastChannel"in self&&((OA=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){kA(t.data.key,t.data.fid)}),OA}function PA(){0===NA.size&&OA&&(OA.close(),OA=null)}var DA,xA="firebase-installations-database",LA=1,MA="firebase-installations-store",FA=null;function UA(){return FA=FA||aA(xA,LA,function(t){0===t.oldVersion&&t.createObjectStore(MA)})}function jA(o,s){return bo(this,void 0,void 0,function(){var e,n,r,i;return _o(this,function(t){switch(t.label){case 0:return e=CA(o),[4,UA()];case 1:return r=t.sent(),n=r.transaction(MA,"readwrite"),[4,(r=n.objectStore(MA)).get(e)];case 2:return i=t.sent(),[4,r.put(s,e)];case 3:return t.sent(),[4,n.complete];case 4:return t.sent(),i&&i.fid===s.fid||AA(o,s.fid),[2,s]}})})}function VA(r){return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:return e=CA(r),[4,UA()];case 1:return n=t.sent(),[4,(n=n.transaction(MA,"readwrite")).objectStore(MA).delete(e)];case 2:return t.sent(),[4,n.complete];case 3:return t.sent(),[2]}})})}function qA(s,a){return bo(this,void 0,void 0,function(){var e,n,r,i,o;return _o(this,function(t){switch(t.label){case 0:return e=CA(s),[4,UA()];case 1:return r=t.sent(),n=r.transaction(MA,"readwrite"),[4,(r=n.objectStore(MA)).get(e)];case 2:return i=t.sent(),void 0!==(o=a(i))?[3,4]:[4,r.delete(e)];case 3:return t.sent(),[3,6];case 4:return[4,r.put(o,e)];case 5:t.sent(),t.label=6;case 6:return[4,n.complete];case 7:return t.sent(),!o||i&&i.fid===o.fid||AA(s,o.fid),[2,o]}})})}function BA(i){return bo(this,void 0,void 0,function(){var e,n,r;return _o(this,function(t){switch(t.label){case 0:return[4,qA(i,function(t){t=HA(t||{fid:SA(),registrationStatus:0}),t=function(t,e){{if(0!==e.registrationStatus)return 1===e.registrationStatus?{installationEntry:e,registrationPromise:function(i){return bo(this,void 0,void 0,function(){var e,n,r;return _o(this,function(t){switch(t.label){case 0:return[4,WA(i)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,EA(100)];case 3:return t.sent(),[4,WA(i)];case 4:return e=t.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,BA(i)];case 6:return r=t.sent(),n=r.installationEntry,(r=r.registrationPromise)?[2,r]:[2,n];case 7:return[2,e]}})})}(t)}:{installationEntry:e};if(!navigator.onLine){var n=Promise.reject(dA.create("app-offline"));return{installationEntry:e,registrationPromise:n}}e={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},t=function(r,i){return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,7]),[4,function(s,t){var a=t.fid;return bo(this,void 0,void 0,function(){var e,n,r,i,o;return _o(this,function(t){switch(t.label){case 0:return e=yA(s),n=bA(s),o={fid:a,authVersion:lA,appId:s.appId,sdkVersion:hA},r={method:"POST",headers:n,body:JSON.stringify(o)},[4,wA(function(){return fetch(e,r)})];case 1:return(i=t.sent()).ok?[4,i.json()]:[3,3];case 2:return o=t.sent(),[2,{fid:o.fid||a,registrationStatus:2,refreshToken:o.refreshToken,authToken:gA(o.authToken)}];case 3:return[4,mA("Create Installation",i)];case 4:throw t.sent()}})})}(r,i)];case 1:return e=t.sent(),[2,jA(r,e)];case 2:return vA(n=t.sent())&&409===n.serverCode?[4,VA(r)]:[3,4];case 3:return t.sent(),[3,6];case 4:return[4,jA(r,{fid:i.fid,registrationStatus:0})];case 5:t.sent(),t.label=6;case 6:throw n;case 7:return[2]}})})}(t,e);return{installationEntry:e,registrationPromise:t}}}(i,t);return e=t.registrationPromise,t.installationEntry})];case 1:return(n=t.sent()).fid!==TA?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=t.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}})})}function WA(t){return qA(t,function(t){if(!t)throw dA.create("installation-not-found");return HA(t)})}function HA(t){return 1===(e=t).registrationStatus&&e.registrationTime+cA<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function GA(t,s){var a=t.appConfig,u=t.platformLoggerProvider;return bo(this,void 0,void 0,function(){var e,n,r,i,o;return _o(this,function(t){switch(t.label){case 0:return e=function(t,e){e=e.fid;return yA(t)+"/"+e+"/authTokens:generate"}(a,s),n=_A(a,s),(o=u.getImmediate({optional:!0}))&&n.append("x-firebase-client",o.getPlatformInfoString()),o={installation:{sdkVersion:hA}},r={method:"POST",headers:n,body:JSON.stringify(o)},[4,wA(function(){return fetch(e,r)})];case 1:return(i=t.sent()).ok?[4,i.json()]:[3,3];case 2:return o=t.sent(),[2,gA(o)];case 3:return[4,mA("Generate Auth Token",i)];case 4:throw t.sent()}})})}function KA(i,o){return void 0===o&&(o=!1),bo(this,void 0,void 0,function(){var r,e,n;return _o(this,function(t){switch(t.label){case 0:return[4,qA(i.appConfig,function(t){if(!QA(t))throw dA.create("not-registered");var e,n=t.authToken;if(o||2!==(e=n).requestStatus||function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+pA}(e)){if(1===n.requestStatus)return r=function(n,r){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return[4,zA(n.appConfig)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.authToken.requestStatus?[3,5]:[4,EA(100)];case 3:return t.sent(),[4,zA(n.appConfig)];case 4:return e=t.sent(),[3,2];case 5:return 0===(e=e.authToken).requestStatus?[2,KA(n,r)]:[2,e]}})})}(i,o),t;if(!navigator.onLine)throw dA.create("app-offline");n=(e=t,n={requestStatus:1,requestTime:Date.now()},mo(mo({},e),{authToken:n}));return r=function(i,o){return bo(this,void 0,void 0,function(){var e,n,r;return _o(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,8]),[4,GA(i,o)];case 1:return e=t.sent(),r=mo(mo({},o),{authToken:e}),[4,jA(i.appConfig,r)];case 2:return t.sent(),[2,e];case 3:return!vA(n=t.sent())||401!==n.serverCode&&404!==n.serverCode?[3,5]:[4,VA(i.appConfig)];case 4:return t.sent(),[3,7];case 5:return r=mo(mo({},o),{authToken:{requestStatus:0}}),[4,jA(i.appConfig,r)];case 6:t.sent(),t.label=7;case 7:throw n;case 8:return[2]}})})}(i,n),n}return t})];case 1:return e=t.sent(),r?[4,r]:[3,3];case 2:return n=t.sent(),[3,4];case 3:n=e.authToken,t.label=4;case 4:return[2,n]}})})}function zA(t){return qA(t,function(t){if(!QA(t))throw dA.create("not-registered");var e=t.authToken;return 1===(e=e).requestStatus&&e.requestTime+cA<Date.now()?mo(mo({},t),{authToken:{requestStatus:0}}):t})}function QA(t){return void 0!==t&&2===t.registrationStatus}function XA(e,n){return void 0===n&&(n=!1),bo(this,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return[4,function(n){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return[4,BA(n)];case 1:return(e=t.sent().registrationPromise)?[4,e]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(e.appConfig)];case 1:return t.sent(),[4,KA(e,n)];case 2:return[2,t.sent().token]}})})}function YA(i,o){return bo(this,void 0,void 0,function(){var e,n,r;return _o(this,function(t){switch(t.label){case 0:return e=function(t,e){e=e.fid;return yA(t)+"/"+e}(i,o),r=_A(i,o),n={method:"DELETE",headers:r},[4,wA(function(){return fetch(e,n)})];case 1:return(r=t.sent()).ok?[3,3]:[4,mA("Delete Installation",r)];case 2:throw t.sent();case 3:return[2]}})})}function JA(t,r){var i=t.appConfig;return function(t,e){RA();var n=CA(t);(t=NA.get(n))||(t=new Set,NA.set(n,t)),t.add(e)}(i,r),function(){var t,e,n;e=r,n=CA(t=i),(t=NA.get(n))&&(t.delete(e),0===t.size&&NA.delete(n),PA())}}function $A(t){return dA.create("missing-app-config-values",{valueName:t})}(DA=Ql).INTERNAL.registerComponent(new bs("installations",function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw $A("App Configuration");if(!t.name)throw $A("App Name");try{for(var r=wo(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw $A(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(r){return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:return[4,BA(r.appConfig)];case 1:return e=t.sent(),n=e.installationEntry,(e.registrationPromise||KA(r)).catch(console.error),[2,n.fid]}})})}(n)},getToken:function(t){return XA(n,t)},delete:function(){return function(r){return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:return[4,qA(e=r.appConfig,function(t){if(!t||0!==t.registrationStatus)return t})];case 1:if(!(n=t.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw dA.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw dA.create("app-offline");case 3:return[4,YA(e,n)];case 4:return t.sent(),[4,VA(e)];case 5:t.sent(),t.label=6;case 6:return[2]}})})}(n)},onIdChange:function(t){return JA(n,t)}}},"PUBLIC")),DA.registerVersion("@firebase/installations","0.4.17");var ZA,Dr=((M={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',M["only-available-in-window"]="This method is available in a Window context.",M["only-available-in-sw"]="This method is available in a service worker context.",M["permission-default"]="The notification permission was not granted and dismissed instead.",M["permission-blocked"]="The notification permission was not granted and blocked instead.",M["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",M["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",M["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",M["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",M["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",M["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",M["token-update-no-token"]="FCM returned no token when updating the user to push.",M["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",M["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",M["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",M["invalid-vapid-key"]="The public VAPID key must be a string.",M["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",M),tk=new zo("messaging","Messaging",Dr),ek="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",nk="https://fcmregistrations.googleapis.com/v1",rk="FCM_MSG",ik="google.c.a.c_id";function ok(t){t=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,Io(t))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(M=ZA=ZA||{}).PUSH_RECEIVED="push-received",M.NOTIFICATION_CLICKED="notification-clicked";var sk="fcm_token_details_db",ak=5,uk="fcm_token_object_Store";function ck(s){return bo(this,void 0,void 0,function(){var e,o,n=this;return _o(this,function(t){switch(t.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(e=t.sent(),!e.map(function(t){return t.name}).includes(sk))return[2,null];t.label=2;case 2:return o=null,[4,aA(sk,ak,function(i){return bo(n,void 0,void 0,function(){var e,n,r;return _o(this,function(t){switch(t.label){case 0:return i.oldVersion<2?[2]:i.objectStoreNames.contains(uk)?[4,(r=i.transaction.objectStore(uk)).index("fcmSenderId").get(s)]:[2];case 1:return e=t.sent(),[4,r.clear()];case 2:if(t.sent(),!e)return[2];if(2===i.oldVersion){if(!(n=e).auth||!n.p256dh||!n.endpoint)return[2];o={token:n.fcmToken,createTime:null!==(r=n.createTime)&&void 0!==r?r:Date.now(),subscriptionOptions:{auth:n.auth,p256dh:n.p256dh,endpoint:n.endpoint,swScope:n.swScope,vapidKey:"string"==typeof n.vapidKey?n.vapidKey:ok(n.vapidKey)}}}else(3===i.oldVersion||4===i.oldVersion)&&(o={token:(n=e).fcmToken,createTime:n.createTime,subscriptionOptions:{auth:ok(n.auth),p256dh:ok(n.p256dh),endpoint:n.endpoint,swScope:n.swScope,vapidKey:ok(n.vapidKey)}});return[2]}})})})];case 3:return t.sent().close(),[4,uA(sk)];case 4:return t.sent(),[4,uA("fcm_vapid_details_db")];case 5:return t.sent(),[4,uA("undefined")];case 6:return t.sent(),[2,function(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&0<t.createTime&&"string"==typeof t.token&&0<t.token.length&&"string"==typeof e.auth&&0<e.auth.length&&"string"==typeof e.p256dh&&0<e.p256dh.length&&"string"==typeof e.endpoint&&0<e.endpoint.length&&"string"==typeof e.swScope&&0<e.swScope.length&&"string"==typeof e.vapidKey&&0<e.vapidKey.length}(o)?o:null]}})})}var hk="firebase-messaging-database",lk=1,fk="firebase-messaging-store",pk=null;function dk(){return pk=pk||aA(hk,lk,function(t){0===t.oldVersion&&t.createObjectStore(fk)})}function vk(r){return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:return e=gk(r),[4,dk()];case 1:return[4,t.sent().transaction(fk).objectStore(fk).get(e)];case 2:return(e=t.sent())?[2,e]:[3,3];case 3:return[4,ck(r.appConfig.senderId)];case 4:return(n=t.sent())?[4,yk(r,n)]:[3,6];case 5:return t.sent(),[2,n];case 6:return[2]}})})}function yk(r,i){return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:return e=gk(r),[4,dk()];case 1:return n=t.sent(),[4,(n=n.transaction(fk,"readwrite")).objectStore(fk).put(i,e)];case 2:return t.sent(),[4,n.complete];case 3:return t.sent(),[2,i]}})})}function gk(t){return t.appConfig.appId}function mk(r,i){return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:return[4,_k(r)];case 1:e=t.sent(),e={method:"DELETE",headers:e},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(bk(r.appConfig)+"/"+i,e)];case 3:return[4,t.sent().json()];case 4:if((e=t.sent()).error)throw n=e.error.message,tk.create("token-unsubscribe-failed",{errorInfo:n});return[3,6];case 5:throw n=t.sent(),tk.create("token-unsubscribe-failed",{errorInfo:n});case 6:return[2]}})})}function bk(t){t=t.projectId;return nk+"/projects/"+t+"/registrations"}function _k(t){var n=t.appConfig,r=t.installations;return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return[4,r.getToken()];case 1:return e=t.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}})})}function wk(t){var e=t.p256dh,n=t.auth,r=t.endpoint,t=t.vapidKey,e={web:{endpoint:r,auth:n,p256dh:e}};return t!==ek&&(e.web.applicationPubKey=t),e}function Ek(c,h,l){return bo(this,void 0,void 0,function(){var s,a,u;return _o(this,function(t){switch(t.label){case 0:if("granted"!==Notification.permission)throw tk.create("permission-blocked");return[4,function(n,r){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return[4,n.pushManager.getSubscription()];case 1:return(e=t.sent())?[2,e]:[2,n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:function(t){for(var t=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),e=atob(t),n=new Uint8Array(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}(r)})]}})})}(h,l)];case 1:return u=t.sent(),[4,vk(c)];case 2:return s=t.sent(),a={vapidKey:l,swScope:h.scope,endpoint:u.endpoint,auth:ok(u.getKey("auth")),p256dh:ok(u.getKey("p256dh"))},s?[3,3]:[2,Tk(c,a)];case 3:if(e=s.subscriptionOptions,r=(n=a).vapidKey===e.vapidKey,i=n.endpoint===e.endpoint,o=n.auth===e.auth,e=n.p256dh===e.p256dh,r&&i&&o&&e)return[3,8];t.label=4;case 4:return t.trys.push([4,6,,7]),[4,mk(c,s.token)];case 5:return t.sent(),[3,7];case 6:return u=t.sent(),console.warn(u),[3,7];case 7:return[2,Tk(c,a)];case 8:return Date.now()>=s.createTime+6048e5?[2,function(i,o,s){return bo(this,void 0,void 0,function(){var e,n,r;return _o(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,5]),[4,function(o,s){return bo(this,void 0,void 0,function(){var e,n,r,i;return _o(this,function(t){switch(t.label){case 0:return[4,_k(o)];case 1:e=t.sent(),n=wk(s.subscriptionOptions),n={method:"PATCH",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(bk(o.appConfig)+"/"+s.token,n)];case 3:return[4,t.sent().json()];case 4:return r=t.sent(),[3,6];case 5:throw i=t.sent(),tk.create("token-update-failed",{errorInfo:i});case 6:if(r.error)throw i=r.error.message,tk.create("token-update-failed",{errorInfo:i});if(!r.token)throw tk.create("token-update-no-token");return[2,r.token]}})})}(o,i)];case 1:return e=t.sent(),n=mo(mo({},i),{token:e,createTime:Date.now()}),[4,yk(o,n)];case 2:return t.sent(),[2,e];case 3:return r=t.sent(),[4,Ik(o,s)];case 4:throw t.sent(),r;case 5:return[2]}})})}({token:s.token,createTime:Date.now(),subscriptionOptions:a},c,h)]:[2,s.token];case 9:return[2]}var e,n,r,i,o})})}function Ik(n,r){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return[4,vk(n)];case 1:return(e=t.sent())?[4,mk(n,e.token)]:[3,4];case 2:return t.sent(),[4,function(r){return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:return e=gk(r),[4,dk()];case 1:return n=t.sent(),[4,(n=n.transaction(fk,"readwrite")).objectStore(fk).delete(e)];case 2:return t.sent(),[4,n.complete];case 3:return t.sent(),[2]}})})}(n)];case 3:t.sent(),t.label=4;case 4:return[4,r.pushManager.getSubscription()];case 5:return(e=t.sent())?[2,e.unsubscribe()]:[2,!0]}})})}function Tk(n,r){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return[4,function(o,s){return bo(this,void 0,void 0,function(){var e,n,r,i;return _o(this,function(t){switch(t.label){case 0:return[4,_k(o)];case 1:e=t.sent(),n=wk(s),n={method:"POST",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(bk(o.appConfig),n)];case 3:return[4,t.sent().json()];case 4:return r=t.sent(),[3,6];case 5:throw i=t.sent(),tk.create("token-subscribe-failed",{errorInfo:i});case 6:if(r.error)throw i=r.error.message,tk.create("token-subscribe-failed",{errorInfo:i});if(!r.token)throw tk.create("token-subscribe-no-token");return[2,r.token]}})})}(n,r)];case 1:return e=t.sent(),e={token:e,createTime:Date.now(),subscriptionOptions:r},[4,yk(n,e)];case 2:return t.sent(),[2,e.token]}})})}function Sk(t){var e={from:t.from,collapseKey:t.collapse_key};return function(t,e){if(!e.notification)return;t.notification={};var n=e.notification.title;n&&(t.notification.title=n);n=e.notification.body;n&&(t.notification.body=n);e=e.notification.image;e&&(t.notification.image=e)}(e,t),function(t,e){if(!e.data)return;t.data=e.data}(e,t),function(t,e){if(!e.fcmOptions)return;t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);e=e.fcmOptions.analytics_label;e&&(t.fcmOptions.analyticsLabel=e)}(e,t),e}function Ck(t){return"object"==typeof t&&t&&ik in t}var Nk=(Object.defineProperty(Ak.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),Ak.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw tk.create("invalid-bg-handler");this.bgMessageHandler=t},Ak.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},Ak.prototype.getToken=function(){var n;return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return this.vapidKey?[3,2]:[4,vk(this.firebaseDependencies)];case 1:e=t.sent(),this.vapidKey=null!==(n=null===(n=null==e?void 0:e.subscriptionOptions)||void 0===n?void 0:n.vapidKey)&&void 0!==n?n:ek,t.label=2;case 2:return[2,Ek(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},Ak.prototype.deleteToken=function(){return Ik(this.firebaseDependencies,self.registration)},Ak.prototype.requestPermission=function(){throw tk.create("only-available-in-window")},Ak.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw tk.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw tk.create("invalid-vapid-key");this.vapidKey=t},Ak.prototype.useServiceWorker=function(){throw tk.create("only-available-in-window")},Ak.prototype.onMessage=function(){throw tk.create("only-available-in-window")},Ak.prototype.onTokenRefresh=function(){throw tk.create("only-available-in-window")},Ak.prototype.onPush=function(a){return bo(this,void 0,void 0,function(){var i,o,s;return _o(this,function(t){switch(t.label){case 0:return(s=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(t){return null}}(a))?[4,kk()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return(i=t.sent(),i.some(function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))?[2,function(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=ZA.PUSH_RECEIVED;try{for(var i=wo(t),o=i.next();!o.done;o=i.next()){o.value.postMessage(e)}}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}(i,s)]:(o=!1,s.notification?[4,function(t){var e=t.actions,n=Notification.maxActions;e&&n&&e.length>n&&console.warn("This browser only supports "+n+" actions. The remaining actions will not be displayed.");return self.registration.showNotification(null!==(n=t.title)&&void 0!==n?n:"",t)}(((r=mo({},(e=s).notification)).data=((n={})[rk]=e,n),r))]:[3,3]);case 2:t.sent(),o=!0,t.label=3;case 3:return!0===o&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(s=Sk(s),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(s):this.bgMessageHandler.next(s)),[2])}var e,n,r})})},Ak.prototype.onSubChange=function(n){var r;return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return n.newSubscription?[3,2]:[4,Ik(this.firebaseDependencies,self.registration)];case 1:return t.sent(),[2];case 2:return[4,vk(this.firebaseDependencies)];case 3:return e=t.sent(),[4,Ik(this.firebaseDependencies,self.registration)];case 4:return t.sent(),[4,Ek(this.firebaseDependencies,self.registration,null!==(r=null===(r=null==e?void 0:e.subscriptionOptions)||void 0===r?void 0:r.vapidKey)&&void 0!==r?r:ek)];case 5:return t.sent(),[2]}})})},Ak.prototype.onNotificationClick=function(a){var u;return bo(this,void 0,void 0,function(){var n,r,i,o,s;return _o(this,function(t){switch(t.label){case 0:return(n=null===(u=null===(u=a.notification)||void 0===u?void 0:u.data)||void 0===u?void 0:u[rk])?a.action?[2]:(a.stopImmediatePropagation(),a.notification.close(),(r=function(t){var e,n=null!==(e=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==e?e:null===(n=t.notification)||void 0===n?void 0:n.click_action;if(n)return n;return Ck(t.data)?self.location.origin:null}(n))?(i=new URL(r,self.location.href),o=new URL(self.location.origin),i.host!==o.host?[2]:[4,function(u){return bo(this,void 0,void 0,function(){var e,n,r,i,o,s,a;return _o(this,function(t){switch(t.label){case 0:return[4,kk()];case 1:e=t.sent();try{for(n=wo(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),u.host===o.host)return[2,i]}catch(t){s={error:t}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}}return[2,null]}})})}(i)]):[2]):[2];case 1:return(s=t.sent())?[3,4]:[4,self.clients.openWindow(r)];case 2:return s=t.sent(),[4,(e=3e3,new Promise(function(t){setTimeout(t,e)}))];case 3:return t.sent(),[3,6];case 4:return[4,s.focus()];case 5:s=t.sent(),t.label=6;case 6:return s?(n.messageType=ZA.NOTIFICATION_CLICKED,n.isFirebaseMessaging=!0,[2,s.postMessage(n)]):[2]}var e})})},Ak);function Ak(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(t){t.waitUntil(e.onPush(t))}),self.addEventListener("pushsubscriptionchange",function(t){t.waitUntil(e.onSubChange(t))}),self.addEventListener("notificationclick",function(t){t.waitUntil(e.onNotificationClick(t))})}function kk(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}var Ok=(Object.defineProperty(Rk.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),Rk.prototype.messageEventListener=function(i){return bo(this,void 0,void 0,function(){var n,r;return _o(this,function(t){switch(t.label){case 0:return(n=i.data).isFirebaseMessaging?(this.onMessageCallback&&n.messageType===ZA.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback((delete(e=Object.assign({},n)).messageType,delete e.isFirebaseMessaging,e)):this.onMessageCallback.next(Object.assign({},n))),Ck(r=n.data)&&"1"===r["google.c.a.e"]?[4,this.logEvent(n.messageType,r)]:[3,2]):[2];case 1:t.sent(),t.label=2;case 2:return[2]}var e})})},Rk.prototype.getVapidKey=function(){return this.vapidKey},Rk.prototype.getSwReg=function(){return this.swRegistration},Rk.prototype.getToken=function(e){return bo(this,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:t.sent(),t.label=2;case 2:if("granted"!==Notification.permission)throw tk.create("permission-blocked");return[4,this.updateVapidKey(null==e?void 0:e.vapidKey)];case 3:return t.sent(),[4,this.updateSwReg(null==e?void 0:e.serviceWorkerRegistration)];case 4:return t.sent(),[2,Ek(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}})})},Rk.prototype.updateVapidKey=function(e){return bo(this,void 0,void 0,function(){return _o(this,function(t){return e?this.vapidKey=e:this.vapidKey||(this.vapidKey=ek),[2]})})},Rk.prototype.updateSwReg=function(e){return bo(this,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return e||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:if(!e&&this.swRegistration)return[2];if(!(e instanceof ServiceWorkerRegistration))throw tk.create("invalid-sw-registration");return this.swRegistration=e,[2]}})})},Rk.prototype.registerDefaultSw=function(){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),e=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return e.swRegistration=t.sent(),this.swRegistration.update().catch(function(){}),[3,3];case 2:throw e=t.sent(),tk.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}})})},Rk.prototype.deleteToken=function(){return bo(this,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,Ik(this.firebaseDependencies,this.swRegistration)]}})})},Rk.prototype.requestPermission=function(){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw"denied"===e?tk.create("permission-blocked"):tk.create("permission-default")}})})},Rk.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw tk.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw tk.create("invalid-vapid-key");this.vapidKey=t},Rk.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw tk.create("invalid-sw-registration");if(this.swRegistration)throw tk.create("use-sw-after-get-token");this.swRegistration=t},Rk.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},Rk.prototype.setBackgroundMessageHandler=function(){throw tk.create("only-available-in-sw")},Rk.prototype.onBackgroundMessage=function(){throw tk.create("only-available-in-sw")},Rk.prototype.onTokenRefresh=function(){return function(){}},Rk.prototype.logEvent=function(n,r){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return e=function(t){switch(t){case ZA.NOTIFICATION_CLICKED:return"notification_open";case ZA.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(n),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return t.sent().logEvent(e,{message_id:r[ik],message_name:r["google.c.a.c_l"],message_time:r["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},Rk);function Rk(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(t){return e.messageEventListener(t)})}function Pk(t){return tk.create("missing-app-config-values",{valueName:t})}Dr={isSupported:Dk};function Dk(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}Ql.INTERNAL.registerComponent(new bs("messaging",function(t){var e=t.getProvider("app").getImmediate(),t={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw Pk("App Configuration Object");if(!t.name)throw Pk("App Name");var r=t.options;try{for(var i=wo(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw Pk(s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!Dk())throw tk.create("unsupported-browser");return new(self&&"ServiceWorkerGlobalScope"in self?Nk:Ok)(t)},"PUBLIC").setServiceProps(Dr));var xk="firebasestorage.googleapis.com",Lk=12e4,Mk=6e5,Fk=(Uk.prototype.codeProp=function(){return this.code},Uk.prototype.codeEquals=function(t){return Vk(t)===this.codeProp()},Uk.prototype.serverResponseProp=function(){return this.serverResponse_},Uk.prototype.setServerResponseProp=function(t){this.serverResponse_=t},Object.defineProperty(Uk.prototype,"name",{get:function(){return this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(Uk.prototype,"code",{get:function(){return this.code_},enumerable:!1,configurable:!0}),Object.defineProperty(Uk.prototype,"message",{get:function(){return this.serverResponse_?this.message_+"\n"+this.serverResponse_:this.message_},enumerable:!1,configurable:!0}),Object.defineProperty(Uk.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!1,configurable:!0}),Uk);function Uk(t,e){this.code_=Vk(t),this.message_="Firebase Storage: "+e,this.serverResponse_=null,this.name_="FirebaseError"}var jk={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"};function Vk(t){return"storage/"+t}function qk(){return new Fk(jk.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Bk(){return new Fk(jk.CANCELED,"User canceled the upload/download.")}function Wk(){return new Fk(jk.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Hk(t,e,n){return new Fk(jk.INVALID_ARGUMENT,"Invalid argument in `"+e+"` at index "+t+": "+n)}function Gk(){return new Fk(jk.APP_DELETED,"The Firebase app was deleted.")}function Kk(t,e){return new Fk(jk.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function zk(t){throw new Fk(jk.INTERNAL_ERROR,"Internal error: "+t)}var Qk={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function Xk(t){switch(t){case Qk.RAW:case Qk.BASE64:case Qk.BASE64URL:case Qk.DATA_URL:return;default:throw"Expected one of the event types: ["+Qk.RAW+", "+Qk.BASE64+", "+Qk.BASE64URL+", "+Qk.DATA_URL+"]."}}var Yk=function(t,e){this.data=t,this.contentType=e||null};function Jk(t,e){switch(t){case Qk.RAW:return new Yk($k(e));case Qk.BASE64:case Qk.BASE64URL:return new Yk(Zk(t,e));case Qk.DATA_URL:return new Yk(function(t){t=new tO(t);return t.base64?Zk(Qk.BASE64,t.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw Kk(Qk.DATA_URL,"Malformed data URL.")}return $k(e)}(t.rest)}(e),new tO(e).contentType)}throw qk()}function $k(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Zk(e,t){switch(e){case Qk.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw Kk(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Qk.BASE64URL:r=-1!==t.indexOf("+"),n=-1!==t.indexOf("/");if(r||n)throw Kk(e,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var i;try{i=atob(t)}catch(t){throw Kk(e,"Invalid character found")}for(var o=new Uint8Array(i.length),s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return o}var tO=function(t){var e;if(this.base64=!1,(this.contentType=null)===(e=t.match(/^data:([^,]+)?,/)))throw Kk(Qk.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r=e[1]||null;null!=r&&(this.base64=(n=";base64",(e=r).length>=n.length&&e.substring(e.length-n.length)===n),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)};var eO,nO={STATE_CHANGED:"state_changed"},rO="running",iO="pausing",oO="paused",sO="success",aO="canceling",uO="canceled",cO="error",hO={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function lO(t){switch(t){case rO:case iO:case aO:return hO.RUNNING;case oO:return hO.PAUSED;case sO:return hO.SUCCESS;case uO:return hO.CANCELED;case cO:default:return hO.ERROR}}function fO(t){return null!=t}function pO(t){return void 0!==t}function dO(t){return"function"==typeof t}function vO(t){return"object"==typeof t}function yO(t){return"string"==typeof t||t instanceof String}function gO(t){return"number"==typeof t||t instanceof Number}function mO(t){return bO()&&t instanceof Blob}function bO(){return"undefined"!=typeof Blob}(M=eO=eO||{})[M.NO_ERROR=0]="NO_ERROR",M[M.NETWORK_ERROR=1]="NETWORK_ERROR",M[M.ABORT=2]="ABORT";var _O=(wO.prototype.send=function(t,e,n,r){if(this.sent_)throw zk("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),fO(r))for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return fO(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},wO.prototype.getErrorCode=function(){if(!this.sent_)throw zk("cannot .getErrorCode() before sending");return this.errorCode_},wO.prototype.getStatus=function(){if(!this.sent_)throw zk("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},wO.prototype.getResponseText=function(){if(!this.sent_)throw zk("cannot .getResponseText() before sending");return this.xhr_.responseText},wO.prototype.abort=function(){this.xhr_.abort()},wO.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},wO.prototype.addUploadProgressListener=function(t){fO(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",t)},wO.prototype.removeUploadProgressListener=function(t){fO(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",t)},wO);function wO(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=eO.NO_ERROR,this.sendPromise_=new Promise(function(t){e.xhr_.addEventListener("abort",function(){e.errorCode_=eO.ABORT,t(e)}),e.xhr_.addEventListener("error",function(){e.errorCode_=eO.NETWORK_ERROR,t(e)}),e.xhr_.addEventListener("load",function(){t(e)})})}var EO=(IO.prototype.createXhrIo=function(){return new _O},IO);function IO(){}function TO(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(bO())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")}var SO=(CO.prototype.size=function(){return this.size_},CO.prototype.type=function(){return this.type_},CO.prototype.slice=function(t,e){if(mO(this.data_)){var n=this.data_,r=(i=t,r=e,(n=n).webkitSlice?n.webkitSlice(i,r):n.mozSlice?n.mozSlice(i,r):n.slice?n.slice(i,r):null);return null===r?null:new CO(r)}var i,r;return new CO(new Uint8Array(this.data_.buffer,t,e-t),!0)},CO.getBlob=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(bO()){var n=t.map(function(t){return t instanceof CO?t.data_:t});return new CO(TO.apply(null,n))}var n=t.map(function(t){return yO(t)?Jk(Qk.RAW,t).data:t.data_}),r=0;n.forEach(function(t){r+=t.byteLength});var i=new Uint8Array(r),o=0;return n.forEach(function(t){for(var e=0;e<t.length;e++)i[o++]=t[e]}),new CO(i,!0)},CO.prototype.uploadData=function(){return this.data_},CO);function CO(t,e){var n=0,r="";mO(t)?(n=(this.data_=t).size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}var NO=(Object.defineProperty(AO.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(AO.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),AO.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},AO.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},AO.makeFromBucketSpec=function(e){var t,n;try{t=AO.makeFromUrl(e)}catch(t){return new AO(e,"")}if(""===t.path)return t;throw n=e,new Fk(jk.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")},AO.makeFromUrl=function(t){var e=null,n="([A-Za-z0-9.\\-_]+)";var r=new RegExp("^gs://"+n+"(/(.*))?$","i");function i(t){t.path_=decodeURIComponent(t.path)}for(var o=xk.replace(/[.]/g,"\\."),s=[{regex:r,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+o+"/v[A-Za-z0-9_]+/b/"+n+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+n+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:i}],a=0;a<s.length;a++){var u=s[a],c=u.regex.exec(t);if(c){e=new AO(c[u.indices.bucket],c[u.indices.path]||"");u.postModify(e);break}}if(null==e)throw n=t,new Fk(jk.INVALID_URL,"Invalid URL '"+n+"'.");return e},AO);function AO(t,e){this.bucket=t,this.path_=e}function kO(t){var e,n;try{e=JSON.parse(t)}catch(t){return null}return vO(n=e)&&!Array.isArray(n)?e:null}function OO(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function RO(t){return"https://"+xk+"/v0"+t}function PO(t){var e,n=encodeURIComponent,r="?";for(e in t){t.hasOwnProperty(e)&&(r=r+(n(e)+"="+n(t[e]))+"&")}return r=r.slice(0,-1)}function DO(t,e){return e}var xO=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||DO},LO=null;function MO(){if(LO)return LO;var t=[];t.push(new xO("bucket")),t.push(new xO("generation")),t.push(new xO("metageneration")),t.push(new xO("name","fullPath",!0));var e=new xO("name");e.xform=function(t,e){return!yO(e=e)||e.length<2?e:OO(e)},t.push(e);e=new xO("size");return e.xform=function(t,e){return fO(e)?Number(e):e},t.push(e),t.push(new xO("timeCreated")),t.push(new xO("updated")),t.push(new xO("md5Hash",null,!0)),t.push(new xO("cacheControl",null,!0)),t.push(new xO("contentDisposition",null,!0)),t.push(new xO("contentEncoding",null,!0)),t.push(new xO("contentLanguage",null,!0)),t.push(new xO("contentType",null,!0)),t.push(new xO("metadata","customMetadata",!0)),LO=t}function FO(n,r){Object.defineProperty(n,"ref",{get:function(){var t=n.bucket,e=n.fullPath,e=new NO(t,e);return r.makeStorageReference(e)}})}function UO(t,e,n){e=kO(e);if(null===e)return null;return function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return FO(r,t),r}(t,e,n)}function jO(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function VO(t){if(!vO(t)||!t)throw"Expected Metadata object.";for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];if("customMetadata"===e){if(!vO(n))throw"Expected object for 'customMetadata' mapping."}else if(vO(n=n)&&null!==n)throw"Mapping for '"+e+"' cannot be an object."}}var qO="maxResults",BO=1e3,WO="pageToken",HO="prefixes",GO="items";function KO(t,e,n){n=kO(n);if(null===n)return null;return function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[HO])for(var i=0,o=n[HO];i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t.makeStorageReference(new NO(e,s));r.prefixes.push(a)}if(n[GO])for(var u=0,c=n[GO];u<c.length;u++){var h=c[u],a=t.makeStorageReference(new NO(e,h.name));r.items.push(a)}return r}(t,e,n)}function zO(t){if(!vO(t)||!t)throw"Expected ListOptions object.";for(var e in t)if(e===qO){if(!gO(n=t[qO])||!Number.isInteger(n)||t[qO]<=0)throw"Expected maxResults to be a positive number.";if(1e3<t[qO])throw"Expected maxResults to be less than or equal to "+BO+"."}else{if(e!==WO)throw"Unknown option: "+e;if(t[WO]&&!yO(t[WO]))throw"Expected pageToken to be string."}var n}var QO=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function XO(t){if(!t)throw qk()}function YO(n,r){return function(t,e){return XO(null!==(e=UO(n,e,r))),e}}function JO(n,r){return function(t,e){return XO(null!==(e=KO(n,r,e))),e}}function $O(r,i){return function(t,e){var n=UO(r,e,i);return XO(null!==n),function(r,t){if(null===(t=kO(t)))return null;if(!yO(t.downloadTokens))return null;if(0===(t=t.downloadTokens).length)return null;var i=encodeURIComponent;return t.split(",").map(function(t){var e=r.bucket,n=r.fullPath;return RO("/b/"+i(e)+"/o/"+i(n))+PO({alt:"media",token:t})})[0]}(n,e)}}function ZO(i){return function(t,e){var n,r=401===t.getStatus()?new Fk(jk.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(n=i.bucket,new Fk(jk.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(r=i.path,new Fk(jk.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")):e;return r.setServerResponseProp(e.serverResponseProp()),r}}function tR(r){var i=ZO(r);return function(t,e){var n=i(t,e);return 404===t.getStatus()&&(t=r.path,n=new Fk(jk.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")),n.setServerResponseProp(e.serverResponseProp()),n}}function eR(t,e,n){var r=RO(e.fullServerUrl()),i=t.maxOperationRetryTime,i=new QO(r,"GET",YO(t,n),i);return i.errorHandler=tR(e),i}function nR(t,e,n){n=Object.assign({},n);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=(t=e,(e=null)&&e.contentType||t&&t.type()||"application/octet-stream")),n}function rR(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};var a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=nR(e,r,i),i="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+jO(u,n)+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",a="\r\n--"+a+"--",r=SO.getBlob(i,r,a);if(null===r)throw Wk();a={name:u.fullPath},u=RO(o),o=t.maxUploadRetryTime,o=new QO(u,"POST",YO(t,n),o);return o.urlParams=a,o.headers=s,o.body=r.uploadData(),o.errorHandler=ZO(e),o}var iR=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function oR(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){XO(!1)}return XO(!!n&&-1!==(e||["active"]).indexOf(n)),n}function sR(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=nR(e,r,i),i={name:s.fullPath},o=RO(o),r={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},n=jO(s,n),t=t.maxUploadRetryTime;t=new QO(o,"POST",function(t){var e;oR(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){XO(!1)}return XO(yO(e)),e},t);return t.urlParams=i,t.headers=r,t.body=n,t.errorHandler=ZO(e),t}function aR(t,e,n,i){t=t.maxUploadRetryTime,t=new QO(n,"POST",function(t){var e=oR(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){XO(!1)}n||XO(!1);var r=Number(n);return XO(!isNaN(r)),new iR(r,i.size(),"final"===e)},t);return t.headers={"X-Goog-Upload-Command":"query"},t.errorHandler=ZO(e),t}function uR(t,o,e,s,n,a,r,i){var u=new iR(0,0);if(r?(u.current=r.current,u.total=r.total):(u.current=0,u.total=s.size()),s.size()!==u.total)throw new Fk(jk.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,h=c;0<n&&(h=Math.min(h,n));r=u.current,n=r+h,c={"X-Goog-Upload-Command":h===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},r=s.slice(r,n);if(null===r)throw Wk();n=o.maxUploadRetryTime,n=new QO(e,"POST",function(t,e){var n=oR(t,["active","final"]),r=u.current+h,i=s.size(),e="final"===n?YO(o,a)(t,e):null;return new iR(r,i,"final"===n,e)},n);return n.headers=c,n.body=r.uploadData(),n.progressCallback=i||null,n.errorHandler=ZO(t),n}var cR=function(t,e,n){dO(t)||fO(e)||fO(n)?(this.next=t,this.error=e||null,this.complete=n||null):(t=t,this.next=t.next||null,this.error=t.error||null,this.complete=t.complete||null)},hR=function(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o};function lR(e,t,n){for(var r,i,o,s,a=t.length,u=t.length,c=0;c<t.length;c++)if(t[c].optional){a=c;break}if(!(a<=n.length&&n.length<=u))throw r=a,i=u,o=e,u=n.length,i=r===i?1===(s=r)?"argument":"arguments":(s="between "+r+" and "+i,"arguments"),new Fk(jk.INVALID_ARGUMENT_COUNT,"Invalid argument count in `"+o+"`: Expected "+s+" "+i+", received "+u+".");for(c=0;c<n.length;c++)try{t[c].validator(n[c])}catch(t){throw t instanceof Error?Hk(c,e,t.message):Hk(c,e,t)}}var fR=function(e,t){var n=this;this.validator=function(t){n.optional&&!pO(t)||e(t)},this.optional=!!t};function pR(t,e){function n(t){if(!yO(t))throw"Expected string."}var r,i,t=t?(r=n,i=t,function(t){r(t),i(t)}):n;return new fR(t,e)}function dR(){return new fR(function(t){if(!(t instanceof Uint8Array||t instanceof ArrayBuffer||bO()&&t instanceof Blob))throw"Expected Blob or File."})}function vR(t){return new fR(VO,t)}function yR(){return new fR(function(t){if(!(gO(t)&&0<=t))throw"Expected a number 0 or greater."})}function gR(e,t){return new fR(function(t){if(!(null===t||fO(t)&&t instanceof Object))throw"Expected an Object.";null!=e&&e(t)},t)}function mR(t){return new fR(function(t){if(!(null===t||dO(t)))throw"Expected a Function."},t)}function bR(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Promise.resolve().then(function(){return n.apply(void 0,t)})}}var _R=(wR.prototype.makeProgressCallback_=function(){var e=this,n=this.transferred_;return function(t){return e.updateProgress_(n+t)}},wR.prototype.shouldDoResumable_=function(t){return 262144<t.size()},wR.prototype.start_=function(){this.state_===rO&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},wR.prototype.resolveToken_=function(e){var n=this;this.service_.getAuthToken().then(function(t){switch(n.state_){case rO:e(t);break;case aO:n.transition_(uO);break;case iO:n.transition_(oO)}})},wR.prototype.createResumable_=function(){var n=this;this.resolveToken_(function(t){var e=sR(n.service_,n.location_,n.mappings_,n.blob_,n.metadata_),t=n.service_.makeRequest(e,t);(n.request_=t).getPromise().then(function(t){n.request_=null,n.uploadUrl_=t,n.needToFetchStatus_=!1,n.completeTransitions_()},n.errorHandler_)})},wR.prototype.fetchStatus_=function(){var n=this,r=this.uploadUrl_;this.resolveToken_(function(t){var e=aR(n.service_,n.location_,r,n.blob_),t=n.service_.makeRequest(e,t);(n.request_=t).getPromise().then(function(t){n.request_=null,n.updateProgress_(t.current),n.needToFetchStatus_=!1,t.finalized&&(n.needToFetchMetadata_=!0),n.completeTransitions_()},n.errorHandler_)})},wR.prototype.continueUpload_=function(){var n=this,r=262144*this.chunkMultiplier_,i=new iR(this.transferred_,this.blob_.size()),o=this.uploadUrl_;this.resolveToken_(function(t){var e;try{e=uR(n.location_,n.service_,o,n.blob_,r,n.mappings_,i,n.makeProgressCallback_())}catch(t){return n.error_=t,void n.transition_(cO)}t=n.service_.makeRequest(e,t);(n.request_=t).getPromise().then(function(t){n.increaseMultiplier_(),n.request_=null,n.updateProgress_(t.current),t.finalized?(n.metadata_=t.metadata,n.transition_(sO)):n.completeTransitions_()},n.errorHandler_)})},wR.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},wR.prototype.fetchMetadata_=function(){var n=this;this.resolveToken_(function(t){var e=eR(n.service_,n.location_,n.mappings_),t=n.service_.makeRequest(e,t);(n.request_=t).getPromise().then(function(t){n.request_=null,n.metadata_=t,n.transition_(sO)},n.metadataErrorHandler_)})},wR.prototype.oneShotUpload_=function(){var n=this;this.resolveToken_(function(t){var e=rR(n.service_,n.location_,n.mappings_,n.blob_,n.metadata_),t=n.service_.makeRequest(e,t);(n.request_=t).getPromise().then(function(t){n.request_=null,n.metadata_=t,n.updateProgress_(n.blob_.size()),n.transition_(sO)},n.errorHandler_)})},wR.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},wR.prototype.transition_=function(t){if(this.state_!==t)switch(t){case aO:case iO:this.state_=t,null!==this.request_&&this.request_.cancel();break;case rO:var e=this.state_===oO;this.state_=t,e&&(this.notifyObservers_(),this.start_());break;case oO:this.state_=t,this.notifyObservers_();break;case uO:this.error_=Bk(),this.state_=t,this.notifyObservers_();break;case cO:case sO:this.state_=t,this.notifyObservers_()}},wR.prototype.completeTransitions_=function(){switch(this.state_){case iO:this.transition_(oO);break;case aO:this.transition_(uO);break;case rO:this.start_()}},Object.defineProperty(wR.prototype,"snapshot",{get:function(){var t=lO(this.state_);return new hR(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!1,configurable:!0}),wR.prototype.on=function(t,e,n,o){var r="Expected a function or an Object with one of `next`, `error`, `complete` properties.",i=mR(!0).validator,s=gR(null,!0).validator;function a(t){try{return void i(t)}catch(t){}try{if(s(t),!(pO(t.next)||pO(t.error)||pO(t.complete)))throw"";return}catch(t){throw r}}lR("on",[pR(function(){if(t!==nO.STATE_CHANGED)throw"Expected one of the event types: ["+nO.STATE_CHANGED+"]."}),gR(a,!0),mR(!0),mR(!0)],arguments);var u=this;function c(i){return function(t,e,n){null!==i&&lR("on",i,arguments);var r=new cR(t,e,o);return u.addObserver_(r),function(){u.removeObserver_(r)}}}var h=[gR(function(t){if(null===t)throw r;a(t)}),mR(!0),mR(!0)];return!(pO(e)||pO(n)||pO(o))?c(h):c(null)(e,n,o)},wR.prototype.then=function(t,e){return this.promise_.then(t,e)},wR.prototype.catch=function(t){return this.then(null,t)},wR.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},wR.prototype.removeObserver_=function(t){t=this.observers_.indexOf(t);-1!==t&&this.observers_.splice(t,1)},wR.prototype.notifyObservers_=function(){var e=this;this.finishPromise_(),this.observers_.slice().forEach(function(t){e.notifyObserver_(t)})},wR.prototype.finishPromise_=function(){if(null!==this.resolve_){var t=!0;switch(lO(this.state_)){case hO.SUCCESS:bR(this.resolve_.bind(null,this.snapshot))();break;case hO.CANCELED:case hO.ERROR:bR(this.reject_.bind(null,this.error_))();break;default:t=!1}t&&(this.resolve_=null,this.reject_=null)}},wR.prototype.notifyObserver_=function(t){switch(lO(this.state_)){case hO.RUNNING:case hO.PAUSED:t.next&&bR(t.next.bind(t,this.snapshot))();break;case hO.SUCCESS:t.complete&&bR(t.complete.bind(t))();break;case hO.CANCELED:case hO.ERROR:t.error&&bR(t.error.bind(t,this.error_))();break;default:t.error&&bR(t.error.bind(t,this.error_))()}},wR.prototype.resume=function(){lR("resume",[],arguments);var t=this.state_===oO||this.state_===iO;return t&&this.transition_(rO),t},wR.prototype.pause=function(){lR("pause",[],arguments);var t=this.state_===rO;return t&&this.transition_(iO),t},wR.prototype.cancel=function(){lR("cancel",[],arguments);var t=this.state_===rO||this.state_===iO;return t&&this.transition_(aO),t},wR);function wR(t,e,n,r,i,o){var s=this;void 0===o&&(o=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=t,this.service_=e,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=rO,this.errorHandler_=function(t){s.request_=null,s.chunkMultiplier_=1,t.codeEquals(jk.CANCELED)?(s.needToFetchStatus_=!0,s.completeTransitions_()):(s.error_=t,s.transition_(cO))},this.metadataErrorHandler_=function(t){s.request_=null,t.codeEquals(jk.CANCELED)?s.completeTransitions_():(s.error_=t,s.transition_(cO))},this.promise_=new Promise(function(t,e){s.resolve_=t,s.reject_=e,s.start_()}),this.promise_.then(null,function(){})}var ER=(IR.prototype.toString=function(){return lR("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},IR.prototype.newRef=function(t,e){return new IR(t,e)},IR.prototype.mappings=MO,IR.prototype.child=function(t){lR("child",[pR()],arguments);var e,t=(e=this.location.path,t=(t=t).split("/").filter(function(t){return 0<t.length}).join("/"),0===e.length?t:e+"/"+t),t=new NO(this.location.bucket,t);return this.newRef(this.service,t)},Object.defineProperty(IR.prototype,"parent",{get:function(){var t=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this.location.path);if(null===t)return null;t=new NO(this.location.bucket,t);return this.newRef(this.service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(IR.prototype,"root",{get:function(){var t=new NO(this.location.bucket,"");return this.newRef(this.service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(IR.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(IR.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!1,configurable:!0}),Object.defineProperty(IR.prototype,"name",{get:function(){return OO(this.location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(IR.prototype,"storage",{get:function(){return this.service},enumerable:!1,configurable:!0}),IR.prototype.put=function(t,e){return void 0===e&&(e=null),lR("put",[dR(),vR(!0)],arguments),this.throwIfRoot_("put"),new _R(this,this.service,this.location,this.mappings(),new SO(t),e)},IR.prototype.putString=function(t,e,n){void 0===e&&(e=Qk.RAW),lR("putString",[pR(),pR(Xk,!0),vR(!0)],arguments),this.throwIfRoot_("putString");t=Jk(e,t),n=Object.assign({},n);return!fO(n.contentType)&&fO(t.contentType)&&(n.contentType=t.contentType),new _R(this,this.service,this.location,this.mappings(),new SO(t.data,!0),n)},IR.prototype.delete=function(){var i=this;return lR("delete",[],arguments),this.throwIfRoot_("delete"),this.service.getAuthToken().then(function(t){var e,n,r,e=(e=i.service,n=i.location,r=RO(n.fullServerUrl()),e=e.maxOperationRetryTime,(e=new QO(r,"DELETE",function(t,e){},e)).successCodes=[200,204],e.errorHandler=tR(n),e);return i.service.makeRequest(e,t).getPromise()})},IR.prototype.listAll=function(){lR("listAll",[],arguments);var t={prefixes:[],items:[]};return this.listAllHelper(t).then(function(){return t})},IR.prototype.listAllHelper=function(r,i){return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:return n={pageToken:i},[4,this.list(n)];case 1:return e=t.sent(),(n=r.prefixes).push.apply(n,e.prefixes),(n=r.items).push.apply(n,e.items),null==e.nextPageToken?[3,3]:[4,this.listAllHelper(r,e.nextPageToken)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},IR.prototype.list=function(a){lR("list",[new fR(zO,!0)],arguments);var u=this;return this.service.getAuthToken().then(function(t){var e,n,r,i,o,s=a||{},o=(e=u.service,n=u.location,r="/",i=s.pageToken,o=s.maxResults,s={},n.isRoot?s.prefix="":s.prefix=n.path+"/",r&&0<r.length&&(s.delimiter=r),i&&(s.pageToken=i),o&&(s.maxResults=o),i=RO(n.bucketOnlyServerUrl()),o=e.maxOperationRetryTime,(o=new QO(i,"GET",JO(e,n.bucket),o)).urlParams=s,o.errorHandler=ZO(n),o);return u.service.makeRequest(o,t).getPromise()})},IR.prototype.getMetadata=function(){var n=this;return lR("getMetadata",[],arguments),this.throwIfRoot_("getMetadata"),this.service.getAuthToken().then(function(t){var e=eR(n.service,n.location,n.mappings());return n.service.makeRequest(e,t).getPromise()})},IR.prototype.updateMetadata=function(a){var u=this;return lR("updateMetadata",[vR()],arguments),this.throwIfRoot_("updateMetadata"),this.service.getAuthToken().then(function(t){var e,n,r,i,o,s,r=(e=u.service,n=u.location,r=a,i=u.mappings(),o=RO(n.fullServerUrl()),s=jO(r,i),r=e.maxOperationRetryTime,(r=new QO(o,"PATCH",YO(e,i),r)).headers={"Content-Type":"application/json; charset=utf-8"},r.body=s,r.errorHandler=tR(n),r);return u.service.makeRequest(r,t).getPromise()})},IR.prototype.getDownloadURL=function(){var s=this;return lR("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.service.getAuthToken().then(function(t){var e,n,r,i,o,o=(e=s.service,n=s.location,r=s.mappings(),i=RO(n.fullServerUrl()),o=e.maxOperationRetryTime,(o=new QO(i,"GET",$O(e,r),o)).errorHandler=tR(n),o);return s.service.makeRequest(o,t).getPromise().then(function(t){if(null===t)throw new Fk(jk.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return t})})},IR.prototype.throwIfRoot_=function(t){if(""===this.location.path)throw t=t,new Fk(jk.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")},IR);function IR(t,e){this.service=t,this.location=e instanceof NO?e:NO.makeFromUrl(e)}var TR=(SR.prototype.getPromise=function(){return this.promise_},SR.prototype.cancel=function(t){},SR);function SR(t){this.promise_=Promise.reject(t)}var CR=(NR.prototype.start_=function(){var e,n,t,r,i,o,s,a,u,c=this;function h(t,e){var n,r=c.resolve_,i=c.reject_,o=e.xhr;if(e.wasSuccessCode)try{var s=c.callback_(o,o.getResponseText());pO(s)?r(s):r()}catch(t){i(t)}else null!==o?((n=qk()).setServerResponseProp(o.getResponseText()),c.errorCallback_?i(c.errorCallback_(o,n)):i(n)):e.canceled?i(n=(c.appDelete_?Gk:Bk)()):i(n=new Fk(jk.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))}function l(){return 2===s}function f(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a||(a=!0,n.apply(null,t))}function p(t){i=setTimeout(function(){i=null,e(d,l())},t)}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];a||(t||l()||o?f.call.apply(f,To([null,t],e)):(r<64&&(r*=2),p(1===s?(s=2,0):1e3*(r+Math.random()))))}function v(t){u||(u=!0,a||(null!==i?(t||(s=2),clearTimeout(i),p(0)):t||(s=1)))}this.canceled_?h(0,new AR(!1,null,!0)):this.backoffId_=(e=function(r,t){function i(t){var e=t.loaded,t=t.lengthComputable?t.total:-1;null!==c.progressCallback_&&c.progressCallback_(e,t)}t?r(!1,new AR(!1,null,!0)):(t=c.pool_.createXhrIo(),c.pendingXhr_=t,null!==c.progressCallback_&&t.addUploadProgressListener(i),t.send(c.url_,c.method_,c.body_,c.headers_).then(function(t){null!==c.progressCallback_&&t.removeUploadProgressListener(i),c.pendingXhr_=null;var e=t.getErrorCode()===eO.NO_ERROR,n=t.getStatus();e&&!c.isRetryStatusCode_(n)?(n=-1!==c.successCodes_.indexOf(n),r(!0,new AR(n,t))):(t=t.getErrorCode()===eO.ABORT,r(!1,new AR(!1,null,t)))}))},n=h,t=this.timeout_,i=null,u=a=o=!(r=1),p(s=0),setTimeout(function(){v(o=!0)},t),v)},NR.prototype.getPromise=function(){return this.promise_},NR.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},NR.prototype.isRetryStatusCode_=function(t){var e=500<=t&&t<600,n=-1!==[408,429].indexOf(t),t=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||t},NR);function NR(t,e,n,r,i,o,s,a,u,c,h){var l=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise(function(t,e){l.resolve_=t,l.reject_=e,l.start_()})}var AR=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function kR(t,e,n,r){var i=PO(t.urlParams),o=t.url+i,s=Object.assign({},t.headers);return i=s,(e=e)&&(i["X-Firebase-GMPID"]=e),e=s,null!==(n=n)&&0<n.length&&(e.Authorization="Firebase "+n),e=s,n=void 0!==Ql?Ql.SDK_VERSION:"AppManager",e["X-Firebase-Storage-Version"]="webjs/"+n,new CR(o,t.method,s,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}var OR=(RR.extractBucket_=function(t){t=null==t?void 0:t.storageBucket;return null==t?null:NO.makeFromBucketSpec(t)},RR.prototype.getAuthToken=function(){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return(e=this.authProvider_.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:if(null!==(e=t.sent()))return[2,e.accessToken];t.label=2;case 2:return[2,null]}})})},RR.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requests_.forEach(function(t){return t.cancel()}),this.requests_.clear()},RR.prototype.makeStorageReference=function(t){return new ER(this,t)},RR.prototype.makeRequest=function(t,e){var n=this;if(this.deleted_)return new TR(Gk());var r=kR(t,this.appId_,e,this.pool_);return this.requests_.add(r),r.getPromise().then(function(){return n.requests_.delete(r)},function(){return n.requests_.delete(r)}),r},RR.prototype.ref=function(t){if(lR("ref",[pR(function(t){if("string"!=typeof t)throw"Path is not a string.";if(/^[A-Za-z]+:\/\//.test(t))throw"Expected child path but got a URL, use refFromURL instead."},!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var e=new ER(this,this.bucket_);return null!=t?e.child(t):e},RR.prototype.refFromURL=function(t){return lR("refFromURL",[pR(function(t){if("string"!=typeof t)throw"Path is not a string.";if(!/^[A-Za-z]+:\/\//.test(t))throw"Expected full URL but got a child path, use ref instead.";try{NO.makeFromUrl(t)}catch(t){throw"Expected valid full URL but got an invalid one."}},!1)],arguments),new ER(this,t)},Object.defineProperty(RR.prototype,"maxUploadRetryTime",{get:function(){return this.maxUploadRetryTime_},enumerable:!1,configurable:!0}),RR.prototype.setMaxUploadRetryTime=function(t){lR("setMaxUploadRetryTime",[yR()],arguments),this.maxUploadRetryTime_=t},Object.defineProperty(RR.prototype,"maxOperationRetryTime",{get:function(){return this.maxOperationRetryTime_},enumerable:!1,configurable:!0}),RR.prototype.setMaxOperationRetryTime=function(t){lR("setMaxOperationRetryTime",[yR()],arguments),this.maxOperationRetryTime_=t},Object.defineProperty(RR.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),Object.defineProperty(RR.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!1,configurable:!0}),RR);function RR(t,e,n,r){this.bucket_=null,this.appId_=null,this.deleted_=!1,this.app_=t,this.authProvider_=e,this.maxOperationRetryTime_=Lk,this.maxUploadRetryTime_=Mk,this.requests_=new Set,this.pool_=n,this.bucket_=null!=r?NO.makeFromBucketSpec(r):RR.extractBucket_(null===(r=this.app_)||void 0===r?void 0:r.options),this.internals_=new PR(this)}var PR=(DR.prototype.delete=function(){return this.service_.deleteApp(),Promise.resolve()},DR);function DR(t){this.service_=t}var xR,LR;function MR(t,e){var n=t.getProvider("app").getImmediate(),t=t.getProvider("auth-internal");return new OR(n,t,new EO,e)}LR={TaskState:hO,TaskEvent:nO,StringFormat:Qk,Storage:OR,Reference:ER},(xR=Ql).INTERNAL.registerComponent(new bs("storage",MR,"PUBLIC").setServiceProps(LR).setMultipleInstances(!0)),xR.registerVersion("@firebase/storage","0.3.43");var FR,UR,jR="0.4.2",VR="FB-PERF-TRACE-MEASURE",qR="@firebase/performance/config",BR="@firebase/performance/configexpire",Dr="Performance",M=((M={})["trace started"]="Trace {$traceName} was started before.",M["trace stopped"]="Trace {$traceName} is not running.",M["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",M["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",M["no window"]="Window is not available.",M["no app id"]="App id is not available.",M["no project id"]="Project id is not available.",M["no api key"]="Api key is not available.",M["invalid cc log"]="Attempted to queue invalid cc event",M["FB not default"]="Performance can only start when Firebase app instance is the default one.",M["RC response not ok"]="RC response is not ok",M["invalid attribute name"]="Attribute name {$attributeName} is invalid.",M["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",M["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",M["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",M),WR=new zo("performance",Dr,M),HR=new Ds(Dr);HR.logLevel=Ns.INFO;var GR,KR=(zR.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},zR.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},zR.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},zR.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},zR.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},zR.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},zR.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!Vo()||(HR.info("IndexedDB is not supported by current browswer"),!1):(HR.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},zR.prototype.setupObserver=function(t,i){this.PerformanceObserver&&new this.PerformanceObserver(function(t){for(var e=0,n=t.getEntries();e<n.length;e++){var r=n[e];i(r)}}).observe({entryTypes:[t]})},zR.getInstance=function(){return void 0===FR&&(FR=new zR(UR)),FR},zR);function zR(t){if(!(this.window=t))throw WR.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}function QR(t,e){var n=t.length-e.length;if(n<0||1<n)throw WR.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var XR,YR,JR=($R.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw WR.create("no app id");return t},$R.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw WR.create("no project id");return t},$R.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw WR.create("no api key");return t},$R.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},$R.getInstance=function(){return void 0===GR&&(GR=new $R),GR},$R);function $R(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=QR("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=QR("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}(Dr=YR=YR||{})[Dr.UNKNOWN=0]="UNKNOWN",Dr[Dr.VISIBLE=1]="VISIBLE",Dr[Dr.HIDDEN=2]="HIDDEN";var ZR=["firebase_","google_","ga_"],tP=new RegExp("^[a-zA-Z]\\w*$");function eP(){switch(KR.getInstance().document.visibilityState){case"visible":return YR.VISIBLE;case"hidden":return YR.HIDDEN;default:return YR.UNKNOWN}}var nP="0.0.1",rP={loggingEnabled:!0},iP="FIREBASE_INSTALLATIONS_AUTH";function oP(t){var n,e=function(){var t=KR.getInstance().localStorage;if(!t)return;var e=t.getItem(BR);if(!e||!function(t){return Number(t)>Date.now()}(e))return;var n=t.getItem(qR);if(!n)return;try{return JSON.parse(n)}catch(t){return}}();return e?(aP(e),Promise.resolve()):(n=t,function(){var t=JR.getInstance().installationsService.getToken();return t.then(function(t){}),t}().then(function(t){var e="https://firebaseremoteconfig.googleapis.com/v1/projects/"+JR.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+JR.getInstance().getApiKey(),t=new Request(e,{method:"POST",headers:{Authorization:iP+" "+t},body:JSON.stringify({app_instance_id:n,app_instance_id_token:t,app_id:JR.getInstance().getAppId(),app_version:jR,sdk_version:nP})});return fetch(t).then(function(t){if(t.ok)return t.json();throw WR.create("RC response not ok")})}).catch(function(){HR.info(sP)}).then(aP).then(function(t){var e=KR.getInstance().localStorage;if(!t||!e)return;e.setItem(qR,JSON.stringify(t)),e.setItem(BR,String(Date.now()+60*JR.getInstance().configTimeToLive*60*1e3))},function(){}))}var sP="Could not fetch config, will use default configs";function aP(t){if(!t)return t;var e=JR.getInstance(),n=t.entries||{};return e.loggingEnabled=void 0!==n.fpr_enabled?"true"===String(n.fpr_enabled):rP.loggingEnabled,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=uP(e.tracesSamplingRate),e.logNetworkAfterSampling=uP(e.networkRequestsSamplingRate),t}function uP(t){return Math.random()<=t}var cP,hP=1;function lP(){return hP=2,cP=cP||function(){var n=KR.getInstance().document;return new Promise(function(t){var e;n&&"complete"!==n.readyState?(e=function(){"complete"===n.readyState&&(n.removeEventListener("readystatechange",e),t())},n.addEventListener("readystatechange",e)):t()})}().then(function(){return(t=JR.getInstance().installationsService.getId()).then(function(t){XR=t}),t;var t}).then(oP).then(fP,fP)}function fP(){hP=3}var pP,dP=1e4,vP=5500,yP=3,gP=yP,mP=[],bP=!1;function _P(t){setTimeout(function(){if(0!==gP)return mP.length?void function(){var t=To(mP);mP=[];var e=t.map(function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}});(function(t,r){return function(t){var e=JR.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then(function(t){return t.ok||HR.info("Call to Firebase backend failed."),t.json()}).then(function(t){var e=Number(t.nextRequestWaitMillis),n=dP;isNaN(e)||(n=Math.max(e,n));t=t.logResponseDetails;Array.isArray(t)&&0<t.length&&"RETRY_REQUEST_LATER"===t[0].responseAction&&(mP=To(r,mP),HR.info("Retry transport request later.")),gP=yP,_P(n)})})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:JR.getInstance().logSource,log_event:e},t).catch(function(){mP=To(t,mP),gP--,HR.info("Tries left: "+gP+"."),_P(dP)})}():_P(dP)},t)}function wP(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(t){if(!t.eventTime||!t.message)throw WR.create("invalid cc log");mP=To(mP,[t])}({message:n.apply(void 0,t),eventTime:Date.now()})}}function EP(t,e){(pP=pP||wP(SP))(t,e)}function IP(t){var e=JR.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&KR.getInstance().requiredApisAvailable()&&(t.isAuto&&eP()!==YR.VISIBLE||(3===hP?TP(t):lP().then(function(){return TP(t)},function(){return TP(t)})))}function TP(t){var e;!XR||(e=JR.getInstance()).loggingEnabled&&e.logTraceAfterSampling&&setTimeout(function(){return EP(t,1)},0)}function SP(t,e){return(0===e?function(t){t={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},t={application_info:CP(),network_request_metric:t};return JSON.stringify(t)}:function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);t=t.getAttributes();0!==Object.keys(t).length&&(e.custom_attributes=t);e={application_info:CP(),trace_metric:e};return JSON.stringify(e)})(t)}function CP(){return{google_app_id:JR.getInstance().getAppId(),app_instance_id:XR,web_app_info:{sdk_version:jR,page_url:KR.getInstance().getUrl(),service_worker_status:"serviceWorker"in(t=KR.getInstance().navigator)?t.serviceWorker.controller?2:3:1,visibility_state:eP(),effective_connection_type:function(){var t=KR.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0};var t}var NP=["_fp","_fcp","_fid"];var AP=(kP.prototype.start=function(){if(1!==this.state)throw WR.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},kP.prototype.stop=function(){if(2!==this.state)throw WR.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),IP(this)},kP.prototype.record=function(t,e,n){if(t<=0)throw WR.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw WR.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=mo({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}IP(this)},kP.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},kP.prototype.putMetric=function(t,e){if(n=t,r=this.name,0===n.length||100<n.length||!(r&&r.startsWith("_wt_")&&-1<NP.indexOf(n))&&n.startsWith("_"))throw WR.create("invalid custom metric name",{customMetricName:t});var n,r;this.counters[t]=(t=e,(e=Math.floor(t))<t&&HR.info("Metric value should be an Integer, setting the value as : "+e+"."),e)},kP.prototype.getMetric=function(t){return this.counters[t]||0},kP.prototype.putAttribute=function(t,e){var n,r,i=!(0===(n=t).length||40<n.length)&&(!ZR.some(function(t){return n.startsWith(t)})&&!!n.match(tP)),r=0!==(r=e).length&&r.length<=100;if(i&&r)this.customAttributes[t]=e;else{if(!i)throw WR.create("invalid attribute name",{attributeName:t});if(!r)throw WR.create("invalid attribute value",{attributeValue:e})}},kP.prototype.getAttribute=function(t){return this.customAttributes[t]},kP.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},kP.prototype.getAttributes=function(){return mo({},this.customAttributes)},kP.prototype.setStartTime=function(t){this.startTimeUs=t},kP.prototype.setDuration=function(t){this.durationUs=t},kP.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),t=t&&t[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))},kP.createOobTrace=function(t,e,n){var r,i=KR.getInstance().getUrl();i&&(r=new kP("_wt_"+i,!0),i=Math.floor(1e3*KR.getInstance().getTimeOrigin()),r.setStartTime(i),t&&t[0]&&(r.setDuration(Math.floor(1e3*t[0].duration)),r.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),r.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),r.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),e&&((t=e.find(function(t){return"first-paint"===t.name}))&&t.startTime&&r.putMetric("_fp",Math.floor(1e3*t.startTime)),(e=e.find(function(t){return"first-contentful-paint"===t.name}))&&e.startTime&&r.putMetric("_fcp",Math.floor(1e3*e.startTime)),n&&r.putMetric("_fid",Math.floor(1e3*n))),IP(r))},kP.createUserTimingTrace=function(t){IP(new kP(t,!1,t))},kP);function kP(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=KR.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||VR+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}function OP(t){var e,n,r,i=t;i&&void 0!==i.responseStart&&(n=KR.getInstance().getTimeOrigin(),r=Math.floor(1e3*(i.startTime+n)),t=i.responseStart?Math.floor(1e3*(i.responseStart-i.startTime)):void 0,n=Math.floor(1e3*(i.responseEnd-i.startTime)),i={url:i.name&&i.name.split("?")[0],responsePayloadBytes:i.transferSize,startTimeUs:r,timeToResponseInitiatedUs:t,timeToResponseCompletedUs:n},e=i,(r=JR.getInstance()).instrumentationEnabled&&(t=e.url,n=r.logEndPointUrl.split("?")[0],i=r.flTransportEndpointUrl.split("?")[0],t!==n&&t!==i&&r.loggingEnabled&&r.logNetworkAfterSampling&&setTimeout(function(){return EP(e,0)},0)))}var RP=5e3;function PP(){XR&&(setTimeout(function(){var t=KR.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");{var r;t.onFirstInputDelay?(r=setTimeout(function(){AP.createOobTrace(e,n),r=void 0},RP),t.onFirstInputDelay(function(t){r&&(clearTimeout(r),AP.createOobTrace(e,n,t))})):AP.createOobTrace(e,n)}},0),setTimeout(function(){for(var t=KR.getInstance(),e=t.getEntriesByType("resource"),n=0,r=e;n<r.length;n++){OP(r[n])}t.setupObserver("resource",OP)},0),setTimeout(function(){for(var t=KR.getInstance(),e=t.getEntriesByType("measure"),n=0,r=e;n<r.length;n++){DP(r[n])}t.setupObserver("measure",DP)},0))}function DP(t){t=t.name;t.substring(0,VR.length)!==VR&&AP.createUserTimingTrace(t)}var xP=(LP.prototype.trace=function(t){return new AP(t)},Object.defineProperty(LP.prototype,"instrumentationEnabled",{get:function(){return JR.getInstance().instrumentationEnabled},set:function(t){JR.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(LP.prototype,"dataCollectionEnabled",{get:function(){return JR.getInstance().dataCollectionEnabled},set:function(t){JR.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),LP);function LP(t){this.app=t,KR.getInstance().requiredApisAvailable()&&qo().then(function(t){t&&(bP||(_P(vP),bP=!0),lP().then(PP,PP))}).catch(function(t){HR.info("Environment doesn't support IndexedDB: "+t)})}var MP;function FP(t,e){if("[DEFAULT]"!==t.name)throw WR.create("FB not default");if("undefined"==typeof window)throw WR.create("no window");return UR=window,JR.getInstance().firebaseAppInstance=t,JR.getInstance().installationsService=e,new xP(t)}(MP=Ql).INTERNAL.registerComponent(new bs("performance",function(t){var e=t.getProvider("app").getImmediate(),t=t.getProvider("installations").getImmediate();return FP(e,t)},"PUBLIC")),MP.registerVersion("@firebase/performance","0.4.2");var UP,jP,VP="firebase_id",qP="origin",BP=6e4,WP="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",HP="https://www.googletagmanager.com/gtag/js";(Dr=UP=UP||{}).EVENT="event",Dr.SET="set",Dr.CONFIG="config",(Dr=jP=jP||{}).ADD_SHIPPING_INFO="add_shipping_info",Dr.ADD_PAYMENT_INFO="add_payment_info",Dr.ADD_TO_CART="add_to_cart",Dr.ADD_TO_WISHLIST="add_to_wishlist",Dr.BEGIN_CHECKOUT="begin_checkout",Dr.CHECKOUT_PROGRESS="checkout_progress",Dr.EXCEPTION="exception",Dr.GENERATE_LEAD="generate_lead",Dr.LOGIN="login",Dr.PAGE_VIEW="page_view",Dr.PURCHASE="purchase",Dr.REFUND="refund",Dr.REMOVE_FROM_CART="remove_from_cart",Dr.SCREEN_VIEW="screen_view",Dr.SEARCH="search",Dr.SELECT_CONTENT="select_content",Dr.SELECT_ITEM="select_item",Dr.SELECT_PROMOTION="select_promotion",Dr.SET_CHECKOUT_OPTION="set_checkout_option",Dr.SHARE="share",Dr.SIGN_UP="sign_up",Dr.TIMING_COMPLETE="timing_complete",Dr.VIEW_CART="view_cart",Dr.VIEW_ITEM="view_item",Dr.VIEW_ITEM_LIST="view_item_list",Dr.VIEW_PROMOTION="view_promotion",Dr.VIEW_SEARCH_RESULTS="view_search_results";var GP=new Ds("@firebase/analytics");function KP(o,s,a,u){return function(n,r,i){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return t.trys.push([0,6,,7]),n!==UP.EVENT?[3,2]:[4,function(u,c,h,l,f){return bo(this,void 0,void 0,function(){var n,r,e,i,o,s,a;return _o(this,function(t){switch(t.label){case 0:return(t.trys.push([0,4,,5]),n=[],f&&f.send_to)?(a=f.send_to,Array.isArray(a)||(a=[a]),[4,Promise.all(h)]):[3,2];case 1:for(r=t.sent(),e=function(e){var t=r.find(function(t){return t.measurementId===e}),t=t&&c[t.appId];if(!t)return n=[],"break";n.push(t)},i=0,o=a;i<o.length&&(s=o[i],"break"!==e(s));i++);t.label=2;case 2:return 0===n.length&&(n=Object.values(c)),[4,Promise.all(n)];case 3:return t.sent(),u(UP.EVENT,l,f||{}),[3,5];case 4:return a=t.sent(),GP.error(a),[3,5];case 5:return[2]}})})}(o,s,a,r,i)];case 1:return t.sent(),[3,5];case 2:return n!==UP.CONFIG?[3,4]:[4,function(r,i,o,s,a,u){return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:e=s[a],t.label=1;case 1:return t.trys.push([1,7,,8]),e?[4,i[e]]:[3,3];case 2:return t.sent(),[3,6];case 3:return[4,Promise.all(o)];case 4:return n=t.sent(),(n=n.find(function(t){return t.measurementId===a}))?[4,i[n.appId]]:[3,6];case 5:t.sent(),t.label=6;case 6:return[3,8];case 7:return n=t.sent(),GP.error(n),[3,8];case 8:return r(UP.CONFIG,a,u),[2]}})})}(o,s,a,u,r,i)];case 3:return t.sent(),[3,5];case 4:o(UP.SET,r),t.label=5;case 5:return[3,7];case 6:return e=t.sent(),GP.error(e),[3,7];case 7:return[2]}})})}}var Dr=((Dr={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",Dr["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",Dr["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",Dr["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Dr["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Dr["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",Dr["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",Dr["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',Dr["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',Dr),zP=new zo("analytics","Analytics",Dr),QP=30;function XP(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}var YP=new(XP.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},XP.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},XP.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},XP);function JP(o){var s;return bo(this,void 0,void 0,function(){var e,n,r,i;return _o(this,function(t){switch(t.label){case 0:return e=o.appId,i=o.apiKey,i={method:"GET",headers:new Headers({Accept:"application/json","x-goog-api-key":i})},e=WP.replace("{app-id}",e),[4,fetch(e,i)];case 1:if(200===(n=t.sent()).status||304===n.status)return[3,6];r="",t.label=2;case 2:return t.trys.push([2,4,,5]),[4,n.json()];case 3:return i=t.sent(),null!==(s=i.error)&&void 0!==s&&s.message&&(r=i.error.message),[3,5];case 4:return t.sent(),[3,5];case 5:throw zP.create("config-fetch-failed",{httpStatus:n.status,responseMessage:r});case 6:return[2,n.json()]}})})}function $P(a,u,c){return void 0===u&&(u=YP),bo(this,void 0,void 0,function(){var e,n,r,i,o,s=this;return _o(this,function(t){if(i=a.options,e=i.appId,n=i.apiKey,r=i.measurementId,!e)throw zP.create("no-app-id");if(n)return i=u.getThrottleMetadata(e)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new tD,setTimeout(function(){return bo(s,void 0,void 0,function(){return _o(this,function(t){return o.abort(),[2]})})},void 0!==c?c:BP),[2,function u(c,t,h,l){var f=t.throttleEndTimeMillis,p=t.backoffCount;void 0===l&&(l=YP);return bo(this,void 0,void 0,function(){var e,n,r,s,a;return _o(this,function(t){switch(t.label){case 0:e=c.appId,n=c.measurementId,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(i=h,o=f,new Promise(function(t,e){var n=Math.max(o-Date.now(),0),r=setTimeout(t,n);i.addEventListener(function(){clearTimeout(r),e(zP.create("fetch-throttle",{throttleEndTimeMillis:o}))})}))];case 2:return t.sent(),[3,4];case 3:if(s=t.sent(),n)return GP.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+n+' provided in the "measurementId" field in the local Firebase config. ['+s.message+"]"),[2,{appId:e,measurementId:n}];throw s;case 4:return t.trys.push([4,6,,7]),[4,JP(c)];case 5:return a=t.sent(),l.deleteThrottleMetadata(e),[2,a];case 6:if(ZP(r=t.sent()))return s=503===Number(r.httpStatus)?ms(p,l.intervalMillis,QP):ms(p,l.intervalMillis),a={throttleEndTimeMillis:Date.now()+s,backoffCount:p+1},l.setThrottleMetadata(e,a),GP.debug("Calling attemptFetch again in "+s+" millis"),[2,u(c,a,h,l)];if(l.deleteThrottleMetadata(e),n)return GP.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+n+' provided in the "measurementId" field in the local Firebase config. ['+r.message+"]"),[2,{appId:e,measurementId:n}];throw r;case 7:return[2]}var i,o})})}({appId:e,apiKey:n,measurementId:r},i,o,u)];if(r)return[2,{measurementId:r,appId:e}];throw zP.create("no-api-key")})})}function ZP(t){if(t instanceof Go){t=Number(t.httpStatus);return 429===t||500===t||503===t||504===t}}var tD=(eD.prototype.addEventListener=function(t){this.listeners.push(t)},eD.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},eD);function eD(){this.listeners=[]}function nD(i,o,s,a,u){return bo(this,void 0,void 0,function(){var e,n,r;return _o(this,function(t){switch(t.label){case 0:return(e=$P(i)).then(function(t){s[t.measurementId]=t.appId,i.options.measurementId&&t.measurementId!==i.options.measurementId&&GP.warn("The measurement ID in the local Firebase config ("+i.options.measurementId+") does not match the measurement ID fetched from the server ("+t.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(t){return GP.error(t)}),o.push(e),n=function(){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return Vo()?[3,1]:(GP.warn(zP.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return t.trys.push([1,3,,4]),[4,qo()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),GP.warn(zP.create("indexeddb-unavailable",{errorInfo:e}).message),[2,!1];case 4:return[2,!0]}})})}().then(function(t){return t?a.getId():void 0}),[4,Promise.all([e,n])];case 1:return r=t.sent(),e=r[0],n=r[1],u("js",new Date),(r={})[qP]="firebase",r.update=!0,r=r,null!=n&&(r[VP]=n),u(UP.CONFIG,e.measurementId,r),[2,e.measurementId]}})})}var rD,iD,oD={},sD=[],aD={},uD="dataLayer",cD="gtag",hD=!1;function lD(t){if(hD)throw zP.create("already-initialized");t.dataLayerName&&(uD=t.dataLayerName),t.gtagName&&(cD=t.gtagName)}function fD(t,e){n=[],Fo()&&n.push("This is a browser extension environment."),Bo()||n.push("Cookies are not available."),0<n.length&&(n=n.map(function(t,e){return"("+(e+1)+") "+t}).join(" "),n=zP.create("invalid-analytics-context",{errorInfo:n}),GP.warn(n.message));var n,r,i,o,s,a,u=t.options.appId;if(!u)throw zP.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw zP.create("no-api-key");GP.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=oD[u])throw zP.create("already-exists",{id:u});return hD||(function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(HP))return r}}()||(s=uD,(a=document.createElement("script")).src=HP+"?l="+s,a.async=!0,document.head.appendChild(a)),i=uD,o=[],Array.isArray(window[i])?o=window[i]:window[i]=o,n=oD,s=sD,a=aD,r=uD,i=cD,o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)},window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=KP(o,n,s,a),i={gtagCore:o,wrappedGtag:window[i]},iD=i.wrappedGtag,rD=i.gtagCore,hD=!0),oD[u]=nD(t,sD,aD,e,rD),{app:t,logEvent:function(t,e,n){(function(n,r,i,o,s){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return s&&s.global?(n(UP.EVENT,i,o),[2]):[3,1];case 1:return[4,r];case 2:e=t.sent(),e=mo(mo({},o),{send_to:e}),n(UP.EVENT,i,e),t.label=3;case 3:return[2]}})})})(iD,oD[u],t,e,n).catch(function(t){return GP.error(t)})},setCurrentScreen:function(t,e){(function(n,r,i,o){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return o&&o.global?(n(UP.SET,{screen_name:i}),[2,Promise.resolve()]):[3,1];case 1:return[4,r];case 2:e=t.sent(),n(UP.CONFIG,e,{update:!0,screen_name:i}),t.label=3;case 3:return[2]}})})})(iD,oD[u],t,e).catch(function(t){return GP.error(t)})},setUserId:function(t,e){(function(n,r,i,o){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return o&&o.global?(n(UP.SET,{user_id:i}),[2,Promise.resolve()]):[3,1];case 1:return[4,r];case 2:e=t.sent(),n(UP.CONFIG,e,{update:!0,user_id:i}),t.label=3;case 3:return[2]}})})})(iD,oD[u],t,e).catch(function(t){return GP.error(t)})},setUserProperties:function(t,e){(function(s,a,u,c){return bo(this,void 0,void 0,function(){var e,n,r,i,o;return _o(this,function(t){switch(t.label){case 0:if(!c||!c.global)return[3,1];for(e={},n=0,r=Object.keys(u);n<r.length;n++)i=r[n],e["user_properties."+i]=u[i];return s(UP.SET,e),[2,Promise.resolve()];case 1:return[4,a];case 2:o=t.sent(),s(UP.CONFIG,o,{update:!0,user_properties:u}),t.label=3;case 3:return[2]}})})})(iD,oD[u],t,e).catch(function(t){return GP.error(t)})},setAnalyticsCollectionEnabled:function(t){(function(n,r){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return[4,n];case 1:return e=t.sent(),window["ga-disable-"+e]=!r,[2]}})})})(oD[u],t).catch(function(t){return GP.error(t)})},INTERNAL:{delete:function(){return delete oD[u],Promise.resolve()}}}}var pD,dD="analytics";function vD(){return bo(this,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:if(Fo())return[2,!1];if(!Bo())return[2,!1];if(!Vo())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,qo()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}})})}(pD=Ql).INTERNAL.registerComponent(new bs(dD,function(t){return fD(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:lD,EventName:jP,isSupported:vD})),pD.INTERNAL.registerComponent(new bs("analytics-internal",function(t){try{return{logEvent:t.getProvider(dD).getImmediate().logEvent}}catch(t){throw zP.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),pD.registerVersion("@firebase/analytics","0.6.0");var yD=(gD.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,e=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+e+"."),e},gD.prototype.fetch=function(i){return bo(this,void 0,void 0,function(){var e,n,r;return _o(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return(r=t.sent(),e=r[0],(r=r[1])&&this.isCachedDataFresh(i.cacheMaxAgeMillis,e))?[2,r]:(i.eTag=r&&r.eTag,[4,this.client.fetch(i)]);case 2:return n=t.sent(),r=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===n.status&&r.push(this.storage.setLastSuccessfulFetchResponse(n)),[4,Promise.all(r)];case 3:return t.sent(),[2,n]}})})},gD);function gD(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}var Dr=((Dr={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",Dr["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",Dr["registration-api-key"]="Undefined API key. Check Firebase app initialization.",Dr["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",Dr["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",Dr["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",Dr["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",Dr["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",Dr["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",Dr["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',Dr["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',Dr["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",Dr["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",Dr),mD=new zo("remoteconfig","Remote Config",Dr);var bD=(_D.prototype.fetch=function(f){return bo(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,h,l;return _o(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:o=t.sent(),n=o[0],i=o[1],r=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=r+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,r={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":f.eTag||"*"},i={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:i,app_id:this.appId,language_code:(void 0===e&&(e=navigator),e.languages&&e.languages[0]||e.language)},i={method:"POST",headers:r,body:JSON.stringify(i)},o=fetch(o,i),i=new Promise(function(t,e){f.signal.addEventListener(function(){var t=new Error("The operation was aborted.");t.name="AbortError",e(t)})}),t.label=2;case 2:return t.trys.push([2,5,,6]),[4,Promise.race([o,i])];case 3:return t.sent(),[4,o];case 4:return l=t.sent(),[3,6];case 5:throw i=t.sent(),o="fetch-client-network","AbortError"===i.name&&(o="fetch-timeout"),mD.create(o,{originalErrorMessage:i.message});case 6:if(s=l.status,a=l.headers.get("ETag")||void 0,200!==l.status)return[3,11];h=void 0,t.label=7;case 7:return t.trys.push([7,9,,10]),[4,l.json()];case 8:return h=t.sent(),[3,10];case 9:throw l=t.sent(),mD.create("fetch-client-parse",{originalErrorMessage:l.message});case 10:u=h.entries,c=h.state,t.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===c?s=500:"NO_CHANGE"===c?s=304:"NO_TEMPLATE"!==c&&"EMPTY_CONFIG"!==c||(u={}),304!==s&&200!==s)throw mD.create("fetch-status",{httpStatus:s});return[2,{status:s,eTag:a,config:u}]}var e})})},_D);function _D(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}var wD=(ED.prototype.addEventListener=function(t){this.listeners.push(t)},ED.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},ED);function ED(){this.listeners=[]}var ID=["1","true","t","yes","y","on"],TD=(SD.prototype.asString=function(){return this._value},SD.prototype.asBoolean=function(){return"static"!==this._source&&0<=ID.indexOf(this._value.toLowerCase())},SD.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},SD.prototype.getSource=function(){return this._source},SD);function SD(t,e){void 0===e&&(e=""),this._source=t,this._value=e}var CD=(ND.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=Ns.DEBUG;break;case"silent":this._logger.logLevel=Ns.SILENT;break;default:this._logger.logLevel=Ns.ERROR}},Object.defineProperty(ND.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(ND.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),ND.prototype.activate=function(){return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return n=t.sent(),e=n[0],n=n[1],e&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return t.sent(),[2,!0]}})})},ND.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},ND.prototype.fetch=function(){return bo(this,void 0,void 0,function(){var r,i,o,s=this;return _o(this,function(t){switch(t.label){case 0:r=new wD,setTimeout(function(){return bo(s,void 0,void 0,function(){return _o(this,function(t){return r.abort(),[2]})})},this.settings.fetchTimeoutMillis),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:r})];case 2:return t.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return t.sent(),[3,6];case 4:return i=t.sent(),n="fetch-throttle",o=(e=i)instanceof Go&&-1!==e.code.indexOf(n)?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(o)];case 5:throw t.sent(),i;case 6:return[2]}var e,n})})},ND.prototype.fetchAndActivate=function(){return bo(this,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},ND.prototype.getAll=function(){var n=this;return function(t,e){void 0===t&&(t={});void 0===e&&(e={});return Object.keys(mo(mo({},t),e))}(this._storageCache.getActiveConfig(),this.defaultConfig).reduce(function(t,e){return t[e]=n.getValue(e),t},{})},ND.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},ND.prototype.getNumber=function(t){return this.getValue(t).asNumber()},ND.prototype.getString=function(t){return this.getValue(t).asString()},ND.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new TD("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new TD("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new TD("static"))},ND);function ND(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}function AD(t,e){t=t.target.error||void 0;return mD.create(e,{originalErrorMessage:t&&t.message})}var kD="app_namespace_store",OD="firebase_remote_config",RD=1;var PD=(DD.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},DD.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},DD.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},DD.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},DD.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},DD.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},DD.prototype.getActiveConfig=function(){return this.get("active_config")},DD.prototype.setActiveConfig=function(t){return this.set("active_config",t)},DD.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},DD.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},DD.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},DD.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},DD.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},DD.prototype.get=function(a){return bo(this,void 0,void 0,function(){var o,s=this;return _o(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(e,n){var t=o.transaction([kD],"readonly").objectStore(kD),r=s.createCompositeKey(a);try{var i=t.get(r);i.onerror=function(t){n(AD(t,"storage-get"))},i.onsuccess=function(t){t=t.target.result;e(t?t.value:void 0)}}catch(t){n(mD.create("storage-get",{originalErrorMessage:t&&t.message}))}})]}})})},DD.prototype.set=function(a,u){return bo(this,void 0,void 0,function(){var o,s=this;return _o(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([kD],"readwrite").objectStore(kD),r=s.createCompositeKey(a);try{var i=n.put({compositeKey:r,value:u});i.onerror=function(t){e(AD(t,"storage-set"))},i.onsuccess=function(){t()}}catch(t){e(mD.create("storage-set",{originalErrorMessage:t&&t.message}))}})]}})})},DD.prototype.delete=function(a){return bo(this,void 0,void 0,function(){var o,s=this;return _o(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([kD],"readwrite").objectStore(kD),r=s.createCompositeKey(a);try{var i=n.delete(r);i.onerror=function(t){e(AD(t,"storage-delete"))},i.onsuccess=function(){t()}}catch(t){e(mD.create("storage-delete",{originalErrorMessage:t&&t.message}))}})]}})})},DD.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},DD);function DD(t,e,n,r){void 0===r&&(r=new Promise(function(e,n){var t=indexedDB.open(OD,RD);t.onerror=function(t){n(AD(t,"storage-open"))},t.onsuccess=function(t){e(t.target.result)},t.onupgradeneeded=function(t){var e=t.target.result;0===t.oldVersion&&e.createObjectStore(kD,{keyPath:"compositeKey"})}})),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}var xD=(LD.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},LD.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},LD.prototype.getActiveConfig=function(){return this.activeConfig},LD.prototype.loadFromStorage=function(){return bo(this,void 0,void 0,function(){var e,n,r;return _o(this,function(t){switch(t.label){case 0:return e=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),[4,e];case 1:return(e=t.sent())&&(this.lastFetchStatus=e),[4,n];case 2:return(n=t.sent())&&(this.lastSuccessfulFetchTimestampMillis=n),[4,r];case 3:return(r=t.sent())&&(this.activeConfig=r),[2]}})})},LD.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},LD.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},LD.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},LD);function LD(t){this.storage=t}var MD=(FD.prototype.fetch=function(n){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=t.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(n,e)]}})})},FD.prototype.attemptFetch=function(r,t){var s=t.throttleEndTimeMillis,a=t.backoffCount;return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:return[4,(i=r.signal,o=s,new Promise(function(t,e){var n=Math.max(o-Date.now(),0),r=setTimeout(t,n);i.addEventListener(function(){clearTimeout(r),e(mD.create("fetch-throttle",{throttleEndTimeMillis:o}))})}))];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,5,,7]),[4,this.client.fetch(r)];case 3:return e=t.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return t.sent(),[2,e];case 5:if(!function(t){if(t instanceof Go){t=Number(t.httpStatus);return 429===t||500===t||503===t||504===t}}(n=t.sent()))throw n;return n={throttleEndTimeMillis:Date.now()+ms(a),backoffCount:a+1},[4,this.storage.setThrottleMetadata(n)];case 6:return t.sent(),[2,this.attemptFetch(r,n)];case 7:return[2]}var i,o})})},FD);function FD(t,e){this.client=t,this.storage=e}var UD,jD="@firebase/remote-config";return(UD=Ql).INTERNAL.registerComponent(new bs("remoteConfig",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw mD.create("registration-window");var i=n.options,o=i.projectId,s=i.apiKey,a=i.appId;if(!o)throw mD.create("registration-project-id");if(!s)throw mD.create("registration-api-key");if(!a)throw mD.create("registration-app-id");e=e||"firebase";var u=new PD(a,n.name,e),t=new xD(u),i=new Ds(jD);i.logLevel=Ns.ERROR;a=new bD(r,UD.SDK_VERSION,e,o,s,a),a=new MD(a,u),a=new yD(a,u,t,i),i=new CD(n,a,t,u,i);return i.ensureInitialized(),i},"PUBLIC").setMultipleInstances(!0)),UD.registerVersion(jD,"0.1.28"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the CDN builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nhttps://www.gstatic.com/firebasejs/5.0.0/firebase-<PACKAGE>.js\n"),Ql.registerVersion("firebase","7.24.0","cdn"),Ql});
//# sourceMappingURL=firebase.js.map
