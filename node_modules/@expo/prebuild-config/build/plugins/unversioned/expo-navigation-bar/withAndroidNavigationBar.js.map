{"version":3,"file":"withAndroidNavigationBar.js","names":["NAVIGATION_BAR_COLOR","withNavigationBar","config","immersiveMode","getNavigationBarImmersiveMode","WarningAggregator","addWarningAndroid","withNavigationBarColors","withNavigationBarStyles","withAndroidColors","modResults","setNavigationBarColors","withAndroidStyles","setNavigationBarStyles","colors","hexString","getNavigationBarColor","AndroidConfig","Colors","setColorItem","Resources","buildResourceItem","name","value","styles","Styles","assignStylesValue","add","getNavigationBarStyle","parent","getAppThemeLightNoActionBarGroup","androidNavigationBar","visible","backgroundColor","barStyle"],"sources":["../../../../src/plugins/unversioned/expo-navigation-bar/withAndroidNavigationBar.ts"],"sourcesContent":["import {\n  AndroidConfig,\n  ConfigPlugin,\n  WarningAggregator,\n  withAndroidColors,\n  withAndroidStyles,\n} from '@expo/config-plugins';\nimport { ExpoConfig } from '@expo/config-types';\n\nconst NAVIGATION_BAR_COLOR = 'navigationBarColor';\n\nexport const withNavigationBar: ConfigPlugin = (config) => {\n  const immersiveMode = getNavigationBarImmersiveMode(config);\n  if (immersiveMode) {\n    // Immersive mode needs to be set programmatically\n    WarningAggregator.addWarningAndroid(\n      'androidNavigationBar.visible',\n      'Property is deprecated in Android 11 (API 30) and will be removed from Expo SDK.',\n      'https://expo.fyi/android-navigation-bar-visible-deprecated'\n    );\n  }\n\n  config = withNavigationBarColors(config);\n  config = withNavigationBarStyles(config);\n  return config;\n};\n\nconst withNavigationBarColors: ConfigPlugin = (config) => {\n  return withAndroidColors(config, (config) => {\n    config.modResults = setNavigationBarColors(config, config.modResults);\n    return config;\n  });\n};\n\nconst withNavigationBarStyles: ConfigPlugin = (config) => {\n  return withAndroidStyles(config, (config) => {\n    config.modResults = setNavigationBarStyles(config, config.modResults);\n    return config;\n  });\n};\n\nexport function setNavigationBarColors(\n  config: Pick<ExpoConfig, 'androidNavigationBar'>,\n  colors: AndroidConfig.Resources.ResourceXML\n): AndroidConfig.Resources.ResourceXML {\n  const hexString = getNavigationBarColor(config);\n  if (hexString) {\n    colors = AndroidConfig.Colors.setColorItem(\n      AndroidConfig.Resources.buildResourceItem({\n        name: NAVIGATION_BAR_COLOR,\n        value: hexString,\n      }),\n      colors\n    );\n  }\n  return colors;\n}\n\nexport function setNavigationBarStyles(\n  config: Pick<ExpoConfig, 'androidNavigationBar'>,\n  styles: AndroidConfig.Resources.ResourceXML\n): AndroidConfig.Resources.ResourceXML {\n  styles = AndroidConfig.Styles.assignStylesValue(styles, {\n    add: getNavigationBarStyle(config) === 'dark-content',\n    parent: AndroidConfig.Styles.getAppThemeLightNoActionBarGroup(),\n    name: 'android:windowLightNavigationBar',\n    value: 'true',\n  });\n  styles = AndroidConfig.Styles.assignStylesValue(styles, {\n    add: !!getNavigationBarColor(config),\n    parent: AndroidConfig.Styles.getAppThemeLightNoActionBarGroup(),\n    name: `android:${NAVIGATION_BAR_COLOR}`,\n    value: `@color/${NAVIGATION_BAR_COLOR}`,\n  });\n\n  return styles;\n}\n\nexport function getNavigationBarImmersiveMode(config: Pick<ExpoConfig, 'androidNavigationBar'>) {\n  return config.androidNavigationBar?.visible || null;\n}\n\nexport function getNavigationBarColor(config: Pick<ExpoConfig, 'androidNavigationBar'>) {\n  return config.androidNavigationBar?.backgroundColor || null;\n}\n\nexport function getNavigationBarStyle(config: Pick<ExpoConfig, 'androidNavigationBar'>) {\n  return config.androidNavigationBar?.barStyle || 'light-content';\n}\n"],"mappings":";;;;;;;;;;;;AAAA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;AASA,MAAMA,oBAAoB,GAAG,oBAA7B;;AAEO,MAAMC,iBAA+B,GAAIC,MAAD,IAAY;EACzD,MAAMC,aAAa,GAAGC,6BAA6B,CAACF,MAAD,CAAnD;;EACA,IAAIC,aAAJ,EAAmB;IACjB;IACAE,kCAAA,CAAkBC,iBAAlB,CACE,8BADF,EAEE,kFAFF,EAGE,4DAHF;EAKD;;EAEDJ,MAAM,GAAGK,uBAAuB,CAACL,MAAD,CAAhC;EACAA,MAAM,GAAGM,uBAAuB,CAACN,MAAD,CAAhC;EACA,OAAOA,MAAP;AACD,CAdM;;;;AAgBP,MAAMK,uBAAqC,GAAIL,MAAD,IAAY;EACxD,OAAO,IAAAO,kCAAA,EAAkBP,MAAlB,EAA2BA,MAAD,IAAY;IAC3CA,MAAM,CAACQ,UAAP,GAAoBC,sBAAsB,CAACT,MAAD,EAASA,MAAM,CAACQ,UAAhB,CAA1C;IACA,OAAOR,MAAP;EACD,CAHM,CAAP;AAID,CALD;;AAOA,MAAMM,uBAAqC,GAAIN,MAAD,IAAY;EACxD,OAAO,IAAAU,kCAAA,EAAkBV,MAAlB,EAA2BA,MAAD,IAAY;IAC3CA,MAAM,CAACQ,UAAP,GAAoBG,sBAAsB,CAACX,MAAD,EAASA,MAAM,CAACQ,UAAhB,CAA1C;IACA,OAAOR,MAAP;EACD,CAHM,CAAP;AAID,CALD;;AAOO,SAASS,sBAAT,CACLT,MADK,EAELY,MAFK,EAGgC;EACrC,MAAMC,SAAS,GAAGC,qBAAqB,CAACd,MAAD,CAAvC;;EACA,IAAIa,SAAJ,EAAe;IACbD,MAAM,GAAGG,8BAAA,CAAcC,MAAd,CAAqBC,YAArB,CACPF,8BAAA,CAAcG,SAAd,CAAwBC,iBAAxB,CAA0C;MACxCC,IAAI,EAAEtB,oBADkC;MAExCuB,KAAK,EAAER;IAFiC,CAA1C,CADO,EAKPD,MALO,CAAT;EAOD;;EACD,OAAOA,MAAP;AACD;;AAEM,SAASD,sBAAT,CACLX,MADK,EAELsB,MAFK,EAGgC;EACrCA,MAAM,GAAGP,8BAAA,CAAcQ,MAAd,CAAqBC,iBAArB,CAAuCF,MAAvC,EAA+C;IACtDG,GAAG,EAAEC,qBAAqB,CAAC1B,MAAD,CAArB,KAAkC,cADe;IAEtD2B,MAAM,EAAEZ,8BAAA,CAAcQ,MAAd,CAAqBK,gCAArB,EAF8C;IAGtDR,IAAI,EAAE,kCAHgD;IAItDC,KAAK,EAAE;EAJ+C,CAA/C,CAAT;EAMAC,MAAM,GAAGP,8BAAA,CAAcQ,MAAd,CAAqBC,iBAArB,CAAuCF,MAAvC,EAA+C;IACtDG,GAAG,EAAE,CAAC,CAACX,qBAAqB,CAACd,MAAD,CAD0B;IAEtD2B,MAAM,EAAEZ,8BAAA,CAAcQ,MAAd,CAAqBK,gCAArB,EAF8C;IAGtDR,IAAI,EAAG,WAAUtB,oBAAqB,EAHgB;IAItDuB,KAAK,EAAG,UAASvB,oBAAqB;EAJgB,CAA/C,CAAT;EAOA,OAAOwB,MAAP;AACD;;AAEM,SAASpB,6BAAT,CAAuCF,MAAvC,EAAyF;EAAA;;EAC9F,OAAO,0BAAAA,MAAM,CAAC6B,oBAAP,gFAA6BC,OAA7B,KAAwC,IAA/C;AACD;;AAEM,SAAShB,qBAAT,CAA+Bd,MAA/B,EAAiF;EAAA;;EACtF,OAAO,2BAAAA,MAAM,CAAC6B,oBAAP,kFAA6BE,eAA7B,KAAgD,IAAvD;AACD;;AAEM,SAASL,qBAAT,CAA+B1B,MAA/B,EAAiF;EAAA;;EACtF,OAAO,2BAAAA,MAAM,CAAC6B,oBAAP,kFAA6BG,QAA7B,KAAyC,eAAhD;AACD"}