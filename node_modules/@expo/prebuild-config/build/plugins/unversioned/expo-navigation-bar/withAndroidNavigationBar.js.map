{"version":3,"sources":["../../../../src/plugins/unversioned/expo-navigation-bar/withAndroidNavigationBar.ts"],"names":["NAVIGATION_BAR_COLOR","withNavigationBar","config","immersiveMode","getNavigationBarImmersiveMode","WarningAggregator","addWarningAndroid","withNavigationBarColors","withNavigationBarStyles","modResults","setNavigationBarColors","setNavigationBarStyles","colors","hexString","getNavigationBarColor","AndroidConfig","Colors","setColorItem","Resources","buildResourceItem","name","value","styles","Styles","assignStylesValue","add","getNavigationBarStyle","parent","getAppThemeLightNoActionBarGroup","androidNavigationBar","visible","backgroundColor","barStyle"],"mappings":"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","sourcesContent":["import {\n  AndroidConfig,\n  ConfigPlugin,\n  WarningAggregator,\n  withAndroidColors,\n  withAndroidStyles,\n} from '@expo/config-plugins';\nimport { ExpoConfig } from '@expo/config-types';\n\nconst NAVIGATION_BAR_COLOR = 'navigationBarColor';\n\nexport const withNavigationBar: ConfigPlugin = config => {\n  const immersiveMode = getNavigationBarImmersiveMode(config);\n  if (immersiveMode) {\n    // Immersive mode needs to be set programmatically\n    WarningAggregator.addWarningAndroid(\n      'androidNavigationBar.visible',\n      'Property is deprecated in Android 11 (API 30) and will be removed from Expo SDK.',\n      'https://expo.fyi/android-navigation-bar-visible-deprecated'\n    );\n  }\n\n  config = withNavigationBarColors(config);\n  config = withNavigationBarStyles(config);\n  return config;\n};\n\nconst withNavigationBarColors: ConfigPlugin = config => {\n  return withAndroidColors(config, config => {\n    config.modResults = setNavigationBarColors(config, config.modResults);\n    return config;\n  });\n};\n\nconst withNavigationBarStyles: ConfigPlugin = config => {\n  return withAndroidStyles(config, config => {\n    config.modResults = setNavigationBarStyles(config, config.modResults);\n    return config;\n  });\n};\n\nexport function setNavigationBarColors(\n  config: Pick<ExpoConfig, 'androidNavigationBar'>,\n  colors: AndroidConfig.Resources.ResourceXML\n): AndroidConfig.Resources.ResourceXML {\n  const hexString = getNavigationBarColor(config);\n  if (hexString) {\n    colors = AndroidConfig.Colors.setColorItem(\n      AndroidConfig.Resources.buildResourceItem({\n        name: NAVIGATION_BAR_COLOR,\n        value: hexString,\n      }),\n      colors\n    );\n  }\n  return colors;\n}\n\nexport function setNavigationBarStyles(\n  config: Pick<ExpoConfig, 'androidNavigationBar'>,\n  styles: AndroidConfig.Resources.ResourceXML\n): AndroidConfig.Resources.ResourceXML {\n  styles = AndroidConfig.Styles.assignStylesValue(styles, {\n    add: getNavigationBarStyle(config) === 'dark-content',\n    parent: AndroidConfig.Styles.getAppThemeLightNoActionBarGroup(),\n    name: 'android:windowLightNavigationBar',\n    value: 'true',\n  });\n  styles = AndroidConfig.Styles.assignStylesValue(styles, {\n    add: !!getNavigationBarColor(config),\n    parent: AndroidConfig.Styles.getAppThemeLightNoActionBarGroup(),\n    name: `android:${NAVIGATION_BAR_COLOR}`,\n    value: `@color/${NAVIGATION_BAR_COLOR}`,\n  });\n\n  return styles;\n}\n\nexport function getNavigationBarImmersiveMode(config: Pick<ExpoConfig, 'androidNavigationBar'>) {\n  return config.androidNavigationBar?.visible || null;\n}\n\nexport function getNavigationBarColor(config: Pick<ExpoConfig, 'androidNavigationBar'>) {\n  return config.androidNavigationBar?.backgroundColor || null;\n}\n\nexport function getNavigationBarStyle(config: Pick<ExpoConfig, 'androidNavigationBar'>) {\n  return config.androidNavigationBar?.barStyle || 'light-content';\n}\n"],"file":"withAndroidNavigationBar.js"}