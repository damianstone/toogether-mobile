{"version":3,"file":"withIosBranch.js","names":["withIosBranch","config","withInfoPlist","modResults","setBranchApiKey","getBranchApiKey","ios","branch","apiKey","infoPlist","branch_key","live"],"sources":["../../../../src/plugins/unversioned/expo-branch/withIosBranch.ts"],"sourcesContent":["import { ConfigPlugin, InfoPlist, withInfoPlist } from '@expo/config-plugins';\nimport { ExpoConfig } from '@expo/config-types';\n\nexport const withIosBranch: ConfigPlugin = (config) => {\n  return withInfoPlist(config, (config) => {\n    config.modResults = setBranchApiKey(config, config.modResults);\n    return config;\n  });\n};\n\nexport function getBranchApiKey(config: Pick<ExpoConfig, 'ios'>) {\n  return config.ios?.config?.branch?.apiKey ?? null;\n}\n\nexport function setBranchApiKey(config: Pick<ExpoConfig, 'ios'>, infoPlist: InfoPlist): InfoPlist {\n  const apiKey = getBranchApiKey(config);\n\n  if (apiKey === null) {\n    return infoPlist;\n  }\n\n  return {\n    ...infoPlist,\n    branch_key: {\n      live: apiKey,\n    },\n  };\n}\n"],"mappings":";;;;;;;;;AAAA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;AAGO,MAAMA,aAA2B,GAAIC,MAAD,IAAY;EACrD,OAAO,IAAAC,8BAAA,EAAcD,MAAd,EAAuBA,MAAD,IAAY;IACvCA,MAAM,CAACE,UAAP,GAAoBC,eAAe,CAACH,MAAD,EAASA,MAAM,CAACE,UAAhB,CAAnC;IACA,OAAOF,MAAP;EACD,CAHM,CAAP;AAID,CALM;;;;AAOA,SAASI,eAAT,CAAyBJ,MAAzB,EAA0D;EAAA;;EAC/D,+CAAOA,MAAM,CAACK,GAAd,sEAAO,YAAYL,MAAnB,iFAAO,mBAAoBM,MAA3B,2DAAO,uBAA4BC,MAAnC,yEAA6C,IAA7C;AACD;;AAEM,SAASJ,eAAT,CAAyBH,MAAzB,EAA0DQ,SAA1D,EAA2F;EAChG,MAAMD,MAAM,GAAGH,eAAe,CAACJ,MAAD,CAA9B;;EAEA,IAAIO,MAAM,KAAK,IAAf,EAAqB;IACnB,OAAOC,SAAP;EACD;;EAED,OAAO,EACL,GAAGA,SADE;IAELC,UAAU,EAAE;MACVC,IAAI,EAAEH;IADI;EAFP,CAAP;AAMD"}