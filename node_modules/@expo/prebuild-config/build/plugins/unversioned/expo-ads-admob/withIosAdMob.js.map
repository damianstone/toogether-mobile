{"version":3,"file":"withIosAdMob.js","names":["withIosAdMob","config","withInfoPlist","modResults","setAdMobConfig","getGoogleMobileAdsAppId","ios","googleMobileAdsAppId","setGoogleMobileAdsAppId","GADApplicationIdentifier","infoPlist","appId"],"sources":["../../../../src/plugins/unversioned/expo-ads-admob/withIosAdMob.ts"],"sourcesContent":["import { ConfigPlugin, InfoPlist, withInfoPlist } from '@expo/config-plugins';\nimport { ExpoConfig } from '@expo/config-types';\n\nexport const withIosAdMob: ConfigPlugin = (config) => {\n  return withInfoPlist(config, (config) => {\n    config.modResults = setAdMobConfig(config, config.modResults);\n    return config;\n  });\n};\n\n// NOTE(brentvatne): if the developer has installed the google ads sdk and does\n// not provide an app id their app will crash. Standalone apps get around this by\n// providing some default value, we will instead here assume that the user can\n// do the right thing if they have installed the package. This is a slight discrepancy\n// that arises in ejecting because it's possible for the package to be installed and\n// not crashing in the managed workflow, then you eject and the app crashes because\n// you don't have an id to fall back to.\nexport function getGoogleMobileAdsAppId(config: Pick<ExpoConfig, 'ios'>) {\n  return config.ios?.config?.googleMobileAdsAppId ?? null;\n}\n\nexport function setGoogleMobileAdsAppId(\n  config: Pick<ExpoConfig, 'ios'>,\n  { GADApplicationIdentifier, ...infoPlist }: InfoPlist\n): InfoPlist {\n  const appId = getGoogleMobileAdsAppId(config);\n\n  if (appId === null) {\n    return infoPlist;\n  }\n\n  return {\n    ...infoPlist,\n    GADApplicationIdentifier: appId,\n  };\n}\n\nfunction setAdMobConfig(config: Pick<ExpoConfig, 'ios'>, infoPlist: InfoPlist): InfoPlist {\n  infoPlist = setGoogleMobileAdsAppId(config, infoPlist);\n  return infoPlist;\n}\n"],"mappings":";;;;;;;;;AAAA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;AAGO,MAAMA,YAA0B,GAAIC,MAAD,IAAY;EACpD,OAAO,IAAAC,8BAAA,EAAcD,MAAd,EAAuBA,MAAD,IAAY;IACvCA,MAAM,CAACE,UAAP,GAAoBC,cAAc,CAACH,MAAD,EAASA,MAAM,CAACE,UAAhB,CAAlC;IACA,OAAOF,MAAP;EACD,CAHM,CAAP;AAID,CALM,C,CAOP;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AACO,SAASI,uBAAT,CAAiCJ,MAAjC,EAAkE;EAAA;;EACvE,+CAAOA,MAAM,CAACK,GAAd,sEAAO,YAAYL,MAAnB,uDAAO,mBAAoBM,oBAA3B,yEAAmD,IAAnD;AACD;;AAEM,SAASC,uBAAT,CACLP,MADK,EAEL;EAAEQ,wBAAF;EAA4B,GAAGC;AAA/B,CAFK,EAGM;EACX,MAAMC,KAAK,GAAGN,uBAAuB,CAACJ,MAAD,CAArC;;EAEA,IAAIU,KAAK,KAAK,IAAd,EAAoB;IAClB,OAAOD,SAAP;EACD;;EAED,OAAO,EACL,GAAGA,SADE;IAELD,wBAAwB,EAAEE;EAFrB,CAAP;AAID;;AAED,SAASP,cAAT,CAAwBH,MAAxB,EAAyDS,SAAzD,EAA0F;EACxFA,SAAS,GAAGF,uBAAuB,CAACP,MAAD,EAASS,SAAT,CAAnC;EACA,OAAOA,SAAP;AACD"}