{"version":3,"sources":["../../../../src/plugins/unversioned/expo-ads-admob/withAndroidAdMob.ts"],"names":["addMetaDataItemToMainApplication","getMainApplicationOrThrow","removeMetaDataItemFromMainApplication","AndroidConfig","Manifest","META_APPLICATION_ID","META_DELAY_APP_MEASUREMENT_INIT","withAndroidAdMob","config","modResults","setAdMobConfig","getGoogleMobileAdsAppId","android","googleMobileAdsAppId","getGoogleMobileAdsAutoInit","googleMobileAdsAutoInit","androidManifest","appId","autoInit","mainApplication","String"],"mappings":";;;;;;;;;;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAGA,MAAM;AACJA,EAAAA,gCADI;AAEJC,EAAAA,yBAFI;AAGJC,EAAAA;AAHI,IAIFC,+BAAcC,QAJlB;;AAMA,MAAMC,mBAAmB,GAAG,2CAA5B;AACA,MAAMC,+BAA+B,GAAG,uDAAxC;;AAEO,MAAMC,gBAA8B,GAAGC,MAAM,IAAI;AACtD,SAAO,0CAAoBA,MAApB,EAA4BA,MAAM,IAAI;AAC3CA,IAAAA,MAAM,CAACC,UAAP,GAAoBC,cAAc,CAACF,MAAD,EAASA,MAAM,CAACC,UAAhB,CAAlC;AACA,WAAOD,MAAP;AACD,GAHM,CAAP;AAID,CALM;;;;AAOA,SAASG,uBAAT,CAAiCH,MAAjC,EAAsE;AAAA;;AAC3E,qDAAOA,MAAM,CAACI,OAAd,8EAAO,gBAAgBJ,MAAvB,2DAAO,uBAAwBK,oBAA/B,yEAAuD,IAAvD;AACD;;AAEM,SAASC,0BAAT,CAAoCN,MAApC,EAAyE;AAAA;;AAC9E,uDAAOA,MAAM,CAACI,OAAd,8EAAO,iBAAgBJ,MAAvB,0DAAO,sBAAwBO,uBAA/B,2EAA0D,KAA1D;AACD;;AAEM,SAASL,cAAT,CACLF,MADK,EAELQ,eAFK,EAGL;AACA,QAAMC,KAAK,GAAGN,uBAAuB,CAACH,MAAD,CAArC;AACA,QAAMU,QAAQ,GAAGJ,0BAA0B,CAACN,MAAD,CAA3C;AACA,QAAMW,eAAe,GAAGlB,yBAAyB,CAACe,eAAD,CAAjD;;AAEA,MAAIC,KAAJ,EAAW;AACTjB,IAAAA,gCAAgC,CAACmB,eAAD,EAAkBd,mBAAlB,EAAuCY,KAAvC,CAAhC;AACAjB,IAAAA,gCAAgC,CAC9BmB,eAD8B,EAE9Bb,+BAF8B,EAG9Bc,MAAM,CAAC,CAACF,QAAF,CAHwB,CAAhC;AAKD,GAPD,MAOO;AACLhB,IAAAA,qCAAqC,CAACiB,eAAD,EAAkBd,mBAAlB,CAArC;AACAH,IAAAA,qCAAqC,CAACiB,eAAD,EAAkBb,+BAAlB,CAArC;AACD;;AAED,SAAOU,eAAP;AACD","sourcesContent":["import { AndroidConfig, ConfigPlugin, withAndroidManifest } from '@expo/config-plugins';\nimport { ExpoConfig } from '@expo/config-types';\n\nconst {\n  addMetaDataItemToMainApplication,\n  getMainApplicationOrThrow,\n  removeMetaDataItemFromMainApplication,\n} = AndroidConfig.Manifest;\n\nconst META_APPLICATION_ID = 'com.google.android.gms.ads.APPLICATION_ID';\nconst META_DELAY_APP_MEASUREMENT_INIT = 'com.google.android.gms.ads.DELAY_APP_MEASUREMENT_INIT';\n\nexport const withAndroidAdMob: ConfigPlugin = config => {\n  return withAndroidManifest(config, config => {\n    config.modResults = setAdMobConfig(config, config.modResults);\n    return config;\n  });\n};\n\nexport function getGoogleMobileAdsAppId(config: Pick<ExpoConfig, 'android'>) {\n  return config.android?.config?.googleMobileAdsAppId ?? null;\n}\n\nexport function getGoogleMobileAdsAutoInit(config: Pick<ExpoConfig, 'android'>) {\n  return config.android?.config?.googleMobileAdsAutoInit ?? false;\n}\n\nexport function setAdMobConfig(\n  config: Pick<ExpoConfig, 'android'>,\n  androidManifest: AndroidConfig.Manifest.AndroidManifest\n) {\n  const appId = getGoogleMobileAdsAppId(config);\n  const autoInit = getGoogleMobileAdsAutoInit(config);\n  const mainApplication = getMainApplicationOrThrow(androidManifest);\n\n  if (appId) {\n    addMetaDataItemToMainApplication(mainApplication, META_APPLICATION_ID, appId);\n    addMetaDataItemToMainApplication(\n      mainApplication,\n      META_DELAY_APP_MEASUREMENT_INIT,\n      String(!autoInit)\n    );\n  } else {\n    removeMetaDataItemFromMainApplication(mainApplication, META_APPLICATION_ID);\n    removeMetaDataItemFromMainApplication(mainApplication, META_DELAY_APP_MEASUREMENT_INIT);\n  }\n\n  return androidManifest;\n}\n"],"file":"withAndroidAdMob.js"}