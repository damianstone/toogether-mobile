{"version":3,"sources":["../../../../src/plugins/unversioned/expo-splash-screen/withAndroidSplashDrawables.ts"],"names":["withAndroidSplashDrawables","config","splash","setSplashDrawableAsync","modRequest","projectRoot","resizeMode","filePath","AndroidConfig","Paths","getResourceXMLPathAsync","name","kind","xmlContent","$","item","bitmap","filter","Boolean","XML","writeXMLAsync","path","xml"],"mappings":";;;;;;;;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAIO,MAAMA,0BAAgF,GAAG,CAC9FC,MAD8F,EAE9FC,MAF8F,KAG3F;AACH,SAAO,uCAAiBD,MAAjB,EAAyB,CAC9B,SAD8B,EAE9B,MAAMA,MAAN,IAAgB;AACd,QAAIC,MAAJ,EAAY;AACV,YAAMC,sBAAsB,CAACD,MAAD,EAASD,MAAM,CAACG,UAAP,CAAkBC,WAA3B,CAA5B;AACD;;AACD,WAAOJ,MAAP;AACD,GAP6B,CAAzB,CAAP;AASD,CAbM;;;;AAeA,eAAeE,sBAAf,CACL;AAAEG,EAAAA;AAAF,CADK,EAELD,WAFK,EAGL;AACA,QAAME,QAAQ,GAAI,MAAMC,+BAAcC,KAAd,CAAoBC,uBAApB,CAA4CL,WAA5C,EAAyD;AAC/EM,IAAAA,IAAI,EAAE,cADyE;AAE/EC,IAAAA,IAAI,EAAE;AAFyE,GAAzD,CAAxB,CADA,CAMA;;AACA,QAAMC,UAAU,GAAG;AACjB,kBAAc;AACZC,MAAAA,CAAC,EAAE;AACD,yBAAiB;AADhB,OADS;AAIZC,MAAAA,IAAI,EAAE,CACJ;AACED,QAAAA,CAAC,EAAE;AACD;AACA,8BAAoB;AAFnB;AADL,OADI,EAOJ;AACAR,MAAAA,UAAU,KAAK,QAAf,IAA2B;AACzBU,QAAAA,MAAM,EAAE,CACN;AACEF,UAAAA,CAAC,EAAE;AACD,+BAAmB,QADlB;AAED;AACA,2BAAe;AAHd;AADL,SADM;AADiB,OARvB,EAmBJG,MAnBI,CAmBGC,OAnBH;AAJM;AADG,GAAnB;AA2BA,QAAMC,qBAAIC,aAAJ,CAAkB;AAAEC,IAAAA,IAAI,EAAEd,QAAR;AAAkBe,IAAAA,GAAG,EAAET;AAAvB,GAAlB,CAAN;AACD","sourcesContent":["import { AndroidConfig, ConfigPlugin, withDangerousMod, XML } from '@expo/config-plugins';\n\nimport { SplashScreenConfig } from './getAndroidSplashConfig';\n\nexport const withAndroidSplashDrawables: ConfigPlugin<Pick<SplashScreenConfig, 'resizeMode'>> = (\n  config,\n  splash\n) => {\n  return withDangerousMod(config, [\n    'android',\n    async config => {\n      if (splash) {\n        await setSplashDrawableAsync(splash, config.modRequest.projectRoot);\n      }\n      return config;\n    },\n  ]);\n};\n\nexport async function setSplashDrawableAsync(\n  { resizeMode }: Pick<SplashScreenConfig, 'resizeMode'>,\n  projectRoot: string\n) {\n  const filePath = (await AndroidConfig.Paths.getResourceXMLPathAsync(projectRoot, {\n    name: 'splashscreen',\n    kind: 'drawable',\n  }))!;\n\n  // Nuke and rewrite the splashscreen.xml drawable\n  const xmlContent = {\n    'layer-list': {\n      $: {\n        'xmlns:android': 'http://schemas.android.com/apk/res/android',\n      },\n      item: [\n        {\n          $: {\n            // TODO: Ensure these keys don't get out of sync\n            'android:drawable': '@color/splashscreen_background',\n          },\n        },\n        // Only include the image if resizeMode native is in-use.\n        resizeMode === 'native' && {\n          bitmap: [\n            {\n              $: {\n                'android:gravity': 'center',\n                // TODO: Ensure these keys don't get out of sync\n                'android:src': '@drawable/splashscreen_image',\n              },\n            },\n          ],\n        },\n      ].filter(Boolean),\n    },\n  };\n  await XML.writeXMLAsync({ path: filePath, xml: xmlContent });\n}\n"],"file":"withAndroidSplashDrawables.js"}