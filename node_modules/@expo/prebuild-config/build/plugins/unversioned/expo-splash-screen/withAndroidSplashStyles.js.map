{"version":3,"sources":["../../../../src/plugins/unversioned/expo-splash-screen/withAndroidSplashStyles.ts"],"names":["styleResourceGroup","name","parent","SPLASH_COLOR_NAME","withAndroidSplashStyles","config","backgroundColor","getSplashBackgroundColor","modResults","setSplashColorsForTheme","getSplashDarkBackgroundColor","removeOldSplashStyleGroup","setSplashStylesForTheme","styles","group","resources","style","filter","$","head","matches","AndroidConfig","Styles","assignStylesValue","add","value","colors","Colors","assignColorValue"],"mappings":"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","sourcesContent":["import {\n  AndroidConfig,\n  ConfigPlugin,\n  withAndroidColors,\n  withAndroidColorsNight,\n  withAndroidStyles,\n} from '@expo/config-plugins';\nimport { Colors } from '@expo/config-plugins/build/android';\nimport { ExpoConfig } from '@expo/config-types';\n\nimport { getAndroidDarkSplashConfig, getAndroidSplashConfig } from './getAndroidSplashConfig';\n\nconst styleResourceGroup = {\n  name: 'Theme.App.SplashScreen',\n  parent: 'AppTheme',\n};\n\nconst SPLASH_COLOR_NAME = 'splashscreen_background';\n\nexport const withAndroidSplashStyles: ConfigPlugin = config => {\n  config = withAndroidColors(config, config => {\n    const backgroundColor = getSplashBackgroundColor(config);\n    config.modResults = setSplashColorsForTheme(config.modResults, backgroundColor);\n    return config;\n  });\n  config = withAndroidColorsNight(config, config => {\n    const backgroundColor = getSplashDarkBackgroundColor(config);\n    config.modResults = setSplashColorsForTheme(config.modResults, backgroundColor);\n    return config;\n  });\n  config = withAndroidStyles(config, config => {\n    config.modResults = removeOldSplashStyleGroup(config.modResults);\n    config.modResults = setSplashStylesForTheme(config.modResults);\n    return config;\n  });\n  return config;\n};\n\n// Remove the old style group which didn't extend the base theme properly.\nexport function removeOldSplashStyleGroup(styles: AndroidConfig.Resources.ResourceXML) {\n  const group = {\n    name: 'Theme.App.SplashScreen',\n    parent: 'Theme.AppCompat.Light.NoActionBar',\n  };\n\n  styles.resources.style = styles.resources.style?.filter?.(({ $: head }) => {\n    let matches = head.name === group.name;\n    if (group.parent != null && matches) {\n      matches = head.parent === group.parent;\n    }\n    return !matches;\n  });\n\n  return styles;\n}\n\nexport function getSplashBackgroundColor(config: ExpoConfig): string | null {\n  return getAndroidSplashConfig(config)?.backgroundColor ?? null;\n}\n\nexport function getSplashDarkBackgroundColor(config: ExpoConfig): string | null {\n  return getAndroidDarkSplashConfig(config)?.backgroundColor ?? null;\n}\n\nexport function setSplashStylesForTheme(styles: AndroidConfig.Resources.ResourceXML) {\n  // Add splash screen image\n  return AndroidConfig.Styles.assignStylesValue(styles, {\n    add: true,\n    value: '@drawable/splashscreen',\n    name: 'android:windowBackground',\n    parent: styleResourceGroup,\n  });\n}\n\nexport function setSplashColorsForTheme(\n  colors: AndroidConfig.Resources.ResourceXML,\n  backgroundColor: string | null\n): AndroidConfig.Resources.ResourceXML {\n  return Colors.assignColorValue(colors, { value: backgroundColor, name: SPLASH_COLOR_NAME });\n}\n"],"file":"withAndroidSplashStyles.js"}