{"version":3,"file":"withAndroidSplashStyles.js","names":["styleResourceGroup","name","parent","SPLASH_COLOR_NAME","withAndroidSplashStyles","config","withAndroidColors","backgroundColor","getSplashBackgroundColor","modResults","setSplashColorsForTheme","withAndroidColorsNight","getSplashDarkBackgroundColor","withAndroidStyles","removeOldSplashStyleGroup","setSplashStylesForTheme","styles","group","resources","style","filter","$","head","matches","getAndroidSplashConfig","getAndroidDarkSplashConfig","AndroidConfig","Styles","assignStylesValue","add","value","colors","Colors","assignColorValue"],"sources":["../../../../src/plugins/unversioned/expo-splash-screen/withAndroidSplashStyles.ts"],"sourcesContent":["import {\n  AndroidConfig,\n  ConfigPlugin,\n  withAndroidColors,\n  withAndroidColorsNight,\n  withAndroidStyles,\n} from '@expo/config-plugins';\nimport { Colors } from '@expo/config-plugins/build/android';\nimport { ExpoConfig } from '@expo/config-types';\n\nimport { getAndroidDarkSplashConfig, getAndroidSplashConfig } from './getAndroidSplashConfig';\n\nconst styleResourceGroup = {\n  name: 'Theme.App.SplashScreen',\n  parent: 'AppTheme',\n};\n\nconst SPLASH_COLOR_NAME = 'splashscreen_background';\n\nexport const withAndroidSplashStyles: ConfigPlugin = (config) => {\n  config = withAndroidColors(config, (config) => {\n    const backgroundColor = getSplashBackgroundColor(config);\n    config.modResults = setSplashColorsForTheme(config.modResults, backgroundColor);\n    return config;\n  });\n  config = withAndroidColorsNight(config, (config) => {\n    const backgroundColor = getSplashDarkBackgroundColor(config);\n    config.modResults = setSplashColorsForTheme(config.modResults, backgroundColor);\n    return config;\n  });\n  config = withAndroidStyles(config, (config) => {\n    config.modResults = removeOldSplashStyleGroup(config.modResults);\n    config.modResults = setSplashStylesForTheme(config.modResults);\n    return config;\n  });\n  return config;\n};\n\n// Remove the old style group which didn't extend the base theme properly.\nexport function removeOldSplashStyleGroup(styles: AndroidConfig.Resources.ResourceXML) {\n  const group = {\n    name: 'Theme.App.SplashScreen',\n    parent: 'Theme.AppCompat.Light.NoActionBar',\n  };\n\n  styles.resources.style = styles.resources.style?.filter?.(({ $: head }) => {\n    let matches = head.name === group.name;\n    if (group.parent != null && matches) {\n      matches = head.parent === group.parent;\n    }\n    return !matches;\n  });\n\n  return styles;\n}\n\nexport function getSplashBackgroundColor(config: ExpoConfig): string | null {\n  return getAndroidSplashConfig(config)?.backgroundColor ?? null;\n}\n\nexport function getSplashDarkBackgroundColor(config: ExpoConfig): string | null {\n  return getAndroidDarkSplashConfig(config)?.backgroundColor ?? null;\n}\n\nexport function setSplashStylesForTheme(styles: AndroidConfig.Resources.ResourceXML) {\n  // Add splash screen image\n  return AndroidConfig.Styles.assignStylesValue(styles, {\n    add: true,\n    value: '@drawable/splashscreen',\n    name: 'android:windowBackground',\n    parent: styleResourceGroup,\n  });\n}\n\nexport function setSplashColorsForTheme(\n  colors: AndroidConfig.Resources.ResourceXML,\n  backgroundColor: string | null\n): AndroidConfig.Resources.ResourceXML {\n  return Colors.assignColorValue(colors, { value: backgroundColor, name: SPLASH_COLOR_NAME });\n}\n"],"mappings":"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"}