{"version":3,"file":"getUserState.js","names":["getExpoHomeDirectory","home","homedir","process","env","__UNSAFE_EXPO_HOME_DIRECTORY","boolish","path","join","getUserStatePath","getUserState","JsonFile","jsonParseErrorDefault","cantReadFileDefault"],"sources":["../src/getUserState.ts"],"sourcesContent":["import JsonFile from '@expo/json-file';\nimport { boolish } from 'getenv';\nimport { homedir } from 'os';\nimport * as path from 'path';\n\nexport type UserSettingsData = {\n  developmentCodeSigningId?: string;\n  appleId?: string;\n  accessToken?: string;\n  auth?: UserData | null;\n  ignoreBundledBinaries?: string[];\n  openDevToolsAtStartup?: boolean;\n  PATH?: string;\n  sendTo?: string;\n  uuid?: string;\n};\n\nexport type UserData = {\n  appleId?: string;\n  userId?: string;\n  username?: string;\n  currentConnection?: ConnectionType;\n  sessionSecret?: string;\n};\n\nexport type ConnectionType =\n  | 'Access-Token-Authentication'\n  | 'Username-Password-Authentication'\n  | 'facebook'\n  | 'google-oauth2'\n  | 'github';\n\n// The ~/.expo directory is used to store authentication sessions,\n// which are shared between EAS CLI and Expo CLI.\nexport function getExpoHomeDirectory() {\n  const home = homedir();\n\n  if (process.env.__UNSAFE_EXPO_HOME_DIRECTORY) {\n    return process.env.__UNSAFE_EXPO_HOME_DIRECTORY;\n  } else if (boolish('EXPO_STAGING', false)) {\n    return path.join(home, '.expo-staging');\n  } else if (boolish('EXPO_LOCAL', false)) {\n    return path.join(home, '.expo-local');\n  }\n  return path.join(home, '.expo');\n}\n\nexport function getUserStatePath() {\n  return path.join(getExpoHomeDirectory(), 'state.json');\n}\n\nexport function getUserState() {\n  return new JsonFile<UserSettingsData>(getUserStatePath(), {\n    jsonParseErrorDefault: {},\n    // This will ensure that an error isn't thrown if the file doesn't exist.\n    cantReadFileDefault: {},\n  });\n}\n"],"mappings":";;;;;;;;;AAAA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;AACA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;AACA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;AACA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;;;;;;;AA6BA;AACA;AACO,SAASA,oBAAT,GAAgC;EACrC,MAAMC,IAAI,GAAG,IAAAC,aAAA,GAAb;;EAEA,IAAIC,OAAO,CAACC,GAAR,CAAYC,4BAAhB,EAA8C;IAC5C,OAAOF,OAAO,CAACC,GAAR,CAAYC,4BAAnB;EACD,CAFD,MAEO,IAAI,IAAAC,iBAAA,EAAQ,cAAR,EAAwB,KAAxB,CAAJ,EAAoC;IACzC,OAAOC,IAAI,GAACC,IAAL,CAAUP,IAAV,EAAgB,eAAhB,CAAP;EACD,CAFM,MAEA,IAAI,IAAAK,iBAAA,EAAQ,YAAR,EAAsB,KAAtB,CAAJ,EAAkC;IACvC,OAAOC,IAAI,GAACC,IAAL,CAAUP,IAAV,EAAgB,aAAhB,CAAP;EACD;;EACD,OAAOM,IAAI,GAACC,IAAL,CAAUP,IAAV,EAAgB,OAAhB,CAAP;AACD;;AAEM,SAASQ,gBAAT,GAA4B;EACjC,OAAOF,IAAI,GAACC,IAAL,CAAUR,oBAAoB,EAA9B,EAAkC,YAAlC,CAAP;AACD;;AAEM,SAASU,YAAT,GAAwB;EAC7B,OAAO,KAAIC,mBAAJ,EAA+BF,gBAAgB,EAA/C,EAAmD;IACxDG,qBAAqB,EAAE,EADiC;IAExD;IACAC,mBAAmB,EAAE;EAHmC,CAAnD,CAAP;AAKD"}