{"version":3,"sources":["PickerIOS.ios.js"],"names":["PickerIOSItem","props","PickerIOS","React","Component","selectedIndex","items","event","onChange","onValueChange","nativeEvent","newValue","newIndex","_picker","state","setNativeProps","getDerivedStateFromProps","Children","toArray","children","forEach","child","index","value","selectedValue","push","label","textColor","color","testID","render","numberOfLines","Math","round","style","picker","styles","pickerIOS","itemStyle","_onChange","StyleSheet","create","height"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *\n * This is a controlled component version of RNCPickerIOS\n *\n * @format\n * @flow\n */\n\n'use strict';\n\nimport * as React from 'react';\nimport {processColor, StyleSheet, View} from 'react-native';\nimport RNCPickerNativeComponent from './RNCPickerNativeComponent';\n\nimport type {SyntheticEvent} from 'react-native/Libraries/Types/CoreEventTypes';\nimport type {ColorValue} from 'react-native/Libraries/StyleSheet/StyleSheet';\nimport type {ViewProps} from 'react-native/Libraries/Components/View/ViewPropTypes';\nimport type {TextStyleProp} from 'react-native/Libraries/StyleSheet/StyleSheet';\nimport type {Element, ElementRef, ChildrenArray} from 'react';\nimport type {HostComponent} from 'react-native/Libraries/Renderer/shims/ReactNativeTypes';\n\ntype PickerIOSChangeEvent = SyntheticEvent<\n  $ReadOnly<{|\n    newValue: number | string,\n    newIndex: number,\n  |}>,\n>;\n\ntype RNCPickerIOSItemType = $ReadOnly<{|\n  label: ?Label,\n  value: ?(number | string),\n  textColor: ?number,\n  testID: ?string,\n|}>;\n\ntype RNCPickerIOSType = HostComponent<\n  $ReadOnly<{|\n    items: $ReadOnlyArray<RNCPickerIOSItemType>,\n    onChange: (event: PickerIOSChangeEvent) => void,\n    selectedIndex: number,\n    style?: ?TextStyleProp,\n    testID?: ?string,\n    numberOfLines?: ?number,\n  |}>,\n>;\n\ntype Label = Stringish | number;\n\ntype Props = $ReadOnly<{|\n  ...ViewProps,\n  children: ChildrenArray<Element<typeof PickerIOSItem>>,\n  itemStyle?: ?TextStyleProp,\n  onChange?: ?(event: PickerIOSChangeEvent) => mixed,\n  onValueChange?: ?(itemValue: string | number, itemIndex: number) => mixed,\n  selectedValue: ?(number | string),\n  numberOfLines: ?number,\n|}>;\n\ntype State = {|\n  selectedIndex: number,\n  items: $ReadOnlyArray<RNCPickerIOSItemType>,\n|};\n\ntype ItemProps = $ReadOnly<{|\n  label: ?Label,\n  value?: ?(number | string),\n  color?: ?ColorValue,\n  testID?: ?string,\n|}>;\n\nconst PickerIOSItem = (props: ItemProps): null => {\n  return null;\n};\n\nclass PickerIOS extends React.Component<Props, State> {\n  _picker: ?ElementRef<RNCPickerIOSType> = null;\n\n  state: State = {\n    selectedIndex: 0,\n    items: [],\n  };\n\n  static Item: typeof PickerIOSItem = PickerIOSItem;\n\n  static getDerivedStateFromProps(props: Props): State {\n    let selectedIndex = 0;\n    const items = [];\n    React.Children.toArray(props.children).forEach(function (child, index) {\n      if (child.props.value === props.selectedValue) {\n        selectedIndex = index;\n      }\n      items.push({\n        value: child.props.value,\n        label: child.props.label,\n        textColor: processColor(child.props.color),\n        testID: child.props.testID,\n      });\n    });\n    return {selectedIndex, items};\n  }\n\n  render(): React.Node {\n    let numberOfLines = Math.round(this.props.numberOfLines ?? 1);\n    if (numberOfLines < 1) {\n      numberOfLines = 1;\n    }\n    return (\n      <View style={this.props.style}>\n        <RNCPickerNativeComponent\n          ref={(picker) => {\n            this._picker = picker;\n          }}\n          testID={this.props.testID}\n          style={[styles.pickerIOS, this.props.itemStyle]}\n          items={this.state.items}\n          selectedIndex={this.state.selectedIndex}\n          onChange={this._onChange}\n          numberOfLines={numberOfLines}\n        />\n      </View>\n    );\n  }\n\n  _onChange = (event) => {\n    if (this.props.onChange) {\n      this.props.onChange(event);\n    }\n    if (this.props.onValueChange) {\n      this.props.onValueChange(\n        event.nativeEvent.newValue,\n        event.nativeEvent.newIndex,\n      );\n    }\n\n    // The picker is a controlled component. This means we expect the\n    // on*Change handlers to be in charge of updating our\n    // `selectedValue` prop. That way they can also\n    // disallow/undo/mutate the selection of certain values. In other\n    // words, the embedder of this component should be the source of\n    // truth, not the native component.\n    if (\n      this._picker &&\n      this.state.selectedIndex !== event.nativeEvent.newIndex\n    ) {\n      this._picker.setNativeProps({\n        selectedIndex: this.state.selectedIndex,\n      });\n    }\n  };\n}\n\nconst styles = StyleSheet.create({\n  pickerIOS: {\n    // The picker will conform to whatever width is given, but we do\n    // have to set the component's height explicitly on the\n    // surrounding view to ensure it gets rendered.\n    height: 216,\n  },\n});\n\nexport default PickerIOS;\n"]}